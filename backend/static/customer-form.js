/**
 * CavaSoft SAC http://cavasoftsac.com
 * cristHian Gz. (gcca) - http://gcca.tk
 */
'use strict';(function(d){String.prototype.trim===d&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.reduce===d&&(Array.prototype.reduce=function(l){if(void 0===this||null===this)throw new TypeError;var s=Object(this),m=s.length>>>0,q=0,p;if("function"!=typeof l)throw new TypeError;if(0==m&&1==arguments.length)throw new TypeError;if(2<=arguments.length)p=arguments[1];else{do{if(q in s){p=s[q++];break}if(++q>=m)throw new TypeError;}while(1)}for(;q<m;)q in s&&(p=l.call(d,p,s[q],q,s)),q++;return p})})();var Zepto=function(){function d(a){return null==a?String(a):J[U.call(a)]||"object"}function l(a){return"function"==d(a)}function s(a){return null!=a&&a==a.window}function m(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function q(a){return"object"==d(a)}function p(a){return q(a)&&!s(a)&&a.__proto__==Object.prototype}function z(a){return a instanceof Array}function y(a){return"number"==typeof a.length}function G(a){return v.call(a,function(a){return null!=a})}function w(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function H(a){return a in K?K[a]:K[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function A(a){return"children"in a?F.call(a.children):b.map(a.childNodes,function(a){if(1==a.nodeType)return a})}function C(a,e,g){for(f in e)g&&(p(e[f])||z(e[f]))?(p(e[f])&&!p(a[f])&&(a[f]={}),z(e[f])&&!z(a[f])&&(a[f]=[]),C(a[f],e[f],g)):e[f]!==h&&(a[f]=e[f])}function D(a,e){return e===h?b(a):b(a).filter(e)}function r(a,e,g,b){return l(e)?e.call(a,g,b):e}function u(a,e){var g=a.className,b=g&&g.baseVal!==h;if(e===h)return b?g.baseVal:g;b?g.baseVal=e:a.className=e}function n(a){var e;try{return a?"true"==a||("false"==a?!1:"null"==a?null:!isNaN(e=Number(a))?e:/^[\[\{]/.test(a)?b.parseJSON(a):a):a}catch(g){return a}}function c(a,e){e(a);for(var g in a.childNodes)c(a.childNodes[g],e)}var h,f,b,B,E=[],F=E.slice,v=E.filter,k=window.document,L={},K={},M=k.defaultView.getComputedStyle,t={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},P=/^\s*<(\w+|!)[^>]*>/,V=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Q=/^(?:body|html)$/i,W="val css html text data width height offset".split(" "),N=k.createElement("table"),R=k.createElement("tr"),S={tr:k.createElement("tbody"),tbody:N,thead:N,tfoot:N,td:R,th:R,"*":k.createElement("div")},X=/complete|loaded|interactive/,Y=/^\.([\w-]+)$/,Z=/^#([\w-]*)$/,$=/^[\w-]+$/,J={},U=J.toString,x={},O,I,T=k.createElement("div");x.matches=function(a,e){if(!a||1!==a.nodeType)return!1;var g=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(g)return g.call(a,e);var b;b=a.parentNode;(g=!b)&&(b=T).appendChild(a);b=~x.qsa(b,e).indexOf(a);g&&T.removeChild(a);return b};O=function(a){return a.replace(/-+(.)?/g,function(a,g){return g?g.toUpperCase():""})};I=function(a){return v.call(a,function(e,g){return a.indexOf(e)==g})};x.fragment=function(a,e,g){a.replace&&(a=a.replace(V,"<$1></$2>"));e===h&&(e=P.test(a)&&RegExp.$1);e in S||(e="*");var k,c=S[e];c.innerHTML=""+a;a=b.each(F.call(c.childNodes),function(){c.removeChild(this)});p(g)&&(k=b(a),b.each(g,function(a,e){if(-1<W.indexOf(a))k[a](e);else k.attr(a,e)}));return a};x.Z=function(a,e){a=a||[];a.__proto__=b.fn;a.selector=e||"";return a};x.isZ=function(a){return a instanceof x.Z};x.init=function(a,e){if(a){if(l(a))return b(k).ready(a);if(x.isZ(a))return a;var g;if(z(a))g=G(a);else if(q(a))g=[p(a)?b.extend({},a):a],a=null;else if(P.test(a))g=x.fragment(a.trim(),RegExp.$1,e),a=null;else{if(e!==h)return b(e).find(a);g=x.qsa(k,a)}return x.Z(g,a)}return x.Z()};b=function(a,e){return x.init(a,e)};b.extend=function(a){var e,g=F.call(arguments,1);"boolean"==typeof a&&(e=a,a=g.shift());g.forEach(function(g){C(a,g,e)});return a};x.qsa=function(a,e){var g;return m(a)&&Z.test(e)?(g=a.getElementById(RegExp.$1))?[g]:[]:1!==a.nodeType&&9!==a.nodeType?[]:F.call(Y.test(e)?a.getElementsByClassName(RegExp.$1):$.test(e)?a.getElementsByTagName(e):a.querySelectorAll(e))};b.contains=function(a,e){return a!==e&&a.contains(e)};b.type=d;b.isFunction=l;b.isWindow=s;b.isArray=z;b.isPlainObject=p;b.isEmptyObject=function(a){for(var e in a)return!1;return!0};b.inArray=function(a,e,g){return E.indexOf.call(e,a,g)};b.camelCase=O;b.trim=function(a){return a.trim()};b.uuid=0;b.support={};b.expr={};b.map=function(a,e){var g,k=[],c;if(y(a))for(c=0;c<a.length;c++)g=e(a[c],c),null!=g&&k.push(g);else for(c in a)g=e(a[c],c),null!=g&&k.push(g);return 0<k.length?b.fn.concat.apply([],k):k};b.each=function(a,e){var g;if(y(a))for(g=0;g<a.length&&!1!==e.call(a[g],g,a[g]);g++);else for(g in a)if(!1===e.call(a[g],g,a[g]))break;return a};b.grep=function(a,e){return v.call(a,e)};window.JSON&&(b.parseJSON=JSON.parse);b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,e){J["[object "+e+"]"]=e.toLowerCase()});b.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,sort:E.sort,indexOf:E.indexOf,concat:E.concat,map:function(a){return b(b.map(this,function(e,g){return a.call(e,g,e)}))},slice:function(){return b(F.apply(this,arguments))},ready:function(a){X.test(k.readyState)?a(b):k.addEventListener("DOMContentLoaded",function(){a(b)},!1);return this},get:function(a){return a===h?F.call(this):this[0<=a?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){E.every.call(this,function(e,g){return!1!==a.call(e,g,e)});return this},filter:function(a){return l(a)?this.not(this.not(a)):b(v.call(this,function(e){return x.matches(e,a)}))},add:function(a,e){return b(I(this.concat(b(a,e))))},is:function(a){return 0<this.length&&x.matches(this[0],a)},not:function(a){var e=[];if(l(a)&&a.call!==h)this.each(function(g){a.call(this,g)||e.push(this)});else{var g="string"==typeof a?this.filter(a):y(a)&&l(a.item)?F.call(a):b(a);this.forEach(function(a){0>g.indexOf(a)&&e.push(a)})}return b(e)},has:function(a){return this.filter(function(){return q(a)?b.contains(this,a):b(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!q(a)?a:b(a)},last:function(){var a=this[this.length-1];return a&&!q(a)?a:b(a)},find:function(a){var e=this;return"object"==typeof a?b(a).filter(function(){var a=this;return E.some.call(e,function(e){return b.contains(e,a)})}):1==this.length?b(x.qsa(this[0],a)):this.map(function(){return x.qsa(this,a)})},closest:function(a,e){var g=this[0],k=!1;for("object"==typeof a&&(k=b(a));g&&!(k?0<=k.indexOf(g):x.matches(g,a));)g=g!==e&&!m(g)&&g.parentNode;return b(g)},parents:function(a){for(var e=[],g=this;0<g.length;)g=b.map(g,function(a){if((a=a.parentNode)&&!m(a)&&0>e.indexOf(a))return e.push(a),a});return D(e,a)},parent:function(a){return D(I(this.pluck("parentNode")),a)},children:function(a){return D(this.map(function(){return A(this)}),a)},contents:function(){return this.map(function(){return F.call(this.childNodes)})},siblings:function(a){return D(this.map(function(a,g){return v.call(A(g.parentNode),function(a){return a!==g})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return b.map(this,function(e){return e[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==M(this,"").getPropertyValue("display")){var a=this.style,e=this.nodeName,g,b;L[e]||(g=k.createElement(e),k.body.appendChild(g),b=M(g,"").getPropertyValue("display"),g.parentNode.removeChild(g),"none"==b&&(b="block"),L[e]=b);a.display=L[e]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var e=l(a);if(this[0]&&!e)var g=b(a).get(0),k=g.parentNode||1<this.length;return this.each(function(c){b(this).wrapAll(e?a.call(this,c):k?g.cloneNode(!0):g)})},wrapAll:function(a){if(this[0]){b(this[0]).before(a=b(a));for(var e;(e=a.children()).length;)a=e.first();b(a).append(this)}return this},wrapInner:function(a){var e=l(a);return this.each(function(g){var k=b(this),c=k.contents();g=e?a.call(this,g):a;c.length?c.wrapAll(g):k.append(g)})},unwrap:function(){this.parent().each(function(){b(this).replaceWith(b(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var e=b(this);(a===h?"none"==e.css("display"):a)?e.show():e.hide()})},prev:function(a){return b(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return b(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return a===h?0<this.length?this[0].innerHTML:null:this.each(function(e){var g=this.innerHTML;b(this).empty().append(r(this,a,e,g))})},text:function(a){return a===h?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,e){var g;return"string"==typeof a&&e===h?0==this.length||1!==this[0].nodeType?h:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(g=this[0].getAttribute(a))&&a in this[0]?this[0][a]:g:this.each(function(g){if(1===this.nodeType)if(q(a))for(f in a){g=f;var b=a[f];null==b?this.removeAttribute(g):this.setAttribute(g,b)}else g=r(this,e,g,this.getAttribute(a)),null==g?this.removeAttribute(a):this.setAttribute(a,g)})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,e){return e===h?this[0]&&this[0][a]:this.each(function(g){this[a]=r(this,e,g,this[a])})},data:function(a,e){var g=this.attr("data-"+w(a),e);return null!==g?n(g):h},val:function(a){return a===h?this[0]&&(this[0].multiple?b(this[0]).find("option").filter(function(a){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=r(this,a,e,this.value)})},offset:function(a){if(a)return this.each(function(e){var k=b(this);e=r(this,a,e,k.offset());var c=k.offsetParent().offset();e={top:e.top-c.top,left:e.left-c.left};"static"==k.css("position")&&(e.position="relative");k.css(e)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(a,e){if(2>arguments.length&&"string"==typeof a)return this[0]&&(this[0].style[O(a)]||M(this[0],"").getPropertyValue(a));var b="";if("string"==d(a))!e&&0!==e?this.each(function(){this.style.removeProperty(w(a))}):b=w(a)+":"+("number"==typeof e&&!t[w(a)]?e+"px":e);else for(f in a)!a[f]&&0!==a[f]?this.each(function(){this.style.removeProperty(w(f))}):b+=w(f)+":"+("number"==typeof a[f]&&!t[w(f)]?a[f]+"px":a[f])+";";return this.each(function(){this.style.cssText+=";"+b})},index:function(a){return a?this.indexOf(b(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return E.some.call(this,function(a){return this.test(u(a))},H(a))},addClass:function(a){return this.each(function(e){B=[];var k=u(this);r(this,a,e,k).split(/\s+/g).forEach(function(a){b(this).hasClass(a)||B.push(a)},this);B.length&&u(this,k+(k?" ":"")+B.join(" "))})},removeClass:function(a){return this.each(function(e){if(a===h)return u(this,"");B=u(this);r(this,a,e,B).split(/\s+/g).forEach(function(a){B=B.replace(H(a)," ")});u(this,B.trim())})},toggleClass:function(a,e){return this.each(function(k){var c=b(this);r(this,a,k,u(this)).split(/\s+/g).forEach(function(a){(e===h?!c.hasClass(a):e)?c.addClass(a):c.removeClass(a)})})},scrollTop:function(){if(this.length)return"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY},position:function(){if(this.length){var a=this[0],e=this.offsetParent(),k=this.offset(),c=Q.test(e[0].nodeName)?{top:0,left:0}:e.offset();k.top-=parseFloat(b(a).css("margin-top"))||0;k.left-=parseFloat(b(a).css("margin-left"))||0;c.top+=parseFloat(b(e[0]).css("border-top-width"))||0;c.left+=parseFloat(b(e[0]).css("border-left-width"))||0;return{top:k.top-c.top,left:k.left-c.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||k.body;a&&!Q.test(a.nodeName)&&"static"==b(a).css("position");)a=a.offsetParent;return a})}};b.fn.detach=b.fn.remove;["width","height"].forEach(function(a){b.fn[a]=function(e){var k,c=this[0],v=a.replace(/./,function(a){return a[0].toUpperCase()});return e===h?s(c)?c["inner"+v]:m(c)?c.documentElement["offset"+v]:(k=this.offset())&&k[a]:this.each(function(k){c=b(this);c.css(a,r(this,e,k,c[a]()))})}});["after","prepend","before","append"].forEach(function(a,e){var k=e%2;b.fn[a]=function(){var a,v=b.map(arguments,function(e){a=d(e);return"object"==a||"array"==a||null==e?e:x.fragment(e)}),h,f=1<this.length;return 1>v.length?this:this.each(function(a,d){h=k?d:d.parentNode;d=0==e?d.nextSibling:1==e?d.firstChild:2==e?d:null;v.forEach(function(a){if(f)a=a.cloneNode(!0);else if(!h)return b(a).remove();c(h.insertBefore(a,d),function(a){null!=a.nodeName&&("SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&!a.src)&&window.eval.call(window,a.innerHTML)})})})};b.fn[k?a+"To":"insert"+(e?"Before":"After")]=function(e){b(e)[a](this);return this}});x.Z.prototype=b.fn;x.uniq=I;x.deserializeValue=n;b.zepto=x;return b}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);(function(d){function l(d){var m=this.os={},l=this.browser={},p=d.match(/WebKit\/([\d.]+)/),z=d.match(/(Android)\s+([\d.]+)/),y=d.match(/(iPad).*OS\s([\d_]+)/),G=!y&&d.match(/(iPhone\sOS)\s([\d_]+)/),w=d.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),H=w&&d.match(/TouchPad/),A=d.match(/Kindle\/([\d.]+)/),C=d.match(/Silk\/([\d._]+)/),D=d.match(/(BlackBerry).*Version\/([\d.]+)/),r=d.match(/(BB10).*Version\/([\d.]+)/),u=d.match(/(RIM\sTablet\sOS)\s([\d.]+)/),n=d.match(/PlayBook/),c=d.match(/Chrome\/([\d.]+)/)||d.match(/CriOS\/([\d.]+)/),h=d.match(/Firefox\/([\d.]+)/);if(l.webkit=!!p)l.version=p[1];z&&(m.android=!0,m.version=z[2]);G&&(m.ios=m.iphone=!0,m.version=G[2].replace(/_/g,"."));y&&(m.ios=m.ipad=!0,m.version=y[2].replace(/_/g,"."));w&&(m.webos=!0,m.version=w[2]);H&&(m.touchpad=!0);D&&(m.blackberry=!0,m.version=D[2]);r&&(m.bb10=!0,m.version=r[2]);u&&(m.rimtabletos=!0,m.version=u[2]);n&&(l.playbook=!0);A&&(m.kindle=!0,m.version=A[1]);C&&(l.silk=!0,l.version=C[1]);!C&&(m.android&&d.match(/Kindle Fire/))&&(l.silk=!0);c&&(l.chrome=!0,l.version=c[1]);h&&(l.firefox=!0,l.version=h[1]);m.tablet=!(!y&&!n&&!(z&&!d.match(/Mobile/)||h&&d.match(/Tablet/)));m.phone=!(m.tablet||!z&&!G&&!w&&!D&&!r&&!(c&&d.match(/Android/)||c&&d.match(/CriOS\/([\d.]+)/)||h&&d.match(/Mobile/)))}l.call(d,navigator.userAgent);d.__detect=l})(Zepto);(function(d){function l(c){return c._zid||(c._zid=H++)}function s(c,d,f,b){d=m(d);if(d.ns)var B=RegExp("(?:^| )"+d.ns.replace(" "," .* ?")+"(?: |$)");return(w[l(c)]||[]).filter(function(c){return c&&(!d.e||c.e==d.e)&&(!d.ns||B.test(c.ns))&&(!f||l(c.fn)===l(f))&&(!b||c.sel==b)})}function m(c){c=(""+c).split(".");return{e:c[0],ns:c.slice(1).sort().join(" ")}}function q(c,h,f){"string"!=d.type(c)?d.each(c,f):c.split(/\s/).forEach(function(c){f(c,h)})}function p(c,h,f,b,B,n){var u=l(c),v=w[u]||(w[u]=[]);q(h,f,function(k,h){var f=m(k);f.fn=h;f.sel=b;f.e in C&&(h=function(k){var c=k.relatedTarget;if(!c||c!==this&&!d.contains(this,c))return f.fn.apply(this,arguments)});f.del=B&&B(h,k);var l=f.del||h;f.proxy=function(k){var b=l.apply(c,[k].concat(k.data));!1===b&&(k.preventDefault(),k.stopPropagation());return b};f.i=v.length;v.push(f);c.addEventListener(C[f.e]||f.e,f.proxy,f.del&&("focus"==f.e||"blur"==f.e)||!!n)})}function z(c,d,f,b,m){var n=l(c);q(d||"",f,function(d,v){s(c,d,v,b).forEach(function(k){delete w[n][k.i];c.removeEventListener(C[k.e]||k.e,k.proxy,k.del&&("focus"==k.e||"blur"==k.e)||!!m)})})}function y(c){var h,f={originalEvent:c};for(h in c)!u.test(h)&&void 0!==c[h]&&(f[h]=c[h]);d.each(n,function(b,d){f[b]=function(){this[d]=D;return c[b].apply(c,arguments)};f[d]=r});return f}function G(c){if(!("defaultPrevented"in c)){c.defaultPrevented=!1;var d=c.preventDefault;c.preventDefault=function(){this.defaultPrevented=!0;d.call(this)}}}var w={},H=1,A={},C={mouseenter:"mouseover",mouseleave:"mouseout"};A.click=A.mousedown=A.mouseup=A.mousemove="MouseEvents";d.event={add:p,remove:z};d.proxy=function(c,h){if(d.isFunction(c)){var f=function(){return c.apply(h,arguments)};f._zid=l(c);return f}if("string"==typeof h)return d.proxy(c[h],c);throw new TypeError("expected function");};d.fn.bind=function(c,d){return this.each(function(){p(this,c,d)})};d.fn.unbind=function(c,d){return this.each(function(){z(this,c,d)})};d.fn.one=function(c,d){return this.each(function(f,b){p(this,c,d,null,function(c,d){return function(){var f=c.apply(b,arguments);z(b,d,c);return f}})})};var D=function(){return!0},r=function(){return!1},u=/^([A-Z]|layer[XY]$)/,n={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};d.fn.delegate=function(c,h,f){return this.each(function(b,l){p(l,h,f,c,function(b){return function(f){var v,k=d(f.target).closest(c,l).get(0);if(k)return v=d.extend(y(f),{currentTarget:k,liveFired:l}),b.apply(k,[v].concat([].slice.call(arguments,1)))}})})};d.fn.undelegate=function(c,d,f){return this.each(function(){z(this,d,f,c)})};d.fn.live=function(c,h){d(document.body).delegate(this.selector,c,h);return this};d.fn.die=function(c,h){d(document.body).undelegate(this.selector,c,h);return this};d.fn.on=function(c,h,f){return!h||d.isFunction(h)?this.bind(c,h||f):this.delegate(h,c,f)};d.fn.off=function(c,h,f){return!h||d.isFunction(h)?this.unbind(c,h||f):this.undelegate(h,c,f)};d.fn.trigger=function(c,h){if("string"==typeof c||d.isPlainObject(c))c=d.Event(c);G(c);c.data=h;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(c)})};d.fn.triggerHandler=function(c,h){var f,b;this.each(function(l,m){f=y("string"==typeof c?d.Event(c):c);f.data=h;f.target=m;d.each(s(m,c.type||c),function(c,d){b=d.proxy(f);if(f.isImmediatePropagationStopped())return!1})});return b};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(c){d.fn[c]=function(d){return d?this.bind(c,d):this.trigger(c)}});["focus","blur"].forEach(function(c){d.fn[c]=function(d){d?this.bind(c,d):this.each(function(){try{this[c]()}catch(d){}});return this}});d.Event=function(d,h){"string"!=typeof d&&(h=d,d=h.type);var f=document.createEvent(A[d]||"Events"),b=!0;if(h)for(var l in h)"bubbles"==l?b=!!h[l]:f[l]=h[l];f.initEvent(d,b,!0,null,null,null,null,null,null,null,null,null,null,null,null);f.isDefaultPrevented=function(){return this.defaultPrevented};return f}})(Zepto);(function(d){function l(c,k,b,f){if(c.global)return c=k||r,b=d.Event(b),d(c).trigger(b,f),!b.defaultPrevented}function s(c){c.global&&0===d.active++&&l(c,null,"ajaxStart")}function m(d,k){var c=k.context;if(!1===k.beforeSend.call(c,d,k)||!1===l(k,c,"ajaxBeforeSend",[d,k]))return!1;l(k,c,"ajaxSend",[d,k])}function q(d,k,c){var b=c.context;c.success.call(b,d,"success",k);l(c,b,"ajaxSuccess",[k,c,d]);z("success",k,c)}function p(d,c,b,f){var h=f.context;f.error.call(h,b,c,d);l(f,h,"ajaxError",[b,f,d]);z(c,b,f)}function z(c,k,b){var f=b.context;b.complete.call(f,k,c);l(b,f,"ajaxComplete",[k,b]);b.global&&!--d.active&&l(b,null,"ajaxStop")}function y(){}function G(d){d&&(d=d.split(";",2)[0]);return d&&(d==B?"html":d==b?"json":h.test(d)?"script":f.test(d)&&"xml")||"text"}function w(d,c){return(d+"&"+c).replace(/[&?]{1,2}/,"?")}function H(c){c.processData&&(c.data&&"string"!=d.type(c.data))&&(c.data=d.param(c.data,c.traditional));if(c.data&&(!c.type||"GET"==c.type.toUpperCase()))c.url=w(c.url,c.data)}function A(c,b,f,h){var l=!d.isFunction(b);return{url:c,data:l?b:void 0,success:!l?b:d.isFunction(f)?f:void 0,dataType:l?h||f:f}}function C(c,b,f,h){var l,m=d.isArray(b);d.each(b,function(b,k){l=d.type(k);h&&(b=f?h:h+"["+(m?"":b)+"]");!h&&m?c.add(k.name,k.value):"array"==l||!f&&"object"==l?C(c,k,f,b):c.add(b,k)})}var D=0,r=window.document,u,n,c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,h=/^(?:text|application)\/javascript/i,f=/^(?:text|application)\/xml/i,b="application/json",B="text/html",E=/^\s*$/;d.active=0;d.ajaxJSONP=function(c){if(!("type"in c))return d.ajax(c);var b="jsonp"+ ++D,f=r.createElement("script"),h=function(){clearTimeout(u);d(f).remove();delete window[b]},l=function(d){h();if(!d||"timeout"==d)window[b]=y;p(null,d||"abort",n,c)},n={abort:l},u;if(!1===m(n,c))return l("abort"),!1;window[b]=function(d){h();q(d,n,c)};f.onerror=function(){l("error")};f.src=c.url.replace(/=\?/,"="+b);d("head").append(f);0<c.timeout&&(u=setTimeout(function(){l("timeout")},c.timeout));return n};d.ajaxSettings={type:"GET",beforeSend:y,success:y,error:y,complete:y,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:b,xml:"application/xml, text/xml",html:B,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};d.ajax=function(c){var b=d.extend({},c||{});for(u in d.ajaxSettings)void 0===b[u]&&(b[u]=d.ajaxSettings[u]);s(b);b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!=window.location.host);b.url||(b.url=window.location.toString());H(b);!1===b.cache&&(b.url=w(b.url,"_="+Date.now()));var f=b.dataType;c=/=\?/.test(b.url);if("jsonp"==f||c)return c||(b.url=w(b.url,"callback=?")),d.ajaxJSONP(b);c=b.accepts[f];var h={},l=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,t=b.xhr(),r;b.crossDomain||(h["X-Requested-With"]="XMLHttpRequest");c&&(h.Accept=c,-1<c.indexOf(",")&&(c=c.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(c));if(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())h["Content-Type"]=b.contentType||"application/x-www-form-urlencoded";b.headers=d.extend(h,b.headers||{});t.onreadystatechange=function(){if(4==t.readyState){t.onreadystatechange=y;clearTimeout(r);var c,h=!1;if(200<=t.status&&300>t.status||304==t.status||0==t.status&&"file:"==l){f=f||G(t.getResponseHeader("content-type"));c=t.responseText;try{"script"==f?(0,eval)(c):"xml"==f?c=t.responseXML:"json"==f&&(c=E.test(c)?null:d.parseJSON(c))}catch(m){h=m}h?p(h,"parsererror",t,b):q(c,t,b)}else p(null,t.status?"error":"abort",t,b)}};t.open(b.type,b.url,"async"in b?b.async:!0);for(n in b.headers)t.setRequestHeader(n,b.headers[n]);if(!1===m(t,b))return t.abort(),!1;0<b.timeout&&(r=setTimeout(function(){t.onreadystatechange=y;t.abort();p(null,"timeout",t,b)},b.timeout));t.send(b.data?b.data:null);return t};d.get=function(b,c,f,h){return d.ajax(A.apply(null,arguments))};d.post=function(b,c,f,h){var l=A.apply(null,arguments);l.type="POST";return d.ajax(l)};d.getJSON=function(b,c,f){var h=A.apply(null,arguments);h.dataType="json";return d.ajax(h)};d.fn.load=function(b,f,h){if(!this.length)return this;var l=this,m=b.split(/\s/),n;b=A(b,f,h);var u=b.success;1<m.length&&(b.url=m[0],n=m[1]);b.success=function(b){l.html(n?d("<div>").html(b.replace(c,"")).find(n):b);u&&u.apply(l,arguments)};d.ajax(b);return this};var F=encodeURIComponent;d.param=function(b,c){var d=[];d.add=function(b,c){this.push(F(b)+"="+F(c))};C(d,b,c);return d.join("&").replace(/%20/g,"+")}})(Zepto);(function(d){d.fn.serializeArray=function(){var l=[],s;d(Array.prototype.slice.call(this.get(0).elements)).each(function(){s=d(this);var m=s.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&(!this.disabled&&"submit"!=m&&"reset"!=m&&"button"!=m&&("radio"!=m&&"checkbox"!=m||this.checked))&&l.push({name:s.attr("name"),value:s.val()})});return l};d.fn.serialize=function(){var d=[];this.serializeArray().forEach(function(s){d.push(encodeURIComponent(s.name)+"="+encodeURIComponent(s.value))});return d.join("&")};d.fn.submit=function(l){l?this.bind("submit",l):this.length&&(l=d.Event("submit"),this.eq(0).trigger(l),l.defaultPrevented||this.get(0).submit());return this}})(Zepto);(function(d,l){function s(d){return d.toLowerCase()}var m="",q,p=window.document.createElement("div"),z=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y,G,w,H,A,C,D,r={};d.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(d,n){if(p.style[d+"TransitionProperty"]!==l)return m="-"+s(d)+"-",q=n,!1});y=m+"transform";r[G=m+"transition-property"]=r[w=m+"transition-duration"]=r[H=m+"transition-timing-function"]=r[A=m+"animation-name"]=r[C=m+"animation-duration"]=r[D=m+"animation-timing-function"]="";d.fx={off:q===l&&p.style.transitionProperty===l,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:q?q+"TransitionEnd":s("TransitionEnd"),animationEnd:q?q+"AnimationEnd":s("AnimationEnd")};d.fn.animate=function(l,m,c,h){d.isPlainObject(m)&&(c=m.easing,h=m.complete,m=m.duration);m&&(m=("number"==typeof m?m:d.fx.speeds[m]||d.fx.speeds._default)/1E3);return this.anim(l,m,c,h)};d.fn.anim=function(m,n,c,h){var f,b={},p,q="",F=this,v,k=d.fx.transitionEnd;n===l&&(n=0.4);d.fx.off&&(n=0);if("string"==typeof m)b[A]=m,b[C]=n+"s",b[D]=c||"linear",k=d.fx.animationEnd;else{p=[];for(f in m)z.test(f)?q+=f+"("+m[f]+") ":(b[f]=m[f],p.push(s(f.replace(/([a-z])([A-Z])/,"$1-$2"))));q&&(b[y]=q,p.push(y));0<n&&"object"===typeof m&&(b[G]=p.join(", "),b[w]=n+"s",b[H]=c||"linear")}v=function(b){if("undefined"!==typeof b){if(b.target!==b.currentTarget)return;d(b.target).unbind(k,v)}d(this).css(r);h&&h.call(this)};0<n&&this.bind(k,v);this.size()&&this.get(0).clientLeft;this.css(b);0>=n&&setTimeout(function(){F.each(function(){v.call(this)})},0);return this};p=null})(Zepto);(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=I(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return I(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return n===void 0},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);'use strict';(function(){if(!("Ink"in window)){var c={Ink:"INK_PATH"in window?window.INK_PATH:window.location.protocol+"//js.ink.sapo.pt/Ink/"},b={},a=[],e={},d=[];window.Ink={_checkPendingRequireModules:function(){var a,e,f,c,l,p,n=[];a=0;for(e=d.length;e>a;++a)if(f=d[a]){for(c in f.left)f.left.hasOwnProperty(c)&&(l=b[c],l&&(f.args[f.left[c]]=l,delete f.left[c],--f.remaining));if(0<f.remaining)n.push(f);else if(!(p=f.cb,!p))delete f.cb,p.apply(!1,f.args)}d=n;0<d.length&&setTimeout(function(){Ink._checkPendingRequireModules()}, 0)},_modNameToUri:function(a){if(-1!==a.indexOf("/"))return a;a=a.replace(/_/g,".").split(".");var b=a.shift(),e=c[b];return e||(e="./"+b+"/"),[e,a.join("/"),"/lib.js"].join("")},getPath:function(a){return c[a||"Ink"]},setPath:function(a,b){c[a]=b},loadScript:function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",this._modNameToUri(a));a=document.getElementsByTagName("head");0<a.length&&a[0].appendChild(b)},namespace:function(a,b){if(!a||!a.length)return null; for(var e,d=a.split("."),c=window,p=0,n=d.length;n>p;++p)c[d[p]]=c[d[p]]||{},e=c,c=c[d[p]];return b?[e,d[p-1]]:c},getModule:function(a,e){var d=e?[a,"_",e].join(""):a;return b[d]},createModule:function(d,c,f,k){this.requireModules(f,function(){if("string"!=typeof d)throw Error("module name must be a string!");if(!("number"==typeof c||"string"==typeof c&&0<c.length))throw Error("version number missing!");var f=[d,"_",c].join("");if(!b[f]){delete e[f];delete e[d];var p=Array.prototype.slice.call(arguments), p=k.apply(window,p);a.push(f);"object"==typeof p?p._version=c:"function"==typeof p&&(p.prototype._version=c,p._version=c);var n,s=0===d.indexOf("Ink.");s&&(n=Ink.namespace(d,!0));b[f]=p;s&&(n[0][n[1]+"_"+c]=p);b[d]=p;if(s){var q;a:if(f=n[0][n[1]],"object"!=typeof f)q=!1;else{for(q in f)if(f.hasOwnProperty(q)){q=!1;break a}q=!0}q&&(n[0][n[1]]=p)}this&&Ink._checkPendingRequireModules()}})},requireModules:function(a,c){var f,k,l,p,n;if(k=a.length,l={args:Array(k),left:{},remaining:k,cb:c},"object"!= typeof a||void 0===a.length)throw Error("Dependency list should be an array!");if("function"!=typeof c)throw Error("Callback should be a function!");for(f=0;k>f;++f)p=a[f],(n=b[p])?(l.args[f]=n,--l.remaining):(e[p]||(e[p]=!0,Ink.loadScript(p)),l.left[p]=f);0<l.remaining?d.push(l):c.apply(!0,l.args)},getModulesLoadOrder:function(){return a.slice()},getModuleScripts:function(){var a=this.getModulesLoadOrder();return a.unshift("Ink_1"),a=a.map(function(a){var b=a.indexOf(".");-1===b&&(b=a.indexOf("_")); var e=a.substring(0,b);a=a.substring(b+1);return['<script type="text/javascript" src="',Ink.getPath(e),a.replace(/\./g,"/"),'/">\x3c/script>'].join("")}),a.join("\n")},bind:function(a,b){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments),d=e.concat(d);return a.apply(b,d)}},bindMethod:function(a,b){return this.bind.apply(this,[a[b],a].concat([].slice.call(arguments,2)))},bindEvent:function(a,b){var e=Array.prototype.slice.call(arguments,2);return function(d){var c= e.slice();return c.unshift(d||window.event),a.apply(b,c)}},i:function(a){if(!a)throw Error("Ink.i => id or element must be passed");return"string"==typeof a?document.getElementById(a):a},s:function(a,b){if(void 0===Ink.Dom||void 0===Ink.Dom.Selector)throw Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(a,b||document)[0]||null},ss:function(a,b){if(void 0===Ink.Dom||void 0===Ink.Dom.Selector)throw Error("This method requires Ink.Dom.Selector");return Ink.Dom.Selector.select(a, b||document)},extendObj:function(a,b){if(2<arguments.length&&(b=Ink.extendObj.apply(this,[].slice.call(arguments,1))),b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}}}})(); Ink.createModule("Ink.Net.Ajax","1",[],function(){var c=function(a,b){this.init(a,b)};c.globalOptions={parameters:{},requestHeaders:{}};var b="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;return c.prototype={init:function(a,b){if(!a)throw Error("WRONG_ARGUMENTS_ERR");var d=Ink.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null, onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},c.globalOptions);if(b&&"object"==typeof b){if(d=Ink.extendObj(d,b),"object"==typeof b.parameters)d.parameters=Ink.extendObj(Ink.extendObj({},c.globalOptions.parameters),b.parameters);else if(null!==b.parameters){var h=this.paramsObjToStr(c.globalOptions.parameters);h&&(d.parameters=b.parameters+"&"+h)}d.requestHeaders=Ink.extendObj({},c.globalOptions.requestHeaders); d.requestHeaders=Ink.extendObj(d.requestHeaders,b.requestHeaders)}this.options=d;this.safeCall("onInit");h=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");this.url=h.href=a;this.isHTTP=h.protocol.match(/^https?:$/i)&&!0;this.requestHasBody=0>d.method.search(/^get|head$/i);this.isCrossDomain=this.isHTTP&&"widget:"!==location.protocol&&"object"!=typeof window.widget?location.protocol!==h.protocol||location.host!==h.host:!1;this.options.cors&& (this.isCrossDomain=!1);this.transport=this.getTransport();this.request()},getTransport:function(){if(!b&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"==typeof ActiveXObject)return null;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){return new ActiveXObject("Microsoft.XMLHTTP")}},setHeaders:function(){if(this.transport)try{var a={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1", "Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"1"};if(this.options.cors&&(this.options.signRequest||delete a["X-Requested-With"],delete a["X-Ink-Version"]),this.options.requestHeaders&&"object"==typeof this.options.requestHeaders)for(var b in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(b)&&(a[b]=this.options.requestHeaders[b]);this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(a.Connection= "close");for(var d in a)a.hasOwnProperty(d)&&this.transport.setRequestHeader(d,a[d])}catch(c){}},paramsObjToStr:function(a){var b,d,c,g,f=[];if("object"!=typeof a)return a;for(c in a)if(a.hasOwnProperty(c))if(g=a[c],"[object Array]"!==Object.prototype.toString.call(g)||isNaN(g.length))f=f.concat([encodeURIComponent(c),"=",encodeURIComponent(g),"&"]);else{b=0;for(d=g.length;d>b;b++)f=f.concat([encodeURIComponent(c),"[]","=",encodeURIComponent(g[b]),"&"])}return 0<f.length&&f.pop(),f.join("")},setParams:function(){var a= null,a=this.options.parameters;(a="object"==typeof a?this.paramsObjToStr(a):""+a)&&(this.url=-1<this.url.indexOf("?")?this.url.split("#")[0]+"&"+a:this.url.split("#")[0]+"?"+a)},getHeader:function(a){if(this.usingXDomainReq&&"Content-Type"===a)return this.transport.contentType;try{return this.transport.getResponseHeader(a)}catch(b){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(a){return null}},getResponse:function(){var a=this.transport,b={headerJSON:null, responseJSON:null,getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:a,timeTaken:new Date-this.startTime,requestedUrl:this.url};b.readyState=a.readyState;try{b.responseText=a.responseText}catch(d){}try{b.responseXML=a.responseXML}catch(c){}try{b.status=a.status}catch(g){b.status=0}try{b.statusText=a.statusText}catch(f){b.statusText=""}return b},abort:function(){if(this.transport){clearTimeout(this.delayTimeout);clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(a){}this.finish()}}, runStateChange:function(){var a=this.transport.readyState;if(3===a)this.isHTTP&&this.safeCall("onHeaders");else if(4===a||this.usingXDomainReq){if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())return this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime()),void 0;var b,a=this.transport.responseText,d=this.getResponse(),c=this.transport.status;this.isHTTP&&!this.options.asynchronous&& this.safeCall("onHeaders");clearTimeout(this.stoTimeout);0===c?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):c=a?200:404:304===c&&(c=200);var g=this.usingXDomainReq||200<=c&&300>c,f=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(0<=f.indexOf("application/json")||"force"===this.options.evalJS))try{(b=this.evalJSON(a,this.sanitizeJSON))&&(a=d.responseJSON=b)}catch(k){g&&this.safeCall("onException",k)}if(this.usingXDomainReq&&-1!==f.indexOf("xml")&&"DOMParser"in window){switch(f){case "application/xml":case "application/xhtml+xml":case "image/svg+xml":b=f;break;default:b="text/xml"}b=(new DOMParser).parseFromString(this.transport.responseText,b);this.transport.responseXML=b;d.responseXML=b}null!==this.transport.responseXML&&null===d.responseJSON&&""!==this.transport.responseXML.xml&&(a=this.transport.responseXML);(c||this.usingXDomainReq)&&(g?this.safeCall("onSuccess",d,a):this.safeCall("onFailure",d,a),this.safeCall("on"+c,d,a));this.finish(d,a)}},finish:function(a, b){if(a&&this.safeCall("onComplete",a,b),clearTimeout(this.stoTimeout),this.transport){try{this.transport.onreadystatechange=null}catch(d){}"function"==typeof this.transport.destroy&&this.transport.destroy();this.transport=null}},safeCall:function(a,b){function d(a){setTimeout(function(){throw a.message&&(a.message+="\n"+(a.stacktrace||a.stack||"")),a;},1)}if("function"==typeof this.options[a])try{this.options[a].apply(this,[].slice.call(arguments,1))}catch(c){d(c)}else b&&window.Error&&b instanceof Error&&d(b)},setRequestHeader:function(a,b){this.options.requestHeaders||(this.options.requestHeaders={});this.options.requestHeaders[a]=b},request:function(){if(this.transport){var a=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(a=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(a=this.options.parameters),"object"!=typeof a||a.nodeType?"object"!=typeof a&&null!==a&&(a=""+a):a=this.paramsObjToStr(a),this.options.contentType&& this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var b=this.url,d=this.options.method,c=this.isCrossDomain;c&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",b),b=this.options.xhrProxy+encodeURIComponent(b),c=!1);try{this.transport.open(d,b,this.options.asynchronous)}catch(g){return this.safeCall("onException",g),this.finish(this.getResponse(),null)}this.setHeaders();this.safeCall("onCreate");this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout= setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1E3*this.options.timeout));this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0);this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(c)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime(); this.transport.send(a)}catch(f){return this.safeCall("onException",f),this.finish(this.getResponse(),null)}this.options.asynchronous||this.runStateChange()}},makeError:function(a,b){if("function"!=typeof Error)return{code:a,message:b};var d=Error(b);return d.code=a,d},isJSON:function(a){return"string"==typeof a&&a?(a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)):!1},evalJSON:function(a,b){if(a&&(!b||this.isJSON(a)))try{return"undefined"!=typeof JSON&& void 0!==JSON.parse?JSON.parse(a):eval("("+a+")")}catch(d){throw Error("ERROR: Bad JSON string...");}return null}},c.load=function(a,b){return new c(a,{method:"GET",onSuccess:function(a){b(a.responseText,a)}})},c.ping=function(a,b){return new c(a,{method:"HEAD",onSuccess:function(a){"function"==typeof b&&b(a)}})},c}); Ink.createModule("Ink.Net.JsonP","1",[],function(){var c=function(b,a){this.init(b,a)};return c.prototype={init:function(b,a){if(this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},a||{}),this.randVar=!1!==this.options.randVar?this.options.randVar:parseInt(1E5*Math.random(),10),this.options.internalCallback+=this.randVar,this.uri=b,"function"==typeof this.options.onComplete&&(this.options.onSuccess= this.options.onComplete),"string"!=typeof this.uri)throw"Please define an URI";if("function"!=typeof this.options.onSuccess)throw"please define a callback function on option onSuccess!";Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(a){window.clearTimeout(this.timeout);delete window.Ink.Net.JsonP[this.options.internalCallback];this._removeScriptTag();this.options.onSuccess(a)},this);this._addScriptTag()},_addParamsToGet:function(b,a){var e,d,c,g=-1!==b.indexOf("?"),f=[b];for(d in a)a.hasOwnProperty(d)&& (g?e="&":(e="?",g=!0),c=a[d],"number"==typeof c||c||(c=""),f=f.concat([e,d,"=",encodeURIComponent(c)]));return f.join("")},_getScriptContainer:function(){var b=document.getElementsByTagName("head");return 0===b.length?document.getElementsByTagName("script")[0]:b[0]},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback;this.options.params.rnd_seed=this.randVar;this.uri=this._addParamsToGet(this.uri,this.options.params);var b=document.createElement("script"); b.type="text/javascript";b.src=this.uri;this._getScriptContainer().appendChild(b);this.timeout=setTimeout(Ink.bind(this._requestFailed,this),1E3*this.options.timeout)},_requestFailed:function(){delete Ink.Net.JsonP[this.options.internalCallback];this._removeScriptTag();"function"==typeof this.options.onFailure&&this.options.onFailure(this.options.failureObj)},_removeScriptTag:function(){for(var b,a,e=document.getElementsByTagName("script"),d=0,c=e.length;c>d;++d)if(b=e[d],a=b.getAttribute("src")|| b.src,null!==a&&a===this.uri)return b.parentNode.removeChild(b),void 0}},c}); Ink.createModule("Ink.Dom.Css",1,[],function(){return{addRemoveClassName:function(c,b,a){return a?this.addClassName(c,b):(this.removeClassName(c,b),void 0)},addClassName:function(c,b){(c=Ink.i(c))&&b&&(void 0!==c.classList?c.classList.add(b):this.hasClassName(c,b)||(c.className+=(c.className?" ":"")+b))},removeClassName:function(c,b){if(c=Ink.i(c),c&&b)if(void 0!==c.classList)c.classList.remove(b);else{if(void 0===c.className)return!1;var a=c.className,a=a.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"), " "),a=a.replace(/^\s+/,"").replace(/\s+$/,"");c.className=a}},setClassName:function(c,b,a){this.addRemoveClassName(c,b,a||!1)},hasClassName:function(c,b){if(c=Ink.i(c),c&&b){if(void 0!==c.classList)return c.classList.contains(b);if(void 0===c.className)return!1;var a=c.className;if(void 0===a.length)return!1;if(0<a.length&&(a===b||RegExp("(^|\\s)"+b+"(\\s|$)").test(a)))return!0}return!1},blinkClass:function(c,b,a,e){c=Ink.i(c);this.addRemoveClassName(c,b,!e);setTimeout(Ink.bind(function(){this.addRemoveClassName(c, b,e)},this),Number(a)||100)},toggleClassName:function(c,b,a){return c&&b&&void 0!==c.classList?(c=Ink.i(c),null!==c&&c.classList.toggle(b),!0):(void 0!==a?!0===a?this.addClassName(c,b):!1===a&&this.removeClassName(c,b):this.hasClassName(c,b)?this.removeClassName(c,b):this.addClassName(c,b),void 0)},setOpacity:function(c,b){if(c=Ink.i(c),null!==c){var a=1;isNaN(Number(b))||(a=0>=b?0:1>=b?b:100>=b?b/100:1);void 0!==c.style.opacity?c.style.opacity=a:c.style.filter="alpha(opacity:"+(0|100*a)+")"}},_camelCase:function(c){return c? c.replace(/-(\w)/g,function(b,a){return a.toUpperCase()}):c},getStyle:function(c,b){if(c=Ink.i(c),null!==c){b="float"===b?"cssFloat":this._camelCase(b);var a=c.style[b];!window.getComputedStyle||a&&"auto"!==a?!a&&c.currentStyle&&(a=c.currentStyle[b],"auto"!==a||"width"!==b&&"height"!==b||(a=c["offset"+b.charAt(0).toUpperCase()+b.slice(1)]+"px")):a=(a=window.getComputedStyle(c,null))?a[b]:null;if("opacity"===b)return a?parseFloat(a,10):1;if("borderTopWidth"===b||"borderBottomWidth"===b||"borderRightWidth"=== b||"borderLeftWidth"===b){if("thin"===a)return"1px";if("medium"===a)return"3px";if("thick"===a)return"5px"}return"auto"===a?null:a}},setStyle:function(c,b){if(c=Ink.i(c),null!==c)if("string"==typeof b)c.style.cssText+="; "+b,-1!==b.indexOf("opacity")&&this.setOpacity(c,b.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var a in b)b.hasOwnProperty(a)&&("opacity"===a?this.setOpacity(c,b[a]):"float"===a||"cssFloat"===a?void 0===c.style.styleFloat?c.style.cssFloat=b[a]:c.style.styleFloat=b[a]:c.style[a]= b[a])},show:function(c,b){c=Ink.i(c);null!==c&&(c.style.display=b?b:"")},hide:function(c){c=Ink.i(c);null!==c&&(c.style.display="none")},showHide:function(c,b){(c=Ink.i(c))&&(c.style.display=b?"":"none")},toggle:function(c,b){c=Ink.i(c);null!==c&&(void 0!==b?!0===b?this.show(c):this.hide(c):"none"===c.style.display?this.show(c):this.hide(c))},_getRefTag:function(c){if(c.firstElementChild)return c.firstElementChild;for(c=c.firstChild;c;c=c.nextSibling)if(1===c.nodeType)return c;return null},appendStyleTag:function(c, b,a){a=Ink.extendObj({type:"text/css",force:!1},a||{});var e,d,h=document.getElementsByTagName("style"),g=!1,f=!0;e=0;for(d=h.length;d>e;e++)g=h[e].innerHTML,0<=g.indexOf(c)&&(f=!1);f&&(e=document.createElement("style"),d=document.getElementsByTagName("head")[0],h=!1,e.type=a.type,c=""+(c+" {")+b,c+="} ",void 0!==e.styleSheet?e.styleSheet.cssText=c:e.appendChild(document.createTextNode(c)),a.force?d.appendChild(e):(h=this._getRefTag(d),h&&d.insertBefore(e,h)))},appendStylesheet:function(c,b){b=Ink.extendObj({media:"screen", type:"text/css",force:!1},b||{});var a,e=document.createElement("link"),d=document.getElementsByTagName("head")[0];e.media=b.media;e.type=b.type;e.href=c;e.rel="Stylesheet";b.force?d.appendChild(e):(a=this._getRefTag(d),a&&d.insertBefore(e,a))},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(c,b){if(!c||this._loadedCSSFiles[c])return b(c);var a=this._loadingCSSFiles[c];if(a)return a.push(b);this._loadingCSSFiles[c]=[b];a=document.createElement("link");a.type="text/css";a.rel="stylesheet"; a.href=c;document.getElementsByTagName("head")[0].appendChild(a);a=document.createElement("img");a.onerror=Ink.bindEvent(function(a,b){this._loadedCSSFiles[b]=!0;for(var c=this._loadingCSSFiles[b],g=0,f=c.length;f>g;++g)c[g](b);delete this._loadingCSSFiles[b]},this,c);a.src=c},decToHex:function(c){var b=function(a){return 1===a.length&&(a="0"+a),a.toUpperCase()};if("object"==typeof c){var a=b(parseInt(c.r,10).toString(16)),e=b(parseInt(c.g,10).toString(16));c=b(parseInt(c.b,10).toString(16));return a+ e+c}c+="";a=c.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==a?b(parseInt(a[1],10).toString(16))+b(parseInt(a[2],10).toString(16))+b(parseInt(a[3],10).toString(16)):b(parseInt(c,10).toString(16))},hexToDec:function(c){return 0===c.indexOf("#")&&(c=c.substr(1)),6===c.length?{r:parseInt(c.substr(0,2),16),g:parseInt(c.substr(2,2),16),b:parseInt(c.substr(4,2),16)}:3===c.length?{r:parseInt(c.charAt(0)+c.charAt(0),16),g:parseInt(c.charAt(1)+c.charAt(1),16),b:parseInt(c.charAt(2)+c.charAt(2),16)}:2>= c.length?parseInt(c,16):void 0},getPropertyFromStylesheet:function(c,b){var a=this.getRuleFromStylesheet(c);return a?a.style[b]:null},getPropertyFromStylesheet2:function(c,b){for(var a,e=this.getRulesFromStylesheet(c),d=0,h=e.length;h>d;d++)if(a=e[d].style[b],null!==a&&void 0!==a)return a;return null},getRuleFromStylesheet:function(c){var b,a,e,d,h;if(!document.styleSheets)return null;for(var g=0,f=document.styleSheets.length;f>g&&!(b=document.styleSheets[g],a=b.rules?b.rules:b.cssRules,!a);++g){e= 0;for(d=a.length;d>e;++e)if(h=a[e],h.selectorText&&h.selectorText===c)return h}return null},getRulesFromStylesheet:function(c){var b,a,e,d,h,g=[];if(!document.styleSheets)return g;for(var f=0,k=document.styleSheets.length;k>f;++f){if(b=document.styleSheets[f],a=b.rules?b.rules:b.cssRules,!a)return null;e=0;for(d=a.length;d>e;++e)h=a[e],h.selectorText&&h.selectorText===c&&g.push(h)}return g},getPropertiesFromRule:function(c){var b,a,e;b=this.getRuleFromStylesheet(c);c={};b=b.style.cssText;var d,h, g,f=b.split(";");a=0;for(e=f.length;e>a;++a)" "===f[a].charAt(0)&&(f[a]=f[a].substring(1)),d=f[a].split(":"),b=this._camelCase(d[0].toLowerCase()),(d=d[1])&&(d=d.substring(1),"padding"===b||"margin"===b||"borderWidth"===b?("borderWidth"===b?(h="border",g="Width"):(h=b,g=""),-1!==d.indexOf(" ")?(d=d.split(" "),c[h+"Top"+g]=d[0],c[h+"Bottom"+g]=d[0],c[h+"Left"+g]=d[1],c[h+"Right"+g]=d[1]):(c[h+"Top"+g]=d,c[h+"Bottom"+g]=d,c[h+"Left"+g]=d,c[h+"Right"+g]=d)):"borderRadius"===b?-1!==d.indexOf(" ")?(d= d.split(" "),c.borderTopLeftRadius=d[0],c.borderBottomRightRadius=d[0],c.borderTopRightRadius=d[1],c.borderBottomLeftRadius=d[1]):(c.borderTopLeftRadius=d,c.borderTopRightRadius=d,c.borderBottomLeftRadius=d,c.borderBottomRightRadius=d):c[b]=d);return c},changeFontSize:function(c,b,a,e,d){var h=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(g){var f;if("string"!=typeof c?f="1st argument must be a CSS selector rule.":"number"!=typeof b?f="2nd argument must be a number.":void 0!==a&&"+"!==a&& "*"!==a?f='3rd argument must be one of "+", "*".':void 0!==e&&("number"!=typeof e||0>=e)?f="4th argument must be a positive number.":void 0!==d&&("number"!=typeof d||!1)&&(f="5th argument must be a positive number greater than minValue."),f)throw new TypeError(f);var k=g.select(c);void 0===e&&(e=1);a="*"===a?function(a,b){return a*b}:function(a,b){return a+b};for(var l=0,p=k.length;p>l;++l)f=k[l],g=parseFloat(h.getStyle(f,"fontSize")),g=a(g,b),e>g||"number"==typeof d&&g>d||(f.style.fontSize=g+"px")})}}}); Ink.createModule("Ink.Dom.Element",1,[],function(){var c={get:function(b){return void 0!==b?"string"==typeof b?document.getElementById(b):b:null},create:function(b,a){var e=document.createElement(b),d;for(d in a)a.hasOwnProperty(d)&&("className"===d&&(d="class"),e.setAttribute(d,a[d]));return e},remove:function(b){var a;b&&(a=b.parentNode)&&a.removeChild(b)},scrollTo:function(b){if(b=this.get(b)){if(b.scrollIntoView)return b.scrollIntoView();var a=0,e=0;do a+=b.offsetTop||0,e+=b.offsetLeft||0,b=b.offsetParent; while(b);window.scrollTo(e,a)}},offsetTop:function(b){return this.offset(b)[1]},offsetLeft:function(b){return this.offset(b)[0]},positionedOffset:function(b){var a=0,e=0;b=this.get(b);do if(a+=b.offsetTop||0,e+=b.offsetLeft||0,b=b.offsetParent){if("body"===b.tagName.toLowerCase())break;var d=b.style.position;if(!d&&b.currentStyle&&(d=b.currentStyle.position),(!d||"auto"===d)&&"undefined"!=typeof getComputedStyle)d=(d=getComputedStyle(b,null))?d.position:null;if("relative"===d||"absolute"===d)break}while(b); return[e,a]},offset:function(b){b=Ink.i(b);var a,e,d,c=["border-left-width","border-top-width"],g=[0,0],f=this._getPropPx,k=Ink.getModule("Ink.Dom.Browser",1);do d=window.getComputedStyle?window.getComputedStyle(b,null):b.currentStyle,a=[0|b.offsetLeft,0|b.offsetTop],e=[f(d,c[0]),f(d,c[1])],k.OPERA?(g[0]+=a[0],g[1]+=a[1]):(g[0]+=a[0]+e[0],g[1]+=a[1]+e[1]),b=b.offsetParent;while(b);return e=[f(d,c[0]),f(d,c[1])],k.GECKO?(g[0]+=e[0],g[1]+=e[1]):k.OPERA||(g[0]-=e[0],g[1]-=e[1]),g},scroll:function(b){return b= b?Ink.i(b):document.body,[window.pageXOffset?window.pageXOffset:b.scrollLeft,window.pageYOffset?window.pageYOffset:b.scrollTop]},_getPropPx:function(b,a){var e,d,c=b.getPropertyValue?b.getPropertyValue(a):b[a];return c?(d=c.indexOf("px"),e=-1===d?0:parseInt(c,10)):e=0,e},offset2:function(b){return this.offset(b)},hasAttribute:function(b,a){return b.hasAttribute?b.hasAttribute(a):!!b.getAttribute(a)},insertAfter:function(b,a){(a=this.get(a))&&a.parentNode.insertBefore(b,a.nextSibling)},insertTop:function(b, a){(a=this.get(a))&&a.insertBefore(b,a.firstChild)},textContent:function(b){b=Ink.i(b);var a,e,d;switch(b&&b.nodeType){case 9:return this.textContent(b.documentElement||b.body&&b.body.parentNode||b.body);case 1:if(a=b.innerText,void 0!==a)return a;case 11:if(a=b.textContent,void 0!==a)return a;if(b.firstChild===b.lastChild)return this.textContent(b.firstChild);a=[];e=b.childNodes;b=0;for(d=e.length;d>b;++b)a.push(this.textContent(e[b]));return a.join("");case 3:case 4:return b.nodeValue}return""}, setTextContent:function(b,a){switch(b=Ink.i(b),b&&b.nodeType){case 1:if("innerText"in b){b.innerText=a;break}case 11:if("textContent"in b){b.textContent=a;break}case 9:for(;b.firstChild;)b.removeChild(b.firstChild);""!==a&&b.appendChild((b.ownerDocument||b).createTextNode(a));break;case 3:case 4:b.nodeValue=a}},isLink:function(b){return!(!b||!(1===b.nodeType&&(/^a|area$/i.test(b.tagName)||b.hasAttributeNS&&b.hasAttributeNS("http://www.w3.org/1999/xlink","href"))))},isAncestorOf:function(b,a){if(!a|| !b)return!1;if(a.compareDocumentPosition)return 0!==(16&b.compareDocumentPosition(a));for(;a=a.parentNode;)if(a===b)return!0;return!1},descendantOf:function(b,a){return b!==a&&this.isAncestorOf(b,a)},firstElementChild:function(b){if(!b)return null;if("firstElementChild"in b)return b.firstElementChild;for(b=b.firstChild;b&&1!==b.nodeType;)b=b.nextSibling;return b},lastElementChild:function(b){if(!b)return null;if("lastElementChild"in b)return b.lastElementChild;for(b=b.lastChild;b&&1!==b.nodeType;)b= b.previousSibling;return b},nextElementSibling:function(b){if(!b)return null;if("nextElementSibling"in b)return b.nextElementSibling;for(b=b.nextSibling;b&&1!==b.nodeType;)b=b.nextSibling;return b},previousElementSibling:function(b){if(!b)return null;if("previousElementSibling"in b)return b.previousElementSibling;for(b=b.previousSibling;b&&1!==b.nodeType;)b=b.previousSibling;return b},elementWidth:function(b){return"string"==typeof b&&(b=document.getElementById(b)),b.offsetWidth},elementHeight:function(b){return"string"== typeof b&&(b=document.getElementById(b)),b.offsetHeight},elementLeft:function(b){return"string"==typeof b&&(b=document.getElementById(b)),b.offsetLeft},elementTop:function(b){return"string"==typeof b&&(b=document.getElementById(b)),b.offsetTop},elementDimensions:function(b){return b=Ink.i(b),[b.offsetWidth,b.offsetHeight]},outerDimensions:function(b){var a=c.elementDimensions(b),e=Ink.getModule("Ink.Dom.Css_1");return[a[0]+parseFloat(e.getStyle(b,"marginLeft")||0)+parseFloat(e.getStyle(b,"marginRight")|| 0),a[1]+parseFloat(e.getStyle(b,"marginTop")||0)+parseFloat(e.getStyle(b,"marginBottom")||0)]},inViewport:function(b,a){var e=Ink.i(b).getBoundingClientRect();return a?0<e.bottom&&e.left<c.viewportWidth()&&e.top<c.viewportHeight()&&0<e.right:0<e.top&&e.right<c.viewportWidth()&&e.bottom<c.viewportHeight()&&0<e.left},clonePosition:function(b,a){var e=this.offset(a);return b.style.left=e[0]+"px",b.style.top=e[1]+"px",b},ellipsizeText:function(b,a){if(b=Ink.i(b))for(;b&&b.scrollHeight>b.offsetHeight+ 8;)b.textContent=b.textContent.replace(/(\s+\S+)\s*$/,a||"\u00e2\u20ac\u00a6")},findUpwardsHaving:function(b,a){for(;b&&1===b.nodeType;){if(a(b))return b;b=b.parentNode}return!1},findUpwardsByClass:function(b,a){var e=RegExp("(^|\\s)"+a+"(\\s|$)");return this.findUpwardsHaving(b,function(a){return(a=a.className)&&e.test(a)})},findUpwardsByTag:function(b,a){a=a.toUpperCase();return this.findUpwardsHaving(b,function(b){return b.nodeName&&b.nodeName.toUpperCase()===a})},findUpwardsById:function(b,a){return this.findUpwardsHaving(b, function(b){return b.id===a})},findUpwardsBySelector:function(b,a){if(void 0===Ink.Dom||void 0===Ink.Dom.Selector)throw Error("This method requires Ink.Dom.Selector");return this.findUpwardsHaving(b,function(b){return Ink.Dom.Selector.matchesSelector(b,a)})},getChildrenText:function(b,a){var e,d,c,g=b.childNodes,f=g.length,k="";if(!b)return k;for(d=0;f>d;++d)(e=g[d])&&3===e.nodeType&&(c=this._trimString(e.data+""),0<c.length?(k+=c,a&&b.removeChild(e)):b.removeChild(e));return k},_trimString:function(b){return String.prototype.trim? b.trim():b.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(b){b=Ink.i(b);for(var a=[],e=0;b.options.length>e;++e)a.push(b.options[e].value);return a},_normalizeData:function(b){for(var a,e=[],d=0,c=b.length;c>d;++d)a=b[d],a instanceof Array?1===a.length&&a.push(a[0]):a=[a,a],e.push(a);return e},fillSelect:function(b,a,e,d){if(b=Ink.i(b)){b.innerHTML="";var c;e||(c=document.createElement("option"),c.setAttribute("value",""),b.appendChild(c));a=this._normalizeData(a);for(var g=0,f=a.length;f> g;++g)e=a[g],c=document.createElement("option"),c.setAttribute("value",e[0]),2<e.length&&c.setAttribute("extra",e[2]),c.appendChild(document.createTextNode(e[1])),e[0]===d&&c.setAttribute("selected","selected"),b.appendChild(c)}},fillSelect2:function(b,a){b=Ink.i(b);b.innerHTML="";if(!a)throw"param opts is a requirement!";if(!a.data)throw"opts.data is a requirement!";a=Ink.extendObj({skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create",optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist", defaultValue:""},a);var e,d,c=document.createElement("optgroup");c.setAttribute("label",a.optionsGroupLabel);a.data=this._normalizeData(a.data);a.skipCreate||a.data.unshift(["$create$",a.createLabel]);a.skipEmpty||a.data.unshift(["",a.emptyLabel]);for(var g=0,f=a.data.length;f>g;++g)d=a.data[g],e=document.createElement("option"),e.setAttribute("value",d[0]),e.appendChild(document.createTextNode(d[1])),d[0]===a.defaultValue&&e.setAttribute("selected","selected"),""===d[0]||"$create$"===d[0]?b.appendChild(e): c.appendChild(e);(function(a){a=a[a.length-1][0];return""===a||"$create$"===a})(a.data)&&(e=document.createElement("option"),e.setAttribute("value","$dummy$"),e.setAttribute("disabled","disabled"),e.appendChild(document.createTextNode(a.emptyOptionsGroupLabel)),c.appendChild(e));b.appendChild(c);var k=function(a,d){var f=b.options[b.options.length-1];f.getAttribute("disabled")&&f.parentNode.removeChild(f);f=document.createElement("option");f.setAttribute("value",a);f.appendChild(document.createTextNode(d)); c.appendChild(f);b.options[b.options.length-1].setAttribute("selected",!0)};a.skipCreate||(b.onchange=function(){"$create$"===b.value&&"function"==typeof a.onCreate&&a.onCreate(b,k)})},fillRadios:function(b,a,e,d,c,g){for(var f=Ink.i(b),f=f.nextSibling;f&&1!==f.nodeType;)f=f.nextSibling;var k=document.createElement("span");f?f.parentNode.insertBefore(k,f):Ink.i(b).appendChild(k);e=this._normalizeData(e);"]"!==a.substring(a.length-1)&&(a+="[]");var l;d||(l=document.createElement("input"),l.setAttribute("type", "radio"),l.setAttribute("name",a),l.setAttribute("value",""),k.appendChild(l),g&&k.appendChild(document.createElement(g)));for(d=0;e.length>d;++d)b=e[d],l=document.createElement("input"),l.setAttribute("type","radio"),l.setAttribute("name",a),l.setAttribute("value",b[0]),k.appendChild(l),k.appendChild(document.createTextNode(b[1])),g&&k.appendChild(document.createElement(g)),b[0]===c&&(l.checked=!0);return k},fillChecks:function(b,a,e,d,c){for(var g=Ink.i(b),g=g.nextSibling;g&&1!==g.nodeType;)g=g.nextSibling; var f=document.createElement("span");g?g.parentNode.insertBefore(f,g):Ink.i(b).appendChild(f);e=this._normalizeData(e);"]"!==a.substring(a.length-1)&&(a+="[]");for(var k=0;e.length>k;++k)b=e[k],g=document.createElement("input"),g.setAttribute("type","checkbox"),g.setAttribute("name",a),g.setAttribute("value",b[0]),f.appendChild(g),f.appendChild(document.createTextNode(b[1])),c&&f.appendChild(document.createElement(c)),b[0]===d&&(g.checked=!0);return f},parentIndexOf:function(b,a){for(var e,d=0,c= 0,g=b.childNodes.length;g>c;++c)if(e=b.childNodes[c],1===e.nodeType){if(e===a)return d;++d}return-1},nextSiblings:function(b){if("string"==typeof b&&(b=document.getElementById(b)),"object"==typeof b&&null!==b&&b.nodeType&&1===b.nodeType){var a=[],e=b.parentNode.children;b=this.parentIndexOf(b.parentNode,b);b=++b;for(var d=e.length;d>b;b++)a.push(e[b]);return a}return[]},previousSiblings:function(b){if("string"==typeof b&&(b=document.getElementById(b)),"object"==typeof b&&null!==b&&b.nodeType&&1=== b.nodeType){var a=[],e=b.parentNode.children,d=0;for(b=this.parentIndexOf(b.parentNode,b);b>d;d++)a.push(e[d]);return a}return[]},siblings:function(b){if("string"==typeof b&&(b=document.getElementById(b)),"object"==typeof b&&null!==b&&b.nodeType&&1===b.nodeType){for(var a=[],e=b.parentNode.children,d=0,c=e.length;c>d;d++)b!==e[d]&&a.push(e[d]);return a}return[]},childElementCount:function(b){return b=Ink.i(b),"childElementCount"in b?b.childElementCount:b?this.siblings(b).length+1:0},appendHTML:function(b, a){var e=document.createElement("div");e.innerHTML=a;for(var e=e.children,d=0;e.length>d;d++)b.appendChild(e[d])},prependHTML:function(b,a){var e=document.createElement("div");e.innerHTML=a;for(var d=b.firstChild,e=e.children,c=e.length-1;0<=c;c--)b.insertBefore(e[c],d),d=b.firstChild},removeTextNodeChildren:function(b){var a,e,d=b;for(b=b.firstChild;b;)e=3===b.nodeType,a=b,b=b.nextSibling,e&&d.removeChild(a)},htmlToFragment:function(b){return this.htmlToFragment="function"==typeof document.createRange&& "function"==typeof Range.prototype.createContextualFragment?function(a){var b;return"string"!=typeof a?document.createDocumentFragment():(b=document.createRange(),b.selectNode(document.body),b.createContextualFragment(a))}:function(a){var b,d=document.createDocumentFragment();if("string"!=typeof a)return d;b=document.createElement("div");for(b.innerHTML=a;a=b.firstChild;)d.appendChild(a);return d},this.htmlToFragment.call(this,b)},_camelCase:function(b){return b?b.replace(/-(\w)/g,function(a,b){return b.toUpperCase()}): b},data:function(b){var a;if("object"!=typeof b&&"string"!=typeof b)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"==typeof b)a=b;else{var e=Ink.getModule("Ink.Dom.Selector",1);if(!e)throw"[Ink.Dom.Element.data] :: This method requires Ink.Dom.Selector - v1";if(a=e.select(b),0>=a.length)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";a=a[0]}var d;b={};for(var e=a.attributes||[],c=0,g=e.length;g>c;++c)d=e[c],a=d.name,d=d.value,a&&0===a.indexOf("data-")&& (b[this._camelCase(a.replace("data-",""))]=d);return b},moveCursorTo:function(b,a){if(b.setSelectionRange)b.setSelectionRange(a,a);else{var e=b.createTextRange();e.collapse(!0);e.moveEnd("character",a);e.moveStart("character",a);e.select()}},pageWidth:function(){var b;b=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var a;return window.self.innerWidth?a=document.documentElement.clientWidth? document.documentElement.clientWidth:window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?a=document.documentElement.clientWidth:document.body&&(a=document.body.clientWidth),a>b?b:a},pageHeight:function(){var b;b=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var a;return window.self.innerHeight?a=window.self.innerHeight:document.documentElement&& document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight),a>b?a:b},viewportWidth:function(){return void 0!==window.innerWidth?window.innerWidth:document.documentElement&&void 0!==document.documentElement.offsetWidth?document.documentElement.offsetWidth:void 0},viewportHeight:function(){return void 0!==window.innerHeight?window.innerHeight:document.documentElement&&void 0!==document.documentElement.offsetHeight?document.documentElement.offsetHeight: void 0},scrollWidth:function(){return void 0!==window.self.pageXOffset?window.self.pageXOffset:void 0!==document.documentElement&&void 0!==document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return void 0!==window.self.pageYOffset?window.self.pageYOffset:void 0!==document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}};return c}); Ink.createModule("Ink.Dom.Event",1,[],function(){return{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,throttle:function(c,b){b=b||0;var a,e=0,d=function(){var h=+new Date;if(h-e>=b)return e=h,c.apply(this,[].slice.call(arguments));var g=this,f=[].slice.call(arguments);clearTimeout(a);a=setTimeout(function(){return d.apply(g,f)})};return d},element:function(c){c=c.target|| "mouseout"===c.type&&c.fromElement||"mouseleave"===c.type&&c.fromElement||"mouseover"===c.type&&c.toElement||"mouseenter"===c.type&&c.toElement||c.srcElement||null;return!c||3!==c.nodeType&&4!==c.nodeType?c:c.parentNode},relatedTarget:function(c){c=c.relatedTarget||"mouseout"===c.type&&c.toElement||"mouseleave"===c.type&&c.toElement||"mouseover"===c.type&&c.fromElement||"mouseenter"===c.type&&c.fromElement||null;return!c||3!==c.nodeType&&4!==c.nodeType?c:c.parentNode},findElement:function(c,b,a){for(c= this.element(c);;){if(c.nodeName.toLowerCase()===b.toLowerCase())return c;if((c=c.parentNode,!c)||!c.parentNode)return a?!1:document}},fire:function(c,b,a){c=Ink.i(c);var e,d;if(d=document.createEvent?{DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,focus:!0,focusin:!0,focusout:!0,blur:!0,load:!0,unload:!0,abort:!0,error:!0,select:!0,change:!0,submit:!0,reset:!0,resize:!0,scroll:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,mousewheel:!0, wheel:!0,textInput:!0,keydown:!0,keypress:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,DOMSubtreeModified:!0,DOMNodeInserted:!0,DOMNodeRemoved:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemovedFromDocument:!0,DOMAttrModified:!0,DOMCharacterDataModified:!0,DOMAttributeNameChanged:!0,DOMElementNameChanged:!0,hashchange:!0}:{onabort:!0,onactivate:!0,onafterprint:!0,onafterupdate:!0,onbeforeactivate:!0,onbeforecopy:!0,onbeforecut:!0,onbeforedeactivate:!0,onbeforeeditfocus:!0,onbeforepaste:!0, onbeforeprint:!0,onbeforeunload:!0,onbeforeupdate:!0,onblur:!0,onbounce:!0,oncellchange:!0,onchange:!0,onclick:!0,oncontextmenu:!0,oncontrolselect:!0,oncopy:!0,oncut:!0,ondataavailable:!0,ondatasetchanged:!0,ondatasetcomplete:!0,ondblclick:!0,ondeactivate:!0,ondrag:!0,ondragend:!0,ondragenter:!0,ondragleave:!0,ondragover:!0,ondragstart:!0,ondrop:!0,onerror:!0,onerrorupdate:!0,onfilterchange:!0,onfinish:!0,onfocus:!0,onfocusin:!0,onfocusout:!0,onhashchange:!0,onhelp:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0, onlayoutcomplete:!0,onload:!0,onlosecapture:!0,onmessage:!0,onmousedown:!0,onmouseenter:!0,onmouseleave:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onmousewheel:!0,onmove:!0,onmoveend:!0,onmovestart:!0,onoffline:!0,ononline:!0,onpage:!0,onpaste:!0,onprogress:!0,onpropertychange:!0,onreadystatechange:!0,onreset:!0,onresize:!0,onresizeend:!0,onresizestart:!0,onrowenter:!0,onrowexit:!0,onrowsdelete:!0,onrowsinserted:!0,onscroll:!0,onselect:!0,onselectionchange:!0,onselectstart:!0,onstart:!0, onstop:!0,onstorage:!0,onstoragecommit:!0,onsubmit:!0,ontimeout:!0,onunload:!0},null!==c&&void 0!==c){c===document&&document.createEvent&&!c.dispatchEvent&&(c=document.documentElement);document.createEvent?(e=document.createEvent("HTMLEvents"),void 0===d[b]?e.initEvent("dataavailable",!0,!0):e.initEvent(b,!0,!0)):(e=document.createEventObject(),e.eventType=void 0===d["on"+b]?"ondataavailable":"on"+b);e.eventName=b;e.memo=a||{};try{if(document.createEvent)c.dispatchEvent(e);else{if(!c.fireEvent)return; c.fireEvent(e.eventType,e)}}catch(h){}return e}},_callbackForCustomEvents:function(c,b,a){c="hashchange"===b&&c.attachEvent&&!window.onhashchange;var e=-1!==b.indexOf(":");return c||e?Ink.bindEvent(function(a,b,e){a.eventName===b&&(window.addEventListener&&(window.event=a),e())},this,b,a):null},observe:function(c,b,a,e){if(c=Ink.i(c),null!==c&&void 0!==c){var d=this._callbackForCustomEvents(c,b,a);return d&&(a=d,b="dataavailable"),c.addEventListener?c.addEventListener(b,a,!!e):c.attachEvent("on"+ b,a),a}},observeMulti:function(c,b,a,e){if("string"==typeof c?c=Ink.ss(c):c instanceof Element&&(c=[c]),!c[0])return!1;var d=this._callbackForCustomEvents(c[0],b,a);d&&(a=d,b="dataavailable");for(var d=0,h=c.length;h>d;d++)this.observe(c[d],b,a,e);return a},stopObserving:function(c,b,a,e){c=Ink.i(c);null!==c&&void 0!==c&&(c.removeEventListener?c.removeEventListener(b,a,!!e):c.detachEvent("on"+b,a))},stop:function(c){null!==c.cancelBubble&&(c.cancelBubble=!0);c.stopPropagation&&c.stopPropagation(); c.preventDefault&&c.preventDefault();window.attachEvent&&(c.returnValue=!1);null!==c.cancel&&(c.cancel=!0)},stopPropagation:function(c){null!==c.cancelBubble&&(c.cancelBubble=!0);c.stopPropagation&&c.stopPropagation()},stopDefault:function(c){c.preventDefault&&c.preventDefault();window.attachEvent&&(c.returnValue=!1);null!==c.cancel&&(c.cancel=!0)},pointer:function(c){return{x:c.pageX||c.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:c.pageY||c.clientY+(document.documentElement.scrollTop|| document.body.scrollTop)}},pointerX:function(c){return c.pageX||c.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(c){return c.pageY||c.clientY+(document.documentElement.scrollTop||document.body.scrollTop)},isLeftClick:function(c){if(window.addEventListener){if(0===c.button||"touch"===c.type.substring(0,5)&&null===c.button)return!0}else if(1===c.button)return!0;return!1},isRightClick:function(c){return 2===c.button},isMiddleClick:function(c){return window.addEventListener? 1===c.button:4===c.button},getCharFromKeyboardEvent:function(c,b){var a=c.keyCode,e=String.fromCharCode(a),d=c.shiftKey;if(65<=a&&90>=a)return"boolean"==typeof b&&(d=b),d?e:e.toLowerCase();if(96<=a&&105>=a)return String.fromCharCode(48+(a-96));switch(a){case 109:case 189:return"-";case 107:case 187:return"+"}return e},debug:function(){}}}); Ink.createModule("Ink.Dom.FormSerialize",1,[],function(){return{serialize:function(c){c=Ink.i(c);c=this._getFieldNameInputsMap(c);var b={},a;for(a in c)if(c.hasOwnProperty(a))if(null!==a){var e=a.replace(/\[\]$/,"");b[e]=this._getValuesOfField(c[a])}else b[a]=this._getValuesOfField(c[a]);return delete b["null"],b},fillIn:function(c,b){c=Ink.i(c);var a=this._getFieldNameInputsMap(c);delete a["null"];for(var e in b)b.hasOwnProperty(e)&&this._setValuesOfField(a[e],b[e])},_getFieldNameInputsMap:function(c){for(var b, a,e,d={},h=0,g=c.elements.length;g>h;++h)e=c.elements[h],b=e.getAttribute("name"),a=e.nodeName.toLowerCase(),"fieldset"!==a&&(void 0===d[b]?d[b]=[e]:d[b].push(e));return d},_getValuesOfField:function(c){var b,a,e,d,h,g;b=c[0].nodeName.toLowerCase();e=c[0].getAttribute("type");a=c[0].value;var f=[];switch(b){case "select":b=0;for(a=c.length;a>b;++b){f[b]=[];g=c[b].getAttribute("multiple");e=0;for(d=c[b].options.length;d>e;++e)if(h=c[b].options[e],h.selected){if(!g){f[b]=h.value;break}f[b].push(h.value)}}return 0< c.length&&/\[[^\]]*\]$/.test(c[0].getAttribute("name"))?f:f[0];case "textarea":case "input":if("checkbox"===e||"radio"===e){b=0;for(a=c.length;a>b;++b)h=c[b],h.checked&&f.push(h.value);return"checkbox"===e?1<c.length?f:!!f.length:1<c.length?f[0]:!!f.length}if(0<c.length&&/\[[^\]]*\]$/.test(c[0].getAttribute("name"))){h=[];b=0;for(a=c.length;a>b;++b)h.push(c[b].value);return h}return a}},_valInArray:function(c,b){for(var a=0,e=b.length;e>a;++a)if(b[a]===c)return!0;return!1},_setValuesOfField:function(c, b){if(c){var a,e,d;a=c[0].nodeName.toLowerCase();e=c[0].getAttribute("type");switch(a){case "select":if(1<c.length)throw"Got multiple select elements with same name!";a=0;for(e=c[0].options.length;e>a;++a)d=c[0].options[a],d.selected=b instanceof Array?this._valInArray(d.value,b):d.value===b;break;case "textarea":case "input":if("checkbox"===e||"radio"===e){a=0;for(e=c.length;e>a;++a)d=c[a],d.checked=b instanceof Array?this._valInArray(d.value,b):1<c.length?d.value===b:!!b}else{if(1<c.length)throw"Got multiple input elements with same name!"; "file"!==e&&(c[0].value=b)}break;default:throw'Unsupported element: "'+a+'"!';}}}}}); Ink.createModule("Ink.Dom.Loaded",1,[],function(){return{_contexts:[],run:function(c,b){b||(b=c,c=window);for(var a,e=0,d=this._contexts.length;d>e;e++)if(this._contexts[e][0]===c){a=this._contexts[e][1];break}a||(a={cbQueue:[],win:c,doc:c.document,root:c.document.documentElement,done:!1,top:!0},a.handlers={checkState:Ink.bindEvent(this._checkState,this,a),poll:Ink.bind(this._poll,this,a)},this._contexts.push([c,a]));e=a.doc.addEventListener;a.add=e?"addEventListener":"attachEvent";a.rem=e?"removeEventListener": "detachEvent";a.pre=e?"":"on";a.det=e?"DOMContentLoaded":"onreadystatechange";a.wet=a.pre+"load";d=a.handlers.checkState;if("complete"===a.doc.readyState&&"about:blank"!=""+a.win.location)setTimeout(Ink.bind(function(){b.call(a.win,"lazy")},this),0);else{a.cbQueue.push(b);a.doc[a.add](a.det,d);a.win[a.add](a.wet,d);d=1;try{d=a.win.frameElement}catch(h){}if(!e&&a.root&&a.root.doScroll){try{a.top=!d}catch(g){}a.top&&this._poll(a)}}},_checkState:function(c,b){if(c&&("readystatechange"!==c.type||"complete"=== b.doc.readyState))("load"===c.type?b.win:b.doc)[b.rem](b.pre+c.type,b.handlers.checkState,!1),this._ready(b)},_poll:function(c){try{c.root.doScroll("left")}catch(b){return setTimeout(c.handlers.poll,50)}this._ready(c)},_ready:function(c){if(!c.done){c.done=!0;for(var b=0;c.cbQueue.length>b;++b)c.cbQueue[b].call(c.win);c.cbQueue=[]}}}}); Ink.createModule("Ink.Dom.Selector",1,[],function(){function c(a){return ia.test(a+"")}function b(){var a,b=[];return a=function(d,f){return b.push(d+=" ")>m.cacheLength&&delete a[b.shift()],a[d]=f}}function a(a){return a[x]=!0,a}function e(a){var b=A.createElement("div");try{return!!a(b)}catch(d){return!1}finally{}}function d(a,b,d,f){var e,c,g,k,h;if((b?b.ownerDocument||b:G)!==A&&H(b),b=b||A,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(E&&!f){if(e=ja.exec(a))if(g= e[1])if(9===k){if(c=b.getElementById(g),!c||!c.parentNode)return d;if(c.id===g)return d.push(c),d}else{if(b.ownerDocument&&(c=b.ownerDocument.getElementById(g))&&P(b,c)&&c.id===g)return d.push(c),d}else{if(e[2])return L.apply(d,b.getElementsByTagName(a)),d;if((g=e[3])&&y.getElementsByClassName&&b.getElementsByClassName)return L.apply(d,b.getElementsByClassName(g)),d}if(y.qsa&&!F.test(a)){if(e=!0,c=x,g=b,h=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){k=l(a);(e=b.getAttribute("id"))?c=e.replace(ka, "\\$&"):b.setAttribute("id",c);c="[id='"+c+"'] ";for(g=k.length;g--;)k[g]=c+p(k[g]);g=Z.test(a)&&b.parentNode||b;h=k.join(",")}if(h)try{return L.apply(d,g.querySelectorAll(h)),d}catch(n){}finally{e||b.removeAttribute("id")}}}var q;a:{a=a.replace(W,"$1");var s,r,t;e=l(a);if(!f&&1===e.length){if(q=e[0]=e[0].slice(0),2<q.length&&"ID"===(s=q[0]).type&&9===b.nodeType&&E&&m.relative[q[1].type]){if(b=(m.find.ID(s.matches[0].replace(M,N),b)||[])[0],!b){q=d;break a}a=a.slice(q.shift().value.length)}for(k= X.needsContext.test(a)?0:q.length;k--&&(s=q[k],!m.relative[r=s.type]);)if((t=m.find[r])&&(f=t(s.matches[0].replace(M,N),Z.test(q[0].type)&&b.parentNode||b))){if(q.splice(k,1),a=f.length&&p(q),!a){q=(L.apply(d,f),d);break a}break}}q=(D(a,e)(f,b,!E,d,Z.test(a)),d)}return q}function h(a,b){var d=b&&a,f=d&&(~b.sourceIndex||ba)-(~a.sourceIndex||ba);if(f)return f;if(d)for(;d=d.nextSibling;)if(d===b)return-1;return a?1:-1}function g(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type=== a}}function f(a){return function(b){var d=b.nodeName.toLowerCase();return("input"===d||"button"===d)&&b.type===a}}function k(b){return a(function(d){return d=+d,a(function(a,f){for(var e,c=b([],a.length,d),g=c.length;g--;)a[e=c[g]]&&(a[e]=!(f[e]=a[e]))})})}function l(a,b){var f,e,c,g,k,h,l;if(k=ca[a+" "])return b?0:k.slice(0);k=a;h=[];for(l=m.preFilter;k;){(!f||(e=la.exec(k)))&&(e&&(k=k.slice(e[0].length)||k),h.push(c=[]));f=!1;(e=ma.exec(k))&&(f=e.shift(),c.push({value:f,type:e[0].replace(W," ")}), k=k.slice(f.length));for(g in m.filter)!(e=X[g].exec(k))||l[g]&&!(e=l[g](e))||(f=e.shift(),c.push({value:f,type:g,matches:e}),k=k.slice(f.length));if(!f)break}return b?k.length:k?d.error(a):ca(a,h).slice(0)}function p(a){for(var b=0,d=a.length,f="";d>b;b++)f+=a[b].value;return f}function n(a,b,d){var f=b.dir,e=d&&"parentNode"===f,c=na++;return b.first?function(b,d,c){for(;b=b[f];)if(1===b.nodeType||e)return a(b,d,c)}:function(b,d,g){var k,h,l,n=I+" "+c;if(g)for(;b=b[f];){if((1===b.nodeType||e)&&a(b, d,g))return!0}else for(;b=b[f];)if(1===b.nodeType||e)if(l=b[x]||(b[x]={}),(h=l[f])&&h[0]===n){if(!0===(k=h[1])||k===v)return!0===k}else if(h=l[f]=[n],h[1]=a(b,d,g)||v,!0===h[1])return!0}}function s(a){return 1<a.length?function(b,d,f){for(var e=a.length;e--;)if(!a[e](b,d,f))return!1;return!0}:a[0]}function q(a,b,d,f,e){for(var c,g=[],k=0,h=a.length,l=null!=b;h>k;k++)(c=a[k])&&(!d||d(c,f,e))&&(g.push(c),l&&b.push(k));return g}function r(b,f,e,c,g,k){return c&&!c[x]&&(c=r(c)),g&&!g[x]&&(g=r(g,k)),a(function(a, k,h,l){var n,p,s=[],r=[],t=k.length,m;if(!(m=a)){m=f||"*";for(var u=h.nodeType?[h]:h,B=[],w=0,v=u.length;v>w;w++)d(m,u[w],B);m=B}m=!b||!a&&f?m:q(m,s,b,h,l);u=e?g||(a?b:t||c)?[]:k:m;if(e&&e(m,u,h,l),c){n=q(u,r);c(n,[],h,l);for(h=n.length;h--;)(p=n[h])&&(u[r[h]]=!(m[r[h]]=p))}if(a){if(g||b){if(g){n=[];for(h=u.length;h--;)(p=u[h])&&n.push(m[h]=p);g(null,u=[],n,l)}for(h=u.length;h--;)(p=u[h])&&-1<(n=g?T.call(a,p):s[h])&&(a[n]=!(k[n]=p))}}else u=q(u===k?u.splice(t,u.length):u),g?g(null,k,u,l):L.apply(k, u)})}function t(a){var b,d,f,e=a.length,c=m.relative[a[0].type];d=c||m.relative[" "];for(var g=c?1:0,k=n(function(a){return a===b},d,!0),h=n(function(a){return-1<T.call(b,a)},d,!0),l=[function(a,d,f){return!c&&(f||d!==z)||((b=d).nodeType?k(a,d,f):h(a,d,f))}];e>g;g++)if(d=m.relative[a[g].type])l=[n(s(l),d)];else{if(d=m.filter[a[g].type].apply(null,a[g].matches),d[x]){for(f=++g;e>f&&!m.relative[a[f].type];f++);return r(1<g&&s(l),1<g&&p(a.slice(0,g-1)).replace(W,"$1"),d,f>g&&t(a.slice(g,f)),e>f&&t(a= a.slice(f)),e>f&&p(a))}l.push(d)}return s(l)}function u(b,f){var e=0,c=0<f.length,g=0<b.length,k=function(a,k,h,l,n){var p,s,r=[],t=0,u="0",B=a&&[],w=null!=n,aa=z,x=a||g&&m.find.TAG("*",n&&k.parentNode||k),y=I+=null==aa?1:Math.random()||0.1;for(w&&(z=k!==A&&k,v=e);null!=(n=x[u]);u++){if(g&&n){for(p=0;s=b[p++];)if(s(n,k,h)){l.push(n);break}w&&(I=y,v=++e)}c&&((n=!s&&n)&&t--,a&&B.push(n))}if(t+=u,c&&u!==t){for(p=0;s=f[p++];)s(B,r,k,h);if(a){if(0<t)for(;u--;)B[u]||r[u]||(r[u]=oa.call(l));r=q(r)}L.apply(l, r);w&&!a&&0<r.length&&1<t+f.length&&d.uniqueSort(l)}return w&&(I=y,z=aa),B};return c?a(k):k}function B(){}var w,v,m,U,Q,D,z,R,J,H,A,C,E,F,K,S,P,x="sizzle"+-new Date,G=window.document,y={},I=0,na=0,da=b(),ca=b(),ea=b(),V=!1,Y=function(){return 0},ba=-2147483648,O=[],oa=O.pop,pa=O.push,L=O.push,fa=O.slice,T=O.indexOf||function(a){for(var b=0,d=this.length;d>b;b++)if(this[b]===a)return b;return-1},ga="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ha="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ ga+")|)|)[\\x20\\t\\r\\n\\f]*\\]",$=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",W=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,la=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ma=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,qa=RegExp($),ra=RegExp("^"+ga+"$"),X={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+ "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+ha),PSEUDO:RegExp("^"+$),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Z=/[\x20\t\r\n\f]*[+~]/,ia=/^[^{]+\{\s*\[native code/, ja=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/^(?:input|select|textarea|button)$/i,ta=/^h\d$/i,ka=/'|\\/g,ua=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,M=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,N=function(a,b){var d="0x"+b-65536;return d!==d?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(55296|d>>10,56320|1023&d)};try{L.apply(O=fa.call(G.childNodes),G.childNodes),O[G.childNodes.length].nodeType}catch(va){L={apply:O.length?function(a,b){pa.apply(a,fa.call(b))}:function(a,b){for(var d=a.length, f=0;a[d++]=b[f++];);a.length=d-1}}}Q=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};H=d.setDocument=function(a){var b=a?a.ownerDocument||a:G;return b!==A&&9===b.nodeType&&b.documentElement?(A=b,C=b.documentElement,E=!Q(b),y.getElementsByTagName=e(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),y.attributes=e(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!== a&&"string"!==a}),y.getElementsByClassName=e(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),y.getByName=e(function(a){a.id=x+0;a.appendChild(A.createElement("a")).setAttribute("name",x);a.appendChild(A.createElement("i")).setAttribute("name",x);C.appendChild(a);var d=b.getElementsByName&&b.getElementsByName(x).length===2+ b.getElementsByName(x+0).length;return C.removeChild(a),d}),y.sortDetached=e(function(a){return a.compareDocumentPosition&&1&a.compareDocumentPosition(A.createElement("div"))}),m.attrHandle=e(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},y.getByName?(m.find.ID=function(a,b){if("undefined"!== typeof b.getElementById&&E){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}},m.filter.ID=function(a){var b=a.replace(M,N);return function(a){return a.getAttribute("id")===b}}):(m.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&E){var d=b.getElementById(a);return d?d.id===a||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").value===a?[d]:void 0:[]}},m.filter.ID=function(a){var b=a.replace(M,N);return function(a){return(a="undefined"!==typeof a.getAttributeNode&& a.getAttributeNode("id"))&&a.value===b}}),m.find.TAG=y.getElementsByTagName?function(a,b){return"undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName(a):void 0}:function(a,b){var d,f=[],e=0,c=b.getElementsByTagName(a);if("*"===a){for(;d=c[e++];)1===d.nodeType&&f.push(d);return f}return c},m.find.NAME=y.getByName&&function(a,b){return"undefined"!==typeof b.getElementsByName?b.getElementsByName(name):void 0},m.find.CLASS=y.getElementsByClassName&&function(a,b){return"undefined"!==typeof b.getElementsByClassName&& E?b.getElementsByClassName(a):void 0},K=[],F=[":focus"],(y.qsa=c(b.querySelectorAll))&&(e(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||F.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||F.push(":checked")}),e(function(a){a.innerHTML="<input type='hidden' i=''/>";a.querySelectorAll("[i^='']").length&&F.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.querySelectorAll(":enabled").length|| F.push(":enabled",":disabled");a.querySelectorAll("*,:x");F.push(",.*:")})),(y.matchesSelector=c(S=C.matchesSelector||C.mozMatchesSelector||C.webkitMatchesSelector||C.oMatchesSelector||C.msMatchesSelector))&&e(function(a){y.disconnectedMatch=S.call(a,"div");S.call(a,"[s!='']:x");K.push("!=",$)}),F=RegExp(F.join("|")),K=K.length&&RegExp(K.join("|")),P=c(C.contains)||C.compareDocumentPosition?function(a,b){var d=9===a.nodeType?a.documentElement:a,f=b&&b.parentNode;return a===f||!(!f||1!==f.nodeType|| !(d.contains?d.contains(f):a.compareDocumentPosition&&16&a.compareDocumentPosition(f)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},Y=C.compareDocumentPosition?function(a,d){if(a===d)return V=!0,0;var f=d.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(d);return f?1&f||R&&d.compareDocumentPosition(a)===f?a===b||P(G,a)?-1:d===b||P(G,d)?1:J?T.call(J,a)-T.call(J,d):0:4&f?-1:1:a.compareDocumentPosition?-1:1}:function(a,d){var f,e=0;f=a.parentNode; var c=d.parentNode,g=[a],k=[d];if(a===d)return V=!0,0;if(!f||!c)return a===b?-1:d===b?1:f?-1:c?1:0;if(f===c)return h(a,d);for(f=a;f=f.parentNode;)g.unshift(f);for(f=d;f=f.parentNode;)k.unshift(f);for(;g[e]===k[e];)e++;return e?h(g[e],k[e]):g[e]===G?-1:k[e]===G?1:0},A):A};d.matches=function(a,b){return d(a,null,null,b)};d.matchesSelector=function(a,b){if((a.ownerDocument||a)!==A&&H(a),b=b.replace(ua,"='$1']"),y.matchesSelector&&E&&(!K||!K.test(b))&&!F.test(b))try{var f=S.call(a,b);if(f||y.disconnectedMatch|| a.document&&11!==a.document.nodeType)return f}catch(e){}return 0<d(b,A,null,[a]).length};d.contains=function(a,b){return(a.ownerDocument||a)!==A&&H(a),P(a,b)};d.attr=function(a,b){var d;return(a.ownerDocument||a)!==A&&H(a),E&&(b=b.toLowerCase()),(d=m.attrHandle[b])?d(a):!E||y.attributes?a.getAttribute(b):((d=a.getAttributeNode(b))||a.getAttribute(b))&&!0===a[b]?b:d&&d.specified?d.value:null};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};d.uniqueSort=function(a){var b, d=[],f=0,e=0;if(V=!y.detectDuplicates,R=!y.sortDetached,J=!y.sortStable&&a.slice(0),a.sort(Y),V){for(;b=a[e++];)b===a[e]&&(f=d.push(e));for(;f--;)a.splice(d[f],1)}return a};U=d.getText=function(a){var b,d="",f=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)d+=U(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[f];f++)d+=U(b);return d};m=d.selectors={cacheLength:50,createPseudo:a,match:X,find:{},relative:{">":{dir:"parentNode", first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(M,N),a[3]=(a[4]||a[5]||"").replace(M,N),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||d.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&d.error(a[0]),a},PSEUDO:function(a){var b,d=!a[5]&&a[2];return X.CHILD.test(a[0])? null:(a[4]?a[2]=a[4]:d&&qa.test(d)&&(b=l(d,!0))&&(b=d.indexOf(")",d.length-b)-d.length)&&(a[0]=a[0].slice(0,b),a[2]=d.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(M,N).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=da[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&da(a,function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")|| "")})},ATTR:function(a,b,f){return function(e){e=d.attr(e,a);return null==e?"!="===b:b?(e+="","="===b?e===f:"!="===b?e!==f:"^="===b?f&&0===e.indexOf(f):"*="===b?f&&-1<e.indexOf(f):"$="===b?f&&e.slice(-f.length)===f:"~="===b?-1<(" "+e+" ").indexOf(f):"|="===b?e===f||e.slice(0,f.length+1)===f+"-":!1):!0}},CHILD:function(a,b,d,f,e){var c="nth"!==a.slice(0,3),g="last"!==a.slice(-4),k="of-type"===b;return 1===f&&0===e?function(a){return!!a.parentNode}:function(b,d,h){var l,n,q,p,s;d=c!==g?"nextSibling": "previousSibling";var r=b.parentNode,m=k&&b.nodeName.toLowerCase();h=!h&&!k;if(r){if(c){for(;d;){for(n=b;n=n[d];)if(k?n.nodeName.toLowerCase()===m:1===n.nodeType)return!1;s=d="only"===a&&!s&&"nextSibling"}return!0}if(s=[g?r.firstChild:r.lastChild],g&&h){h=r[x]||(r[x]={});l=h[a]||[];p=l[0]===I&&l[1];q=l[0]===I&&l[2];for(n=p&&r.childNodes[p];n=++p&&n&&n[d]||(q=p=0)||s.pop();)if(1===n.nodeType&&++q&&n===b){h[a]=[I,p,q];break}}else if(h&&(l=(b[x]||(b[x]={}))[a])&&l[0]===I)q=l[1];else for(;(n=++p&&n&& n[d]||(q=p=0)||s.pop())&&((k?n.nodeName.toLowerCase()!==m:1!==n.nodeType)||!++q||(h&&((n[x]||(n[x]={}))[a]=[I,q]),n!==b)););return q-=e,q===f||0===q%f&&0<=q/f}}},PSEUDO:function(b,f){var e,c=m.pseudos[b]||m.setFilters[b.toLowerCase()]||d.error("unsupported pseudo: "+b);return c[x]?c(f):1<c.length?(e=[b,b,"",f],m.setFilters.hasOwnProperty(b.toLowerCase())?a(function(a,b){for(var d,e=c(a,f),g=e.length;g--;)d=T.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return c(a,0,e)}):c}},pseudos:{not:a(function(b){var d= [],f=[],e=D(b.replace(W,"$1"));return e[x]?a(function(a,b,d,f){var c;d=e(a,null,f,[]);for(f=a.length;f--;)(c=d[f])&&(a[f]=!(b[f]=c))}):function(a,b,c){return d[0]=a,e(d,null,c,f),!f.pop()}}),has:a(function(a){return function(b){return 0<d(a,b).length}}),contains:a(function(a){return function(b){return-1<(b.textContent||b.innerText||U(b)).indexOf(a)}}),lang:a(function(a){return ra.test(a||"")||d.error("unsupported lang: "+a),a=a.replace(M,N).toLowerCase(),function(b){var d;do if(d=E?b.lang:b.getAttribute("xml:lang")|| b.getAttribute("lang"))return d=d.toLowerCase(),d===a||0===d.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===C},focus:function(a){return a===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"=== b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!m.pseudos.empty(a)},header:function(a){return ta.test(a.nodeName)},input:function(a){return sa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b; return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,d){return[0>d?d+b:d]}),even:k(function(a,b){for(var d=0;b>d;d+=2)a.push(d);return a}),odd:k(function(a,b){for(var d=1;b>d;d+=2)a.push(d);return a}),lt:k(function(a,b,d){for(b=0>d?d+b:d;0<=--b;)a.push(b);return a}),gt:k(function(a,b,d){for(d=0>d?d+b:d;b>++d;)a.push(d);return a})}};for(w in{radio:!0, checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[w]=g(w);for(w in{submit:!0,reset:!0})m.pseudos[w]=f(w);return D=d.compile=function(a,b){var d,f=[],e=[],c=ea[a+" "];if(!c){b||(b=l(a));for(d=b.length;d--;)c=t(b[d]),c[x]?f.push(c):e.push(c);c=ea(a,u(e,f))}return c},m.pseudos.nth=m.pseudos.eq,B.prototype=m.filters=m.pseudos,m.setFilters=new B,y.sortStable=x.split("").sort(Y).join("")===x,H(),[0,0].sort(Y),y.detectDuplicates=V,{select:d,matches:d.matches,matchesSelector:d.matchesSelector}}); Ink.createModule("Ink.Dom.Browser","1",[],function(){var c={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser();this.setDimensions();this.setReferrer()},setDimensions:function(){var b=0,a=0;"number"==typeof window.innerWidth?(b=window.innerWidth,a=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(b=document.documentElement.clientWidth,a=document.documentElement.clientHeight): document.body&&(document.body.clientWidth||document.body.clientHeight)&&(b=document.body.clientWidth,a=document.body.clientHeight);this.windowWidth=b;this.windowHeight=a},setReferrer:function(){this.referrer=void 0!==document.referrer?0<document.referrer.length?window.escape(document.referrer):!1:!1},detectBrowser:function(){var b=navigator.userAgent;if(this.userAgent=b,b=b.toLowerCase(),/applewebkit\//.test(b))/chrome\//.test(b)?(this.CHROME=!0,this.model="chrome",this.version=b.replace(/(.*)chrome\/([^\s]+)(.*)/, "$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit"):(this.SAFARI=!0,this.model="safari",this.version=b.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2"),this.cssPrefix="-webkit-",this.domPrefix="Webkit");else if(/opera/.test(b))this.OPERA=!0,this.model="opera",this.version=b.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(b))this.KONQUEROR=!0,this.model="konqueror",this.version=b.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-", this.domPrefix="Khtml";else if(/msie\ /.test(b))this.IE=!0,this.model="ie",this.version=b.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(b)){this.GECKO=!0;var a=RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");a.test(b)?(this.model=b.match(a)[1],this.version=b.replace(RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2")):(this.model="mozilla",a=/(.*)rv:([^)]+)(.*)/, a.test(b)&&(this.version=b.replace(a,"$2")));this.cssPrefix="-moz-";this.domPrefix="Moz"}},debug:function(){var b;b="known browsers: (ie, gecko, opera, safari, konqueror) \n"+([this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n");b+="model -> "+this.model+"\n";b+="version -> "+this.version+"\n";b=b+"\n"+("original UA -> "+this.userAgent);alert(b)}};return c.init(),c}); Ink.createModule("Ink.Util.Url","1",[],function(){return{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(c,b){var a,e,d,h=-1!==c.indexOf("?"),g=[c];for(e in b)b.hasOwnProperty(e)&&(h?a="&":(a="?",h=!0),d=b[e],"number"==typeof d||d||(d=""),g=g.concat([a,encodeURIComponent(e),"=",encodeURIComponent(d)]));return g.join("")},getQueryString:function(c){var b;b=c&&void 0!==c?c:this.getUrl();c={};if(b.match(/\?(.+)/i)&& (b=b.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2"),0<b.length)){b=b.split(/[;&]/);for(var a=0;b.length>a;a++){var e=b[a].split("=");c[decodeURIComponent(e[0])]=void 0!==e[1]&&e[1]?decodeURIComponent(e[1]):!1}}return c},getAnchor:function(c){c=c&&void 0!==c?c:this.getUrl();return c.match(/#(.+)/)&&c.replace(/([^#]+)#(.*)/,"$2"),!1},getAnchorString:function(c){var b;b=c&&void 0!==c?c:this.getUrl();c={};if(b.match(/#(.+)/i)&&(b=b.replace(/^([^#]+)#(.*)?/g,"$2"),0<b.length)){b=b.split(/[;&]/);for(var a=0;b.length> a;a++){var e=b[a].split("=");c[decodeURIComponent(e[0])]=void 0!==e[1]&&e[1]?decodeURIComponent(e[1]):!1}}return c},parseUrl:function(c){var b={};if(c&&void 0!==c&&"string"==typeof c){if(c.match(/^([^:]+):\/\//i)){var a=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;c.match(a)&&(b.scheme=c.replace(a,"$1"),b.host=c.replace(a,"$2"),b.path="/"+c.replace(a,"$3"),b.query=c.replace(a,"$4")||!1,b.fragment=c.replace(a,"$5")||!1)}else{var a=/^([^\?]+)\?([^#]+)#(.*)/i,e=/^([^\?]+)\?([^#]+)#?/i,d=/^([^\?]+)\??/i; c.match(a)?(b.scheme=!1,b.host=!1,b.path=c.replace(a,"$1"),b.query=c.replace(a,"$2"),b.fragment=c.replace(a,"$3")):c.match(e)?(b.scheme=!1,b.host=!1,b.path=c.replace(e,"$1"),b.query=c.replace(e,"$2"),b.fragment=!1):c.match(d)&&(b.scheme=!1,b.host=!1,b.path=c.replace(d,"$1"),b.query=!1,b.fragment=!1)}b.host&&(c=/^(.*)\:(\d+)$/i,b.host.match(c)?(a=b.host,b.host=a.replace(c,"$1"),b.port=a.replace(c,"$2")):b.port=!1,b.host.match(/@/i)&&(c=b.host,b.host=c.split("@")[1],c=c.split("@")[0],c.match(/\:/)? (b.user=c.split(":")[0],b.pass=c.split(":")[1]):(b.user=c,b.pass=!1)))}return b},currentScriptElement:function(c){var b=document.getElementsByTagName("script");if(void 0===c)return 0<b.length?b[b.length-1]:!1;var a=!1;c=RegExp(""+c,"i");for(var e=0,d=b.length;d>e;e++)if(a=b[e],c.test(a.src))return a;return!1},_debug:function(){}}}); Ink.createModule("Ink.Util.Swipe","1",["Ink.Dom.Event_1"],function(c){var b=function(a,b){this._options=Ink.extendObj({callback:void 0,forceAxis:void 0,maxDist:void 0,maxDuration:void 0,minDist:void 0,minDuration:void 0,stopEvents:!0,storeGesture:!1},b||{});this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};this._element=Ink.i(a);this._init()};return b._supported="ontouchstart"in document.documentElement,b.prototype={_init:function(){var a= document.body;c.observe(a,"touchstart",this._handlers.down);this._options.storeGesture&&c.observe(a,"touchmove",this._handlers.move);c.observe(a,"touchend",this._handlers.up);this._isOn=!1},_isMeOrParent:function(a,b){if(a){do{if(a===b)return!0;a=a.parentNode}while(a);return!1}},_onDown:function(a){1===event.changedTouches.length&&this._isMeOrParent(a.target,this._element)&&(!0===this._options.stopEvents&&c.stop(a),a=a.changedTouches[0],this._isOn=!0,this._target=a.target,this._t0=(new Date).valueOf(), this._p0=[a.pageX,a.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0]))},_onMove:function(a){if(this._isOn&&1===event.changedTouches.length){!0===this._options.stopEvents&&c.stop(a);a=a.changedTouches[0];var b=0.001*((new Date).valueOf()-this._t0);this._gesture.push([a.pageX,a.pageY]);this._time.push(b)}},_onUp:function(a){if(this._isOn&&1===event.changedTouches.length){this._options.stopEvents&&c.stop(a);a=a.changedTouches[0];this._isOn=!1;var b=[a.pageX,a.pageY],d=0.001* ((new Date).valueOf()-this._t0),b=[b[0]-this._p0[0],b[1]-this._p0[1]],h=Math.sqrt(b[0]*b[0]+b[1]*b[1]),g=Math.abs(b[0])>Math.abs(b[1])?"x":"y",f=this._options;f.minDist&&f.minDist>h||(f.maxDist&&h>f.maxDist||f.minDuration&&f.minDuration>d||f.maxDuration&&d>f.maxDuration||f.forceAxis&&g!==f.forceAxis)||(a={upEvent:a,elementId:this._element.id,duration:d,dr:b,dist:h,axis:g,target:this._target},this._options.storeGesture&&(a.gesture=this._gesture,a.time=this._time),this._options.callback(this,a))}}}, b}); Ink.createModule("Ink.Util.String","1",[],function(){var c={_chars:'&;\u00c3 ;\u00c3\u00a1;\u00c3\u00a2;\u00c3\u00a3;\u00c3\u00a4;\u00c3\u00a5;\u00c3\u00a6;\u00c3\u00a7;\u00c3\u00a8;\u00c3\u00a9;\u00c3\u00aa;\u00c3\u00ab;\u00c3\u00ac;\u00c3\u00ad;\u00c3\u00ae;\u00c3\u00af;\u00c3\u00b0;\u00c3\u00b1;\u00c3\u00b2;\u00c3\u00b3;\u00c3\u00b4;\u00c3\u00b5;\u00c3\u00b6;\u00c3\u00b8;\u00c3\u00b9;\u00c3\u00ba;\u00c3\u00bb;\u00c3\u00bc;\u00c3\u00bd;\u00c3\u00be;\u00c3\u00bf;\u00c3\u20ac;\u00c3\u0081;\u00c3\u201a;\u00c3\u0192;\u00c3\u201e;\u00c3\u2026;\u00c3\u2020;\u00c3\u2021;\u00c3\u02c6;\u00c3\u2030;\u00c3\u0160;\u00c3\u2039;\u00c3\u0152;\u00c3\u008d;\u00c3\u017d;\u00c3\u008f;\u00c3\u0090;\u00c3\u2018;\u00c3\u2019;\u00c3\u201c;\u00c3\u201d;\u00c3\u2022;\u00c3\u2013;\u00c3\u02dc;\u00c3\u2122;\u00c3\u0161;\u00c3\u203a;\u00c3\u0153;\u00c3\u009d;\u00c3\u017e;\u00e2\u201a\u00ac;";\u00c3\u0178;<;>;\u00c2\u00a2;\u00c2\u00a3;\u00c2\u00a4;\u00c2\u00a5;\u00c2\u00a6;\u00c2\u00a7;\u00c2\u00a8;\u00c2\u00a9;\u00c2\u00aa;\u00c2\u00ab;\u00c2\u00ac;\u00c2\u00ad;\u00c2\u00ae;\u00c2\u00af;\u00c2\u00b0;\u00c2\u00b1;\u00c2\u00b2;\u00c2\u00b3;\u00c2\u00b4;\u00c2\u00b5;\u00c2\u00b6;\u00c2\u00b7;\u00c2\u00b8;\u00c2\u00b9;\u00c2\u00ba;\u00c2\u00bb;\u00c2\u00bc;\u00c2\u00bd;\u00c2\u00be'.split(";"),_entities:"amp agrave aacute acirc atilde auml aring aelig ccedil egrave eacute ecirc euml igrave iacute icirc iuml eth ntilde ograve oacute ocirc otilde ouml oslash ugrave uacute ucirc uuml yacute thorn yuml Agrave Aacute Acirc Atilde Auml Aring AElig Ccedil Egrave Eacute Ecirc Euml Igrave Iacute Icirc Iuml ETH Ntilde Ograve Oacute Ocirc Otilde Ouml Oslash Ugrave Uacute Ucirc Uuml Yacute THORN euro quot szlig lt gt cent pound curren yen brvbar sect uml copy ordf laquo not shy reg macr deg plusmn sup2 sup3 acute micro para middot cedil sup1 ordm raquo frac14 frac12 frac34".split(" "), _accentedChars:"\u00c3 ;\u00c3\u00a1;\u00c3\u00a2;\u00c3\u00a3;\u00c3\u00a4;\u00c3\u00a5;\u00c3\u00a8;\u00c3\u00a9;\u00c3\u00aa;\u00c3\u00ab;\u00c3\u00ac;\u00c3\u00ad;\u00c3\u00ae;\u00c3\u00af;\u00c3\u00b2;\u00c3\u00b3;\u00c3\u00b4;\u00c3\u00b5;\u00c3\u00b6;\u00c3\u00b9;\u00c3\u00ba;\u00c3\u00bb;\u00c3\u00bc;\u00c3\u00a7;\u00c3\u00b1;\u00c3\u20ac;\u00c3\u0081;\u00c3\u201a;\u00c3\u0192;\u00c3\u201e;\u00c3\u2026;\u00c3\u02c6;\u00c3\u2030;\u00c3\u0160;\u00c3\u2039;\u00c3\u0152;\u00c3\u008d;\u00c3\u017d;\u00c3\u008f;\u00c3\u2019;\u00c3\u201c;\u00c3\u201d;\u00c3\u2022;\u00c3\u2013;\u00c3\u2122;\u00c3\u0161;\u00c3\u203a;\u00c3\u0153;\u00c3\u2021;\u00c3\u2018".split(";"), _accentedRemovedChars:"aaaaaaeeeeiiiiooooouuuucnAAAAAAEEEEIIIIOOOOOUUUUCN".split(""),_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(b,a){var e=a?/(^|\s)(\w)(\S{2,})/:/(^|\s)(\w)(\S{2,})/g;return b?(b+"").replace(e,function(a,b,e,f){return b+e.toUpperCase()+f.toLowerCase()}):b},trim:function(b){return"string"==typeof b?b.replace(/^\s+|\s+$|\n+$/g,""):b},stripTags:function(b,a){if(a&&"string"==typeof a){for(var e=c.trim(a).split(","),d=[],h=!1,g=0;e.length> g;g++)""!==c.trim(e[g])&&(h=c.trim(e[g].replace(/(\<|\>)/g,"").replace(/\s/,"")),d.push("(<"+h+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+h+">)"));e=d.join("|");e=RegExp(e,"i");d=b.match(/<[^>]*>/g);for(h=0;d.length>h;h++)d[h].match(e)||(b=b.replace(RegExp(d[h],"gm"),""));return b}return b.replace(/\<[^\>]+\>/g,"")},htmlEntitiesEncode:function(b){if(b&&b.replace)for(var a=!1,e=0;c._chars.length>e;e++)a=RegExp(c._chars[e],"gm"),b=b.replace(a,"&"+c._entities[e]+";");return b},htmlEntitiesDecode:function(b){if(b&& b.replace){for(var a=!1,e=0;c._entities.length>e;e++)a=RegExp("&"+c._entities[e]+";","gm"),b=b.replace(a,c._chars[e]);b=b.replace(/&#[^;]+;?/g,function(a){return"x"===a.charAt(2)?String.fromCharCode(parseInt(a.substring(3),16)):String.fromCharCode(parseInt(a.substring(2),10))})}return b},utf8Encode:function(b){b=b.replace(/\r\n/g,"\n");for(var a="",e=0;b.length>e;e++){var d=b.charCodeAt(e);128>d?a+=String.fromCharCode(d):127<d&&2048>d?(a+=String.fromCharCode(192|d>>6),a+=String.fromCharCode(128|63& d)):(a+=String.fromCharCode(224|d>>12),a+=String.fromCharCode(128|63&d>>6),a+=String.fromCharCode(128|63&d))}return a},shortString:function(b,a){for(var e=b.split(" "),d="",c=0;e.length>c;c++){if((d+e[c]+" ").length>=a){d+="&hellip;";break}d+=e[c]+" "}return d},truncateString:function(b,a){return b.length-1>a?b.substr(0,a-1)+"\u00e2\u20ac\u00a6":b},utf8Decode:function(b){for(var a="",e=0,d=0,c=0,g=0;b.length>e;)d=b.charCodeAt(e),128>d?(a+=String.fromCharCode(d),e++):191<d&&224>d?(c=b.charCodeAt(e+ 1),a+=String.fromCharCode((31&d)<<6|63&c),e+=2):(c=b.charCodeAt(e+1),g=b.charCodeAt(e+2),a+=String.fromCharCode((15&d)<<12|(63&c)<<6|63&g),e+=3);return a},removeAccentedChars:function(b){for(var a=!1,e=0;c._accentedChars.length>e;e++)a=RegExp(c._accentedChars[e],"gm"),b=b.replace(a,""+c._accentedRemovedChars[e]);return b},substrCount:function(b,a){return b?b.split(a).length-1:0},evalJSON:function(b,a){if(void 0===a||null===a||c.isJSON(b))try{return"undefined"!=typeof JSON&&void 0!==JSON.parse?JSON.parse(b): eval("("+b+")")}catch(e){throw Error("ERROR: Bad JSON string...");}},isJSON:function(b){return b=b.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""),/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(b)},htmlEscapeUnsafe:function(b){var a=c._htmlUnsafeChars;return null!=b?(b+"").replace(/[<>&'"]/g,function(b){return a[b]}):b},normalizeWhitespace:function(b){return null!=b?c.trim((b+"").replace(/\s+/g," ")):b},toUnicode:function(b){if("string"==typeof b){for(var a="",e=!1,d=!1,c=b.length,g=0;c>g;){if(e=b.charCodeAt(g), 32<=e&&126>=e||8==e||9==e||10==e||12==e||13==e||32==e||34==e||47==e||58==e||92==e)d=8==e?"\\b":9==e?"\\t":10==e?"\\n":12==e?"\\f":13==e?"\\r":b.charAt(g);else{for(d=b.charCodeAt(g).toString(16)+"";4>d.length;)d="0"+d;d="\\u"+d}a+=d;g++}return a}},escape:function(b){b=b.charCodeAt(0).toString(16).split("");if(3>b.length){for(;2>b.length;)b.unshift("0");b.unshift("x")}else{for(;4>b.length;)b.unshift("0");b.unshift("u")}return b.unshift("\\"),b.join("")},unescape:function(b){var a=b.lastIndexOf("0"), a=-1===a?2:Math.min(a,2);b=b.substring(a);b=parseInt(b,16);return String.fromCharCode(b)},escapeText:function(b,a){void 0===a&&(a=["[","]","'",","]);for(var e,d,h=[],g=0,f=b.length;f>g;++g)e=b[g],d=e.charCodeAt(0),(32>d||126<d&&-1===a.indexOf(e))&&(e=c.escape(e)),h.push(e);return h.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(b){for(var a;a=c.escapedCharRegex.exec(b);)a=a[0],b=b.replace(a,c.unescape(a)),c.escapedCharRegex.lastIndex=0;return b},strcmp:function(b, a){return b===a?0:b>a?1:-1},packetize:function(b,a){for(var c,d=b.length,h=Array(Math.ceil(d/a)),g=b.split(""),f=0;d;)c=Math.min(a,d),h[f++]=g.splice(0,c).join(""),d-=c;return h}};return c}); Ink.createModule("Ink.Util.Json","1",[],function(){var c=Function.prototype.call,b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;Date.prototype.toISOString&&Ink.bind(c,Date.prototype.toISOString);return{_nativeJSON:window.JSON||null,_convertToUnicode:!1,_escape:function(a){var b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/([\x00-\x1f\\"])/g,function(a,c){var g= b[c];return g?g:(g=c.charCodeAt(),"\\u00"+Math.floor(g/16).toString(16)+(g%16).toString(16))})),a},_toUnicode:function(a){if(this._convertToUnicode){for(var b="",d=!1,c=!1,g=0,f=a.length;f>g;){if(d=a.charCodeAt(g),32<=d&&126>=d||8===d||9===d||10===d||12===d||13===d||32===d||34===d||47===d||58===d||92===d)c=34===d||92===d||47===d?"\\"+a.charAt(g):8===d?"\\b":9===d?"\\t":10===d?"\\n":12===d?"\\f":13===d?"\\r":a.charAt(g);else if(this._convertToUnicode){for(c=a.charCodeAt(g).toString(16)+"";4>c.length;)c= "0"+c;c="\\u"+c}else c=a.charAt(g);b+=c;g++}return b}return this._escape(a)},_stringifyValue:function(a){if("string"==typeof a)return'"'+this._toUnicode(a)+'"';if("number"!=typeof a||!isNaN(a)&&isFinite(a)){if(void 0===a||null===a)return"null";if("function"==typeof a.toJSON)return a=a.toJSON(),"string"==typeof a?'"'+this._escape(a)+'"':this._escape(""+a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("function"==typeof a)return"null";if(a.constructor===Date)throw"";if(a.constructor===Array){for(var b= "",d=0,c=a.length;c>d;d++)0<d&&(b+=","),b+=this._stringifyValue(a[d]);return"["+b+"]"}b="";for(d in a)({}).hasOwnProperty.call(a,d)&&(""!==b&&(b+=","),b+='"'+this._escape(d)+'": '+this._stringifyValue(a[d]));return"{"+b+"}"}return"null"},stringify:function(a,b){return this._convertToUnicode=!!b,!this._convertToUnicode&&this._nativeJSON?this._nativeJSON.stringify(a):this._stringifyValue(a)},parse:function(a,c){function d(a,b){var k,h,p=a[b];if(p&&"object"==typeof p)for(k in p)Object.prototype.hasOwnProperty.call(p, k)&&(h=d(p,k),void 0!==h?p[k]=h:delete p[k]);return c.call(a,b,p)}var h;if(a+="",b.lastIndex=0,b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return h=eval("("+a+")"),"function"==typeof c?d({"":h},""):h;throw new SyntaxError("JSON.parse");}}}); Ink.createModule("Ink.Util.I18n","1",[],function(){var c=/\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g,b=function(a,b){return"function"==typeof a?a.apply(this,b):void 0!==typeof a?a:""},a=function(b,d,c){return this instanceof a?(this.reset().lang(d).testMode(c).append(b||{},d),void 0):new a(b,d,c)};return a.prototype={reset:function(){return this._dicts=[],this._dict={},this._testMode=!1,this._lang=this._gLang,this},append:function(a){return this._dicts.push(a),this._dict=Ink.extendObj(this._dict, a[this._lang]),this},lang:function(a){if(!arguments.length)return this._lang;if(a&&this._lang!==a){this._lang=a;this._dict={};for(var b=0,c=this._dicts.length;c>b;b++)this._dict=Ink.extendObj(this._dict,this._dicts[b][a]||{})}return this},testMode:function(a){return arguments.length?(void 0!==a&&(this._testMode=!!a),this):!!this._testMode},getKey:function(b){var d,c=this._gLang,g=this._lang;return b in this._dict?d=this._dict[b]:(a.lang(g),d=this._gDict[b],a.lang(c)),d},text:function(a){if("string"== typeof a){var d=Array.prototype.slice.call(arguments,1),h=0,g="object"==typeof d[0],f=this.getKey(a);return void 0===f&&(f=this._testMode?"["+a+"]":a),"number"==typeof f&&(f+=""),"string"==typeof f?f=f.replace(c,function(a,f,c,e){a=f?f:c?d[c-(g?0:1)]:e?d[0][e]||"":d[h++ +(g?1:0)];return b(a,[h].concat(d))}):"function"==typeof f?f.apply(this,d):f instanceof Array?b(f[d[0]],d):"object"==typeof f?b(f[d[0]],d):""}},ntext:function(a,b,c){var g,f=Array.prototype.slice.apply(arguments);if(2===f.length&& "number"==typeof b){if(g=this.getKey(a),!(g instanceof Array))return"";f.splice(0,1);g=g[1===b?0:1]}else f.splice(0,2),g=1===c?a:b;return this.text.apply(this,[g].concat(f))},ordinal:function(a){if(void 0===a)return"";var d=+(""+a).slice(-1),c=this.getKey("_ordinals");if(void 0===c)return"";if("string"==typeof c)return c;var g;return"function"==typeof c&&(g=c(a,d),"string"==typeof g)?g:"exceptions"in c&&(g="function"==typeof c.exceptions?c.exceptions(a,d):a in c.exceptions?b(c.exceptions[a],[a,d]): void 0,"string"==typeof g)?g:"byLastDigit"in c&&(g="function"==typeof c.byLastDigit?c.byLastDigit(d,a):d in c.byLastDigit?b(c.byLastDigit[d],[d,a]):void 0,"string"==typeof g)?g:"default"in c&&(g=b(c["default"],[a,d]),"string"==typeof g)?g:""},alias:function(){var b=Ink.bind(a.prototype.text,this);return b.ntext=Ink.bind(a.prototype.ntext,this),b.append=Ink.bind(a.prototype.append,this),b.ordinal=Ink.bind(a.prototype.ordinal,this),b.testMode=Ink.bind(a.prototype.testMode,this),b}},a.reset=function(){a.prototype._gDicts= [];a.prototype._gDict={};a.prototype._gLang="pt_PT"},a.reset(),a.append=function(b,d){if(d){if(!(d in b)){var c={};c[d]=b;b=c}d!==a.prototype._gLang&&a.lang(d)}a.prototype._gDicts.push(b);Ink.extendObj(a.prototype._gDict,b[a.prototype._gLang])},a.lang=function(b){if(!arguments.length)return a.prototype._gLang;if(b&&a.prototype._gLang!==b){a.prototype._gLang=b;a.prototype._gDict={};for(var d=0,c=a.prototype._gDicts.length;c>d;d++)Ink.extendObj(a.prototype._gDict,a.prototype._gDicts[d][b]||{})}},a}); Ink.createModule("Ink.Util.Dumper","1",[],function(){return{_tab:"\u00c2 \u00c2 \u00c2 \u00c2 ",_formatParam:function(c){var b="";switch(typeof c){case "string":b="(string) "+c;break;case "number":b="(number) "+c;break;case "boolean":b="(boolean) "+c;break;case "object":b=null!==c?c.constructor===Array?"Array \n{\n"+this._outputFormat(c,0)+"\n}":"Object \n{\n"+this._outputFormat(c,0)+"\n}":"null";break;default:b=!1}return b},_getTabs:function(c){for(var b="",a=0;c>a;a++)b+=this._tab;return b},_outputFormat:function(c, b){var a="",e=!1,d;for(d in c)null!==c[d]?"object"!=typeof c[d]||c[d].constructor!==Array&&c[d].constructor!==Object?c[d].constructor!==Function&&(a=a+this._tab+this._getTabs(b)+"["+d+"] => "+c[d]+"\n"):(c[d].constructor===Array?e="Array":c[d].constructor===Object&&(e="Object"),a+=this._tab+this._getTabs(b)+"["+d+"] => <b>"+e+"</b>\n",a+=this._tab+this._getTabs(b)+"{\n",a+=this._outputFormat(c[d],b+1)+this._tab+this._getTabs(b)+"}\n"):a=a+this._tab+this._getTabs(b)+"["+d+"] => null \n";return a}, printDump:function(c,b){if(b&&void 0!==b)if("string"==typeof b)document.getElementById(b).innerHTML="<pre>"+this._formatParam(c)+"</pre>";else{if("object"!=typeof b)throw"TARGET must be an element or an element ID";b.innerHTML="<pre>"+this._formatParam(c)+"</pre>"}else document.write("<pre>"+this._formatParam(c)+"</pre>")},returnDump:function(c){return this._formatParam(c)},alertDump:function(c){window.alert(this._formatParam(c).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(c){var b= "dumperwindow_"+1E4*Math.random(),b=window.open("",b,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");b.document.open();b.document.write("<pre>"+this._formatParam(c)+"</pre>");b.document.close();b.focus()}}}); Ink.createModule("Ink.Util.Date","1",[],function(){return{_months:function(c){return"Janeiro Fevereiro Mar\u00c3\u00a7o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" ")[c]},_iMonth:function(c){return Number(c)?+c-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\u00c3\u00a7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[c.toLowerCase()]},_wDays:function(c){return"Domingo Segunda Ter\u00c3\u00a7a Quarta Quinta Sexta S\u00c3\u00a1bado".split(" ")[c]}, _iWeek:function(c){return Number(c)?+c||7:{segunda:1,seg:1,"ter\u00c3\u00a7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\u00c3\u00a1bado":6,"s\u00c3\u00a1b":6,domingo:7,dom:7}[c.toLowerCase()]},_daysInMonth:function(c,b){return 1===c||3===c||5===c||7===c||8===c||10===c||12===c?31:4===c||6===c||9===c||11===c?30:0===b%400||0===b%4&&0!==b%100?29:28},get:function(c,b){(void 0===c||""===c)&&(c="Y-m-d");var a,e=c.split(""),d=Array(e.length);a=void 0===b?new Date:"number"==typeof b?new Date(1E3* b):new Date(b);for(var h,g,f=0;e.length>f;f++)switch(e[f]){case "\\":d[f]=e[f+1];f++;break;case "d":h=a.getDate();d[f]=1<(h+"").length?h:"0"+h;break;case "D":d[f]=this._wDays(a.getDay()).substring(0,3);break;case "j":d[f]=a.getDate();break;case "l":d[f]=this._wDays(a.getDay());break;case "N":d[f]=a.getDay()||7;break;case "S":h=a.getDate();g=["st","nd","rd"];var k="";d[f]=11<=h&&13>=h?"th":(k=g[(h+"").substr(-1)-1])?k:"th";break;case "w":d[f]=a.getDay();break;case "z":h=Date.UTC(a.getFullYear(),0, 0);g=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());d[f]=Math.floor((g-h)/864E5);break;case "W":g=new Date(a.getFullYear(),0,1);h=g.getDay()||7;d[f]=Math.ceil((Math.floor((a-g)/864E5+1)-(8-h))/7)+1;break;case "F":d[f]=this._months(a.getMonth());break;case "m":h=a.getMonth()+1+"";d[f]=1<h.length?h:"0"+h;break;case "M":d[f]=this._months(a.getMonth()).substring(0,3);break;case "n":d[f]=a.getMonth()+1;break;case "t":d[f]=this._daysInMonth(a.getMonth()+1,a.getYear());break;case "L":h=a.getFullYear(); d[f]=h%4?!1:h%100?!0:h%400?!1:!0;break;case "o":throw'"o" not implemented!';case "Y":d[f]=a.getFullYear();break;case "y":d[f]=(a.getFullYear()+"").substring(2);break;case "a":d[f]=12>a.getHours()?"am":"pm";break;case "A":d[f]=12>a.getHours?"AM":"PM";break;case "B":throw'"B" not implemented!';case "g":g=a.getHours();d[f]=12>=g?g:g-12;break;case "G":d[f]=a.getHours()+"";break;case "h":g=a.getHours()+"";g=12>=g?g:g-12;d[f]=1<g.length?g:"0"+g;break;case "H":g=a.getHours()+"";d[f]=1<g.length?g:"0"+g;break; case "i":h=a.getMinutes()+"";d[f]=1<h.length?h:"0"+h;break;case "s":h=a.getSeconds()+"";d[f]=1<h.length?h:"0"+h;break;case "u":throw'"u" not implemented!';case "e":throw'"e" not implemented!';case "I":h=new Date(a.getFullYear(),0,1);d[f]=a.getTimezoneOffset()!==h.getTimezoneOffset()?1:0;break;case "O":g=a.getTimezoneOffset();h=g%60;g=-1*((g-h)/60)+"";"-"!==g.charAt(0)&&(g="+"+g);g=3===g.length?g:g.replace(/([+\-])(\d)/,"$10$2");d[f]=g+h+"0";break;case "P":throw'"P" not implemented!';case "T":throw'"T" not implemented!'; case "Z":d[f]=60*a.getTimezoneOffset();break;case "c":throw'"c" not implemented!';case "r":h=this._wDays(a.getDay()).substr(0,3);g=this._months(a.getMonth()).substr(0,3);d[f]=h+", "+a.getDate()+" "+g+this.get(" Y H:i:s O",a);break;case "U":d[f]=Math.floor(a.getTime()/1E3);break;default:d[f]=e[f]}return d.join("")},set:function(c,b){if(void 0!==b){(void 0===c||""===c)&&(c="Y-m-d");for(var a,e=c.split(""),d=Array(e.length),h=void 0,g=void 0,f=void 0,k=void 0,l=void 0,p=void 0,n=void 0,s=void 0,q=void 0, r=void 0,t=void 0,u=void 0,B=void 0,w=void 0,v=0,m=0;e.length>m;m++)switch(e[m]){case "\\":d[m]=e[m+1];m++;break;case "d":d[m]="(\\d{2})";f={original:m,match:v++};break;case "j":d[m]="(\\d{1,2})";f={original:m,match:v++};break;case "D":d[m]="([\\w\u00c3\u00a1]{3})";l={original:m,match:v++};break;case "l":d[m]="([\\w\u00c3\u00a1]{5,7})";l={original:m,match:v++};break;case "N":d[m]="(\\d)";l={original:m,match:v++};break;case "w":d[m]="(\\d)";l={original:m,match:v++};break;case "S":d[m]="\\w{2}";break; case "z":d[m]="(\\d{1,3})";k={original:m,match:v++};break;case "W":d[m]="(\\d{1,2})";p={original:m,match:v++};break;case "F":d[m]="([\\w\u00c3\u00a7]{4,9})";g={original:m,match:v++};break;case "M":d[m]="(\\w{3})";g={original:m,match:v++};break;case "m":d[m]="(\\d{2})";g={original:m,match:v++};break;case "n":d[m]="(\\d{1,2})";g={original:m,match:v++};break;case "t":d[m]="\\d{2}";break;case "L":d[m]="\\w{4,5}";break;case "o":throw'"o" not implemented!';case "Y":d[m]="(\\d{4})";h={original:m,match:v++}; break;case "y":d[m]="(\\d{2})";(void 0===h||"Y"!==e[h.original])&&(h={original:m,match:v++});break;case "a":d[m]="(am|pm)";t={original:m,match:v++};break;case "A":d[m]="(AM|PM)";t={original:m,match:v++};break;case "B":throw'"B" not implemented!';case "g":d[m]="(\\d{1,2})";s={original:m,match:v++};break;case "G":d[m]="(\\d{1,2})";n={original:m,match:v++};break;case "h":d[m]="(\\d{2})";s={original:m,match:v++};break;case "H":d[m]="(\\d{2})";n={original:m,match:v++};break;case "i":d[m]="(\\d{2})";q= {original:m,match:v++};break;case "s":d[m]="(\\d{2})";r={original:m,match:v++};break;case "u":throw'"u" not implemented!';case "e":throw'"e" not implemented!';case "I":d[m]="\\d";break;case "O":d[m]="([-+]\\d{4})";B={original:m,match:v++};break;case "P":throw'"P" not implemented!';case "T":throw'"T" not implemented!';case "Z":d[m]="(\\-?\\d{1,5})";u={original:m,match:v++};break;case "c":throw'"c" not implemented!';case "r":d[m]="([\\w\u00c3\u00a1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})"; w={original:m,match:v++};break;case "U":d[m]="(\\d{1,13})";w={original:m,match:v++};break;default:d[m]=e[m]}d=RegExp(d.join(""));try{if(a=b.match(d),!a)return}catch(U){return}var Q,D,z=void 0!==h,R=void 0!==k,J=void 0!==f,H=void 0!==g,l=void 0!==l,A=void 0!==p,C=R||H&&J||!z&&!H&&J||A&&l||!z&&!A&&l,l=!(z||R||J||H||l||A),d=void 0!==s&&void 0!==t,v=void 0!==n,m=void 0!==q,E=void 0!==r,F=!l||d||v,K=F||m,S=void 0!==u,P=void 0!==B;if(void 0!==w){if("U"===e[w.original])return new Date(1E3*+a[w.match+1]); a=a[w.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);return Q=+a[4]+ +a[7].slice(0,3),D=+a[5]+60*((a[7].slice(0,1)+a[7].slice(3))/100),new Date(a[3],this._iMonth(a[2]),a[1],Q,D,a[6])}var x,G,y,w=new Date;if(C||l)return C?(z?(C=w.getFullYear()-50+"",z=a[h.match+1],"y"===e[h.original]&&(z=+C.slice(0,2)+(z>=C.slice(2)?0:1)+z)):z=w.getFullYear(),R?(e=0,f=a[k.match+1]):J?(e=H?this._iMonth(a[g.match+1]):w.getMonth(),f=a[f.match+1]):(e=0,f=7*((A?a[p.match+1]:this.get("W", w))-2)+(8-((new Date(z,0,1)).getDay()||7))+this._iWeek(a[p.match+1])),0===e&&31<f&&(f=new Date(z,e,f),e=f.getMonth(),f=f.getDate())):(z=w.getFullYear(),e=w.getMonth(),f=w.getDate()),x=z+"-"+(e+1)+"-"+f+" ",Q=d?+a[s.match+1]+("pm"===a[t.match+1]?12:0):v?a[n.match+1]:l?w.getHours():"00",D=m?a[q.match+1]:F?"00":w.getMinutes(),G=E?a[r.match+1]:K?"00":w.getSeconds(),y=P?a[B.match+1]:S?(100*(-1*a[u.match+1]/60)+"").replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(x+Q+":"+D+":"+ G+".000"+y)}}}}); Ink.createModule("Ink.Util.Cookie","1",[],function(){return{get:function(c){var b=document.cookie||!1,a={};if(b){var b=b.replace(/; /g,";"),b=b.split(";"),e=[];if(0<b.length)for(var d=0;b.length>d;d++)e=b[d].split("="),2===e.length&&(a[e[0]]=decodeURIComponent(e[1]))}return c?void 0!==a[c]?a[c]:null:a},set:function(c,b,a,e,d,h){if(!c||!1===b||void 0===c||void 0===b)return!1;c=c+"="+encodeURIComponent(b);var g=b=!1,f=!1;a&&void 0!==a&&!isNaN(a)?(a=parseInt(Number((new Date).valueOf()),10)+1E3*Number(parseInt(a, 10)),a=(new Date(a)).toGMTString(),a=a.replace(/([^\s]+)(\s\d\d)\s(\w\w\w)\s(.*)/,"$1$2-$3-$4"),b="expires="+a):b=void 0===a||isNaN(a)||0!==Number(parseInt(a,10))?"expires=Thu, 01-Jan-2037 00:00:01 GMT":"";(g=e&&void 0!==e?"path="+e:"path=/",d&&void 0!==d)?f="domain="+d:(f="domain="+window.location.host,f=f.replace(/:(.*)/,""));document.cookie=c+"; "+b+"; "+g+"; "+f+"; "+(h&&void 0!==h?h:!1)},remove:function(c,b,a){var e=!1,e=a&&void 0!==a?a:window.location.host;this.set(c,"deleted",-999999999,b&& void 0!==b?b:"/",e)}}}); Ink.createModule("Ink.Util.BinPack","1",[],function(){var c=function(a,b){this.init(a,b)};c.prototype={init:function(a,b){this.root={x:0,y:0,w:a,h:b}},fit:function(a){var b,c,f;for(b=0;a.length>b;++b)f=a[b],(c=this.findNode(this.root,f.w,f.h))&&(f.fit=this.splitNode(c,f.w,f.h))},findNode:function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):a.w>=b&&a.h>=c?a:null},splitNode:function(a,b,c){return a.used=!0,a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c},a.right={x:a.x+b,y:a.y,w:a.w- b,h:c},a}};var b=function(){};b.prototype={fit:function(a){var b,c,f,e=a.length;this.root={x:0,y:0,w:0<e?a[0].w:0,h:0<e?a[0].h:0};for(b=0;e>b;b++)f=a[b],f.fit=(c=this.findNode(this.root,f.w,f.h))?this.splitNode(c,f.w,f.h):this.growNode(f.w,f.h)},findNode:function(a,b,c){return a.used?this.findNode(a.right,b,c)||this.findNode(a.down,b,c):a.w>=b&&a.h>=c?a:null},splitNode:function(a,b,c){return a.used=!0,a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c},a.right={x:a.x+b,y:a.y,w:a.w-b,h:c},a},growNode:function(a, b){var c=this.root.w>=a,f=this.root.h>=b,e=c&&this.root.w>=this.root.h+b;return f&&this.root.h>=this.root.w+a?this.growRight(a,b):e?this.growDown(a,b):f?this.growRight(a,b):c?this.growDown(a,b):null},growRight:function(a,b){this.root={used:!0,x:0,y:0,w:this.root.w+a,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:a,h:this.root.h}};var c;return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null},growDown:function(a,b){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+b,down:{x:0, y:this.root.h,w:this.root.w,h:b},right:this.root};var c;return(c=this.findNode(this.root,a,b))?this.splitNode(c,a,b):null}};var a={random:function(){return Math.random()-0.5},w:function(a,b){return b.w-a.w},h:function(a,b){return b.h-a.h},a:function(a,b){return b.area-a.area},max:function(a,b){return Math.max(b.w,b.h)-Math.max(a.w,a.h)},min:function(a,b){return Math.min(b.w,b.h)-Math.min(a.w,a.h)},height:function(b,c){return a.msort(b,c,["h","w"])},width:function(b,c){return a.msort(b,c,["w","h"])}, area:function(b,c){return a.msort(b,c,["a","h","w"])},maxside:function(b,c){return a.msort(b,c,["max","min","h","w"])},msort:function(b,c,e){var f,k;for(k=0;e.length>k;++k)if(f=a[e[k]](b,c),0!==f)return f;return 0}},e=function(){return[this.w," x ",this.h].join("")};return{binPack:function(d){var h,g,f;h=0;for(g=d.blocks.length;g>h;++h)f=d.blocks[h],"area"in f||(f.area=f.w*f.h);h=d.dimensions?new c(d.dimensions[0],d.dimensions[1]):new b;d.sorter||(d.sorter="maxside");d.blocks.sort(a[d.sorter]);h.fit(d.blocks); var k=[h.root.w,h.root.h],l=[],p=[];h=0;for(g=d.blocks.length;g>h;++h)f=d.blocks[h],f.fit?l.push(f):(f.toString=e,p.push(f));var n=k[0]*k[1],s=0;h=0;for(g=l.length;g>h;++h)f=l[h],s+=f.area;return{dimensions:k,filled:s/n,blocks:d.blocks,fitted:l,unfitted:p}}}}); Ink.createModule("Ink.Util.Array","1",[],function(){var c=Array.prototype,b={inArray:function(a,b){if("object"==typeof b)for(var c=0,h=b.length;h>c;++c)if(b[c]===a)return!0;return!1},sortMulti:function(a,b){if(void 0===a||a.constructor!==Array)return!1;if("string"!=typeof b)return a.sort();if(0<a.length){if(void 0===a[0][b])return!1;a.sort(function(a,c){var g=a[b],f=c[b];return f>g?-1:g>f?1:0})}return a},keyValue:function(a,b,c){if(void 0!==a&&"object"==typeof b&&this.inArray(a,b)){for(var h=[],g= 0,f=b.length;f>g;++g)if(b[g]===a){if(void 0!==c&&!0===c)return g;h.push(g)}return h}return!1},shuffle:function(a){if(void 0!==a&&a.constructor!==Array)return!1;for(var b=a.length,c=!1,h=!1;b--;)h=Math.floor(Math.random()*(b+1)),c=a[b],a[b]=a[h],a[h]=c;return a},forEach:function(a,b,d){if(c.forEach)return c.forEach.call(a,b,d);for(var h=0,g=a.length>>>0;g>h;h++)b.call(d,a[h],h,a)},each:function(){b.forEach.apply(b,[].slice.call(arguments))},map:function(a,b,d){if(c.map)return c.map.call(a,b,d);for(var h= Array(f),g=0,f=a.length>>>0;f>g;g++)h[g]=b.call(d,a[g],g,a);return h},filter:function(a,b,d){if(c.filter)return c.filter.call(a,b,d);for(var h=[],g=null,f=0,k=a.length;k>f;f++)g=a[f],b.call(d,g,f,a)&&h.push(g);return h},some:function(a,b,c){if(null===a)throw new TypeError("First argument is invalid.");a=Object(a);var h=a.length>>>0;if("function"!=typeof b)throw new TypeError("Second argument must be a function.");for(var g=0;h>g;g++)if(g in a&&b.call(c,a[g],g,a))return!0;return!1},intersect:function(a, b){if(!a||!b||!1==a instanceof Array||!1==b instanceof Array)return[];for(var c=[],h=0,g=a.length;g>h;++h)for(var f=0,k=b.length;k>f;++f)a[h]===b[f]&&c.push(a[h]);return c},convert:function(a){return c.slice.call(a||[],0)},insert:function(a,b,c){a.splice(b,0,c)},remove:function(a,b,c){for(var h=[],g=0,f=a.length;f>g;g++)g>=b&&b+c>g||h.push(a[g]);return h}};return b}); Ink.createModule("Ink.Util.Validator","1",[],function(){var c={_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\u00c3\u00b4r",243:"santar\u00c3\u00a9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\u00c3\u00a7a",252:"vila nova de famalic\u00c3\u00a3o",253:"braga",254:"peso da r\u00c3\u00a9gua", 255:"penafiel",256:"s\u00c3\u00a3o jo\u00c3\u00a3o da madeira",258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\u00c3\u00adnha",263:"vila franca de xira",265:"set\u00c3\u00babal",266:"\u00c3\u00a9vora",268:"estremoz",269:"santiago do cac\u00c3\u00a9m",271:"guarda",272:"castelo branco",273:"bragan\u00c3\u00a7a",274:"proen\u00c3\u00a7a-a-nova",275:"covilh\u00c3\u00a3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\u00c3\u00a3o",283:"odemira", 284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico",295:"angra do hero\u00c3\u00adsmo, graciosa, s\u00c3\u00a3o jorge, terceira",296:"ponta delgada, s\u00c3\u00a3o miguel, santa maria",91:"rede m\u00c3\u00b3vel 91 (Vodafone / Yorn)",93:"rede m\u00c3\u00b3vel 93 (Optimus)",96:"rede m\u00c3\u00b3vel 96 (TMN)",92:"rede m\u00c3\u00b3vel 92 (TODOS)",707:"n\u00c3\u00bamero \u00c3\u00banico",760:"n\u00c3\u00bamero \u00c3\u00banico",800:"n\u00c3\u00bamero gr\u00c3\u00a1tis", 808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\u00c3\u00b3vel 91",95:"m\u00c3\u00b3vel 95",97:"m\u00c3\u00b3vel 97",98:"m\u00c3\u00b3vel 98",99:"m\u00c3\u00b3vel 99"},_internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\u00c3\u00b3vel 91",92:"m\u00c3\u00b3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\u00c3\u00b3vel 82",84:"m\u00c3\u00b3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\u00c3\u00b3vel 7"},_characterGroups:{numbers:["0-9"], asciiAlpha:["a-zA-Z"],latin1Alpha:["a-zA-Z","\u00c3\u20ac-\u00c3\u00bf"],unicodeAlpha:["a-zA-Z","\u00c3\u20ac-\u00c3\u00bf","\u00c4\u20ac-\u00e1\u00bf\u00bf","\u00e2\u00b0\u20ac-\u00ed\u0178\u00bf"],space:[" "],dash:["-"],underscore:["_"],nicknamePunctuation:["_.-"],singleLineWhitespace:["\t "],newline:["\n"],whitespace:["\t\n\x0B\f\r\u00c2  "],asciiPunctuation:["!-/",":-@","[-`","{-~"],latin1Punctuation:"!-/ :-@ [-` {-~ \u00c2\u00a1-\u00c2\u00bf \u00c3\u2014 \u00c3\u00b7".split(" "),unicodePunctuation:"!-/ :-@ [-` {-~ \u00c2\u00a1-\u00c2\u00bf \u00c3\u2014 \u00c3\u00b7 \u00e2\u20ac\u20ac-\u00e2\u0081\u00af \u00e2\u00b8\u20ac-\u00e2\u00b9\u00bf \u00e3\u20ac\u20ac-\u00e3\u20ac\u00bf".split(" ")}, createRegExp:function(b){var a="^[",e;for(e in b)if(b.hasOwnProperty(e)){if(!(e in c._characterGroups))throw Error("group "+e+" is not a valid character group");b[e]&&(a+=c._characterGroups[e].join(""))}return RegExp(a+"]*?$")},checkCharacterGroups:function(b,a){return c.createRegExp(a).test(b)},unicode:function(b,a){return c.checkCharacterGroups(b,Ink.extendObj({unicodeAlpha:!0},a))},latin1:function(b,a){return c.checkCharacterGroups(b,Ink.extendObj({latin1Alpha:!0},a))},ascii:function(b,a){return c.checkCharacterGroups(b, Ink.extendObj({asciiAlpha:!0},a))},number:function(b,a){b+="";var e=Ink.extendObj({decimalSep:".",thousandSep:"",negative:!0,decimalPlaces:null,maxDigits:null,max:null,min:null,returnNumber:!1},a||{});if(e.thousandSep)return b=b.replace(RegExp("\\"+e.thousandSep,"g"),""),e.thousandSep="",c.number(b,e);if(!1===e.negative)return e.min=0,e.negative=!0,c.number(b,e);if("."!==e.decimalSep&&(b=b.replace(RegExp("\\"+e.decimalSep,"g"),".")),!/^(-)?(\d+)?(\.\d+)?$/.test(b)||""===b)return!1;var d;if(e.decimalSep&& -1!==b.indexOf(e.decimalSep)){if(d=b.split(e.decimalSep),null!==e.decimalPlaces&&d[1].length>e.decimalPlaces)return!1}else d=[""+b,""];if(null!==e.maxDigits&&d[0].replace(/-/g,"").length>e.maxDigits)return d;d=parseFloat(b);return null!==e.maxExcl&&d>=e.maxExcl||null!==e.minExcl&&e.minExcl>=d?!1:null!==e.max&&d>e.max||null!==e.min&&e.min>d?!1:e.returnNumber?d:!0},_isLeapYear:function(b){return/^\d{4}$/.test(b)?b%4?!1:b%100?!0:b%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-", parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/},"yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1, month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}},_daysInMonth:function(b,a){return 1===b||3===b||5===b||7===b||8===b||10===b||12===b?31:4===b||6===b||9===b||11===b?30:0===a%400||0===a%4&&0!==a%100?29:28},_isValidDate:function(b,a,c){var d=/^\d{1,2}$/;return/^\d{4}$/.test(b)&&d.test(a)&&d.test(c)&&1<=a&&12>=a&&1<=c&&this._daysInMonth(a,b)>=c?!0:!1},email:function(b){return/^[_a-z0-9-]+((\.|\+)[_a-z0-9-]+)*@([\w]*-?[\w]*\.)+[a-z]{2,4}$/i.test(b)? !0:!1},mail:function(b){return c.email(b)},url:function(b,a){if(void 0===a||!1===a)!1===/(^(http\:\/\/|https\:\/\/)(.+))/i.test(b)&&(b="http://"+b);return!1===/^(http:\/\/|https:\/\/)([\w]*(-?[\w]*)*\.)+[a-z]{2,4}/i.test(b)?!1:!0},isPTPhone:function(b){b=""+b;var a=[],c;for(c in this._indicativosPT)"string"==typeof this._indicativosPT[c]&&a.push(c);a=a.join("|");c=/^(00351|\+351)/;c.test(b)&&(b=b.replace(c,""));b=b.replace(/(\s|\-|\.)+/g,"");c=/[\d]{9}/i;return 9===b.length&&c.test(b)&&RegExp("^("+ a+")").test(b)?!0:!1},isPortuguesePhone:function(b){return this.isPTPhone(b)},isCVPhone:function(b){b=""+b;var a=[],c;for(c in this._indicativosCV)"string"==typeof this._indicativosCV[c]&&a.push(c);a=a.join("|");c=/^(00238|\+238)/;c.test(b)&&(b=b.replace(c,""));b=b.replace(/(\s|\-|\.)+/g,"");c=/[\d]{7}/i;return 7===b.length&&c.test(b)&&RegExp("^("+a+")").test(b)?!0:!1},isAOPhone:function(b){b=""+b;var a=[],c;for(c in this._indicativosAO)"string"==typeof this._indicativosAO[c]&&a.push(c);a=a.join("|"); c=/^(00244|\+244)/;c.test(b)&&(b=b.replace(c,""));b=b.replace(/(\s|\-|\.)+/g,"");c=/[\d]{9}/i;return 9===b.length&&c.test(b)&&RegExp("^("+a+")").test(b)?!0:!1},isMZPhone:function(b){b=""+b;var a=[],c;for(c in this._indicativosMZ)"string"==typeof this._indicativosMZ[c]&&a.push(c);a=a.join("|");c=/^(00258|\+258)/;c.test(b)&&(b=b.replace(c,""));b=b.replace(/(\s|\-|\.)+/g,"");c=/[\d]{8,9}/i;if((9===b.length||8===b.length)&&c.test(b))if(RegExp("^("+a+")").test(b)&&(0===b.indexOf("2")&&8===b.length||0=== b.indexOf("8")&&9===b.length))return!0;return!1},isTLPhone:function(b){b=""+b;var a=[],c;for(c in this._indicativosTL)"string"==typeof this._indicativosTL[c]&&a.push(c);a=a.join("|");c=/^(00670|\+670)/;c.test(b)&&(b=b.replace(c,""));b=b.replace(/(\s|\-|\.)+/g,"");c=/[\d]{7}/i;return 7===b.length&&c.test(b)&&RegExp("^("+a+")").test(b)?!0:!1},isPhone:function(){var b;if(0===arguments.length)return!1;var a=arguments[0];if(1<arguments.length){if(arguments[1].constructor!==Array){if("function"==typeof this["is"+ arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](a);throw"Invalid Country Code!";}var c;for(b=0;arguments[1].length>b;b++){if("function"!=typeof(c=this["is"+arguments[1][b].toUpperCase()+"Phone"]))throw"Invalid Country Code!";if(c(a))return!0}}else for(b=0;this._countryCodes.length>b;b++)if(this["is"+this._countryCodes[b]+"Phone"](a))return!0;return!1},codPostal:function(b,a,c){var d=/^(\s*\-\s*|\s+)$/,h=/^\s+|\s+$/g,g=/^[1-9]\d{3}$/,f=/^\d{3}$/,k=/^(.{4})(.*)(.{3})$/; if(c=!!c,b=b.replace(h,""),void 0!==a){if(a=a.replace(h,""),g.test(b)&&f.test(a))return!0===c?[!0,!0]:!0}else{if(g.test(b))return!0===c?[!0,!1]:!0;b=b.match(k);if(null!==b&&g.test(b[1])&&d.test(b[2])&&f.test(b[3]))return!0===c?[!0,!1]:!0}return!0===c?[!1,!1]:!1},isDate:function(b,a){if(void 0===this._dateParsers[b])return!1;var c=this._dateParsers[b].year,d=this._dateParsers[b].month,h=this._dateParsers[b].day,g=this._dateParsers[b].sep,f=a.match(this._dateParsers[b].parser);return null!==f&&(f[2]=== f[4]&&f[2]===g)&&this._isValidDate(2===f[c].length?"20"+f[c]:f[c],""+f[d],""+f[h])?!0:!1},isColor:function(b){var a,c=!1;a=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;var d=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,h=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(/^[a-zA-Z]+$/.test(b)||a.test(b))return!0;if(null!==(a=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/.exec(b))|| null!==(a=d.exec(b)))for(d=a.length;d--;){if((2===d||4===d||6===d)&&void 0!==a[d]&&""!==a[d]){if(!(void 0!==a[d-1]&&0<=a[d-1]&&100>=a[d-1]))return!1;c=!0}if(1===d||3===d||5===d&&(void 0===a[d+1]||""===a[d+1])){if(!(void 0!==a[d]&&0<=a[d]&&255>=a[d]))return!1;c=!0}}if(null!==(a=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/.exec(b))||null!==(a=h.exec(b)))for(d=a.length;d--;){if(3===d||5===d){if(!(void 0!==a[d-1]&&void 0!==a[d]&&""!==a[d]&&0<=a[d-1]&&100>=a[d-1]))return!1; c=!0}if(1===d){if(!(void 0!==a[d]&&0<=a[d]&&360>=a[d]))return!1;c=!0}}return c},isIP:function(b,a){if("string"!=typeof b)return!1;switch((a||"ipv4").toLowerCase()){case "ipv4":return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(b);case "ipv6":return/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(b); default:return!1}},_creditCardSpecs:{"default":{length:"13,14,15,16,17,18,19",prefix:/^.+/,luhn:!0},"american express":{length:"15",prefix:/^3[47]/,luhn:!0},"diners club":{length:"14,16",prefix:/^36|55|30[0-5]/,luhn:!0},discover:{length:"16",prefix:/^6(?:5|011)/,luhn:!0},jcb:{length:"15,16",prefix:/^3|1800|2131/,luhn:!0},maestro:{length:"16,18",prefix:/^50(?:20|38)|6(?:304|759)/,luhn:!0},mastercard:{length:"16",prefix:/^5[1-5]/,luhn:!0},visa:{length:"13,16",prefix:/^4/,luhn:!0}},_luhn:function(b){if(b= parseInt(b,10),"number"!=typeof b&&0!==b%1)return!1;b+="";var a,c=b.length,d=0;for(a=c-1;0<=a;a-=2)d+=parseInt(b.substr(a,1),10);for(a=c-2;0<=a;a-=2)c=parseInt(2*b.substr(a,1),10),d+=10<=c?c-9:c;return 0===d%10},isCreditCard:function(b,a){if(!1===/\d+/.test(b))return!1;if(void 0===a)a="default";else if("array"==typeof a){var c,d=a.length;for(c=0;d>c;c++)if(this.isCreditCard(b,a[c]))return!0;return!1}if(a=a.toLowerCase(),void 0===this._creditCardSpecs[a])return!1;c=b.length+"";return-1===this._creditCardSpecs[a].length.split(",").indexOf(c)? !1:this._creditCardSpecs[a].prefix.test(b)?!1===this._creditCardSpecs[a].luhn?!0:this._luhn(b):!1}};return c}); Ink.createModule("Ink.UI.Aux","1",["Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(c,b,a,e){var d={},h=0,g={Layouts:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},isDOMElement:function(a){return"object"==typeof a&&"nodeType"in a&&1===a.nodeType},isInteger:function(a){return"number"==typeof a&&0===a%1},elOrSelector:function(b,c){if(!this.isDOMElement(b)){var d=a.select(b);if(0===d.length)throw new TypeError(c+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."); return d[0]}return b},clone:function(a){try{if("object"!=typeof a)throw Error("Given argument is not an object!");return JSON.parse(JSON.stringify(a))}catch(b){throw Error("Given object cannot have loops!");}},childIndex:function(b){if(g.isDOMElement(b))for(var c=a.select("> *",b.parentNode),d=0,e=c.length;e>d;++d)if(c[d]===b)return d;throw"not found!";},ajaxJSON:function(a,b,d){new c(a,{evalJS:"force",method:"POST",parameters:b,onSuccess:function(a){try{if(a=a.responseJSON,"ok"!==a.status)throw"server error: "+ a.message;d(null,a)}catch(b){d(b)}},onFailure:function(){d("communication failure")}})},currentLayout:function(){var c,d,e,g=a.select("#ink-layout-detector")[0];if(!g){g=document.createElement("div");g.id="ink-layout-detector";for(c in this.Layouts)this.Layouts.hasOwnProperty(c)&&(d=this.Layouts[c],e=document.createElement("div"),e.className="show-"+d+" hide-all",e.setAttribute("data-ink-layout",d),g.appendChild(e));document.body.appendChild(g)}c=0;for(d=g.childNodes.length;d>c;++c)if(e=g.childNodes[c], "hidden"!==b.getStyle(e,"visibility"))return e.getAttribute("data-ink-layout")},hashSet:function(a){if("object"!=typeof a)throw new TypeError("o should be an object!");var b=e.getAnchorString(),b=Ink.extendObj(b,a);window.location.hash=e.genQueryString("",b).substring(1)},cleanChildren:function(a){if(!g.isDOMElement(a))throw"Please provide a valid DOMElement";for(var b,c=a.lastChild;c;)b=c.previousSibling,a.removeChild(c),c=b},storeIdAndClasses:function(a,b){if(!g.isDOMElement(a))throw"Please provide a valid DOMElement as first parameter"; var c=a.id;c&&(b._id=c);(c=a.className)&&(b._classes=c)},restoreIdAndClasses:function(a,b){if(!g.isDOMElement(a))throw"Please provide a valid DOMElement as first parameter";b._id&&a.id!==b._id&&(a.id=b._id);b._classes&&-1===a.className.indexOf(b._classes)&&(a.className?a.className+=" "+b._classes:a.className=b._classes);b._instanceId&&!a.getAttribute("data-instance")&&a.setAttribute("data-instance",b._instanceId)},registerInstance:function(a,b,c){if(!a._instanceId){if("object"!=typeof a)throw new TypeError("1st argument must be a JavaScript object!"); if(!a._options||!a._options.skipRegister){if(!this.isDOMElement(b))throw new TypeError("2nd argument must be a DOM element!");if(void 0!==c&&"string"!=typeof c)throw new TypeError("3rd argument must be a string!");c=(c||"instance")+ ++h;d[c]=a;a._instanceId=c;a=b.getAttribute("data-instance");a=null!==a?[a,c].join(" "):c;b.setAttribute("data-instance",a)}}},unregisterInstance:function(a){delete d[a]},getInstance:function(a){var b;if(this.isDOMElement(a)){if(b=a.getAttribute("data-instance"),null=== b)throw Error("argument is not a DOM instance element!");}else b=a;b=b.split(" ");var c,e,g=b.length,h=[];for(a=0;g>a;++a){if(e=b[a],!e)throw Error("Element is not a JS instance!");if(c=d[e],!c)throw Error('Instance "'+e+'" not found!');h.push(c)}return 1===g?h[0]:h},getInstanceFromSelector:function(b){b=a.select(b)[0];if(!b)throw Error("Element not found!");return this.getInstance(b)},getInstanceIds:function(){var a=[],b;for(b in d)d.hasOwnProperty(b)&&a.push(b);return a},getInstances:function(){var a= [],b;for(b in d)d.hasOwnProperty(b)&&a.push(d[b]);return a},destroyComponent:function(){Ink.Util.Aux.unregisterInstance(this._instanceId);this._element.parentNode.removeChild(this._element)}};return g}); Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(c,b,a,e,d){var h=function(a,b){var c=document.createElement("a");return c.setAttribute("href","#"),void 0!==b&&c.setAttribute("data-index",b),c.innerHTML=a,c},g=function(b,d){if(this._element=c.elOrSelector(b,"1st argument"),this._options=Ink.extendObj({size:void 0,start:1,firstLabel:"First",lastLabel:"Last",previousLabel:"Previous",nextLabel:"Next",onChange:void 0, setHash:!1,hashParameter:"page",numberFormatter:function(a){return a+1}},d||{},e.data(this._element)),this._options.previousPageLabel||(this._options.previousPageLabel="Previous "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel="Next "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},!c.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(!c.isInteger(this._options.start)&&0<this._options.start&& this._options.start<=this._options.size)throw new TypeError("start option is a required integer between 1 and size!");if(this._options.maxSize&&!c.isInteger(this._options.maxSize)&&0<this._options.maxSize)throw new TypeError("maxSize option is a positive integer!");if(0>this._options.size)throw new RangeError("size option must be equal or more than 0!");if(void 0!==this._options.onChange&&"function"!=typeof this._options.onChange)throw new TypeError("onChange option must be a function!");a.hasClassName(Ink.s("ul", this._element),"dotted")&&(this._options.numberFormatter=function(){return'<i class="icon-circle"></i>'});this._current=this._options.start-1;this._itemLiEls=[];this._init()};return g.prototype={_init:function(){this._generateMarkup(this._element);this._updateItems();this._observe();c.registerInstance(this,this._element,"pagination")},_observe:function(){b.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var b,c,d,e=this._itemLiEls;if(this._options.size===e.length){b=0; for(c=this._options.size;c>b;++b)a.setClassName(e[b],"active",b===this._current)}else{for(b=e.length-1;0<=b;--b)this._ulEl.removeChild(e[b]);e=[];b=0;for(c=this._options.size;c>b;++b)d=document.createElement("li"),d.appendChild(h(this._options.numberFormatter(b),b)),a.setClassName(d,"active",b===this._current),this._ulEl.insertBefore(d,this._nextEl),e.push(d);this._itemLiEls=e}if(this._options.maxSize){var g=Math.floor(this._current/this._options.maxSize),s=this._options.maxSize*g,q=s+this._options.maxSize- 1;b=0;for(c=this._options.size;c>b;++b)d=e[b],a.setClassName(d,"hide-all",s>b||b>q);this._pageStart=s;this._pageEnd=q;this._page=g;a.setClassName(this._prevPageEl,"disabled",!this.hasPreviousPage());a.setClassName(this._nextPageEl,"disabled",!this.hasNextPage());a.setClassName(this._firstEl,"disabled",this.isFirst());a.setClassName(this._lastEl,"disabled",this.isLast())}a.setClassName(this._prevEl,"disabled",!this.hasPrevious());a.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(b){a.addClassName(b, "ink-navigation");var c,e,g=!1;1>(c=d.select("ul.pagination",b)).length?(c=document.createElement("ul"),a.addClassName(c,"pagination")):(g=!0,c=c[0]);this._options.maxSize&&(e=document.createElement("li"),e.appendChild(h(this._options.firstLabel)),this._firstEl=e,a.addClassName(e,"first"),c.appendChild(e),e=document.createElement("li"),e.appendChild(h(this._options.previousPageLabel)),this._prevPageEl=e,a.addClassName(e,"previousPage"),c.appendChild(e));e=document.createElement("li");e.appendChild(h(this._options.previousLabel)); this._prevEl=e;a.addClassName(e,"previous");c.appendChild(e);e=document.createElement("li");e.appendChild(h(this._options.nextLabel));this._nextEl=e;a.addClassName(e,"next");c.appendChild(e);this._options.maxSize&&(e=document.createElement("li"),e.appendChild(h(this._options.nextPageLabel)),this._nextPageEl=e,a.addClassName(e,"nextPage"),c.appendChild(e),e=document.createElement("li"),e.appendChild(h(this._options.lastLabel)),this._lastEl=e,a.addClassName(e,"last"),c.appendChild(e));g||b.appendChild(c); this._ulEl=c},_onClick:function(c){b.stop(c);c=b.element(c);if("a"!==c.nodeName.toLowerCase()){do c=c.parentNode;while("a"!==c.nodeName.toLowerCase()&&c!==this._element);if(c===this._element)return}var d=c.parentNode;if("li"===d.nodeName.toLowerCase()&&!a.hasClassName(d,"active")&&!a.hasClassName(d,"disabled")){var e=a.hasClassName(d,"previous"),g=a.hasClassName(d,"next"),h=a.hasClassName(d,"previousPage"),s=a.hasClassName(d,"nextPage"),q=a.hasClassName(d,"first"),d=a.hasClassName(d,"last");q?this.setCurrent(0): d?this.setCurrent(this._options.size-1):h||s?this.setCurrent((h?-1:1)*this._options.maxSize,!0):e||g?this.setCurrent(e?-1:1,!0):(c=parseInt(c.getAttribute("data-index"),10),this.setCurrent(c))}},setSize:function(a){if(!c.isInteger(a))throw new TypeError("1st argument must be an integer number!");this._options.size=a;this._updateItems();this._current=0},setCurrent:function(a,b){if(!c.isInteger(a))throw new TypeError("1st argument must be an integer number!");b&&(a+=this._current);0>a?a=0:a>this._options.size- 1&&(a=this._options.size-1);this._current=a;this._updateItems();this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return 0<this._current},hasNext:function(){return this._current<this._options.size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize- 1},hasNextPage:function(){return this._options.maxSize&&this._options.size-this._current>=this._options.maxSize+1},destroy:c.destroyComponent},g}); Ink.createModule("Ink.UI.SortableList","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){a=function(a,b){if(this._element=c.elOrSelector(a,"1st argument"),!c.isDOMElement(a)&&"string"!=typeof a)throw"[Ink.UI.SortableList] :: Invalid selector";if("string"==typeof a){if(this._element=Ink.Dom.Selector.select(a),1>this._element.length)throw"[Ink.UI.SortableList] :: Selector has returned no elements";this._element=this._element[0]}else this._element= a;if(this._options=Ink.extendObj({dragObject:"li"},Ink.Dom.Element.data(this._element)),this._options=Ink.extendObj(this._options,b||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._model=[],this._index=void 0,this._isMoving=!1,this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!"); this._createdFrom="DOM"}if(this._dragTriggers=d.select(this._options.dragObject,this._element),!this._dragTriggers)throw"[Ink.UI.SortableList] :: Drag object not found";this._init()};return a.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var a="ontouchstart"in document.documentElement;this._down=a?"touchstart":"mousedown";this._move=a?"touchmove":"mousemove";this._up=a?"touchend":"mouseup";a=document.body;b.observe(a,this._move,this._handlers.move); b.observe(a,this._up,this._handlers.up);this._observe();c.registerInstance(this,this._element,"sortableList")},_observe:function(){b.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var a=this,b=d.select("> li",this._element);h.each(b,function(b){a._model.push(b.innerHTML)})},_generateMarkup:function(){var a=document.createElement("ul");a.className="unstyled ink-sortable-list";var b=this;return h.each(this._model,function(c,d){var e=document.createElement("li"); d===b._index&&(e.className="drag");e.innerHTML=""+c;a.appendChild(e)}),a},_getY:function(a){return 0===a.type.indexOf("touch")?a.changedTouches[0].pageY:"number"==typeof a.pageY?a.pageY:a.clientY},_refresh:function(a){var b=this._generateMarkup();this._element.parentNode.replaceChild(b,this._element);this._element=b;c.restoreIdAndClasses(this._element,this);this._dragTriggers=d.select(this._options.dragObject,this._element);a||this._observe()},_onDown:function(a){if(!this._isMoving){var d=b.element(a); if(!h.inArray(d,this._dragTriggers)){for(;!h.inArray(d,this._dragTriggers)&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode;if("body"===d.nodeName.toLowerCase())return}b.stop(a);var e;if("li"!==d.nodeName.toLowerCase())for(;"li"!==d.nodeName.toLowerCase()&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode;return e=d,this._index=c.childIndex(e),this._height=e.offsetHeight,this._startY=this._getY(a),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1}},_onMove:function(a){if(this._isMoving){b.stop(a); a=this._getY(a);var c=a-this._startY,c=(0<c?1:-1)*Math.floor(Math.abs(c)/this._height);if(0!==c&&(c/=Math.abs(c),!(-1===c&&0===this._index||1===c&&this._index===this._model.length-1))){var d=0<c?this._index:this._index+c;this._model.splice(d,2,this._model[0>c?this._index:this._index+c],this._model[d]);this._index+=c;this._startY=a;this._refresh(!1)}}},_onUp:function(a){this._isMoving&&(b.stop(a),this._index=void 0,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()}, destroy:c.destroyComponent},a}); Ink.createModule("Ink.UI.Spy","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){var g=function(a,b){this._rootElement=c.elOrSelector(a,"1st argument");this._options=Ink.extendObj({target:void 0},e.data(this._rootElement));this._options=Ink.extendObj(this._options,b||{});this._options.target=c.elOrSelector(this._options.target,"Target");this._scrollTimeout=null;this._init()};return g.prototype={_elements:[],_init:function(){b.observe(document, "scroll",Ink.bindEvent(this._onScroll,this));this._elements.push(this._rootElement)},_onScroll:function(){var b=e.scrollHeight();if(!(this._rootElement.offsetTop>b)){for(var c=0,g=this._elements.length;g>c;c++)if(b>=this._elements[c].offsetTop&&this._elements[c]!==this._rootElement&&this._elements[c].offsetTop>this._rootElement.offsetTop)return;h.each(d.select("a",this._options.target),Ink.bind(function(b){var c="name"in this._rootElement&&this._rootElement.name?"#"+this._rootElement.name:"#"+this._rootElement.id; b.href.substr(b.href.indexOf("#"))===c?a.addClassName(e.findUpwardsByTag(b,"li"),"active"):a.removeClassName(e.findUpwardsByTag(b,"li"),"active")},this))}}},g}); Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(c,b,a,e,d){a=function(a,b){if("object"!=typeof a&&"string"!=typeof a)throw"[Sticky] :: Invalid selector defined";if("object"==typeof a)this._rootElement=a;else{if(this._rootElement=d.select(a),0>=this._rootElement.length)throw"[Sticky] :: Can't find any element with the specified selector";this._rootElement=this._rootElement[0]}this._options=Ink.extendObj({offsetBottom:0, offsetTop:0,topElement:void 0,bottomElement:void 0},e.data(this._rootElement));this._options=Ink.extendObj(this._options,b||{});this._options.topElement=void 0!==this._options.topElement?c.elOrSelector(this._options.topElement,"Top Element"):c.elOrSelector("body","Top Element");this._options.bottomElement=void 0!==this._options.bottomElement?c.elOrSelector(this._options.bottomElement,"Bottom Element"):c.elOrSelector("body","Top Element");this._computedStyle=window.getComputedStyle?window.getComputedStyle(this._rootElement, null):this._rootElement.currentStyle;this._dims={height:this._computedStyle.height,width:this._computedStyle.width};this._init()};return a.prototype={_init:function(){b.observe(document,"scroll",Ink.bindEvent(this._onScroll,this));b.observe(window,"resize",Ink.bindEvent(this._onResize,this));this._calculateOriginalSizes();this._calculateOffsets()},_onScroll:function(){var a="CSS1Compat"===document.compatMode?document.documentElement:document.body;return 90<100*e.elementWidth(this._rootElement)/a.clientWidth|| 649>=a.clientWidth?(e.hasAttribute(this._rootElement,"style")&&this._rootElement.removeAttribute("style"),void 0):(this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(Ink.bind(function(){var a=e.scrollHeight();if(e.hasAttribute(this._rootElement,"style"))this._options.originalTop-this._options.originalOffsetTop>=a?this._rootElement.removeAttribute("style"):document.body.scrollHeight-(a+parseInt(this._dims.height,10))<this._options.offsetBottom?(this._rootElement.style.position= "fixed",this._rootElement.style.top="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.bottom=this._options.offsetBottom<parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+a),10)?this._options.originalOffsetBottom+"px":this._options.offsetBottom-parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+a),10)+"px",this._rootElement.style.width=this._options.originalWidth+"px"):document.body.scrollHeight-(a+parseInt(this._dims.height, 10))>=this._options.offsetBottom&&(this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.left=this._options.originalLeft+"px",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px");else{if(this._options.originalTop-this._options.originalOffsetTop>=a)return;this._rootElement.style.left=this._options.originalLeft+"px"; this._rootElement.style.position="fixed";this._rootElement.style.bottom="auto";this._rootElement.style.left=this._options.originalLeft+"px";this._rootElement.style.top=this._options.originalOffsetTop+"px";this._rootElement.style.width=this._options.originalWidth+"px"}this._scrollTimeout=void 0},this),0),void 0)},_onResize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(Ink.bind(function(){this._rootElement.removeAttribute("style");this._calculateOriginalSizes(); this._calculateOffsets()},this),0)},_calculateOffsets:function(){if(void 0!==this._options.topElement)if("body"!==this._options.topElement.nodeName.toLowerCase()){var a=e.elementHeight(this._options.topElement),b=e.elementTop(this._options.topElement);this._options.offsetTop=parseInt(a,10)+parseInt(b,10)+parseInt(this._options.originalOffsetTop,10)}else this._options.offsetTop=parseInt(this._options.originalOffsetTop,10);void 0!==this._options.bottomElement&&("body"!==this._options.bottomElement.nodeName.toLowerCase()? (a=e.elementHeight(this._options.bottomElement),this._options.offsetBottom=parseInt(a,10)+parseInt(this._options.originalOffsetBottom,10)):this._options.offsetBottom=parseInt(this._options.originalOffsetBottom,10));this._onScroll()},_calculateOriginalSizes:function(){void 0===this._options.originalOffsetTop&&(this._options.originalOffsetTop=parseInt(this._options.offsetTop,10),this._options.originalOffsetBottom=parseInt(this._options.offsetBottom,10));this._options.originalTop=parseInt(this._rootElement.offsetTop, 10);this._options.originalLeft=parseInt(this._rootElement.offsetLeft,10);isNaN(this._options.originalWidth=parseInt(this._dims.width,10))&&(this._options.originalWidth=0);this._options.originalWidth=parseInt(this._computedStyle.width,10)}},a}); Ink.createModule("Ink.UI.Table","1","Ink.Net.Ajax_1 Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Util.String_1".split(" "),function(c,b,a,e,d,h,g,f){var k=function(a,c){if(this._rootElement=b.elOrSelector(a,"1st argument"),"table"!==this._rootElement.nodeName.toLowerCase())throw"[Ink.UI.Table] :: The element is not a table";this._options=Ink.extendObj({pageSize:void 0,endpoint:void 0,loadMode:"full",allowResetSorting:!1,visibleFields:void 0}, d.data(this._rootElement));this._options=Ink.extendObj(this._options,c||{});this._markupMode=void 0===this._options.endpoint;this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.split(","));this._handlers={click:Ink.bindEvent(this._onClick,this)};this._originalFields=[];this._sortableFields={};this._originalData=this._data=[];this._headers=[];this._pagination=null;this._totalRows=0;this._init()};return k.prototype={_init:function(){if(this._markupMode){if(this._setHeadersHandlers(), g.each(h.select("tbody tr",this._rootElement),Ink.bind(function(a){this._data.push(a)},this)),this._originalData=this._data.slice(0),this._totalRows=this._data.length,"pageSize"in this._options&&void 0!==this._options.pageSize){for(this._pagination=this._rootElement.nextSibling;1!==this._pagination.nodeType;)this._pagination=this._pagination.nextSibling;if("nav"!==this._pagination.nodeName.toLowerCase())throw"[Ink.UI.Table] :: Missing the pagination markup or is mis-positioned";this._pagination=new (Ink.getModule("Ink.UI.Pagination", 1))(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(a){this._paginate(a._current+1)},this)});this._paginate(1)}}else this._getData(this._options.endpoint,!0)},_onClick:function(c){var e,k=a.element(c);e=d.data(k);var s="pageSize"in this._options&&void 0!==this._options.pageSize;if("th"===k.nodeName.toLowerCase()&&"sortable"in e&&"true"==""+e.sortable){if(a.stop(c),c=-1,g.inArray(k,this._headers))for(e=0;this._headers.length>e;e++)if(this._headers[e]=== k){c=e;break}if(!this._markupMode&&s){for(var q in this._sortableFields)q!=="col_"+c&&(this._sortableFields[q]="none",this._headers[q.replace("col_","")].innerHTML=f.stripTags(this._headers[q.replace("col_","")].innerHTML));"asc"===this._sortableFields["col_"+c]?(this._sortableFields["col_"+c]="desc",this._headers[c].innerHTML=f.stripTags(this._headers[c].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+c]="asc",this._headers[c].innerHTML=f.stripTags(this._headers[c].innerHTML)+ '<i class="icon-caret-up"></i>');this._pagination.setCurrent(this._pagination._current)}else if(-1!==c){if("desc"===this._sortableFields["col_"+c]&&this._options.allowResetSorting&&"true"==""+this._options.allowResetSorting)this._headers[c].innerHTML=f.stripTags(this._headers[c].innerHTML),this._sortableFields["col_"+c]="none",this._data=this._originalData.slice(0);else{for(q in this._sortableFields)q!=="col_"+c&&(this._sortableFields[q]="none",this._headers[q.replace("col_","")].innerHTML=f.stripTags(this._headers[q.replace("col_", "")].innerHTML));this._sort(c);"asc"===this._sortableFields["col_"+c]?(this._data.reverse(),this._sortableFields["col_"+c]="desc",this._headers[c].innerHTML=f.stripTags(this._headers[c].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+c]="asc",this._headers[c].innerHTML=f.stripTags(this._headers[c].innerHTML)+'<i class="icon-caret-up"></i>')}var r=h.select("tbody",this._rootElement)[0];b.cleanChildren(r);g.each(this._data,function(a){r.appendChild(a)});this._pagination.setCurrent(0); this._paginate(1)}}},_paginate:function(a){g.each(this._data,Ink.bind(function(b,c){c>=(a-1)*parseInt(this._options.pageSize,10)&&(a-1)*parseInt(this._options.pageSize,10)+parseInt(this._options.pageSize,10)>c?e.removeClassName(b,"hide-all"):e.addClassName(b,"hide-all")},this))},_sort:function(a){this._data.sort(Ink.bind(function(b,c){var f=d.textContent(h.select("td",b)[a]),e=d.textContent(h.select("td",c)[a]),g=RegExp(/\d/g);return!isNaN(f)&&g.test(f)?f=parseInt(f,10):isNaN(f)||(f=parseFloat(f)), !isNaN(e)&&g.test(e)?e=parseInt(e,10):isNaN(e)||(e=parseFloat(e)),f===e?0:f>e?1:-1},this))},_setHeaders:function(a,b){var c,f,e,g;if(0===h.select("thead",this._rootElement).length)for(c in f=this._rootElement.createTHead(),e=f.insertRow(0),a)a.hasOwnProperty(c)&&!(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(c))&&(g=document.createElement("th"),f=a[c],"sortable"in f&&"true"==""+f.sortable&&g.setAttribute("data-sortable","true"),"label"in f&&d.setTextContent(g,f.label),this._originalFields.push(c), e.appendChild(g));else for(c in f=b[0],f)f.hasOwnProperty(c)&&!(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(c))&&this._originalFields.push(c)},_setHeadersHandlers:function(){var b=h.select("thead",this._rootElement);b.length&&(a.observe(b[0],"click",this._handlers.click),this._headers=h.select("thead tr th",this._rootElement),g.each(this._headers,Ink.bind(function(a,b){var c=d.data(a);"sortable"in c&&"true"==""+c.sortable&&(this._sortableFields["col_"+b]="none")},this)))}, _setData:function(a){var b,c,d,f,e,g;c=h.select("tbody",this._rootElement);0===c.length?(c=document.createElement("tbody"),this._rootElement.appendChild(c)):(c=c[0],c.innerHTML="");this._data=[];for(e in a)if(a.hasOwnProperty(e)){d=document.createElement("tr");c.appendChild(d);g=0;for(b in a[e])a[e].hasOwnProperty(b)&&!(this._options.visibleFields&&-1===this._options.visibleFields.indexOf(b))&&(f=d.insertCell(g++),f.innerHTML=a[e][b]);this._data.push(d)}this._originalData=this._data.slice(0)},setEndpoint:function(a, b){this._markupMode||(this._options.endpoint=a,this._pagination.setCurrent(b?parseInt(b,10):0))},_setPagination:function(){if("pageSize"in this._options&&void 0!==this._options.pageSize,"pageSize"in this._options&&void 0!==this._options.pageSize&&!this._pagination)this._pagination=document.createElement("nav"),this._pagination.className="ink-navigation",this._rootElement.parentNode.insertBefore(this._pagination,this._rootElement.nextSibling),this._pagination.appendChild(document.createElement("ul")).className= "pagination",this._pagination=new (Ink.getModule("Ink.UI.Pagination",1))(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(){this._getData(this._options.endpoint)},this)})},_getData:function(a){Ink.requireModules(["Ink.Util.Url_1"],Ink.bind(function(b){b=b.parseUrl(a);var c="pageSize"in this._options&&void 0!==this._options.pageSize,d=this._pagination?this._pagination._current+1:1;if(b.query=b.query?b.query.split("&"):[],c){b.query.push("rows_per_page="+ this._options.pageSize);b.query.push("page="+d);for(var f in this._sortableFields)if("none"!==this._sortableFields[f]){b.query.push("sortField="+this._originalFields[parseInt(f.replace("col_",""),10)]);b.query.push("sortOrder="+this._sortableFields[f]);break}this._getDataViaAjax(a+"?"+b.query.join("&"))}else this._getDataViaAjax(a)},this))},_getDataViaAjax:function(a){var b="pageSize"in this._options&&void 0!==this._options.pageSize;new c(a,{method:"GET",contentType:"application/json",sanitizeJSON:!0, onSuccess:Ink.bind(function(a){200===a.status&&(a=JSON.parse(a.responseText),0===this._headers.length&&(this._setHeaders(a.headers,a.rows),this._setHeadersHandlers()),this._setData(a.rows),b?this._totalRows&&parseInt(a.totalRows,10)!==parseInt(this._totalRows,10)?(this._totalRows=a.totalRows,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=a.totalRows:this._totalRows&&a.rows.length!==parseInt(this._totalRows,10)?(this._totalRows=a.rows.length,this._pagination.setSize(Math.ceil(this._totalRows/ this._options.pageSize))):this._totalRows=a.rows.length,this._setPagination())},this)})}},k}); Ink.createModule("Ink.UI.Tabs","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){var g=function(a,b){if(c.isDOMElement(a))this._element=a;else{if(a=d.select(a),0===a.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=a[0]}this._options=Ink.extendObj({preventUrlChange:!1,active:void 0,disabled:[],onBeforeChange:void 0,onChange:void 0},e.data(a));this._options= Ink.extendObj(this._options,b||{});this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(this._onResize,this)};this._init()};return g.prototype={_init:function(){this._menu=d.select(".tabs-nav",this._element)[0];this._menuTabs=this._getChildElements(this._menu);this._contentTabs=d.select(".tabs-content",this._element);this._initializeDom();this._observe();this._setFirstActive();this._changeTab(this._activeMenuLink); this._handlers.resize();c.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var b=0;this._contentTabs.length>b;b++)a.hide(this._contentTabs[b])},_observe:function(){h.each(this._menuTabs,Ink.bind(function(a){a=d.select("a",a)[0];h.inArray(a.getAttribute("href"),this._options.disabled)?this.disable(a):this.enable(a)},this));b.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){this._activeContentTab=d.select(window.location.hash,this._element)[0]||d.select(this._hashify(this._options.active), this._element)[0]||d.select(".tabs-content",this._element)[0];this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id"));this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(b,c){c&&void 0!==this._options.onBeforeChange&&this._options.onBeforeChange(this);var e=b.getAttribute("href");a.removeClassName(this._activeMenuTab,"active");a.removeClassName(this._activeContentTab,"active");a.addClassName(this._activeContentTab,"hide-all");this._activeMenuLink= b;this._activeMenuTab=this._activeMenuLink.parentNode;this._activeContentTab=d.select(e.substr(e.indexOf("#")),this._element)[0];a.addClassName(this._activeMenuTab,"active");a.addClassName(this._activeContentTab,"active");a.removeClassName(this._activeContentTab,"hide-all");a.show(this._activeContentTab);c&&void 0!==this._options.onChange&&this._options.onChange(this)},_onTabClicked:function(a){b.stop(a);a=b.findElement(a,"A");"a"===a.nodeName.toLowerCase()&&("true"!=""+this._options.preventUrlChange&& (window.location.hash=a.getAttribute("href").substr(a.getAttribute("href").indexOf("#"))),a!==this._activeMenuLink&&this.changeTab(a))},_onDisabledTabClicked:function(a){b.stop(a)},_onResize:function(){var b=c.currentLayout();b!==this._lastLayout&&(b===c.Layouts.SMALL||b===c.Layouts.MEDIUM?(a.removeClassName(this._menu,"menu"),a.removeClassName(this._menu,"horizontal")):(a.addClassName(this._menu,"menu"),a.addClassName(this._menu,"horizontal")),this._lastLayout=b)},_hashify:function(a){return a?0=== a.indexOf("#")?a:"#"+a:""},_findLinkByHref:function(a){a=this._hashify(a);var b;return h.each(this._menuTabs,Ink.bind(function(c){c=d.select("a",c)[0];-1!==c.getAttribute("href").indexOf("#")&&c.getAttribute("href").substr(c.getAttribute("href").indexOf("#"))===a&&(b=c)},this)),b},_getChildElements:function(a){var b=[];a=a.children;for(var c=0;a.length>c;c++)1===a[c].nodeType&&b.push(a[c]);return b},changeTab:function(b){(b=1===b.nodeType?b:this._findLinkByHref(this._hashify(b)))&&!a.hasClassName(b, "ink-disabled")&&this._changeTab(b,!0)},disable:function(c){(c=1===c.nodeType?c:this._findLinkByHref(this._hashify(c)))&&(b.stopObserving(c,"click",this._handlers.tabClicked),b.observe(c,"click",this._handlers.disabledTabClicked),a.addClassName(c,"ink-disabled"))},enable:function(c){(c=1===c.nodeType?c:this._findLinkByHref(this._hashify(c)))&&(b.stopObserving(c,"click",this._handlers.disabledTabClicked),b.observe(c,"click",this._handlers.tabClicked),a.removeClassName(c,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")}, activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:c.destroyComponent},g}); Ink.createModule("Ink.UI.Toggle","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){c=function(a,b){if("string"!=typeof a&&"object"!=typeof a)throw"[Ink.UI.Toggle] Invalid CSS selector to determine the root element";if("string"==typeof a){if(this._rootElement=d.select(a),0>=this._rootElement.length)throw"[Ink.UI.Toggle] Root element not found";this._rootElement=this._rootElement[0]}else this._rootElement=a;if(this._options= Ink.extendObj({target:void 0,triggerEvent:"click",closeOnClick:!0},e.data(this._rootElement)),this._options=Ink.extendObj(this._options,b||{}),this._targets="string"==typeof this._options.target?d.select(this._options.target):"object"==typeof this._options.target?this._options.target.constructor===Array?this._options.target:[this._options.target]:void 0,!this._targets.length)throw"[Ink.UI.Toggle] Toggle target was not found! Supply a valid selector, array, or element through the `target` option."; this._init()};return c.prototype={_init:function(){this._accordion=a.hasClassName(this._rootElement.parentNode,"accordion")||a.hasClassName(this._targets[0].parentNode,"accordion");b.observe(this._rootElement,this._options.triggerEvent,Ink.bindEvent(this._onTriggerEvent,this));"true"==""+this._options.closeOnClick&&b.observe(document,"click",Ink.bindEvent(this._onClick,this))},_onTriggerEvent:function(){if(this._accordion){var b,c,k;k=a.hasClassName(this._targets[0].parentNode,"accordion")?this._targets[0].parentNode: this._targets[0].parentNode.parentNode;b=d.select(".toggle",k);for(c=0;b.length>c;c+=1){var h=e.data(b[c]),h=d.select(h.target,k);0<h.length&&h[0]!==this._targets[0]&&(h[0].style.display="none")}}var p;c=0;for(k=this._targets.length;k>c;c++)p="none"===a.getStyle(this._targets[c],"display")?"show-all":"hide-all",b="none"===a.getStyle(this._targets[c],"display")?"block":"none",a.removeClassName(this._targets[c],"show-all"),a.removeClassName(this._targets[c],"hide-all"),a.addClassName(this._targets[c], p),this._targets[c].style.display=b;"show-all"===p?a.addClassName(this._rootElement,"active"):a.removeClassName(this._rootElement,"active")},_onClick:function(a){var c=b.element(a);a=h.some(this._targets,function(a){return e.isAncestorOf(a,c)});if(this._rootElement!==c&&!e.isAncestorOf(this._rootElement,c)&&!a){if((a=Ink.ss(".ink-shade")).length)for(var d=a.length,l=0;d>l;l++)if(e.isAncestorOf(a[l],c)&&e.isAncestorOf(a[l],this._rootElement))return;e.findUpwardsByClass(c,"toggle")&&this._dismiss(this._rootElement)}}, _dismiss:function(){if("none"!==a.getStyle(this._targets[0],"display")){for(var b=0,c=this._targets.length;c>b;b++)a.removeClassName(this._targets[b],"show-all"),a.addClassName(this._targets[b],"hide-all"),this._targets[b].style.display="none";a.removeClassName(this._rootElement,"active")}}},c}); Ink.createModule("Ink.UI.Tooltip","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Dom.Css_1 Ink.Dom.Browser_1".split(" "),function(c,b,a,e,d,h){function g(a,b){this._init(a,b||{})}function f(a,b){this._init(a,b)}var k,l,p;(function(){for(var a=document.createElement("DIV"),b=["transition","oTransition","msTransition","mozTransition","webkitTransition"],c=0;b.length>c;c++)if(void 0!==a.style[b[c]+"Duration"]){k=b[c]+"Duration";l=b[c]+"Property";p=b[c]+"TimingFunction"; break}})();var n=document.getElementsByTagName("body"),s=n&&n.length?n[0]:document.documentElement;return g.prototype={_init:function(a,b){var c;if(this.options=Ink.extendObj({where:"up",zIndex:1E4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:0.3,text:""},b||{}),"string"==typeof a)c=e.select(a);else{if("object"!=typeof a)throw"Element expected";c=[a]}this.tooltips=[];for(var d=0,g=c.length;g>d;d++)this.tooltips[d]=new f(this,c[d])},destroy:function(){d.each(this.tooltips, function(a){a._destroy()});this.options=this.tooltips=null}},f.prototype={_oppositeDirections:{left:"right",right:"left",up:"down",down:"up"},_init:function(a,c){b.observe(c,"mouseover",Ink.bindEvent(this._onMouseOver,this));b.observe(c,"mouseout",Ink.bindEvent(this._onMouseOut,this));b.observe(c,"mousemove",Ink.bindEvent(this._onMouseMove,this));this.root=a;this.element=c;this.tooltip=this._delayTimeout=null},_makeTooltip:function(a){if(!this._getOpt("text"))return!1;var c=this._createTooltipElement(); this.tooltip&&this._removeTooltip();this.tooltip=c;this._fadeInTooltipElement(c);this._placeTooltipElement(c,a);b.observe(c,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));(a=this._getFloatOpt("timeout"))&&setTimeout(Ink.bind(function(){this.tooltip===c&&this._removeTooltip()},this),1E3*a)},_createTooltipElement:function(){var b,d;b=this._getOpt("template");var f=this._getOpt("templatefield");if(b){var g=document.createElement("DIV");if(g.innerHTML=c.elOrSelector(b,"options.template").outerHTML, b=g.firstChild,f){if(d=e.select(f,b),!d)throw"options.templatefield must be a valid selector within options.template";d=d[0]}else d=b}else b=document.createElement("DIV"),h.addClassName(b,"ink-tooltip"),h.addClassName(b,this._getOpt("color")),d=document.createElement("DIV"),h.addClassName(d,"content"),b.appendChild(d);return a.setTextContent(d,this._getOpt("text")),b.style.display="block",b.style.position="absolute",b.style.zIndex=this._getIntOpt("zIndex"),b},_fadeInTooltipElement:function(a){var b= this._getFloatOpt("fade");k&&b&&(a.style.opacity="0",a.style[k]=b+"s",a.style[l]="opacity",a.style[p]="ease-in-out",setTimeout(function(){a.style.opacity="1"},0))},_placeTooltipElement:function(b,c){var d=this._getOpt("where");if("mousemove"===d||"mousefix"===d)this._setPos(c[0],c[1]),s.appendChild(b);else if(d.match(/(up|down|left|right)/)){s.appendChild(b);var e=a.offset(this.element),f=e[0],g=e[1];f instanceof Array&&(g=f[1],f=f[0]);var k=a.elementWidth(this.element)/2-a.elementWidth(b)/2,l=a.elementHeight(this.element)/ 2-a.elementHeight(b)/2,n=this._getIntOpt("spacing"),e=a.elementDimensions(b),p=a.elementDimensions(this.element),D=a.scrollWidth()+a.viewportWidth(),z=a.scrollHeight()+a.viewportHeight();"left"===d&&0>f-e[0]?d="right":"right"===d&&f+e[0]>D?d="left":"up"===d&&0>g-e[1]?d="down":"down"===d&&g+e[1]>z&&(d="up");"up"===d?(g-=e[1],g-=n,f+=k):"down"===d?(g+=p[1],g+=n,f+=k):"left"===d?(f-=e[0],f-=n,g+=l):"right"===d&&(f+=p[0],f+=n,g+=l);k=null;d.match(/(up|down|left|right)/)&&(k=document.createElement("SPAN"), h.addClassName(k,"arrow"),h.addClassName(k,this._oppositeDirections[d]),b.appendChild(k));d=this._getLocalScroll();f-=d[0];g-=d[1];z=g+e[1]-z;D=f+e[0]-D;d=0-f;l=0-g;0<z?(k&&(k.style.top=e[1]/2+z+"px"),g-=z):0<l?(k&&(k.style.top=e[1]/2-l+"px"),g+=l):0<D?(k&&(k.style.left=e[0]/2+D+"px"),f-=D):0<d&&(k&&(k.style.left=e[0]/2-d+"px"),f+=d);b.style.left=f+"px";b.style.top=g+"px"}},_removeTooltip:function(){var b=this.tooltip;if(b){var c=Ink.bind(a.remove,{},b);"mousemove"!==this._getOpt("where")&&k?(b.style.opacity= 0,setTimeout(c,1E3*this._getFloatOpt("fade"))):c();this.tooltip=null}},_getOpt:function(b){var c=a.data(this.element)[a._camelCase("tip-"+b)];if(c)return c;b=this.root.options[b];return void 0!==b?b:void 0},_getIntOpt:function(a){return parseInt(this._getOpt(a),10)},_getFloatOpt:function(a){return parseFloat(this._getOpt(a),10)},_destroy:function(){this.tooltip&&a.remove(this.tooltip);this.tooltip=this.element=this.root=null},_onMouseOver:function(a){var b=this._getMousePosition(a);(a=this._getFloatOpt("delay"))? this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(b);this._delayTimeout=null},this),1E3*a):this._makeTooltip(b)},_onMouseMove:function(a){"mousemove"===this._getOpt("where")&&this.tooltip&&(a=this._getMousePosition(a),this._setPos(a[0],a[1]))},_onMouseOut:function(){this._getIntOpt("forever")||this._removeTooltip();this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(b, c){b+=this._getIntOpt("left");c+=this._getIntOpt("top");var d=this._getPageXY();if(this.tooltip){var e=[a.elementWidth(this.tooltip),a.elementHeight(this.tooltip)],f=this._getScroll();e[0]+b-f[0]>=d[0]-20&&(b=b-e[0]-this._getIntOpt("left")-10);e[1]+c-f[1]>=d[1]-20&&(c=c-e[1]-this._getIntOpt("top")-10);this.tooltip.style.left=b+"px";this.tooltip.style.top=c+"px"}},_getPageXY:function(){var a=0;return"number"==typeof window.innerWidth?a=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth|| document.documentElement.clientHeight)?a=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(a=document.body.clientHeight),[parseInt(0,10),parseInt(a,10)]},_getScroll:function(){var a=document.documentElement,b=document.body;return a&&(a.scrollLeft||a.scrollTop)?[a.scrollLeft,a.scrollTop]:b?[b.scrollLeft,b.scrollTop]:[0,0]},_getLocalScroll:function(){for(var a,b,c=[0,0],d=this.element.parentNode;d&&d!==document.documentElement&&d!==document.body;)a= d.scrollLeft,b=d.scrollTop,a&&(c[0]+=a),b&&(c[1]+=b),d=d.parentNode;return c},_getMousePosition:function(a){return[parseInt(b.pointerX(a),10),parseInt(b.pointerY(a),10)]}},g}); Ink.createModule("Ink.UI.TreeView","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){var g=function(a,b){if(!c.isDOMElement(a)&&"string"!=typeof a)throw"[Ink.UI.TreeView] :: Invalid selector";if("string"==typeof a){if(this._element=d.select(a),1>this._element.length)throw"[Ink.UI.TreeView] :: Selector has returned no elements";this._element=this._element[0]}else this._element=a;this._options=Ink.extendObj({node:"li", child:"ul"},e.data(this._element));this._options=Ink.extendObj(this._options,b||{});this._init()};return g.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)};b.observe(this._element,"click",this._handlers.click);var c,e=d.select(this._options.node,this._element);h.each(e,Ink.bind(function(b){a.hasClassName(b,"open")||(a.hasClassName(b,"closed")||a.addClassName(b,"closed"),c=d.select(this._options.child,b),h.each(c,Ink.bind(function(b){a.hasClassName(b,"hide-all")|| a.addClassName(b,"hide-all")},this)))},this))},_onClick:function(c){var e=b.element(c);if("."===this._options.node[0]){if(!a.hasClassName(e,this._options.node.substr(1)))for(;!a.hasClassName(e,this._options.node.substr(1))&&"body"!==e.nodeName.toLowerCase();)e=e.parentNode}else if("#"===this._options.node[0]){if(e.id!==this._options.node.substr(1))for(;e.id!==this._options.node.substr(1)&&"body"!==e.nodeName.toLowerCase();)e=e.parentNode}else if(e.nodeName.toLowerCase()!==this._options.node)for(;e.nodeName.toLowerCase()!== this._options.node&&"body"!==e.nodeName.toLowerCase();)e=e.parentNode;if("body"!==e.nodeName.toLowerCase()){var g=d.select(this._options.child,e);0<g.length&&(b.stop(c),g=g[0],a.hasClassName(g,"hide-all")?(a.removeClassName(g,"hide-all"),a.addClassName(e,"open"),a.removeClassName(e,"closed")):(a.addClassName(g,"hide-all"),a.removeClassName(e,"open"),a.addClassName(e,"closed")))}}},g}); Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(c,b,a){return{speed:10,gy:function(a){var b;if(b=a.offsetTop,a.offsetParent)for(;a=a.offsetParent;)b+=a.offsetTop;return b},scrollTop:function(){var a=document.body,b=document.documentElement;return a&&a.scrollTop?a.scrollTop:b&&b.scrollTop?b.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(a,b,h){c.observe(a,b,h)},end:function(a){return window.event?(window.event.cancelBubble= !0,window.event.returnValue=!1,void 0):(c.stop(a),void 0)},scroll:function(a){var b=Ink.UI.SmoothScroller.scrollTop(),b=b+(a>b?Math.ceil((a-b)/Ink.UI.SmoothScroller.speed):(a-b)/Ink.UI.SmoothScroller.speed);window.scrollTo(0,b);(b===a||Ink.UI.SmoothScroller.offsetTop===b)&&clearInterval(Ink.UI.SmoothScroller.interval);Ink.UI.SmoothScroller.offsetTop=b},init:function(){a.run(Ink.UI.SmoothScroller.render)},render:function(){var a=b.select("a.scrollableLink");Ink.UI.SmoothScroller.end(this);for(var d= 0;a.length>d;d++){var h=a[d];!h.href||-1===h.href.indexOf("#")||h.pathname!==location.pathname&&"/"+h.pathname!==location.pathname||(Ink.UI.SmoothScroller.add(h,"click",Ink.UI.SmoothScroller.end),c.observe(h,"click",Ink.bindEvent(Ink.UI.SmoothScroller.clickScroll,this,h)))}},clickScroll:function(a,c){if(Ink.UI.SmoothScroller.end(c),null!==c&&null!==c.getAttribute("href")){var h=c.href.indexOf("#");if(-1!==h&&(h=c.href.substr(h+1),h=b.select('a[name="'+h+'"],#'+h),void 0!==h[0])){if(-1===c.parentNode.className.indexOf("active")){var g= c.parentNode.parentNode.firstChild;do if(void 0!==g.tagName&&"LI"===g.tagName.toUpperCase()&&-1!==g.className.indexOf("active")){g.className=g.className.replace("active","");break}while(g=g.nextSibling);c.parentNode.className+=" active"}clearInterval(Ink.UI.SmoothScroller.interval);Ink.UI.SmoothScroller.interval=setInterval("Ink.UI.SmoothScroller.scroll("+Ink.UI.SmoothScroller.gy(h[0])+")",10)}}}}}); Ink.createModule("Ink.UI.ImageQuery","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){a=function(a,b){if(!c.isDOMElement(a)&&"string"!=typeof a)throw"[ImageQuery] :: Invalid selector";if("string"==typeof a){if(this._element=d.select(a),1>this._element.length)throw"[ImageQuery] :: Selector has returned no elements";if(1<this._element.length){var k;for(k=1;this._element.length>k;k+=1)new Ink.UI.ImageQuery(this._element[k], b)}this._element=this._element[0]}else this._element=a;this._options=Ink.extendObj({queries:[],onLoad:null},e.data(this._element));this._options=Ink.extendObj(this._options,b||{});-1!==(k=this._element.src.lastIndexOf("?"))?(k=this._element.src.substr(k),this._filename=this._element.src.replace(k,"").split("/").pop()+k):this._filename=this._element.src.split("/").pop();this._init()};return a.prototype={_init:function(){this._options.queries=h.sortMulti(this._options.queries,"width").reverse();this._handlers= {resize:Ink.bindEvent(this._onResize,this),load:Ink.bindEvent(this._onLoad,this)};"function"==typeof this._options.onLoad&&b.observe(this._element,"onload",this._handlers.load);b.observe(window,"resize",this._handlers.resize);this._handlers.resize.call(this)},_onResize:function(){clearTimeout(a);var a=setTimeout(Ink.bind(function(){if(!this._options.queries||this._options.queries==={})return clearTimeout(a),void 0;var b,c,d;"number"==typeof window.innerWidth?d=window.innerWidth:document.documentElement&& (document.documentElement.clientWidth||document.documentElement.clientHeight)?d=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(d=document.body.clientWidth);for(b=0;this._options.queries.length>b;b+=1)if(d>=this._options.queries[b].width){c=b;break}void 0===c&&(c=this._options.queries.length-1);b=this._options.queries[c].src||this._options.src;if("devicePixelRatio"in window&&1<window.devicePixelRatio&&"retina"in this._options&&(b=this._options.queries[c].retina|| this._options.retina),this._options.queries[c].file=this._filename,"function"==typeof b&&(b=b.apply(this,[this._element,this._options.queries[c]]),"string"!=typeof b))throw'[ImageQuery] :: "src" callback does not return a string';for(var e in this._options.queries[c])if(this._options.queries[c].hasOwnProperty(e)&&!("src"===e||"retina"===e))b=b.replace("{:"+e+"}",this._options.queries[c][e]);this._element.src=b;delete this._options.queries[c].file;a=void 0},this),300)},_onLoad:function(){this._options.onLoad.call(this)}}, a}); Ink.createModule("Ink.UI.FormValidator","2","Ink.UI.Aux_1 Ink.Dom.Element_1 Ink.Dom.Event_1 Ink.Dom.Selector_1 Ink.Dom.Css_1 Ink.Util.Array_1 Ink.Util.I18n_1 Ink.Util.Validator_1".split(" "),function(c,b,a,e,d,h,g,f){var k={required:function(a){return void 0!==a&&!/^\s*$/.test(a)},min_length:function(a,b){return"string"==typeof a&&a.length>=parseInt(b,10)},max_length:function(a,b){return"string"==typeof a&&a.length<=parseInt(b,10)},exact_length:function(a,b){return"string"==typeof a&&a.length===parseInt(b, 10)},email:function(a){return"string"==typeof a&&f.mail(a)},url:function(a,b){return b=b||!1,"string"==typeof a&&f.url(a,b)},ip:function(a,b){return"string"!=typeof a?!1:f.isIP(a,b)},phone:function(a,b){if("string"!=typeof a)return!1;var c=b?b.toUpperCase():"";return f["is"+c+"Phone"](a)},credit_card:function(a,b){return"string"!=typeof a?!1:f.isCreditCard(a,b||"default")},date:function(a,b){return"string"==typeof a&&f.isDate(b,a)},alpha:function(a,b){return f.ascii(a,{singleLineWhitespace:b})},text:function(a, b,c){return f.unicode(a,{singleLineWhitespace:b,unicodePunctuation:c})},latin:function(a,b,c){return"string"!=typeof a?!1:f.latin1(a,{latin1Punctuation:b,singleLineWhitespace:c})},alpha_numeric:function(a){return f.ascii(a,{numbers:!0})},alpha_dash:function(a){return f.ascii(a,{dash:!0,underscore:!0})},digit:function(a){return"string"==typeof a&&/^[0-9]{1}$/.test(a)},integer:function(a,b){return f.number(a,{negative:!b,decimalPlaces:0})},decimal:function(a,b,c,d){return f.number(a,{decimalSep:b|| ".",decimalPlaces:+c||null,maxDigits:+d})},numeric:function(a,b,c,d){return b=b||".",-1!==a.indexOf(b)?k.decimal(a,b,c,d):k.integer(a)},range:function(a,b,c,d){return a=+a,b=+b,c=+c,isNaN(a)||isNaN(b)||isNaN(c)?!1:b>a||a>c?!1:d?0===(a-b)%d:!0},color:function(a){return f.isColor(a)},matches:function(a,b){return a===this.getFormElements()[b][0].getValue()}},l=new g({en_US:{"formvalidator.required":"The {field} filling is mandatory","formvalidator.min_length":"The {field} must have a minimum size of {param1} characters", "formvalidator.max_length":"The {field} must have a maximum size of {param1} characters","formvalidator.exact_length":"The {field} must have an exact size of {param1} characters","formvalidator.email":"The {field} must have a valid e-mail address","formvalidator.url":"The {field} must have a valid URL","formvalidator.ip":"The {field} does not contain a valid {param1} IP address","formvalidator.phone":"The {field} does not contain a valid {param1} phone number","formvalidator.credit_card":"The {field} does not contain a valid {param1} credit card", "formvalidator.date":"The {field} should contain a date in the {param1} format","formvalidator.alpha":"The {field} should only contain letters","formvalidator.text":"The {field} should only contain alphabetic characters","formvalidator.latin":"The {field} should only contain alphabetic characters","formvalidator.alpha_numeric":"The {field} should only contain letters or numbers","formvalidator.alpha_dashes":"The {field} should only contain letters or dashes","formvalidator.digit":"The {field} should only contain a digit", "formvalidator.integer":"The {field} should only contain an integer","formvalidator.decimal":"The {field} should contain a valid decimal number","formvalidator.numeric":"The {field} should contain a number","formvalidator.range":"The {field} should contain a number between {param1} and {param2}","formvalidator.color":"The {field} should contain a valid color","formvalidator.matches":"The {field} should match the field {param1}","formvalidator.validation_function_not_found":"The rule {rule} has not been defined"}, pt_PT:{"formvalidator.required":"Preencher {field} \u00c3\u00a9 obrigat\u00c3\u00b3rio","formvalidator.min_length":"{field} deve ter no m\u00c3\u00adnimo {param1} caracteres","formvalidator.max_length":"{field} tem um tamanho m\u00c3\u00a1ximo de {param1} caracteres","formvalidator.exact_length":"{field} devia ter exactamente {param1} caracteres","formvalidator.email":"{field} deve ser um e-mail v\u00c3\u00a1lido","formvalidator.url":"O {field} deve ser um URL v\u00c3\u00a1lido","formvalidator.ip":"{field} n\u00c3\u00a3o tem um endere\u00c3\u00a7o IP {param1} v\u00c3\u00a1lido", "formvalidator.phone":"{field} deve ser preenchido com um n\u00c3\u00bamero de telefone {param1} v\u00c3\u00a1lido.","formvalidator.credit_card":"{field} n\u00c3\u00a3o tem um cart\u00c3\u00a3o de cr\u00c3\u00a9dito {param1} v\u00c3\u00a1lido","formvalidator.date":"{field} deve conter uma data no formato {param1}","formvalidator.alpha":"O campo {field} deve conter apenas caracteres alfab\u00c3\u00a9ticos","formvalidator.text":"O campo {field} deve conter apenas caracteres alfab\u00c3\u00a9ticos", "formvalidator.latin":"O campo {field} deve conter apenas caracteres alfab\u00c3\u00a9ticos","formvalidator.alpha_numeric":"{field} deve conter apenas letras e n\u00c3\u00bameros","formvalidator.alpha_dashes":"{field} deve conter apenas letras e tra\u00c3\u00a7os","formvalidator.digit":"{field} destina-se a ser preenchido com apenas um d\u00c3\u00adgito","formvalidator.integer":"{field} deve conter um n\u00c3\u00bamero inteiro","formvalidator.decimal":"{field} deve conter um n\u00c3\u00bamero v\u00c3\u00a1lido", "formvalidator.numeric":"{field} deve conter um n\u00c3\u00bamero v\u00c3\u00a1lido","formvalidator.range":"{field} deve conter um n\u00c3\u00bamero entre {param1} e {param2}","formvalidator.color":"{field} deve conter uma cor v\u00c3\u00a1lida","formvalidator.matches":"{field} deve corresponder ao campo {param1}","formvalidator.validation_function_not_found":"[A regra {rule} n\u00c3\u00a3o foi definida]"}},"en_US"),p=function(a,d){this._element=c.elOrSelector(a,"Invalid FormElement");this._errors= {};this._rules={};this._value=null;this._options=Ink.extendObj({label:this._getLabel()},b.data(this._element));this._options=Ink.extendObj(this._options,d||{})};p.prototype={_getLabel:function(){var a=b.findUpwardsByClass(this._element,"control-group");return(a=Ink.s("label",a))?b.textContent(a):this._element.name||this._element.id||""},_parseRules:function(a){this._rules={};a=a.split("|");var b,c,d,e,f=a.length;if(0<f)for(b=0;f>b;b++)if(c=a[b])if(-1!==(e=c.indexOf("["))){d=c.substr(e+1);d=d.split("]"); d=d[0];d=d.split(",");for(var g=0,h=d.length;h>g;g++)d[g]="true"===d[g]?!0:"false"===d[g]?!1:d[g];d.splice(0,0,this.getValue());c=c.substr(0,e);this._rules[c]=d}else this._rules[c]=[this.getValue()]},_addError:function(a){for(var b=this._rules[a]||[],c={field:this._options.label,value:this.getValue()},d=1;b.length>d;d++)c["param"+d]=b[d];b="formvalidator."+a;this._errors[a]=l.text(b,c);this._errors[a]===b&&(this._errors[a]="Validation message not found")},getValue:function(){switch(this._element.nodeName.toLowerCase()){case "select":return Ink.s("option:selected", this._element).value;case "textarea":return this._element.innerHTML;case "input":if(!("type"in this._element))return this._element.value;if("radio"===this._element.type&&"checkbox"===this._element.type){if(this._element.checked)return this._element.value}else if("file"!==this._element.type)return this._element.value;break;default:return this._element.innerHTML}},getErrors:function(){return this._errors},getElement:function(){return this._element},getFormElements:function(){return this._options.form._formElements}, validate:function(){if(this._errors={},this._parseRules(this._options.rules),"required"in this._rules||""!==this.getValue())for(var a in this._rules)if(this._rules.hasOwnProperty(a)){if("function"!=typeof k[a])return this._addError(null),!1;if(!1===k[a].apply(this,this._rules[a]))return this._addError(a),!1}return!0}};g=function(d,e){this._rootElement=c.elOrSelector(d);this._formElements={};this._errorMessages=[];this._markedErrorElements=[];this._options=Ink.extendObj({eventTrigger:"submit",searchFor:"input, select, textarea, .control-group", beforeValidation:void 0,onError:void 0,onSuccess:void 0},b.data(this._rootElement));this._options=Ink.extendObj(this._options,e||{});"string"==typeof this._options.eventTrigger&&a.observe(this._rootElement,this._options.eventTrigger,Ink.bindEvent(this.validate,this));this._init()};return g.setRule=function(a,b,c){if(k[a]=c,l.getKey("formvalidator."+a)!==b)c={},c["formvalidator."+a]=b,a={},a[l.lang()]=c,l.append(a)},g.getI18n=function(){return l},g.setI18n=function(a){l=a},g.appendI18n=function(){l.append.apply(l, [].slice.call(arguments))},g.setLanguage=function(a){l.lang(a)},g.getRules=function(){return k},g.prototype={_init:function(){},getElements:function(){this._formElements={};var a=e.select(this._options.searchFor,this._rootElement);if(a.length){var c,d;for(c=0;a.length>c;c+=1)if(d=a[c],"rules"in b.data(d)){var f,g={form:this};"name"in d&&d.name?f=d.name:"id"in d&&d.id?f=d.id:(f="element_"+Math.floor(100*Math.random()),d.id=f);f in this._formElements?this._formElements[f].push(new p(d,g)):this._formElements[f]= [new p(d,g)]}}return this._formElements},validate:function(c){a.stop(c);"function"==typeof this._options.beforeValidation&&this._options.beforeValidation();this.getElements();c=[];for(var e in this._formElements)if(this._formElements.hasOwnProperty(e))for(var f=0;this._formElements[e].length>f;f+=1)this._formElements[e][f].validate()||c.push(this._formElements[e][f]);return 0===c.length?("function"==typeof this._options.onSuccess&&this._options.onSuccess(),!0):("function"==typeof this._options.onError&& this._options.onError(c),h.each(this._markedErrorElements,Ink.bind(d.removeClassName,d,"validation")),h.each(this._markedErrorElements,Ink.bind(d.removeClassName,d,"error")),h.each(this._errorMessages,b.remove),this._errorMessages=[],this._markedErrorElements=[],h.each(c,Ink.bind(function(a){var c,e;d.hasClassName(a.getElement(),"control-group")?(c=a.getElement(),e=Ink.s(".control",a.getElement())):(c=b.findUpwardsByClass(a.getElement(),"control-group"),e=b.findUpwardsByClass(a.getElement(),"control")); e&&c||(e=c=a.getElement());d.addClassName(c,"validation");d.addClassName(c,"error");this._markedErrorElements.push(c);c=document.createElement("p");d.addClassName(c,"tip");b.insertAfter(c,e);a=a.getErrors();e=[];for(var f in a)a.hasOwnProperty(f)&&e.push(a[f]);c.innerHTML=e.join("<br/>");this._errorMessages.push(c)},this)),!1)}},g}); Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Css_1","Ink.Util.Validator_1"],function(c,b){return{version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"}, "ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(a,b){if(this._free(),b=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},b||{}),"string"==typeof a&&(a=document.getElementById(a)),null===a)return!1;this.element=a;(void 0===this.element.id||null===this.element.id|| ""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random()));this.custom=b.customFlag;this.confirmGroup=b.confirmGroup;var c=this._validateElements();return 0<c.length?(b.onError?b.onError(c):this._showError(a,c),!1):(b.onError||this._clearError(a),this._clearCache(),b.onSuccess&&b.onSuccess(),!0)},reset:function(){this._clearError();this._clearCache()},_free:function(){this.element=null;this.confirmGroup=this.custom=!1},_clearCache:function(){this.element=null;this.elements= [];this.confirmGroup=this.custom=!1},_getElements:function(){this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];for(var a=this.element.elements,b=!1,d=0,h=a.length;h>d;d++)if(b=a[d],null!==b.getAttribute("type")&&"radio"===b.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||b.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&b.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length- 1].getAttribute("name"))for(var g in this._flagMap)if(c.hasClassName(b,g)){this.elements[this.element.id].push(b);break}}else{for(var f in this._flagMap)if(c.hasClassName(b,f)&&"ink-fv-confirm"!==f){this.elements[this.element.id].push(b);break}c.hasClassName(b,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(b),this.hasConfirm[this.element.id]=!0)}},_validateElements:function(){var a;this._getElements();void 0!==this.hasConfirm[this.element.id]&&!0===this.hasConfirm[this.element.id]&&(a= this._makeConfirmGroups());for(var b,d=[],h=!1,g=!1,f=0,k=this.elements[this.element.id].length;k>f;f++)if(b=!1,h=this.elements[this.element.id][f],!h.disabled)for(var l in this._flagMap)c.hasClassName(h,l)&&("ink-fv-custom"!==l&&"ink-fv-confirm"!==l?this._isValid(h,l)||(b?d[d.length-1].errors.push(l):(d.push({elm:h,errors:[l]}),b=!0)):"ink-fv-confirm"!==l&&(g=this._isCustomValid(h),0<g.length&&d.push({elm:h,errors:[l],custom:g})));return this._validateConfirmGroups(a,d)},_validateConfirmGroups:function(a, b){var c=!1,h;for(h in a)a.hasOwnProperty(h)&&(c=a[h],2===c.length&&c[0].value!==c[1].value&&b.push({elm:c[1],errors:["ink-fv-confirm"]}));return b},_makeConfirmGroups:function(){var a;if(this.confirmGroup&&0<this.confirmGroup.length){a={};for(var b=!1,d=!1,h=0,g=this.confirmElms[this.element.id].length;g>h;h++)for(var b=this.confirmElms[this.element.id][h],f=0,k=this.confirmGroup.length;k>f;f++)d=this.confirmGroup[f],c.hasClassName(b,d)&&(void 0===a[d]?a[d]=[b]:a[d].push(b));return a}return 2=== this.confirmElms[this.element.id].length&&(a={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),a},_isCustomValid:function(a){for(var b=[],d=!1,h=0,g=this.custom.length;g>h;h++)d=this.custom[h],c.hasClassName(a,d.flag)&&(d.callback(a,d.msg)||b.push({flag:d.flag,msg:d.msg}));return b},_isValid:function(a,e){switch(e){case "ink-fv-required":if("select"===a.nodeName.toLowerCase())return 0<a.selectedIndex?!0:!1;if("checkbox"!==a.getAttribute("type")&&"radio"!== a.getAttribute("type")){if(""!==this._trim(a.value))return!0}else if("checkbox"===a.getAttribute("type")){if(!0===a.checked)return!0}else if("radio"===a.getAttribute("type")){var d=a.form[a.name];void 0===d.length&&(d=[d]);for(var h=!1,g=0,f=d.length;f>g;g++)!0===d[g].checked&&(h=!0);return h}break;case "ink-fv-email":if(""===this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;if(b.mail(a.value))return!0;break;case "ink-fv-url":if(""===this._trim(a.value))return c.hasClassName(a, "ink-fv-required")?!1:!0;if(b.url(a.value))return!0;break;case "ink-fv-number":if(""===this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;if(!isNaN(Number(a.value)))return!0;break;case "ink-fv-phone_pt":if(""===this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;if(b.isPTPhone(a.value))return!0;break;case "ink-fv-phone_cv":if(""===this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;if(b.isCVPhone(a.value))return!0;break;case "ink-fv-phone_ao":if(""=== this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;if(b.isAOPhone(a.value))return!0;break;case "ink-fv-phone_mz":if(""===this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;if(b.isMZPhone(a.value))return!0;break;case "ink-fv-date":if(""===this._trim(a.value))return c.hasClassName(a,"ink-fv-required")?!1:!0;h=Ink.getModule("Ink.Dom.Element",1).data(a);g="yyyy-mm-dd";if(c.hasClassName(a,"ink-datepicker")&&"format"in h?g=h.format:"validFormat"in h&&(g=h.validFormat), !(g in b._dateParsers)){h=[];for(d in b._dateParsers)b._dateParsers.hasOwnProperty(d)&&h.push(d);throw"The attribute data-valid-format must be one of the following values: "+h.join(",");}return b.isDate(g,a.value)}return!1},_showError:function(a,b){this._clearError(a);for(var d=!1,h=0,g=b.length;g>h;h++)if(d=b[h].elm,"radio"!==d.getAttribute("type")){var f=document.createElement("p");c.addClassName(f,this._errorClassName);c.addClassName(f,this._errorTypeErrorClassName);f.innerHTML="ink-fv-custom"!== b[h].errors[0]?this._flagMap[b[h].errors[0]].msg:b[h].custom[0].msg;"checkbox"!==d.getAttribute("type")&&(d.nextSibling.parentNode.insertBefore(f,d.nextSibling),c.hasClassName(d.parentNode,"control")&&(c.addClassName(d.parentNode.parentNode,"validation"),"ink-fv-required"===b[h].errors[0]?c.addClassName(d.parentNode.parentNode,"error"):c.addClassName(d.parentNode.parentNode,"warning")))}else c.hasClassName(d.parentNode.parentNode,"control-group")&&(c.addClassName(d.parentNode.parentNode,"validation"), c.addClassName(d.parentNode.parentNode,"error"))},_clearError:function(a){for(var b=a.getElementsByTagName("p"),d=!1,h=b.length-1;0<=h;h--)d=b[h],c.hasClassName(d,this._errorClassName)&&(c.hasClassName(d.parentNode,"control")&&(c.removeClassName(d.parentNode.parentNode,"validation"),c.removeClassName(d.parentNode.parentNode,"error"),c.removeClassName(d.parentNode.parentNode,"warning")),c.hasClassName(d,"tip")&&c.hasClassName(d,"error")&&d.parentNode.removeChild(d));a=a.getElementsByTagName("ul"); for(h=a.length-1;0<=h;h--)d=a[h],c.hasClassName(d,"control-group")&&(c.removeClassName(d,"validation"),c.removeClassName(d,"error"))},_trim:function(a){return"string"==typeof a?a.replace(/^\s+|\s+$|\n+$/g,""):void 0}}}); Ink.createModule("Ink.UI.Droppable","1","Ink.Dom.Element_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.UI.Aux_1 Ink.Util.Array_1 Ink.Dom.Selector_1".split(" "),function(c,b,a,e,d,h){var g=function(b){return function(c){return a.addClassName(b,c)}},f=function(b){return function(c){return a.removeClassName(b,c)}},k={debug:!1,_droppables:[],_draggables:[],add:function(a,b){function d(a){a.style.position="inherit"}a=e.elOrSelector(a,"Droppable.add target element");var f=Ink.extendObj({hoverClass:b.hoverclass|| !1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},b||{},c.data(a));"string"==typeof f.hoverClass&&(f.hoverClass=f.hoverClass.split(/\s+/));var g,h=this,k={move:function(a,b){d(a);b.appendChild(a)},copy:function(a,b){d(a);b.appendChild(a.cloneNode)},revert:function(a){h._findDraggable(a).originalParent.appendChild(a);d(a)}};if("string"==typeof f.onHover&&(g=f.onHover,f.onHover=k[g],void 0===f.onHover))throw Error("Unknown hover event handler: "+g);if("string"==typeof f.onDrop&&(g=f.onDrop,f.onDrop=k[g], void 0===f.onDrop))throw Error("Unknown drop event handler: "+g);if("string"==typeof f.onDropOut&&(g=f.onDropOut,f.onDropOut=k[g],void 0===f.onDropOut))throw Error("Unknown dropOut event handler: "+g);f={element:a,data:{},options:f};this._droppables.push(f);this._update(f)},_findData:function(a){for(var b=this._droppables,c=0,d=b.length;d>c;c++)if(b[c].element===a)return b[c]},_findDraggable:function(a){for(var b=this._draggables,c=0,d=b.length;d>c;c++)if(b[c].element===a)return b[c]},updateAll:function(){d.each(this._droppables, k._update)},update:function(a){this._update(this._findData(a))},_update:function(a){var b=a.data;a=a.element;b.left=c.offsetLeft(a);b.top=c.offsetTop(a);b.right=b.left+c.elementWidth(a);b.bottom=b.top+c.elementHeight(a)},remove:function(a){a=e.elOrSelector(a);for(var b=this._droppables.length,c=0;b>c;c++)if(this._droppables[c].element===a){this._droppables.splice(c,1);break}return b!==this._droppables.length},action:function(a,b,c,e){d.each(this._droppables,Ink.bind(function(k){var r=k.data,t=k.options; k=k.element;(!t.accept||h.matches(t.accept,[e]).length)&&("drag"!==b||this._findDraggable(e)||this._draggables.push({element:e,originalParent:e.parentNode}),a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom?"drag"===b?(t.hoverClass&&d.each(t.hoverClass,g(k)),t.onHover&&t.onHover(e,k)):"drop"===b&&(t.hoverClass&&d.each(t.hoverClass,f(k)),t.onDrop&&t.onDrop(e,k,c)):"drag"===b&&t.hoverClass?d.each(t.hoverClass,f(k)):"drop"===b&&t.onDropOut&&t.onDropOut(e,k,c))},this))}};return k}); Ink.createModule("Ink.UI.Draggable","1","Ink.Dom.Element_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Browser_1 Ink.Dom.Selector_1 Ink.UI.Aux_1".split(" "),function(c,b,a,e,d,h){function g(a,b,c){return a=Math.min(a,c),Math.max(a,b)}d=function(a,b){this.init(a,b)};return d.prototype={init:function(a,d){var g=Ink.extendObj({constraint:!1,constraintElm:!1,top:!1,right:!1,bottom:!1,left:!1,handle:d.handler||!1,revert:!1,cursor:"move",zindex:d.zindex||9999,dragClass:"drag",onStart:!1,onEnd:!1,onDrag:!1,onChange:!1, droppableProxy:!1,mouseAnchor:void 0,skipChildren:!0,fps:100,debug:!1},d||{},c.data(a));this.options=g;this.element=h.elOrSelector(a);this.constraintElm=g.constraintElm&&h.elOrSelector(g.constraintElm);this.zindex=this.position=this.placeholder=this.prevCoords=this.dragged=this.active=this.elmStartPosition=this.handle=!1;this.firstDrag=!0;g.fps&&(this.deltaMs=1E3/g.fps,this.lastRunAt=0);this.handlers={};this.handlers.start=Ink.bindEvent(this._onStart,this);this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade, this);this.handlers.drag=Ink.bindEvent(this._onDrag,this);this.handlers.end=Ink.bindEvent(this._onEnd,this);this.handlers.selectStart=function(a){return b.stop(a),!1};this.handle=this.options.handle?h.elOrSelector(this.options.handle):this.element;this.handle.style.cursor=g.cursor;b.observe(this.handle,"touchstart",this.handlers.start);b.observe(this.handle,"mousedown",this.handlers.start);e.IE&&b.observe(this.element,"selectstart",this.handlers.selectStart)},destroy:function(){b.stopObserving(this.handle, "touchstart",this.handlers.start);b.stopObserving(this.handle,"mousedown",this.handlers.start);e.IE&&b.stopObserving(this.element,"selectstart",this.handlers.selectStart)},_getCoords:function(a){var b=[c.scrollWidth(),c.scrollHeight()];return{x:(a.touches?a.touches[0].clientX:a.clientX)+b[0],y:(a.touches?a.touches[0].clientY:a.clientY)+b[1]}},_cloneStyle:function(b,d){d.className=b.className;d.style.borderWidth="0";d.style.padding="0";d.style.position="absolute";d.style.width=c.elementWidth(b)+"px"; d.style.height=c.elementHeight(b)+"px";d.style.left=c.elementLeft(b)+"px";d.style.top=c.elementTop(b)+"px";d.style.cssFloat=a.getStyle(b,"float");d.style.display=a.getStyle(b,"display")},_onStart:function(d){if(!this.active&&b.isLeftClick(d)||void 0===d.button){var e=b.element(d);if(!(this.options.skipChildren&&e!==this.handle)){b.stop(d);a.addClassName(this.element,this.options.dragClass);this.elmStartPosition=[c.elementLeft(this.element),c.elementTop(this.element)];var g=[parseInt(a.getStyle(this.element, "left"),10),parseInt(a.getStyle(this.element,"top"),10)],e=c.elementDimensions(this.element);this.originalPosition=[g[0]?g[0]:null,g[1]?g[1]:null];this.delta=this._getCoords(d);this.active=!0;this.position=a.getStyle(this.element,"position");this.zindex=a.getStyle(this.element,"zIndex");g=document.createElement("div");if(g.style.position=this.position,g.style.width=e[0]+"px",g.style.height=e[1]+"px",g.style.marginTop=a.getStyle(this.element,"margin-top"),g.style.marginBottom=a.getStyle(this.element, "margin-bottom"),g.style.marginLeft=a.getStyle(this.element,"margin-left"),g.style.marginRight=a.getStyle(this.element,"margin-right"),g.style.borderWidth="0",g.style.padding="0",g.style.cssFloat=a.getStyle(this.element,"float"),g.style.display=a.getStyle(this.element,"display"),g.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[0],this.delta.y-this.elmStartPosition[1]],this.options.mouseAnchor){var h=this.options.mouseAnchor.split(" "),e=[e[0],e[1]];"left"===h[0]?e[0]=0: "center"===h[0]&&(e[0]=parseInt(e[0]/2,10));"top"===h[1]?e[1]=0:"center"===h[1]&&(e[1]=parseInt(e[1]/2,10));this.applyDelta=[this.delta2[0]-e[0],this.delta2[1]-e[1]]}h=this.options.fps?"dragFacade":"drag";if(this.placeholder=g,this.options.onStart&&this.options.onStart(this.element,d),this.options.droppableProxy){this.proxy=document.createElement("div");e=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight|| document.body.clientHeight];g=this.proxy.style;g.width=e[0]+"px";g.height=e[1]+"px";g.position="fixed";g.left="0";g.top="0";g.zIndex=this.options.zindex+1;g.backgroundColor="#FF0000";a.setOpacity(this.proxy,0);for(e=document.body.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;document.body.insertBefore(this.proxy,e);b.observe(this.proxy,"mousemove",this.handlers[h]);b.observe(this.proxy,"touchmove",this.handlers[h])}else b.observe(document,"mousemove",this.handlers[h]);return this.element.style.position= "absolute",this.element.style.zIndex=this.options.zindex,this.element.parentNode.insertBefore(this.placeholder,this.element),this._onDrag(d),b.observe(document,"mouseup",this.handlers.end),b.observe(document,"touchend",this.handlers.end),!1}}},_onDragFacade:function(a){var b=+new Date;(!this.lastRunAt||b>this.lastRunAt+this.deltaMs)&&(this.lastRunAt=b,this._onDrag(a))},_onDrag:function(a){if(this.active){b.stop(a);this.dragged=!0;var d=this._getCoords(a),e=d.x,h=d.y,n=this.options,s=!1,q=!1;if(this.prevCoords&& e!==this.prevCoords.x||h!==this.prevCoords.y){n.onDrag&&n.onDrag(this.element,a);this.prevCoords=d;var s=this.elmStartPosition[0]+e-this.delta.x,q=this.elmStartPosition[1]+h-this.delta.y,r=c.elementDimensions(this.element);if(this.constraintElm)var t=c.offset(this.constraintElm),u=c.elementDimensions(this.constraintElm),B=t[0]+(n.left||0),w=t[0]+u[0]-(n.right||0),q=g(q,t[1]+(n.top||0),t[1]+u[1]-(n.bottom||0)-r[1]),s=g(s,B,w-r[0]);else n.constraint&&(t=!1===n.right?c.pageWidth()-r[0]:n.right,u=!1=== n.left?0:n.left,B=!1===n.top?0:n.top,r=!1===n.bottom?c.pageHeight()-r[1]:n.bottom,("horizontal"===n.constraint||"both"===n.constraint)&&(s=g(s,u,t)),("vertical"===n.constraint||"both"===n.constraint)&&(q=g(q,B,r)));r=Ink.getModule("Ink.UI.Droppable_1");if(this.firstDrag&&(r&&r.updateAll(),this.firstDrag=!1),s&&(this.element.style.left=s+"px"),q&&(this.element.style.top=q+"px"),r)r.action(this.options.mouseAnchor?{x:e-this.applyDelta[0],y:h-this.applyDelta[1]}:d,"drag",a,this.element);n.onChange&& n.onChange(this)}}},_onEnd:function(d){if(b.stopObserving(document,"mousemove",this.handlers.drag),b.stopObserving(document,"touchmove",this.handlers.drag),this.options.fps&&this._onDrag(d),a.removeClassName(this.element,this.options.dragClass),this.active&&this.dragged){this.options.droppableProxy&&document.body.removeChild(this.proxy);this.pt&&(c.remove(this.pt),this.pt=void 0);this.placeholder&&c.remove(this.placeholder);this.options.revert&&(this.element.style.position=this.position,this.element.style.zIndex= null!==this.zindex?this.zindex:"auto",this.element.style.left=this.originalPosition[0]?this.originalPosition[0]+"px":"",this.element.style.top=this.originalPosition[1]?this.originalPosition[1]+"px":"");this.options.onEnd&&this.options.onEnd(this.element,d);var e=Ink.getModule("Ink.UI.Droppable_1");e&&e.action(this._getCoords(d),"drop",d,this.element);this.zindex=this.position=!1;this.firstDrag=!0}this.dragged=this.active=!1}},d}); Ink.createModule("Ink.UI.DatePicker","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Util.Date_1 Ink.Dom.Browser_1".split(" "),function(c,b,a,e,d,h,g){h=function(a,b){a&&(this._dataField=c.elOrSelector(a,"1st argument"));this._options=Ink.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,onYearSelected:void 0,onMonthSelected:void 0,validDayFn:void 0, startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Close",cleanText:"Clear",prevLinkText:"\u00c2\u00ab",nextLinkText:"\u00c2\u00bb",ofText:"&nbsp;de&nbsp;",month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},wDay:{"0":"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}},e.data(this._dataField)||{});this._options= Ink.extendObj(this._options,b||{});this._options.format=this._dateParsers[this._options.format]||this._options.format;this._hoverPicker=!1;this._picker=null;this._options.pickerField&&(this._picker=c.elOrSelector(this._options.pickerField,"pickerField"));this._today=new Date;this._day=this._today.getDate();this._month=this._today.getMonth();this._year=this._today.getFullYear();this._setMinMax(this._options.dateRange||this._options.yearRange);this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year, this._month,this._day)));this._options.startDate&&"string"==typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)&&this.setDate(this._options.startDate);this._init();this._render();this._options.startDate||this._dataField&&"string"==typeof this._dataField.value&&this._dataField.value&&this.setDate(this._dataField.value);c.registerInstance(this,this._containerObject,"datePicker")};return h.prototype={version:"0.1",_init:function(){Ink.extendObj(this._options,this._lang|| {})},_render:function(){this._containerObject=document.createElement("div");this._containerObject.id=this._options.instance;this._containerObject.className="sapo_component_datepicker";var a=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){if(this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options",this._options.showClean){var d=document.createElement("a");d.className="clean";d.innerHTML=this._options.cleanText; this._superTopBar.appendChild(d)}this._options.showClose&&(d=document.createElement("a"),d.className="close",d.innerHTML=this._options.closeText,this._superTopBar.appendChild(d));this._containerObject.appendChild(this._superTopBar)}d=document.createElement("div");d.className="sapo_cal_top";this._monthDescContainer=document.createElement("div");this._monthDescContainer.className="sapo_cal_month_desc";this._monthPrev=document.createElement("div");this._monthPrev.className="sapo_cal_prev";this._monthPrev.innerHTML= '<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>";this._monthNext=document.createElement("div");this._monthNext.className="sapo_cal_next";this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>";d.appendChild(this._monthPrev);d.appendChild(this._monthDescContainer);d.appendChild(this._monthNext);this._monthContainer=document.createElement("div");this._monthContainer.className="sapo_cal_month";this._containerObject.appendChild(d); this._containerObject.appendChild(this._monthContainer);this._monthSelector=document.createElement("ul");this._monthSelector.className="sapo_cal_month_selector";for(var g,h=1;12>=h;h++)0===(h-1)%4&&(g=document.createElement("ul")),d=document.createElement("li"),d.innerHTML='<a href="#" class="sapo_calmonth_'+(2===(h+"").length?h:"0"+h)+'">'+this._options.month[h].substring(0,3)+"</a>",g.appendChild(d),0===h%4&&this._monthSelector.appendChild(g);if(this._containerObject.appendChild(this._monthSelector), this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._options.pickerField?this._picker=c.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=e.elementTop(this._dataField), this._picker.style.left=e.elementLeft(this._dataField)+(e.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker")),this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=c.elOrSelector(this._options.dayField,"dayField"); this._options.monthField=c.elOrSelector(this._options.monthField,"monthField");this._options.yearField=c.elOrSelector(this._options.yearField,"yearField")}a.insertBefore(this._containerObject,a.childNodes[0]);this._picker?b.observe(this._picker,"click",Ink.bindEvent(function(a){b.stop(a);this._containerObject=e.clonePosition(this._containerObject,this._picker);this._updateDate();this._showMonth();this._containerObject.style.display="block"},this)):b.observe(this._dataField,"focus",Ink.bindEvent(function(){this._containerObject= e.clonePosition(this._containerObject,this._dataField);"bottom"===this._options.position?(this._containerObject.style.top=e.elementHeight(this._dataField)+e.offsetTop(this._dataField)+"px",this._containerObject.style.left=e.offset(this._dataField)[0]+"px"):(this._containerObject.style.top=e.offset(this._dataField)[1]+"px",this._containerObject.style.left=e.elementWidth(this._dataField)+e.offset(this._dataField)[0]+"px");this._updateDate();this._showMonth();this._containerObject.style.display="block"}, this));this._options.displayInSelect?(b.observe(this._options.dayField,"change",Ink.bindEvent(function(){var a=this._options.yearField[this._options.yearField.selectedIndex].value;""!==a&&0!==a&&(this._updateDate(),this._showDefaultView())},this)),b.observe(this._options.monthField,"change",Ink.bindEvent(function(){var a=this._options.yearField[this._options.yearField.selectedIndex].value;""!==a&&0!==a&&(this._updateDate(),this._showDefaultView())},this)),b.observe(this._options.yearField,"change", Ink.bindEvent(function(){this._updateDate();this._showDefaultView()},this))):(b.observe(this._dataField,"change",Ink.bindEvent(function(){this._updateDate();this._showDefaultView();this.setDate();this._hoverPicker||(this._containerObject.style.display="none")},this)),b.observe(this._dataField,"blur",Ink.bindEvent(function(){this._hoverPicker||(this._containerObject.style.display="none")},this)));b.observe(document,"click",Ink.bindEvent(function(a){void 0===a.target&&(a.target=a.srcElement);e.descendantOf(this._containerObject, a.target)||a.target===this._dataField||(this._picker?a.target===this._picker||this._options.displayInSelect&&(a.target===this._options.dayField||a.target===this._options.monthField||a.target===this._options.yearField)||this._options.dayField&&(e.descendantOf(this._options.dayField,a.target)||e.descendantOf(this._options.monthField,a.target)||e.descendantOf(this._options.yearField,a.target))||(this._containerObject.style.display="none"):this._containerObject.style.display="none")},this));this._showMonth(); this._monthChanger=document.createElement("a");this._monthChanger.href="#monthchanger";this._monthChanger.className="sapo_cal_link_month";this._monthChanger.innerHTML=this._options.month[this._month+1];this._deText=document.createElement("span");this._deText.innerHTML=this._options._deText;this._yearChanger=document.createElement("a");this._yearChanger.href="#yearchanger";this._yearChanger.className="sapo_cal_link_year";this._yearChanger.innerHTML=this._year;this._monthDescContainer.innerHTML=""; this._monthDescContainer.appendChild(this._monthChanger);this._monthDescContainer.appendChild(this._deText);this._monthDescContainer.appendChild(this._yearChanger);b.observe(this._containerObject,"mouseover",Ink.bindEvent(function(a){b.stop(a);this._hoverPicker=!0},this));b.observe(this._containerObject,"mouseout",Ink.bindEvent(function(a){b.stop(a);this._hoverPicker=!1},this));b.observe(this._containerObject,"click",Ink.bindEvent(function(a){void 0===a.target&&(a.target=a.srcElement);var c=a.target.className, d=-1!==c.indexOf("sapo_cal_off");(b.stop(a),0!==c.indexOf("sapo_cal_")||d)?0!==c.indexOf("sapo_calmonth_")||d?0!==c.indexOf("sapo_calyear_")||d?0!==c.indexOf("change_month_")||d?0!==c.indexOf("change_year_")||d?"clean"===c?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":"close"===c&&(this._containerObject.style.display="none"):"change_year_next"===c?this._showYearSelector(1): "change_year_prev"===c&&this._showYearSelector(-1):"change_month_next"===c?this._updateCal(1):"change_month_prev"===c&&this._updateCal(-1):(c=c.substr(13,4),Number(c)&&(this._year=c,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")): (c=c.substr(14,2),Number(c)&&(this._month=c-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._updateCal(), this._monthContainer.style.display="block")):(a=c.substr(9,2),Number(a)?(this.setDate(this._year+"-"+(this._month+1)+"-"+a),this._containerObject.style.display="none"):"sapo_cal_link_month"===c?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===c&&(this._monthPrev.childNodes[0].className= "action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block"));this._updateDescription()},this))},_setMinMax:function(a){var b;if(a){a=a.split(":");var c=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;if(a[0]&&("NOW"===a[0]?(this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate()): c.test(a[0])?(b=a[0].split("-"),this._yearMin=Math.floor(b[0]),this._monthMin=Math.floor(b[1])||1,this._dayMin=Math.floor(b[2])||1,1<this._monthMin&&12<this._monthMin&&(this._monthMin=1,this._dayMin=1),1<this._dayMin&&this._dayMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)):(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1)),a[1])"NOW"===a[1]?(this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate()):c.test(a[1])? (b=a[1].split("-"),this._yearMax=Math.floor(b[0]),this._monthMax=Math.floor(b[1])||12,this._dayMax=Math.floor(b[2])||this._daysInMonth(this._yearMax,this._monthMax),1<this._monthMax&&12<this._monthMax&&(this._monthMax=12,this._dayMax=31),b=this._daysInMonth(this._yearMax,this._monthMax),1<this._dayMax&&this._dayMax>b&&(this._dayMax=b)):(this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31);this._yearMax>=this._yearMin&&(this._monthMax>this._monthMin||this._monthMax===this._monthMin&&this._dayMax>= this._dayMin)||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._dayMin=this._monthMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31},_checkDateRange:function(a,b,c){return this._isValidDate(a,b+1,c)||(a=this._today.getFullYear(),b=this._today.getMonth(),c=this._today.getDate()),a>this._yearMax?(a=this._yearMax,b=this._monthMax-1,c=this._dayMax):this._yearMin> a&&(a=this._yearMin,b=this._monthMin-1,c=this._dayMin),a===this._yearMax&&b+1>this._monthMax?(b=this._monthMax-1,c=this._dayMax):a===this._yearMin&&this._monthMin>b+1&&(b=this._monthMin-1,c=this._dayMin),a===this._yearMax&&b+1===this._monthMax&&c>this._dayMax?c=this._dayMax:a===this._yearMin&&b+1===this._monthMin&&this._dayMin>c?c=this._dayMin:c>this._daysInMonth(a,b+1)&&(c=this._daysInMonth(a,b+1)),[a,b,c]},_showDefaultView:function(){this._yearSelector.style.display="none";this._monthSelector.style.display= "none";this._monthPrev.childNodes[0].className="change_month_prev";this._monthNext.childNodes[0].className="change_month_next";this._year<this._yearMin||this._year===this._yearMin&&this._month+1<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month+1>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive");this._monthContainer.style.display="block"},_updateDate:function(){var a;this._options.displayInSelect? (a=[],this._isValidDate(a[0]=this._options.yearField[this._options.yearField.selectedIndex].value,a[1]=this._options.monthField[this._options.monthField.selectedIndex].value,a[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(a=this._checkDateRange(a[0],a[1]-1,a[2]),this._year=a[0],this._month=a[1],this._day=a[2]):(a=this._checkDateRange(a[0],a[1]-1,1),this._isValidDate(a[0],a[1]+1,a[2])&&(this._year=a[0],this._month=a[1],this._day=this._daysInMonth(a[0],a[1]),this.setDate()))): ""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(a=this._getDataArrayParsed(this._dataField.value),a=this._checkDateRange(a[0],a[1]-1,a[2]),this._year=a[0],this._month=a[1],this._day=a[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat());this._updateDescription();this._showMonth()}, _updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1];this._deText.innerHTML=this._options.ofText;this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var a=+this._year+10*arguments[0];if(a-=a%10,a>this._yearMax||this._yearMin>a+9)return;this._year=+this._year+10*arguments[0]}for(var a="<li>",b=this._year-this._year%10,c=0;11>=c;c++)0===c%4&&(a+="<ul>"),a+=c&&11!==c?this._yearMax>=b+c-1&&b+c-1>=this._yearMin?'<li><a href="#" class="sapo_calyear_'+ (b+c-1)+(b+c-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(b+c-1)+"</a></li>":'<li><a href="#" class="sapo_cal_off">'+(b+c-1)+"</a></li>":c&&this._yearMax>=b+c-1&&b+c-1>=this._yearMin?'<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":this._yearMax>=b+c-1&&b+c-1>=this._yearMin?'<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":"<li>&nbsp;</li>",0===(c+1)%4&&(a+="</ul>");this._yearSelector.innerHTML=a+"</li>"}, _getDataArrayParsed:function(a){var b=[];a=g.set(this._options.format,a);return a&&(b=[a.getFullYear(),a.getMonth()+1,a.getDate()]),b},_isValidDate:function(a,b,c){var d=/^\d{1,2}$/;return/^\d{4}$/.test(a)&&d.test(b)&&d.test(c)&&1<=b&&12>=b&&1<=c&&this._daysInMonth(a,b)>=c},_isDate:function(a,b){try{if(void 0===a)return!1;var c=g.set(a,b);if(c&&this._isValidDate(c.getFullYear(),c.getMonth()+1,c.getDate()))return!0}catch(d){}return!1},_writeDateInFormat:function(){return g.get(this._options.format, this._data)},setDate:function(a){"string"==typeof a&&/\d{4}-\d{1,2}-\d{1,2}/.test(a)&&(a=a.split("-"),this._year=a[0],this._month=a[1]-1,this._day=a[2]);this._setDate()},_setDate:function(a){void 0!==a&&a.className&&0===a.className.indexOf("sapo_cal_")&&(this._day=a.className.substr(9,2));this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day));this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+ 1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat();this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(a){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month});this._updateMonth(a);this._showMonth()},_daysInMonth:function(a,b){var c=31;switch(b){case 2:c=0===a%400||0===a%4&&0!==a%100?29:28;break;case 4:case 6:case 9:case 11:c=30}return c}, _updateMonth:function(a){void 0===a&&(a="0");var b=this._month+1,c=this._year;switch(a){case -1:if(1===b){if(c===this._yearMin)break;b=12;c--}else b--;this._year=c;this._month=b-1;break;case 1:if(12===b){if(c===this._yearMax)break;b=1;c++}else b++;this._year=c;this._month=b-1}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var a, b=this._month+1,c=this._year,d=this._daysInMonth(c,b),e=(new Date(c,b-1,1)).getDay(),g=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev";this._monthNext.childNodes[0].className="change_month_next";this._yearMin>c||c===this._yearMin&&this._monthMin>=b?this._monthPrev.childNodes[0].className="action_inactive":(c>this._yearMax||c===this._yearMax&&b>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive");g&&Number(g)&&(g>e?e=7+g-e:e+=g);var h; h='<ul class="sapo_cal_header">';for(a=0;7>a;a++)h+="<li>"+this._options.wDay[a+(6<g+a?g-7:g)].substring(0,1)+"</li>";var r=0;if(h+="</ul><ul>",e)for(a=g;e-g>a;a++)r||(h+="<ul>"),h+='<li class="sapo_cal_empty">&nbsp;</li>',r++;for(a=1;d>=a;a++)7===r&&(r=0,h+="<ul>"),e="sapo_cal_"+(2===(a+"").length?a:"0"+a),e+=c===this._yearMin&&b===this._monthMin&&this._dayMin>a||c===this._yearMax&&b===this._monthMax&&a>this._dayMax||c===this._yearMin&&this._monthMin>b||c===this._yearMax&&b>this._monthMax||this._yearMin> c||c>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(c,b-1,a))?" sapo_cal_off":this._data.getFullYear()===c&&this._data.getMonth()===b-1&&a===this._day?" sapo_cal_on":"",h+='<li><a href="#" class="'+e+'">'+a+"</a></li>",r++,7===r&&(h+="</ul>");if(7!==r){for(a=r;7>a;a++)h+='<li class="sapo_cal_empty">&nbsp;</li>';h+="</ul>"}h+="</ul>";this._monthContainer.innerHTML=h},_setActiveMonth:function(b){void 0===b&&(b=this._monthSelector);var c=b.childNodes.length;if(b.className&& b.className.match(/sapo_calmonth_/)){var c=this._year,d=b.className.substr(14,2);c===this._data.getFullYear()&&d===this._data.getMonth()+1?(a.addClassName(b,"sapo_cal_on"),a.removeClassName(b,"sapo_cal_off")):(a.removeClassName(b,"sapo_cal_on"),c===this._yearMin&&this._monthMin>d||c===this._yearMax&&d>this._monthMax||this._yearMin>c||c>this._yearMax?a.addClassName(b,"sapo_cal_off"):a.removeClassName(b,"sapo_cal_off"))}else if(0!==c)for(d=0;c>d;d++)this._setActiveMonth(b.childNodes[d])},lang:function(a){this._lang= a},showMonth:function(){this._showMonth()},isMonthRendered:function(){var b=d.select(".sapo_cal_header",this._containerObject)[0];return"none"!==a.getStyle(b.parentNode,"display")&&"none"!==a.getStyle(b.parentNode.parentNode,"display")}},h}); Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Element_1"],function(c,b){return function(){c.observe(document.body,"click",function(a){var e=c.element(a);if(e=b.findUpwardsByClass(e,"ink-close")||b.findUpwardsByClass(e,"ink-dismiss")){var d=e;(d=b.findUpwardsByClass(e,"ink-alert")||b.findUpwardsByClass(e,"ink-alert-block"))&&(c.stop(a),b.remove(d))}})}}); Ink.createModule("Ink.UI.Carousel","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.UI.Pagination_1 Ink.Dom.Browser_1 Ink.Dom.Selector_1".split(" "),function(c,b,a,e,d,h){a=function(a,f){this._handlers={paginationChange:Ink.bind(this._onPaginationChange,this),windowResize:Ink.bind(this.refit,this)};b.observe(window,"resize",this._handlers.windowResize);this._element=c.elOrSelector(a,"1st argument");this._options=Ink.extendObj({axis:"x",hideLast:!1,center:!1,keyboardSupport:!1, pagination:null,onChange:null},f||{},e.data(this._element));this._isY="y"===this._options.axis;var h=Ink.s("ul.stage",this._element);if(this._ulEl=h,e.removeTextNodeChildren(h),this._options.hideLast)h=document.createElement("div"),h.className="hider",this._element.appendChild(h),h.style.position="absolute",h.style[this._isY?"left":"top"]="0",h.style[this._isY?"right":"bottom"]="0",h.style[this._isY?"bottom":"right"]="0",this._hiderEl=h;this.refit();this._isY&&(this._ulEl.style.whiteSpace="normal"); this._options.pagination&&(c.isDOMElement(this._options.pagination)||"string"==typeof this._options.pagination?this._pagination=new d(this._options.pagination,{size:this._numPages,onChange:this._handlers.paginationChange}):(this._pagination=this._options.pagination,this._pagination._options.onChange=this._handlers.paginationChange,this._pagination.setSize(this._numPages),this._pagination.setCurrent(0)))};return a.prototype={refit:function(){this._liEls=Ink.ss("li.slide",this._ulEl);var a=this._liEls.length; this._ctnLength=this._size(this._element);this._elLength=this._size(this._liEls[0]);this._itemsPerPage=Math.floor(this._ctnLength/this._elLength);this._numPages=Math.ceil(a/this._itemsPerPage);this._deltaLength=this._itemsPerPage*this._elLength;this._isY?(this._element.style.width=this._liEls[0].offsetWidth+"px",this._ulEl.style.width=this._liEls[0].offsetWidth+"px"):this._ulEl.style.height=this._liEls[0].offsetHeight+"px";this._center();this._updateHider();this._IE7();this._pagination&&(this._pagination.setSize(this._numPages), this._pagination.setCurrent(0))},_size:function(a){a=e.outerDimensions(a);return this._isY?a[1]:a[0]},_center:function(){if(this._options.center){var a=Math.floor((this._ctnLength-this._elLength*this._itemsPerPage)/2);this._ulEl.style.padding=(this._isY?[a,"px 0"]:["0 ",a,"px"]).join("")}},_updateHider:function(){if(this._hiderEl){var a=Math.floor(this._ctnLength-this._elLength*this._itemsPerPage);this._options.center&&(a/=2);this._hiderEl.style[this._isY?"height":"width"]=a+"px"}},_IE7:function(){if(h.IE&& "7"==""+h.version.split(".")[0]){this._numPages;for(var a=Ink.ss("li.slide",this._ulEl),b=0,c=a.length;c>b;b++)a[b].style.position="absolute",a[b].style[this._isY?"top":"left"]=b*this._elLength+"px"}},_onPaginationChange:function(a){a=a.getCurrent();this._ulEl.style["y"===this._options.axis?"top":"left"]=["-",a*this._deltaLength,"px"].join("");this._options.onChange&&this._options.onChange.call(this,a)}},a}); Ink.createModule("Ink.UI.Modal","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(c,b,a,e,d,h){var g=function(c,g){if("string"!=typeof c&&"object"!=typeof c&&void 0===g.markup)throw"Invalid Modal selector";if("string"==typeof c){if(""!==c){if(this._element=d.select(c),0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else c&&(this._element=c);if(this._options={width:void 0, height:void 0,shadeClass:void 0,modalClass:void 0,trigger:void 0,triggerEvent:"click",autoDisplay:!0,markup:void 0,onShow:void 0,onDismiss:void 0,closeOnClick:!1,responsive:!0,disableScroll:!0},this._handlers={click:Ink.bindEvent(this._onClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:Ink.bindEvent(this._onResize,this)},this._wasDismissed=!1,this._markupMode=this._element?a.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalDivStyle= this._modalDiv.style,this._modalShadow=this._modalDiv.parentNode,this._modalShadowStyle=this._modalShadow.style,this._contentContainer=d.select(".modal-body",this._modalDiv),!this._contentContainer.length)throw'Missing div with class "modal-body"';this._contentContainer=this._contentContainer[0];this._options.markup=this._contentContainer.innerHTML;this._options=Ink.extendObj(this._options,e.data(this._element))}else this._modalShadow=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style, this._modalDiv=document.createElement("div"),this._modalDivStyle=this._modalDiv.style,this._element&&(this._options.markup=this._element.innerHTML),a.addClassName(this._modalShadow,"ink-shade"),a.addClassName(this._modalDiv,"ink-modal"),a.addClassName(this._modalDiv,"ink-space"),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._options=Ink.extendObj(this._options,g||{}),this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&& h.each(this._options.shadeClass.split(" "),Ink.bind(function(b){a.addClassName(this._modalShadow,b.trim())},this)),"string"==typeof this._options.modalClass&&h.each(this._options.modalClass.split(" "),Ink.bind(function(b){a.addClassName(this._modalDiv,b.trim())},this)),"trigger"in this._options&&void 0!==this._options.trigger){var l,p;if("string"==typeof this._options.trigger&&(l=d.select(this._options.trigger),0<l.length))for(p=0;l.length>p;p++)b.observe(l[p],this._options.triggerEvent,Ink.bindEvent(this.open, this))}else this._options.autoDisplay&&this.open()};return g.prototype={_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%";this._modalDivStyle.marginTop="-"+~~(e.elementHeight(this._modalDiv)/2)+"px";this._modalDivStyle.marginLeft="-"+~~(e.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(a){"boolean"==typeof a?this._timeoutResizeFunction.call(this):this._resizeTimeout||"object"!=typeof a||(this._resizeTimeout=setTimeout(Ink.bind(this._timeoutResizeFunction,this), 250))},_timeoutResizeFunction:function(){var a="CSS1Compat"===document.compatMode?document.documentElement:document.body,b=parseInt(a.clientHeight,10),a=parseInt(a.clientWidth,10);this._modalDivStyle.width=a>this.originalStatus.width?this._modalDivStyle.maxWidth:~~(0.9*a)+"px";this._modalDivStyle.height=b>this.originalStatus.height&&parseInt(this._modalDivStyle.maxHeight,10)>=e.elementHeight(this._modalDiv)?this._modalDivStyle.maxHeight:~~(0.9*b)+"px";this._resizeContainer();this._reposition();this._resizeTimeout= void 0},_onClick:function(c){var g=b.element(c);if(a.hasClassName(g,"ink-close")||a.hasClassName(g,"ink-dismiss")||e.findUpwardsByClass(g,"ink-close")||e.findUpwardsByClass(g,"ink-dismiss")||this._options.closeOnClick&&(!e.descendantOf(this._shadeElement,g)||g===this._shadeElement)){for(var h=d.select(".ink-alert",this._shadeElement),p=h.length,n=0;p>n;n++)if(e.descendantOf(h[n],g))return;b.stop(c);this.dismiss()}},_onKeyDown:function(a){27!==a.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentElement.style.overflow= this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden";var a=e.elementHeight(this._modalDiv);this._modalHeader=d.select(".modal-header",this._modalDiv);0<this._modalHeader.length&&(this._modalHeader=this._modalHeader[0],a-=e.elementHeight(this._modalHeader));this._modalFooter=d.select(".modal-footer",this._modalDiv);0<this._modalFooter.length&&(this._modalFooter=this._modalFooter[0],a-=e.elementHeight(this._modalFooter));this._contentContainer.style.height=a+"px";a!==e.elementHeight(this._contentContainer)&& (this._contentContainer.style.height=~~(a-(e.elementHeight(this._contentContainer)-a))+"px");this._markupMode||(this._contentContainer.style.overflow=this._contentContainer.style.overflowX="hidden",this._contentContainer.style.overflowY="auto",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible")},_disableScroll:function(){this._oldScrollPos=e.scroll();this._onScrollBinded=Ink.bindEvent(function(a){var c=b.element(a);e.descendantOf(this._modalShadow, c)||(b.stop(a),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))},this);b.observe(window,"scroll",this._onScrollBinded);b.observe(document,"touchmove",this._onScrollBinded)},open:function(d){d&&b.stop(d);d="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._resizeTimeout=null;a.addClassName(this._modalShadow,"ink-shade");this._modalShadowStyle.display=this._modalDivStyle.display="block";setTimeout(Ink.bind(function(){a.addClassName(this._modalShadow,"visible"); a.addClassName(this._modalDiv,"visible")},this),100);this._contentElement=this._modalDiv;this._shadeElement=this._modalShadow;this._markupMode||this.setContentMarkup(this._options.markup);void 0!==this._options.width?(this._modalDivStyle.width=this._options.width,-1===this._options.width.indexOf("%")&&(this._modalDivStyle.maxWidth=e.elementWidth(this._modalDiv)+"px")):this._modalDivStyle.maxWidth=this._modalDivStyle.width=e.elementWidth(this._modalDiv)+"px";parseInt(d.clientWidth,10)<=parseInt(this._modalDivStyle.width, 10)&&(this._modalDivStyle.width=~~(0.9*parseInt(d.clientWidth,10))+"px");void 0!==this._options.height?(this._modalDivStyle.height=this._options.height,-1===this._options.height.indexOf("%")&&(this._modalDivStyle.maxHeight=e.elementHeight(this._modalDiv)+"px")):this._modalDivStyle.maxHeight=this._modalDivStyle.height=e.elementHeight(this._modalDiv)+"px";parseInt(d.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=~~(0.9*parseInt(d.clientHeight,10))+"px");this.originalStatus= {viewportHeight:parseInt(d.clientHeight,10),viewportWidth:parseInt(d.clientWidth,10),width:parseInt(this._modalDivStyle.maxWidth,10),height:parseInt(this._modalDivStyle.maxHeight,10)};this._options.responsive?(this._onResize(!0),b.observe(window,"resize",this._handlers.resize)):(this._resizeContainer(),this._reposition());this._options.onShow&&this._options.onShow(this);this._options.disableScroll&&this._disableScroll();b.observe(this._shadeElement,"click",this._handlers.click);b.observe(document, "keydown",this._handlers.keyDown);c.registerInstance(this,this._shadeElement,"modal");this._wasDismissed=!1},dismiss:function(){if(!(this._options.onDismiss&&!1===this._options.onDismiss(this)))if(this._wasDismissed=!0,this._options.disableScroll&&(b.stopObserving(window,"scroll",this._onScrollBinded),b.stopObserving(document,"touchmove",this._onScrollBinded)),this._options.responsive&&b.stopObserving(window,"resize",this._handlers.resize),this._markupMode){a.removeClassName(this._modalDiv,"visible"); a.removeClassName(this._modalShadow,"visible");var c,d=Ink.bindEvent(function(){c&&(this._modalShadowStyle.display="none",b.stopObserving(document,"transitionend",d),b.stopObserving(document,"oTransitionEnd",d),b.stopObserving(document,"webkitTransitionEnd",d),clearInterval(c),c=void 0)},this);b.observe(document,"transitionend",d);b.observe(document,"oTransitionEnd",d);b.observe(document,"webkitTransitionEnd",d);c||(c=setInterval(Ink.bind(function(){0<this._modalShadowStyle.opacity||(this._modalShadowStyle.display= "none",clearInterval(c),c=void 0)},this),500))}else this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()},destroy:function(){c.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(b){if(this._markupMode)this._contentContainer.innerHTML=""+b;else{if(this._modalDiv.innerHTML=""+b,this._contentContainer=d.select(".modal-body",this._modalDiv),!this._contentContainer.length){b=d.select(".modal-header",this._modalDiv); var c=d.select(".modal-footer",this._modalDiv);h.each(b,Ink.bind(function(a){a.parentNode.removeChild(a)},this));h.each(c,Ink.bind(function(a){a.parentNode.removeChild(a)},this));var e=document.createElement("div");a.addClassName(e,"modal-body");e.innerHTML=this._modalDiv.innerHTML;this._modalDiv.innerHTML="";h.each(b,Ink.bind(function(a){this._modalDiv.appendChild(a)},this));this._modalDiv.appendChild(e);h.each(c,Ink.bind(function(a){this._modalDiv.appendChild(a)},this));this._contentContainer=d.select(".modal-body", this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv;this._resizeContainer()}},g}); Ink.createModule("Ink.UI.ProgressBar","1",["Ink.Dom.Selector_1","Ink.Dom.Element_1"],function(c,b){var a=function(a,d){if("object"!=typeof a){if("string"!=typeof a)throw"[Ink.UI.ProgressBar] :: Invalid selector";if(this._element=c.select(a),1>this._element.length)throw"[Ink.UI.ProgressBar] :: Selector didn't find any elements";this._element=this._element[0]}else this._element=a;this._options=Ink.extendObj({startValue:0,onStart:function(){},onEnd:function(){}},b.data(this._element));this._options= Ink.extendObj(this._options,d||{});this._value=this._options.startValue;this._init()};return a.prototype={_init:function(){if(this._elementBar=c.select(".bar",this._element),1>this._elementBar.length)throw"[Ink.UI.ProgressBar] :: Bar element not found";this._elementBar=this._elementBar[0];this._options.onStart=Ink.bind(this._options.onStart,this);this._options.onEnd=Ink.bind(this._options.onEnd,this);this.setValue(this._options.startValue)},setValue:function(a){this._options.onStart(this._value); a=parseInt(a,10);isNaN(a)||0>a?a=0:100<a&&(a=100);this._value=a;this._elementBar.style.width=this._value+"%";this._options.onEnd(this._value)}},a}); (function(){var t=this;var e=t.Backbone;var i=[];var r=i.push;var s=i.slice;var n=i.splice;var a;if(typeof exports!=="undefined"){a=exports}else{a=t.Backbone={}}a.VERSION="1.1.0";var h=t._;if(!h&&typeof require!=="undefined")h=require("underscore");a.$=t.jQuery||t.Zepto||t.ender||t.$;a.noConflict=function(){t.Backbone=e;return this};a.emulateHTTP=false;a.emulateJSON=false;var o=a.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this;var s=h.once(function(){r.off(t,s);e.apply(this,arguments)});s._callback=e;return this.on(t,s,i)},off:function(t,e,i){var r,s,n,a,o,u,c,f;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}a=t?[t]:h.keys(this._events);for(o=0,u=a.length;o<u;o++){t=a[o];if(n=this._events[t]){this._events[t]=r=[];if(e||i){for(c=0,f=n.length;c<f;c++){s=n[c];if(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context){r.push(s)}}}if(!r.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)c(i,e);if(r)c(r,arguments);return this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var s=!e&&!i;if(!i&&typeof e==="object")i=this;if(t)(r={})[t._listenId]=t;for(var n in r){t=r[n];t.off(e,i,this);if(s||h.isEmpty(t._events))delete this._listeningTo[n]}return this}};var u=/\s+/;var l=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(u.test(i)){var n=i.split(u);for(var a=0,h=n.length;a<h;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var c=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,h);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e)}};var f={listenTo:"on",listenToOnce:"once"};h.each(f,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={});var n=e._listenId||(e._listenId=h.uniqueId("l"));s[n]=e;if(!r&&typeof i==="object")r=this;e[t](i,r,this);return this}});o.bind=o.on;o.unbind=o.off;h.extend(a,o);var d=a.Model=function(t,e){var i=t||{};e||(e={});this.cid=h.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)i=this.parse(i,e)||{};i=h.defaults({},i,h.result(this,"defaults"));this.set(i,e);this.changed={};this.initialize.apply(this,arguments)};h.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return h.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,i){var r,s,n,a,o,u,l,c;if(t==null)return this;if(typeof t==="object"){s=t;i=e}else{(s={})[t]=e}i||(i={});if(!this._validate(s,i))return false;n=i.unset;o=i.silent;a=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=h.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in s)this.id=s[this.idAttribute];for(r in s){e=s[r];if(!h.isEqual(c[r],e))a.push(r);if(!h.isEqual(l[r],e)){this.changed[r]=e}else{delete this.changed[r]}n?delete c[r]:c[r]=e}if(!o){if(a.length)this._pending=true;for(var f=0,d=a.length;f<d;f++){this.trigger("change:"+a[f],this,c[a[f]],i)}}if(u)return this;if(!o){while(this._pending){this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,h.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,h.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!h.isEmpty(this.changed);return h.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?h.clone(this.changed):false;var e,i=false;var r=this._changing?this._previousAttributes:this.attributes;for(var s in t){if(h.isEqual(r[s],e=t[s]))continue;(i||(i={}))[s]=e}return i},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var i=t.success;t.success=function(r){if(!e.set(e.parse(r,t),t))return false;if(i)i(e,r,t);e.trigger("sync",e,r,t)};M(this,t);return this.sync("read",this,t)},save:function(t,e,i){var r,s,n,a=this.attributes;if(t==null||typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i=h.extend({validate:true},i);if(r&&!i.wait){if(!this.set(r,i))return false}else{if(!this._validate(r,i))return false}if(r&&i.wait){this.attributes=h.extend({},a,r)}if(i.parse===void 0)i.parse=true;var o=this;var u=i.success;i.success=function(t){o.attributes=a;var e=o.parse(t,i);if(i.wait)e=h.extend(r||{},e);if(h.isObject(e)&&!o.set(e,i)){return false}if(u)u(o,t,i);o.trigger("sync",o,t,i)};M(this,i);s=this.isNew()?"create":i.patch?"patch":"update";if(s==="patch")i.attrs=r;n=this.sync(s,this,i);if(r&&i.wait)this.attributes=a;return n},destroy:function(t){t=t?h.clone(t):{};var e=this;var i=t.success;var r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(s){if(t.wait||e.isNew())r();if(i)i(e,s,t);if(!e.isNew())e.trigger("sync",e,s,t)};if(this.isNew()){t.success();return false}M(this,t);var s=this.sync("delete",this,t);if(!t.wait)r();return s},url:function(){var t=h.result(this,"urlRoot")||h.result(this.collection,"url")||U();if(this.isNew())return t;return t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},h.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=h.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,h.extend(e,{validationError:i}));return false}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(t){d.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.attributes);return h[t].apply(h,e)}});var v=a.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,h.extend({silent:true},e))};var g={add:true,remove:true,merge:true};var m={add:true,remove:false};h.extend(v.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,h.extend({merge:false},e,m))},remove:function(t,e){var i=!h.isArray(t);t=i?[t]:h.clone(t);e||(e={});var r,s,n,a;for(r=0,s=t.length;r<s;r++){a=t[r]=this.get(t[r]);if(!a)continue;delete this._byId[a.id];delete this._byId[a.cid];n=this.indexOf(a);this.models.splice(n,1);this.length--;if(!e.silent){e.index=n;a.trigger("remove",a,this,e)}this._removeReference(a)}return i?t[0]:t},set:function(t,e){e=h.defaults({},e,g);if(e.parse)t=this.parse(t,e);var i=!h.isArray(t);t=i?t?[t]:[]:h.clone(t);var r,s,n,a,o,u,l;var c=e.at;var f=this.model;var p=this.comparator&&c==null&&e.sort!==false;var v=h.isString(this.comparator)?this.comparator:null;var m=[],y=[],_={};var w=e.add,b=e.merge,x=e.remove;var E=!p&&w&&x?[]:false;for(r=0,s=t.length;r<s;r++){o=t[r];if(o instanceof d){n=a=o}else{n=o[f.prototype.idAttribute]}if(u=this.get(n)){if(x)_[u.cid]=true;if(b){o=o===a?a.attributes:o;if(e.parse)o=u.parse(o,e);u.set(o,e);if(p&&!l&&u.hasChanged(v))l=true}t[r]=u}else if(w){a=t[r]=this._prepareModel(o,e);if(!a)continue;m.push(a);a.on("all",this._onModelEvent,this);this._byId[a.cid]=a;if(a.id!=null)this._byId[a.id]=a}if(E)E.push(u||a)}if(x){for(r=0,s=this.length;r<s;++r){if(!_[(a=this.models[r]).cid])y.push(a)}if(y.length)this.remove(y,e)}if(m.length||E&&E.length){if(p)l=true;this.length+=m.length;if(c!=null){for(r=0,s=m.length;r<s;r++){this.models.splice(c+r,0,m[r])}}else{if(E)this.models.length=0;var T=E||m;for(r=0,s=T.length;r<s;r++){this.models.push(T[r])}}}if(l)this.sort({silent:true});if(!e.silent){for(r=0,s=m.length;r<s;r++){(a=m[r]).trigger("add",a,this,e)}if(l||E&&E.length)this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;i<r;i++){this._removeReference(this.models[i])}e.previousModels=this.models;this._reset();t=this.add(t,h.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,h.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,h.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){if(h.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(h.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(h.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return h.invoke(this.models,"get",t)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var i=this;t.success=function(r){var s=t.reset?"reset":"set";i[s](r,t);if(e)e(i,r,t);i.trigger("sync",i,r,t)};M(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?h.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var i=this;var r=e.success;e.success=function(t,e,s){if(s.wait)i.add(t,s);if(r)r(t,e,s)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof d){if(!t.collection)t.collection=this;return t}e=e?h.clone(e):{};e.collection=this;var i=new this.model(t,e);if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,e);return false},_removeReference:function(t){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(y,function(t){v.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.models);return h[t].apply(h,e)}});var _=["groupBy","countBy","sortBy"];h.each(_,function(t){v.prototype[t]=function(e,i){var r=h.isFunction(e)?e:function(t){return t.get(e)};return h[t](this.models,r,i)}});var w=a.View=function(t){this.cid=h.uniqueId("view");t||(t={});h.extend(this,h.pick(t,x));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var b=/^(\S+)\s*(.*)$/;var x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(w.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,e){if(this.$el)this.undelegateEvents();this.$el=t instanceof a.$?t:a.$(t);this.el=this.$el[0];if(e!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=h.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!h.isFunction(i))i=this[t[e]];if(!i)continue;var r=e.match(b);var s=r[1],n=r[2];i=h.bind(i,this);s+=".delegateEvents"+this.cid;if(n===""){this.$el.on(s,i)}else{this.$el.on(s,n,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=h.extend({},h.result(this,"attributes"));if(this.id)t.id=h.result(this,"id");if(this.className)t["class"]=h.result(this,"className");var e=a.$("<"+h.result(this,"tagName")+">").attr(t);this.setElement(e,false)}else{this.setElement(h.result(this,"el"),false)}}});a.sync=function(t,e,i){var r=T[t];h.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:r,dataType:"json"};if(!i.url){s.url=h.result(e,"url")||U()}if(i.data==null&&e&&(t==="create"||t==="update"||t==="patch")){s.contentType="application/json";s.data=JSON.stringify(i.attrs||e.toJSON(i))}if(i.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(i.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){s.type="POST";if(i.emulateJSON)s.data._method=r;var n=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r);if(n)return n.apply(this,arguments)}}if(s.type!=="GET"&&!i.emulateJSON){s.processData=false}if(s.type==="PATCH"&&E){s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var o=i.xhr=a.ajax(h.extend(s,i));e.trigger("request",e,o,i);return o};var E=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var k=a.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\((.*?)\)/g;var $=/(\(\?)?:\w+/g;var H=/\*\w+/g;var A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(k.prototype,o,{initialize:function(){},route:function(t,e,i){if(!h.isRegExp(t))t=this._routeToRegExp(t);if(h.isFunction(e)){i=e;e=""}if(!i)i=this[e];var r=this;a.history.route(t,function(s){var n=r._extractParameters(t,s);i&&i.apply(r,n);r.trigger.apply(r,["route:"+e].concat(n));r.trigger("route",e,n);a.history.trigger("route",r,e,n)});return this},navigate:function(t,e){a.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=h.result(this,"routes");var t,e=h.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(A,"\\$&").replace(S,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)");return new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return h.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=a.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var N=/^[#\/]|\s+$/g;var O=/^\/+|\/+$/g;var P=/msie [\w.]+/;var C=/\/$/;var j=/[?#].*$/;I.started=false;h.extend(I.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=true;this.options=h.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment();var i=document.documentMode;var r=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(O,"/");if(r&&this._wantsHashChange){this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(e)}if(this._hasPushState){a.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!r){a.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=e;var s=this.location;var n=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!n){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._hasPushState&&n&&s.hash){this.fragment=this.getHash().replace(N,"");this.history.replaceState({},document.title,this.root+this.fragment+s.search)}}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return h.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!I.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(j,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});a.history=new I;var R=function(t,e){var i=this;var r;if(t&&h.has(t,"constructor")){r=t.constructor}else{r=function(){return i.apply(this,arguments)}}h.extend(r,i,e);var s=function(){this.constructor=r};s.prototype=i.prototype;r.prototype=new s;if(t)h.extend(r.prototype,t);r.__super__=i.prototype;return r};d.extend=v.extend=k.extend=w.extend=I.extend=R;var U=function(){throw new Error('A "url" property or function must be specified')};var M=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}}}).call(this);'use strict';(function(d){function c(c,k){var a=c[n],a=a&&l[a];if(void 0===k)return a||r(c);if(a){if(k in a)return a[k];var h=s(k);if(h in a)return a[h]}return t.call(d(c),k)}function r(c,k,a){var h=c[n]||(c[n]=++d.uuid);c=l[h]||(l[h]=m(c));void 0!==k&&(c[s(k)]=a);return c}function m(c){var k={};d.each(c.attributes||u,function(a,h){0==h.name.indexOf("data-")&&(k[s(h.name.replace("data-",""))]=d.zepto.deserializeValue(h.value))});return k}var l={},t=d.fn.data,s=d.camelCase,n=d.expando="Zepto"+ +new Date, u=[];d.fn.data=function(p,k){return void 0===k?d.isPlainObject(p)?this.each(function(a,h){d.each(p,function(a,c){r(h,a,c)})}):0==this.length?void 0:c(this[0],p):this.each(function(){r(this,p,k)})};d.fn.removeData=function(c){"string"==typeof c&&(c=c.split(/\s+/));return this.each(function(){var k=this[n],a=k&&l[k];a&&d.each(c,function(){delete a[s(this)]})})}})(Zepto); ["width","height"].forEach(function(d){var c=d.replace(/./,function(c){return c[0].toUpperCase()});$.fn["outer"+c]=function(c){var m=this;if(m){var l=m[d]();({width:["left","right"],height:["top","bottom"]})[d].forEach(function(d){c&&(l+=parseInt(m.css("margin-"+d),10))});return l}return null}}); (function(){var d,c,r,m,l,t,s,n,u,p,k=[].slice;l=function(a,h){return null!=a?a.hasOwnProperty(h):void 0};s=function(a){return l(a,"length")&&l(a,"callee")};n=function(a){return l(a,"promise")&&"function"===typeof(null!=a?a.promise:void 0)};m=function(a){return s(a)?m(Array.prototype.slice.call(a)):!Array.isArray(a)?[a]:a.reduce(function(a,g){if(Array.isArray(g))return a.concat(m(g));a.push(g);return a},[])};c=function(a,h){return 0>=a?h():function(){if(1>--a)return h.apply(this,arguments)}};u=function(a, h){return function(){var g;g=[a].concat(Array.prototype.slice.call(arguments,0));return h.apply(this,g)}};r=function(a,h,g){var c,f,e,b;e=m(a);b=[];c=0;for(f=e.length;c<f;c++)a=e[c],b.push(a.call.apply(a,[g].concat(k.call(h))));return b};d=function(){var a,h,g,c,f,e;e="pending";c=[];f=[];g={};this.promise=function(b){var a;b=b||{};b.state=function(){return e};a=function(f,a){return function(){"pending"===e&&a.push.apply(a,m(arguments));f()&&r(arguments,g);return b}};b.done=a(function(){return"resolved"=== e},c);b.fail=a(function(){return"rejected"===e},f);b.always=function(){var e;return(e=b.done.apply(b,arguments)).fail.apply(e,arguments)};a=function(e,f){var a,g;g=new d;a=function(e,f,a){return!a?b[e](g[f]):b[e](function(){var b;b=1<=arguments.length?k.call(arguments,0):[];b=a.apply(null,b);return n(b)?b.done(g.resolve).fail(g.reject):g[f](b)})};a("done","resolve",e);a("fail","reject",f);return g};b.pipe=a;b.then=a;null==b.promise&&(b.promise=function(){return b});return b};this.promise(this);a= this;h=function(b,f,c){return function(){return"pending"===e?(e=b,g=arguments,r(f,g,c),a):this}};this.resolve=h("resolved",c);this.reject=h("rejected",f);this.resolveWith=function(b,e){return h("resolved",c,b).apply(null,e)};this.rejectWith=function(b,e){return h("rejected",f,b).apply(null,e)};return this};p=function(){var a,h,g,q,f,e,b;h=m(arguments);if(1===h.length)return n(h[0])?h[0]:(new d).resolve(h[0]).promise();f=new d;if(!h.length)return f.resolve().promise();q=[];g=c(h.length,function(){return f.resolve.apply(f, q)});h.forEach(function(b,e){if(n(b))return b.done(function(){var b;b=1<=arguments.length?k.call(arguments,0):[];q[e]=1<b.length?b:b[0];return g()});q[e]=b;return g()});e=0;for(b=h.length;e<b;e++)a=h[e],n(a)&&a.fail(f.reject);return f.promise()};t=function(a){a.Deferred=function(){return new d};a.ajax=u(a.ajax,function(a,g){var c,f,e;null==g&&(g={});f=new d;c=function(b,e){return u(b,function(){var b,f;f=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];f&&f.apply(null,b);return e.apply(null, b)})};g.success=c(g.success,f.resolve);g.error=c(g.error,f.reject);e=a(g);c=f.promise();c.abort=function(){return e.abort()};return c});return a.when=p};"undefined"!==typeof exports?(exports.Deferred=function(){return new d},exports.when=p,exports.installInto=t):"function"===typeof define&&define.amd?define(function(){return"undefined"!==typeof Zepto?t(Zepto):d}):"undefined"!==typeof Zepto?t(Zepto):(this.Deferred=function(){return new d},this.Deferred.when=p,this.Deferred.installInto=t)}).call(this); (function(d){var c={isMsie:function(){var a=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return a?parseInt(a[2],10):!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:d.isArray,isFunction:d.isFunction,isObject:d.isPlainObject,isUndefined:function(a){return"undefined"===typeof a},bind:d.proxy,bindAll:function(a){var c, g;for(g in a)d.isFunction(c=a[g])&&(a[g]=d.proxy(c,a))},indexOf:function(a,c){for(var g=0;g<a.length;g++)if(a[g]===c)return g;return-1},each:d.each,map:d.map,filter:d.grep,every:function(a,c){var g=!0;if(!a)return g;d.each(a,function(d,f){if(!(g=c.call(null,f,d,a)))return!1});return!!g},some:function(a,c){var g=!1;if(!a)return g;d.each(a,function(d,f){if(g=c.call(null,f,d,a))return!1});return!!g},mixin:d.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),defer:function(a){setTimeout(a, 0)},debounce:function(a,c,g){var d,f;return function(){var e=this,b=arguments,v;v=g&&!d;clearTimeout(d);d=setTimeout(function(){d=null;g||(f=a.apply(e,b))},c);v&&(f=a.apply(e,b));return f}},throttle:function(a,c){var g,d,f,e,b,v;b=0;v=function(){b=new Date;f=null;e=a.apply(g,d)};return function(){var z=new Date,x=c-(z-b);g=this;d=arguments;0>=x?(clearTimeout(f),f=null,b=z,e=a.apply(g,d)):f||(f=setTimeout(v,x));return e}},tokenizeQuery:function(a){return d.trim(a).toLowerCase().split(/[\s]+/)},tokenizeText:function(a){return d.trim(a).toLowerCase().split(/[\s\-_]+/)}, getProtocol:function(){return location.protocol},noop:function(){}},r=function(){var a=/\s+/;return{on:function(c,g){var d;if(!g)return this;this._callbacks=this._callbacks||{};for(c=c.split(a);d=c.shift();)this._callbacks[d]=this._callbacks[d]||[],this._callbacks[d].push(g);return this},trigger:function(c,g){var d,f;if(!this._callbacks)return this;for(c=c.split(a);d=c.shift();)if(f=this._callbacks[d])for(var e=0;e<f.length;e+=1)f[e].call(this,{type:d,data:g});return this}}}(),m=function(){function a(a){(!a|| !a.el)&&d.error("EventBus initialized without el");this.$el=d(a.el)}c.mixin(a.prototype,{trigger:function(a){var c=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,c)}});return a}(),l=function(){function a(f){this.prefix=["__",f,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=RegExp("^"+this.prefix)}function d(f){return JSON.stringify(c.isUndefined(f)?null:f)}var g;try{g=window.localStorage,g.setItem("~~~","!"),g.removeItem("~~~")}catch(q){g=null}c.mixin(a.prototype,g&&window.JSON? {_prefix:function(f){return this.prefix+f},_ttlKey:function(f){return this._prefix(f)+this.ttlKey},get:function(f){this.isExpired(f)&&this.remove(f);f=g.getItem(this._prefix(f));return JSON.parse(f)},set:function(f,e,b){c.isNumber(b)?g.setItem(this._ttlKey(f),d((new Date).getTime()+b)):g.removeItem(this._ttlKey(f));return g.setItem(this._prefix(f),d(e))},remove:function(f){g.removeItem(this._ttlKey(f));g.removeItem(this._prefix(f));return this},clear:function(){var f,e,b=[],a=g.length;for(f=0;f<a;f++)(e= g.key(f)).match(this.keyMatcher)&&b.push(e.replace(this.keyMatcher,""));for(f=b.length;f--;)this.remove(b[f]);return this},isExpired:function(f){f=g.getItem(this._ttlKey(f));f=JSON.parse(f);return c.isNumber(f)&&(new Date).getTime()>f?!0:!1}}:{get:c.noop,set:c.noop,remove:c.noop,clear:c.noop,isExpired:c.noop});return a}(),t=function(){function a(a){c.bindAll(this);a=a||{};this.sizeLimit=a.sizeLimit||10;this.cache={};this.cachedKeysByAge=[]}c.mixin(a.prototype,{get:function(a){return this.cache[a]}, set:function(a,c){var d;this.cachedKeysByAge.length===this.sizeLimit&&(d=this.cachedKeysByAge.shift(),delete this.cache[d]);this.cache[a]=c;this.cachedKeysByAge.push(a)}});return a}(),s=function(){function a(e){c.bindAll(this);e=c.isString(e)?{url:e}:e;f=f||new t;q=c.isNumber(e.maxParallelRequests)?e.maxParallelRequests:q||6;this.url=e.url;this.wildcard=e.wildcard||"%QUERY";this.filter=e.filter;this.replace=e.replace;this.ajaxSettings={type:"get",cache:e.cache,timeout:e.timeout,dataType:e.dataType|| "json",beforeSend:e.beforeSend};this._get=(/^throttle$/i.test(e.rateLimitFn)?c.throttle:c.debounce)(this._get,e.rateLimitWait||300)}var h=0,g={},q,f;c.mixin(a.prototype,{_get:function(e,b){function a(g){var d=c.filter?c.filter(g):g;b&&b(d);f.set(e,g)}var c=this;h<q?this._sendRequest(e).done(a):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(e){function b(){h--;g[e]=null;a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}var a=this,f=g[e];f|| (h++,f=g[e]=d.ajax(e,this.ajaxSettings).always(b));return f},get:function(a,b){var g=this,d=encodeURIComponent(a||""),h;b=b||c.noop;d=this.replace?this.replace(this.url,d):this.url.replace(this.wildcard,d);(h=f.get(d))?c.defer(function(){b(g.filter?g.filter(h):h)}):this._get(d,b);return!!h}});return a}(),n=function(){var a,h,g,q;function f(b){c.bindAll(this);c.isString(b.template)&&!b.engine&&d.error("no template engine specified");!b.local&&(!b.prefetch&&!b.remote)&&d.error("one of local, prefetch, or remote is required"); this.name=b.name||c.getUniqueId();this.limit=b.limit||5;this.minLength=b.minLength||1;this.header=b.header;this.footer=b.footer;this.valueKey=b.valueKey||"value";this.template=e(b.template,b.engine,this.valueKey);this.local=b.local;this.prefetch=b.prefetch;this.remote=b.remote;this.itemHash={};this.adjacencyList={};this.storage=b.name?new l(b.name):null}function e(b,a,e){c.isFunction(b)||(c.isString(b)?(b=a.compile(b),b=c.bind(b.render,b)):b=function(b){return"<p>"+b[e]+"</p>"});return b}a="thumbprint"; h="protocol";g="itemHash";q="adjacencyList";c.mixin(f.prototype,{_processLocalData:function(b){this._mergeProcessedData(this._processData(b))},_loadPrefetchData:function(b){function e(d){d=b.filter?b.filter(d):d;d=f._processData(d);var v=d.itemHash,k=d.adjacencyList;f.storage&&(f.storage.set(g,v,b.ttl),f.storage.set(q,k,b.ttl),f.storage.set(a,x,b.ttl),f.storage.set(h,c.getProtocol(),b.ttl));f._mergeProcessedData(d)}var f=this,x="0.9.3"+(b.thumbprint||""),k,A,w,y;this.storage&&(k=this.storage.get(a), A=this.storage.get(h),w=this.storage.get(g),y=this.storage.get(q));k=k!==x||A!==c.getProtocol();b=c.isString(b)?{url:b}:b;b.ttl=c.isNumber(b.ttl)?b.ttl:864E5;w&&y&&!k?(this._mergeProcessedData({itemHash:w,adjacencyList:y}),w=d.Deferred().resolve()):w=d.getJSON(b.url).done(e);return w},_transformDatum:function(b){var a=c.isString(b)?b:b[this.valueKey],e=b.tokens||c.tokenizeText(a),a={value:a,tokens:e};c.isString(b)?(a.datum={},a.datum[this.valueKey]=b):a.datum=b;a.tokens=c.filter(a.tokens,function(b){return!c.isBlankString(b)}); a.tokens=c.map(a.tokens,function(b){return b.toLowerCase()});return a},_processData:function(b){var a=this,e={},f={};c.each(b,function(b,g){var d=a._transformDatum(g),h=c.getUniqueId(d.value);e[h]=d;c.each(d.tokens,function(b,a){var e=a.charAt(0),e=f[e]||(f[e]=[h]);!~c.indexOf(e,h)&&e.push(h)})});return{itemHash:e,adjacencyList:f}},_mergeProcessedData:function(b){var a=this;c.mixin(this.itemHash,b.itemHash);c.each(b.adjacencyList,function(b,e){var f=a.adjacencyList[b];a.adjacencyList[b]=f?f.concat(e): e})},_getLocalSuggestions:function(b){var a=this,e=[],f=[],g,d=[];c.each(b,function(b,a){var f=a.charAt(0);!~c.indexOf(e,f)&&e.push(f)});c.each(e,function(b,e){var c=a.adjacencyList[e];if(!c)return!1;f.push(c);if(!g||c.length<g.length)g=c});if(f.length<e.length)return[];c.each(g,function(e,g){var h=a.itemHash[g];c.every(f,function(b){return~c.indexOf(b,g)})&&c.every(b,function(b){return c.some(h.tokens,function(a){return 0===a.indexOf(b)})})&&d.push(h)});return d},initialize:function(){var b;this.local&& this._processLocalData(this.local);this.transport=this.remote?new s(this.remote):null;b=this.prefetch?this._loadPrefetchData(this.prefetch):d.Deferred().resolve();this.local=this.prefetch=this.remote=null;this.initialize=function(){return b};return b},getSuggestions:function(b,a){function e(b){d=d.slice(0);c.each(b,function(b,a){var e=f._transformDatum(a);!c.some(d,function(b){return e.value===b.value})&&d.push(e);return d.length<f.limit});a&&a(d)}var f=this,g,d,h=!1;b.length<this.minLength||(g=c.tokenizeQuery(b), d=this._getLocalSuggestions(g).slice(0,this.limit),d.length<this.limit&&this.transport&&(h=this.transport.get(b,e)),!h&&a&&a(d))}});return f}(),u=function(){function a(a){var g=this;c.bindAll(this);this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};this.$hint=d(a.hint);this.$input=d(a.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent);if(c.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function(a){g.specialKeyCodeMap[a.which||a.keyCode]||c.defer(g._compareQueryToInputValue)});else this.$input.on("input.tt",this._compareQueryToInputValue);this.query=this.$input.val();this.$overflowHelper=d("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:this.$input.css("font-family"),fontSize:this.$input.css("font-size"),fontStyle:this.$input.css("font-style"),fontVariant:this.$input.css("font-variant"),fontWeight:this.$input.css("font-weight"), wordSpacing:this.$input.css("word-spacing"),letterSpacing:this.$input.css("letter-spacing"),textIndent:this.$input.css("text-indent"),textRendering:this.$input.css("text-rendering"),textTransform:this.$input.css("text-transform")}).insertAfter(this.$input)}c.mixin(a.prototype,r,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(a){var c=this.specialKeyCodeMap[a.which||a.keyCode];c&&this.trigger(c+"Keyed",a)},_compareQueryToInputValue:function(){var a= this.getInputValue(),c;c=this.query;var d=a;c=(c||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");d=(d||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");(c=c===d)&&this.query.length!==a.length?this.trigger("whitespaceChanged",{value:this.query}):c||this.trigger("queryChanged",{value:this.query=a})},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query}, setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,c){this.$input.val(a);!c&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var a= this.$input.val().length,d=this.$input[0].selectionStart;return c.isNumber(d)?d===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0}});return a}(),p=function(){function a(a){c.bindAll(this);this.isOpen=!1;this.isEmpty=!0;this.isMouseOverDropdown=!1;this.$menu=d(a.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion", this._handleMouseover)}function h(a){return a.data("suggestion")}var g={display:"block"},q={whiteSpace:"nowrap",cursor:"pointer"},f={whiteSpace:"normal"};c.mixin(a.prototype,r,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(a){a=d(a.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor");a.addClass("tt-is-under-cursor")},_handleSelection:function(a){a=d(a.currentTarget);this.trigger("suggestionSelected", h(a))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(a){var b,f;this.isVisible()&&(b=this._getSuggestions(),f=b.filter(".tt-is-under-cursor"),f.removeClass("tt-is-under-cursor"),a=b.index(f)+a,a=(a+1)%(b.length+1)-1,-1===a?this.trigger("cursorRemoved"):(-1>a&&(a=b.length-1),b=b.eq(a).addClass("tt-is-under-cursor"),this._ensureVisibility(b),this.trigger("cursorMoved",h(b))))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")}, _ensureVisibility:function(a){var b=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),f=this.$menu.scrollTop(),c=a.position().top;a=c+a.outerHeight(!0);0>c?this.$menu.scrollTop(f+c):b<a&&this.$menu.scrollTop(f+(a-b))},destroy:function(){this.$menu.off(".tt");this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&& (this.isMouseOverDropdown=this.isOpen=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){var b={left:"0",right:"auto"},f={left:"auto",right:" 0"};"ltr"===a?this.$menu.css(b):this.$menu.css(f)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var a= this._getSuggestions().filter(".tt-is-under-cursor").first();return 0<a.length?h(a):null},getFirstSuggestion:function(){var a=this._getSuggestions().first();return 0<a.length?h(a):null},renderSuggestions:function(a,b){var h="tt-dataset-"+a.name,k,l;l=this.$menu.find("."+h);var m,n,p;0===l.length&&(l=d('<span class="tt-suggestions"></span>').css(g),l=d("<div></div>").addClass(h).append(a.header).append(l).append(a.footer).appendTo(this.$menu));0<b.length?(this.isEmpty=!1,this.isOpen&&this._show(), m=document.createElement("div"),n=document.createDocumentFragment(),c.each(b,function(b,c){c.dataset=a.name;k=a.template(c.datum);m.innerHTML='<div class="tt-suggestion">%body</div>'.replace("%body",k);p=d(m.firstChild).css(q).data("suggestion",c);p.children().each(function(){d(this).css(f)});n.appendChild(p[0])}),l.show().find(".tt-suggestions").html(n)):this.clearSuggestions(a.name);this.trigger("suggestionsRendered")},clearSuggestions:function(a){a=a?this.$menu.find(".tt-dataset-"+a):this.$menu.find('[class^="tt-dataset-"]'); var b=a.find(".tt-suggestions");a.hide();b.empty();0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}});return a}(),k=function(){function a(a){var e,b;c.bindAll(this);var h=a.input;e=d(g.wrapper);b=d(g.dropdown);var h=d(h),l=d(g.hint);e=e.css(k.wrapper);b=b.css(k.dropdown);l.css(k.hint).css({backgroundAttachment:h.css("background-attachment"),backgroundClip:h.css("background-clip"),backgroundColor:h.css("background-color"),backgroundImage:h.css("background-image"),backgroundOrigin:h.css("background-origin"), backgroundPosition:h.css("background-position"),backgroundRepeat:h.css("background-repeat"),backgroundSize:h.css("background-size")});h.data("ttAttrs",{dir:h.attr("dir"),autocomplete:h.attr("autocomplete"),spellcheck:h.attr("spellcheck"),style:h.attr("style")});h.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(k.query);try{!h.attr("dir")&&h.attr("dir","auto")}catch(m){}this.$node=h.wrap(e).parent().prepend(l).append(b);this.datasets=a.datasets;this.dir=null;this.eventBus=a.eventBus; a=this.$node.find(".tt-dropdown-menu");e=this.$node.find(".tt-query");b=this.$node.find(".tt-hint");this.dropdownView=(new p({menu:a})).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent); this.inputView=(new u({input:e,hint:b})).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed", this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function h(a){var e=a.find(".tt-query");c.each(e.data("ttAttrs"),function(a,f){c.isUndefined(f)?e.removeAttr(a):e.attr(a,f)});e.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(a);a.remove()}var g={wrapper:'<span class="twitter-typeahead"></span>', hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},k={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};c.isMsie()&&c.mixin(k.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}); c.isMsie()&&7>=c.isMsie()&&(c.mixin(k.wrapper,{display:"inline",zoom:"1"}),c.mixin(k.query,{marginTop:"-1px"}));c.mixin(a.prototype,r,{_managePreventDefault:function(a){var c=a.data,b;b=!1;switch(a.type){case "tabKeyed":a=this.inputView.getHintValue();b=this.inputView.getInputValue();b=a&&a!==b;break;case "upKeyed":case "downKeyed":b=!c.shiftKey&&!c.ctrlKey&&!c.metaKey}b&&c.preventDefault()},_setLanguageDirection:function(){var a=this.inputView.getLanguageDirection();a!==this.dir&&(this.dir=a,this.$node.css("direction", a),this.dropdownView.setLanguageDirection(a))},_updateHint:function(){var a=this.dropdownView.getFirstSuggestion(),a=a?a.value:null,e=this.dropdownView.isVisible(),b=this.inputView.isOverflow();a&&(e&&!b)&&(e=this.inputView.getInputValue(),b=e.replace(/\s{2,}/g," ").replace(/^\s+/g,""),b=c.escapeRegExChars(b),b=RegExp("^(?:"+b+")(.*$)","i"),a=b.exec(a),this.inputView.setHintValue(e+(a?a[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()}, _setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(a){this.inputView.setInputValue(a.data.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(a){this.dropdownView["blured"===a.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(a){var c=a.data;if(!c.shiftKey&&!c.ctrlKey&&!c.metaKey)this.dropdownView["upKeyed"===a.type?"moveCursorUp":"moveCursorDown"]()}, _handleSelection:function(a){var e="suggestionSelected"===a.type,b=e?a.data:this.dropdownView.getSuggestionUnderCursor();b&&(this.inputView.setInputValue(b.value),e?this.inputView.focus():a.data.preventDefault(),e&&c.isMsie()?c.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",b.datum,b.dataset))},_getSuggestions:function(){var a=this,e=this.inputView.getQuery();c.isBlankString(e)||c.each(this.datasets,function(b,c){c.getSuggestions(e,function(b){e===a.inputView.getQuery()&& a.dropdownView.renderSuggestions(c,b)})})},_autocomplete:function(a){var c;if("rightKeyed"===a.type||"leftKeyed"===a.type)if(c=this.inputView.isCursorAtEnd(),a="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===a.type:"rightKeyed"===a.type,!c||a)return;c=this.inputView.getQuery();a=this.inputView.getHintValue();""!==a&&c!==a&&(c=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(c.value),this.eventBus.trigger("autocompleted",c.datum,c.dataset))},_propagateEvent:function(a){this.eventBus.trigger(a.type)}, destroy:function(){this.inputView.destroy();this.dropdownView.destroy();h(this.$node);this.$node=null},setQuery:function(a){this.inputView.setQuery(a);this.inputView.setInputValue(a);this._clearHint();this._clearSuggestions();this._getSuggestions()}});return a}();(function(){var a={},h;h={initialize:function(g){var h;g=c.isArray(g)?g:[g];0===g.length&&d.error("no datasets provided");h=c.map(g,function(c){var d=a[c.name]?a[c.name]:new n(c);c.name&&(a[c.name]=d);return d});return this.each(function(){var a= d(this),e,b=new m({el:a});e=c.map(h,function(a){return a.initialize()});a.data("ttView",new k({input:a,eventBus:b=new m({el:a}),datasets:h}));d.when.apply(d,e).always(function(){c.defer(function(){b.trigger("initialized")})})})},destroy:function(){return this.each(function(){var a=d(this),c=a.data("ttView");c&&(c.destroy(),a.removeData("ttView"))})},setQuery:function(a){return this.each(function(){var c=d(this).data("ttView");c&&c.setQuery(a)})}};Zepto.fn.typeahead=function(a){return h[a]?h[a].apply(this, [].slice.call(arguments,1)):h.initialize.apply(this,arguments)}})()})(window.Zepto); var COMPILED=!1,gz=gz||{};gz.global=this;gz.DEBUG=!0;gz.cssNameMapping_;gz.cssNameMappingStyle_;var goog={};goog.setCssNameMapping=function(c,b){gz.cssNameMapping_=c;gz.cssNameMappingStyle_=b};gz.Css=function(c,b){var e=function(a){return gz.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var c=[],b=0;b<a.length;b++)c.push(e(a[b]));return c.join("-")},d=gz.cssNameMapping_?"BY_WHOLE"==gz.cssNameMappingStyle_?e:d:function(a){return a};return b?c+"-"+d(b):d(c)};(function(){(function(){
  var gz, model, widget, DeclarationModel, CustomerModel, BusinessFormView, PersonFormView, DeclarationFormView, CustomerFormView, CustomerFormMenuLI, CustomerFormView_template;
  window.gzmods = new Object;
  gz = window.gzmods.homegccaDevelopmentlacfrontendhelpersls = function(){
    var exports, module, GModel, GCollection, x$, gz, Gsync, isSpinning, y$, spinner, z$, spin, bonk, i$, len$, boni, bon;
    exports = {};
    module = {
      exports: exports
    };
    $.fn.serializeJSON = function(){
      return _(this.get(0).elements).reduce(function(ax, f){
        var value;
        if (f instanceof HTMLInputElement || f instanceof HTMLSelectElement || f instanceof HTMLTextAreaElement) {
          if (f.name) {
            if (f.type === 'checkbox') {
              ax[f.name] = f.checked;
            } else {
              value = f.value;
              value = value !== '' ? value : null;
              ax[f.name] = f.fnIsJSON ? JSON.parse(value) : value;
            }
          }
        }
        return ax;
      }, new Object);
    };
    $.fn.populateJSON = function(json){
      var f, l, i;
      f = this.get(0).elements;
      for (l in json) {
        i = f[l];
        if (i) {
          if (i.type === 'checkbox') {
            i.checked = json[l];
          } else {
            i.value = json[l];
          }
        }
      }
    };
    if (!function(){}.bind) {
      Function.prototype.bind = function(){
        var me, he, ar;
        me = this;
        he = [].shift.apply(arguments);
        ar = arguments;
        return function(){
          return me.apply(he, ar);
        };
      };
    }
    Object.defineProperty(NodeList.prototype, 'value', {
      get: function(){
        var i$, len$, node;
        for (i$ = 0, len$ = this.length; i$ < len$; ++i$) {
          node = this[i$];
          if (node.checked === true) {
            return node.value;
          }
        }
        return new Object;
      },
      set: function(value){
        var i$, len$, node;
        for (i$ = 0, len$ = this.length; i$ < len$; ++i$) {
          node = this[i$];
          if (value === node.value) {
            node.checked = true;
            break;
          }
        }
      },
      configurable: true,
      enumerable: true
    });
    GModel = (function(superclass){
      var prototype = extend$((import$(GModel, superclass).gcca = 'gz', GModel), superclass).prototype, constructor = GModel;
      function GModel(_, o){
        var ref$;
        o == null && (o = new Object);
        if ((ref$ = o.parent) != null) {
          this.parent = ref$;
        }
        GModel.superclass.apply(this, arguments);
      }
      prototype['url'] = function(){
        if (this.parent != null) {
          return this.parent.url() + "/" + superclass.prototype['url'].call(this);
        } else {
          return "/api/v1/" + superclass.prototype['url'].call(this);
        }
      };
      prototype['sync'] = function(t, m, o){
        var a, k;
        if (t === 'read') {
          a = m.attributes;
          o.url = m.url() + '?' + (function(){
            var results$ = [];
            for (k in a) {
              results$.push(k + "=" + a[k]);
            }
            return results$;
          }()).join('&');
        } else if (t === 'create' || t === 'update') {
          a = m.attributes;
          importAll$(a, (function(){
            var results$ = {};
            for (k in a) {
if (a[k] instanceof GModel) {
                results$[k] = a[k].get('id');
              }
            }
            return results$;
          }()));
          o['attrs'] = a;
        }
        return superclass.prototype['sync'].apply(this, arguments);
      };
      return GModel;
    }(window['Backbone']['Model']));
    GCollection = (function(superclass){
      var prototype = extend$((import$(GCollection, superclass).gcca = 'gz', GCollection), superclass).prototype, constructor = GCollection;
      prototype['url'] = function(){
        if (this.parent != null) {
          return this.parent.url() + "/" + superclass.prototype['url'].call(this);
        } else {
          return "/api/v1/" + this.urlRoot;
        }
      };
      function GCollection(){
        GCollection.superclass.apply(this, arguments);
      }
      return GCollection;
    }(window['Backbone']['Collection']));
    exports.tie = function(sf, fn){
      return fn.bind(sf);
    };
    exports.newel = window.document.createElement.bind(window.document);
    exports.G = window['Backbone'];
    exports.GView = window['Backbone']['View'];
    exports.GModel = GModel;
    exports.GCollection = GCollection;
    x$ = window['Ink']['UI'];
    exports.Ink = {
      UI: {
        Sticky: x$['Sticky'],
        Tabs: x$['Tabs'],
        DatePicker: x$['DatePicker'],
        Modal: x$['Modal'],
        Table: x$['Table'],
        Toggle: x$['Toggle'],
        Tooltip: x$['Tooltip']
      }
    };
    if (window.gz != null) {
      importAll$(exports, window.gz);
    }
    window.gz = gz = exports;
    Gsync = gz.G.sync;
    isSpinning = true;
    gz.G.sync = function(){
      if (isSpinning) {
        document.body.appendChild(spinner);
      }
      isSpinning = false;
      return Gsync.apply(this, arguments);
    };
    y$ = $(document);
    y$.on('ajaxBeforeSend', function(){
      setTimeout(function(){
        if (spinner.parentNode != null) {
          spin.classList.add(gz.Css('espin-mn-show'));
        }
      }, 100);
    });
    y$.on('ajaxComplete', function(){
      setTimeout(function(){
        spinner.classList.remove(gz.Css('espin-mn-show'));
        if (document.body.contains(spinner)) {
          document.body.removeChild(spinner);
        }
        isSpinning = true;
      }, 10);
    });
    y$.on('ajaxError', function(_, xhr){
      var base, x$, ale, tx;
      if (xhr.status === 0) {
        base = document.createElement('nav');
        base.className = gz.Css('ink-navigation');
        x$ = base.style;
        x$.padding = '13px';
        x$.backgroundColor = 'rgba(0,0,0,0.69)';
        x$.borderRadius = '7px';
        x$.position = 'fixe2';
        x$.top = '49px';
        x$.left = '0';
        x$.width = '100%';
        x$.textAlign = 'center';
        x$.marginTop = '0';
        ale = document.createElement('div');
        tx = document.createElement('p');
        ale.className = gz.Css('ink-alert') + "\ " + gz.Css('basic') + "\ " + gz.Css('error');
        tx.style.margin = '0';
        tx.innerHTML = '<b>Error:</b> &nbsp; Sin conexión.';
        ale.appendChild(tx);
        base.appendChild(ale);
        document.body.appendChild(base);
      }
    });
    spinner = gz.newel('div');
    z$ = spinner.style;
    z$.position = 'fixed';
    z$.width = '100%';
    z$.height = '100%';
    z$.top = '0';
    z$.bottom = '0';
    z$.right = '0';
    z$.left = '0';
    z$.zIndex = '6969';
    z$.backgroundColor = 'transparent';
    spin = gz.newel('div');
    spin.className = gz.Css('espin-mn');
    bonk = [gz.Css('espin-a-666_1'), gz.Css('espin-a-666_2'), gz.Css('espin-a-666_3'), gz.Css('espin-a-666_4'), gz.Css('espin-a-666_5'), gz.Css('espin-a-666_6'), gz.Css('espin-a-666_7'), gz.Css('espin-a-666_8')];
    for (i$ = 0, len$ = bonk.length; i$ < len$; ++i$) {
      boni = bonk[i$];
      bon = gz.newel('div');
      bon.className = boni + " " + gz.Css('espin-a');
      spin.appendChild(bon);
    }
    spinner.appendChild(spin);
    return module.exports;
  }();
  model = window.gzmods.homegccaDevelopmentlacfrontendmodells = function(){
    var exports, module, GModel, Shareholder, Shareholders, Customer, Customers, CustomerLastDeclaration, Declaration, Declarations, Dispatch, Dispatches;
    exports = {};
    module = {
      exports: exports
    };
    /**
     * Domain Layer
     *
     * @fileoverview Utilities for hadnling remote services. {@code GModel}
     *     and {@code Collection}for managing entities.
     * @author gcca@gcca.tk (cristHian Gz)
     */
    GModel = gz.GModel;
    /**
     * Shareholder model
     * @class Shareholder
     */
    Shareholder = (function(superclass){
      var prototype = extend$((import$(Shareholder, superclass).gcca = 'gz', Shareholder), superclass).prototype, constructor = Shareholder;
      prototype.urlRoot = 'shareholder';
      function Shareholder(){
        Shareholder.superclass.apply(this, arguments);
      }
      return Shareholder;
    }(GModel));
    /**
     * Shareholder collection
     * @class Shareholders
     */
    Shareholders = (function(superclass){
      var prototype = extend$((import$(Shareholders, superclass).gcca = 'gz', Shareholders), superclass).prototype, constructor = Shareholders;
      prototype['model'] = Shareholder;
      function Shareholders(){
        Shareholders.superclass.apply(this, arguments);
      }
      return Shareholders;
    }(gz.GCollection));
    /**
     * Customer model
     * @class Customer
     */
    Customer = (function(superclass){
      var prototype = extend$((import$(Customer, superclass).gcca = 'gz', Customer), superclass).prototype, constructor = Customer;
      prototype.urlRoot = 'customer';
      /** Customer creates a new declaration.
       *
       * @param {!Object} declarationJSON JSON with declaration data.
       *     (Attributes of declaration.)
       * @param {Object} options JSON callbacks success and error.
       * @return {undefined}
       *
       * >>> customer = new Customer id : 666
       * >>> declarationJSON
       * ...     references : '123,456,789'
       * ...     amount     : 0.0666
       * ...     ...
       * >>> options =
       * ...     \sucess : (declarationModel) ->
       * ...         ...  # Declaration created
       * ...     \error : ->
       * ...         ...  # Error creating declaration
       * >>> customer.createDeclaration declarationJSON, options
       */
      prototype.createDeclaration = function(declarationJSON, options){
        var declaration;
        declarationJSON['customer'] = this.toJSON();
        declaration = new Declaration(declarationJSON, {
          parent: this
        });
        return declaration.save(new Object, options);
      };
      function Customer(){
        Customer.superclass.apply(this, arguments);
      }
      return Customer;
    }(GModel));
    /**
     * Customer collection
     * @class Customers
     */
    Customers = (function(superclass){
      var prototype = extend$((import$(Customers, superclass).gcca = 'gz', Customers), superclass).prototype, constructor = Customers;
      prototype.url = 'customer';
      prototype['model'] = Customer;
      function Customers(){
        Customers.superclass.apply(this, arguments);
      }
      return Customers;
    }(gz.GCollection));
    /**
     * Last declaration of {@code Customer} model
     * @class CustomerLastDeclaration
     */
    CustomerLastDeclaration = (function(superclass){
      var prototype = extend$((import$(CustomerLastDeclaration, superclass).gcca = 'gz', CustomerLastDeclaration), superclass).prototype, constructor = CustomerLastDeclaration;
      prototype.urlRoot = 'customer/lastdeclaration';
      function CustomerLastDeclaration(){
        CustomerLastDeclaration.superclass.apply(this, arguments);
      }
      return CustomerLastDeclaration;
    }(GModel));
    /**
     * Declaration model
     * @class Declaration
     */
    Declaration = (function(superclass){
      var prototype = extend$((import$(Declaration, superclass).gcca = 'gz', Declaration), superclass).prototype, constructor = Declaration;
      prototype.urlRoot = 'declaration';
      function Declaration(){
        Declaration.superclass.apply(this, arguments);
      }
      return Declaration;
    }(GModel));
    /**
     * Declaration collection
     * @class Declarations
     */
    Declarations = (function(superclass){
      var prototype = extend$((import$(Declarations, superclass).gcca = 'gz', Declarations), superclass).prototype, constructor = Declarations;
      prototype.url = 'declaration';
      prototype['model'] = Declaration;
      function Declarations(){
        Declarations.superclass.apply(this, arguments);
      }
      return Declarations;
    }(gz.GCollection));
    /**
     * Dispatch model
     * @class Dispatch
     */
    Dispatch = (function(superclass){
      var prototype = extend$((import$(Dispatch, superclass).gcca = 'gz', Dispatch), superclass).prototype, constructor = Dispatch;
      prototype.urlRoot = 'dispatch';
      function Dispatch(){
        Dispatch.superclass.apply(this, arguments);
      }
      return Dispatch;
    }(GModel));
    /**
     * Dispatch collection
     * @class Dispatches
     */
    Dispatches = (function(superclass){
      var prototype = extend$((import$(Dispatches, superclass).gcca = 'gz', Dispatches), superclass).prototype, constructor = Dispatches;
      prototype.urlRoot = 'dispatch';
      prototype['model'] = Dispatch;
      function Dispatches(){
        Dispatches.superclass.apply(this, arguments);
      }
      return Dispatches;
    }(gz.GCollection));
    /**
     * @type {Object}
     */
    exports.Shareholder = Shareholder;
    exports.Shareholders = Shareholders;
    exports.Customer = Customer;
    exports.Customers = Customers;
    exports.Declaration = Declaration;
    exports.Declarations = Declarations;
    exports.Dispatch = Dispatch;
    exports.Dispatches = Dispatches;
    exports.CustomerLastDeclaration = CustomerLastDeclaration;
    return module.exports;
  }();
  widget = window.gzmods.homegccaDevelopmentlacfrontendwidgetls = function(){
    var exports, module, Modal, AutoAlert, Typeahead;
    exports = {};
    module = {
      exports: exports
    };
    /**
     * @module widget
     */
    /**
     * Modal window
     * @class Modal
     *
     * @example
     * modal = new Modal '<h3>Header</h3>', '<p>body</p>'
     * modal.show!
     */
    Modal = (function(superclass){
      var prototype = extend$((import$(Modal, superclass).gcca = 'gz', Modal), superclass).prototype, constructor = Modal;
      /**
       * DOM element.
       * @type {string}
       * @private
       */
      prototype.tagName = 'div';
      /**
       * Style.
       * @type {string}
       * @private
       */
      prototype.className = gz.Css('ink-shade') + " " + gz.Css('fade');
      /**
       * Show modal.
       * @protected
       */
      prototype.show = function(){
        var this$ = this;
        if (this.uiModal == null) {
          document.body.appendChild(this.el);
          this.uiModal = new gz.Ink.UI.Modal(this.modal, {
            'onDismiss': function(){
              this$.$el.remove();
              this$.trigger(gz.Css('dismiss'));
            }
          });
          if (this.mBody.constructor === String) {
            this.body.innerHTML = this.mBody;
          } else {
            this.body.appendChild(this.mBody);
          }
        }
      };
      /**
       * Hide modal.
       * @protected
       */
      prototype.hide = function(){
        if (this.uiModal != null) {
          this.uiModal['dismiss']();
        }
      };
      /**
       * @param {String} mHeader
       * @param {String|HTMLElement} mBody
       * @param {(String|HTMLElement)=} mFooter
       * @constructor
       */;
      function Modal(mHeader, mBody, mFooter){
        this.mHeader = mHeader;
        this.mBody = mBody;
        this.mFooter = mFooter != null
          ? mFooter
          : this.mFooterBase;
        Modal.superclass.call(this);
      }
      /**
       * Initialize view.
       * @private
       */
      prototype.initialize = function(){
        var modal, header, body, footer;
        modal = gz.newel('div');
        header = gz.newel('div');
        body = gz.newel('div');
        footer = gz.newel('div');
        this.el.style.zIndex = '10000';
        modal.className = gz.Css('ink-modal');
        header.className = gz.Css('modal-header');
        body.className = gz.Css('modal-body');
        footer.className = gz.Css('modal-footer');
        header.innerHTML = "<button class='" + gz.Css('modal-close') + " " + gz.Css('ink-dismiss') + "'></button><h5>" + this.mHeader + "</h5>";
        if (this.mFooter.constructor === String) {
          footer.innerHTML = this.mFooter;
        } else {
          footer.appendChild(this.mFooter);
        }
        modal.appendChild(header);
        modal.appendChild(body);
        modal.appendChild(footer);
        this.el.appendChild(modal);
        this.modal = modal;
        this.body = body;
      };
      /** @private */
      prototype.modal = null;
      /** @private */
      prototype.body = null;
      /** @private */
      prototype.mBody = null;
      /** @private */
      prototype.mFooterBase = "<div class='" + gz.Css('push-right') + "'><button class='" + gz.Css('ink-button') + " " + gz.Css('blue') + "'>Aceptar</button><button class='" + gz.Css('ink-button') + "\ " + gz.Css('red') + "\ " + gz.Css('ink-dismiss') + "'>Cerrar</button></div>";
      /** @private */
      prototype.uiModal = null;
      return Modal;
    }(gz.GView));
    /**
     * Create alert on top.
     * @class AutoAlert
     * Parameter {@code type} must be {@code gz.Css ('error'|'success'|'info')}
     *
     * @example
     * autoAlert = new AutoAlert (gz.Css \error),
     *                           '<b>ERROR:</b> Esto es un error'
     * autorAlert.show!
     */
    AutoAlert = (function(superclass){
      var prototype = extend$((import$(AutoAlert, superclass).gcca = 'gz', AutoAlert), superclass).prototype, constructor = AutoAlert;
      /**
       * DOM element.
       * @type {string}
       * @private
       */
      prototype.tagName = 'div';
      /**
       * Style.
       * @type {string}
       * @private
       */
      prototype.className = gz.Css('ink-alert');
      /**
       * View events.
       * @type {Object}
       * @private
       */
      prototype.events = {
        /**
         * On click close.
         * @private
         */
        'click button': function(){
          return this.hide();
        }
      };
      /**
       * @private
       */;
      AutoAlert.acc = 1;
      /**
       * @private
       */
      AutoAlert.bacc = 3;
      /**
       * @private
       */
      AutoAlert.nacc = 0;
      /**
       * @param {string} type .error .success .info
       * @param {string} message Text
       * @param {string=} block HTML content
       * @constructor
       */
      function AutoAlert(type, message, block){
        this.type = type;
        this.message = message;
        this.block = block != null ? block : void 8;
        AutoAlert.superclass.call(this);
      }
      /**
       * Initialize view.
       * @private
       */
      prototype.initialize = function(){
        var x$, this$ = this;
        this.$el.on('mouseover', function(){
          return this$.el.style.opacity = 'initial';
        });
        this.$el.on('mouseleave', function(){
          return this$.el.style.opacity = '0.69';
        });
        this.el.classList.add(this.block != null
          ? gz.Css('block')
          : gz.Css('basic'));
        this.el.classList.add(this.type);
        x$ = this.el.style;
        x$.position = 'fixed';
        x$.width = '96%';
        x$.marginLeft = '2%';
        this.render();
      };
      /**
       * Render view.
       */
      prototype.render = function(){
        this.el.innerHTML = "<button class='" + gz.Css('ink-dismiss') + "'>&times;</button><p>" + this.message + "</p>";
        return superclass.prototype.render.call(this);
      };
      /**
       * Show.
       * @param {boolean=} autohide
       */
      prototype.show = function(autohide){
        var this$ = this;
        autohide == null && (autohide = true);
        this.el.style.top = constructor.bacc * constructor.acc + "em";
        constructor.acc++;
        constructor.nacc++;
        constructor.bacc = 3.6;
        this.el.style.opacity = '0';
        this.$el.appendTo(document.body);
        this.$el.animate({
          'opacity': 1
        }, 900, 'ease-in');
        if (autohide) {
          setTimeout(function(){
            return this$.hide();
          }, 6900);
        }
      };
      /**
       * Hide.
       */
      prototype.hide = function(){
        var this$ = this;
        constructor.nacc--;
        if (constructor.nacc < 1) {
          constructor.acc = 1;
          constructor.bacc = 3;
        }
        this.$el.off();
        this.$el.animate({
          'opacity': 0
        }, 700, 'ease-out', function(){
          return this$.$el.remove();
        });
      };
      return AutoAlert;
    }(gz.GView));
    /**
     * Typeahead input.
     * @class Typeahead
     *
     * @example
     * TODO(...)
     */
    Typeahead = (function(superclass){
      var prototype = extend$((import$(Typeahead, superclass).gcca = 'gz', Typeahead), superclass).prototype, constructor = Typeahead;
      /**
       * DOM element.
       * @type {string}
       * @private
       */
      prototype.tagName = 'input';
      /**
       * Initialize view.
       * @private
       */
      prototype.initialize = function(){
        this.render();
      };
      /**
       * Render view.
       * @return {Object}
       */
      prototype.render = function(){
        var next, isNext;
        next = this.$el.next();
        isNext = next.get(0);
        if (isNext) {
          next.remove();
        }
        this.$el['typeahead']({
          'prefetch': '/static/pos.json',
          'template': '<p style="float:right;font-style:italic;"><%= language %></p><p style="font-weight:bold;"><%= name %></p><p style="font-size:14px;text-align:justify"><%= description %></p>',
          'engine': {
            'compile': function(t){
              var cc;
              cc = _['template'](t);
              return {
                'render': function(ctx){
                  return cc(ctx);
                }
              };
            }
          }
        });
        if (isNext) {
          this.$el.after(next);
        }
        return superclass.prototype.render.call(this);
      };
      function Typeahead(){
        Typeahead.superclass.apply(this, arguments);
      }
      return Typeahead;
    }(gz.GView));
    /**
     * Public widgets.
     * @type {Object}
     */
    exports.GModal = Modal;
    exports.GAutoAlert = AutoAlert;
    exports.GTypeahead = Typeahead;
    return module.exports;
  }();
  DeclarationModel = model.Declaration;
  CustomerModel = model.Customer;
  BusinessFormView = window.gzmods.homegccaDevelopmentlacfrontendcustomerformbusinessformls = function(){
    var exports, module, BaseFormView, ShareholdersView, form, BusinessFormView;
    exports = {};
    module = {
      exports: exports
    };
    /**
     * @module customer-form
     */
    BaseFormView = window.gzmods.homegccaDevelopmentlacfrontendcustomerformbaseformls = function(){
      var exports, module, BaseFormView;
      exports = {};
      module = {
        exports: exports
      };
      /**
       * @module customer-form
       */
      /**
       * Customer Base Form View
       *
       * ¡No instanciar directamente!
       * Esta clase solo es padre de PersonFormView y BusinessFormView
       *
       * @example
       * >>> declarationView = new DeclarationView
       * >>> baseView = new BaseFormView
       *             declarationView : declarationView
       */
      module.exports = BaseFormView = (function(superclass){
        var prototype = extend$((import$(BaseFormView, superclass).gcca = 'gz', BaseFormView), superclass).prototype, constructor = BaseFormView;
        /**
         * DOM element.
         * @type {string}
         * @private
         */
        prototype.tagName = 'form';
        /**
         * Commit form
         * Send customer data.
         * @const
         */
        prototype.commit = function(){
          var dataJSON, dataCustomer;
          dataJSON = this.getDataJSON();
          dataCustomer = this.customer.toJSON();
          dataJSON['documentType'] = 'RUC';
          delete dataCustomer['id'];
          if (_['isEqual'](dataCustomer, dataJSON)) {
            this.declarationView.commit(this.customer);
          } else {
            this.customer.save(dataJSON, {
              'success': gz.tie(this, function(customer){
                this.declarationView.commit(customer);
              }),
              'error': function(){
                return alert('ERROR customer');
              }
            });
          }
        };
        /**
         * Get JSON form.
         * @protected
         */
        prototype.getDataJSON = function(){
          return this.$el.serializeJSON();
        };
        /**
         * Initialize html form.
         * @protected
         */
        prototype.initForm = function(){};
        /**
         * @param {Object} declarationView GView.
         * @param {Object} customer GModel.
         * @constructor
         */;
        function BaseFormView(declarationView, customer){
          this.declarationView = declarationView;
          this.customer = customer;
          BaseFormView.superclass.call(this);
        }
        /**
         * Initialize customer form view.
         * @private
         */
        prototype.initialize = function(){
          this.initForm();
          this.el.id = 'customer';
          this.el.onsubmit = function(event){
            return event.preventDefault();
          };
          this.el.className += " " + gz.Css('ink-form') + " " + gz.Css('top-space') + "\ " + gz.Css('column-group') + " " + gz.Css('gutters');
          this.$el.populateJSON(this.customer.attributes);
          $('[data-tip-text]', this.el).each(function(_, el){
            return new gz.Ink.UI.Tooltip(el);
          });
        };
        /** @private */
        prototype.declarationView = null;
        /** @private */
        prototype.customer = null;
        return BaseFormView;
      }(gz.GView));
      return module.exports;
    }();
    ShareholdersView = window.gzmods.homegccaDevelopmentlacfrontendcustomerformshareholdersls = function(){
      var exports, module, widget, model, ShareholderModel, ShareholderList, ShareholderView, ShareholdersView;
      exports = {};
      module = {
        exports: exports
      };
      /**
       * @module customer-form.shareholder
       */
      /**
       * Ui Widgets (Customer).
       * @private
       */
      widget = window.gzmods.homegccaDevelopmentlacfrontendcustomerformwidgetls = function(){
        var exports, module, ComboBox, EditableLabel;
        exports = {};
        module = {
          exports: exports
        };
        ComboBox = (function(superclass){
          var prototype = extend$((import$(ComboBox, superclass).gcca = 'gz', ComboBox), superclass).prototype, constructor = ComboBox;
          prototype.tagName = 'div';
          prototype.events = {
            'click li a': function(event){
              var a, li;
              a = event.currentTarget;
              li = a.parentElement;
              this.updateChoice(li);
            }
          };
          prototype.selected = function(label){
            var length;
            length = this.maxChoiceLength - label.length + 1;
            length = Array(length).join('&nbsp;');
            return this.btn.innerHTML = "<label>" + label + "</label>" + length + "&nbsp;<span class='" + gz.Css('icon-caret-down') + "'></span>";
          };
          prototype.updateChoice = function(li){
            if (li !== this.currentChoice) {
              li.classList.add(gz.Css('active'));
              if (this.currentChoice) {
                this.currentChoice.classList.remove(gz.Css('active'));
              }
              this.currentChoice = li;
              this.selected(li.choiceValue);
              this.trigger('change');
            }
          };
          prototype.choice = function(currentChoice){
            var li;
            if (currentChoice != null) {
              li = this.liBy[currentChoice];
              return this.updateChoice(li);
            } else {
              return this.currentChoice.choiceValue;
            }
          };
          prototype.initialize = function(options){
            var btn, ul, choices, liBy, maxChoiceLength, value, li, a, length, currentChoice;
            this.options = options;
            this.el.className = gz.Css('ink-dropdown') + " " + gz.Css('green');
            btn = gz.newel('button');
            btn.type = 'button';
            btn.className = gz.Css('ink-button') + " " + gz.Css('toggle');
            btn.style.padding = '0.16em 0.5em';
            btn.style.textTransform = 'uppercase';
            this.btn = btn;
            ul = gz.newel('ul');
            ul.className = gz.Css('dropdown-menu');
            ul.innerHTML = "<li class='" + gz.Css('heading') + "'style='border-bottom:1px solid rgba(0,0,0,0.15);margin-bottom:0'>" + this.options.caption + "</li>";
            choices = this.options.choices;
            liBy = new Object;
            maxChoiceLength = 0;
            for (value in choices) {
              li = gz.newel('li');
              a = gz.newel('a');
              li.style.background = 'initial';
              li.choiceValue = value;
              a.href = 'javascript:void(0)';
              a.style.borderRadius = '0';
              a.style.borderBottom = '1px solid rgba(0,0,0,0.15)';
              a.innerHTML = choices[value];
              liBy[value] = li;
              length = value.length;
              if (length > maxChoiceLength) {
                maxChoiceLength = length;
              }
              li.appendChild(a);
              ul.appendChild(li);
            }
            this.liBy = liBy;
            this.maxChoiceLength = maxChoiceLength;
            currentChoice = this.options.choice;
            if (!currentChoice) {
              for (currentChoice in choices) {
                break;
              }
            }
            this.choice(currentChoice);
            this.el.appendChild(btn);
            this.el.appendChild(ul);
            new gz.Ink.UI.Toggle(btn, {
              'target': ul
            });
          };
          function ComboBox(){
            ComboBox.superclass.apply(this, arguments);
          }
          return ComboBox;
        }(gz.GView));
        EditableLabel = (function(superclass){
          var prototype = extend$((import$(EditableLabel, superclass).gcca = 'gz', EditableLabel), superclass).prototype, constructor = EditableLabel;
          prototype.tagName = 'span';
          prototype.events = {
            'click label': function(){
              var el;
              this.isinput = true;
              this.el.innerHTML = "<input type='text' value='" + this.options.label + "'>";
              el = this.el.firstElementChild;
              el.focus();
              el.select();
            },
            'blur input': function(event){
              if (this.isinput) {
                this.release(event);
              }
            },
            'keyup input': function(event){
              if (13 === event.keyCode || 27 === event.keyCode) {
                if (this.isinput) {
                  this.release(event);
                }
              }
            }
          };
          prototype.release = function(event){
            var label, iconHTML, pad;
            this.isinput = false;
            label = event.currentTarget.value;
            iconHTML = '';
            if (!label) {
              iconHTML = "&nbsp;&nbsp;<span class='" + gz.Css('icon-edit-sign') + "'></span>";
              label = 'Editar';
            }
            pad = label.length < 5 ? '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' : '';
            this.options.label = label;
            this.el.innerHTML = "<label>" + label + pad + iconHTML + "</label>";
            this.trigger('change');
          };
          prototype.initialize = function(options){
            var iconHTML;
            this.options = options;
            this.isinput = false;
            iconHTML = this.options.icon ? "&nbsp;&nbsp;<span class='" + gz.Css('icon-edit-sign') + "'></span>" : '';
            this.el.innerHTML = "<label>" + this.options.label + iconHTML + "</label>";
          };
          function EditableLabel(){
            EditableLabel.superclass.apply(this, arguments);
          }
          return EditableLabel;
        }(gz.GView));
        exports.ComboBox = ComboBox;
        exports.EditableLabel = EditableLabel;
        return module.exports;
      }();
      /**
       * Domain models.
       * @private
       */
      model = window.gzmods.homegccaDevelopmentlacfrontendmodells;
      /** @private */
      ShareholderModel = model.Shareholder;
      /** @private */
      ShareholderList = model.Shareholders;
      /**
       * Shareholder view.
       * Manage shareholder item in list.
       * @private
       */
      ShareholderView = (function(superclass){
        var prototype = extend$((import$(ShareholderView, superclass).gcca = 'gz', ShareholderView), superclass).prototype, constructor = ShareholderView;
        /**
         * DOM element.
         * @type {string}
         * @private
         */
        prototype.tagName = 'li';
        /**
         * Initialize view.
         * @private
         */
        prototype.initialize = function(options, shareholder){
          var a, cgroup, cname, cdocType, cdocNum, isNewMsg, edName, edDocNum, edDocType;
          this.options = options;
          this.shareholder = shareholder;
          a = gz.newel('a');
          a.href = 'javascript:void(0)';
          cgroup = gz.newel('div');
          cgroup.className = gz.Css('column-group') + " " + gz.Css('gutters');
          cname = gz.newel('div');
          cname.className = gz.Css('large-100') + "\ " + gz.Css('medium-60') + "\ " + gz.Css('small-70');
          cname.style.margin = '0';
          cdocType = gz.newel('div');
          cdocType.className = gz.Css('large-50') + "\ " + gz.Css('medium-20') + "\ " + gz.Css('small-30');
          cdocType.style.margin = '0';
          cdocNum = gz.newel('div');
          cdocNum.className = gz.Css('large-50') + "\ " + gz.Css('medium-20') + "\ " + gz.Css('small-100');
          cdocNum.style.margin = '0';
          isNewMsg = this.options.addIcon;
          edName = new widget.EditableLabel({
            label: this.shareholder.get('name'),
            icon: isNewMsg
          });
          cname.appendChild(edName.el);
          edDocNum = new widget.EditableLabel({
            label: this.shareholder.get('documentNumber'),
            icon: isNewMsg
          });
          cdocNum.appendChild(edDocNum.el);
          edDocType = new widget.ComboBox({
            caption: 'Tipo de documento',
            choices: {
              'DNI': 'Documento de Identidad Nacional',
              'PA': 'Pasaporte',
              'CE': 'Carné de Extranjería'
            },
            choice: this.shareholder.get('documentType')
          });
          cdocType.appendChild(edDocType.el);
          shareholder = this.shareholder;
          edName.bind('change', function(){
            return shareholder.set({
              'name': this.options.label
            });
          });
          edDocNum.bind('change', function(){
            return shareholder.set({
              'documentNumber': this.options.label
            });
          });
          edDocType.bind('change', function(){
            return shareholder.set({
              'documentType': this.choice()
            });
          });
          cgroup.appendChild(cname);
          cgroup.appendChild(cdocType);
          cgroup.appendChild(cdocNum);
          a.appendChild(cgroup);
          this.el.appendChild(a);
        };
        function ShareholderView(){
          ShareholderView.superclass.apply(this, arguments);
        }
        return ShareholderView;
      }(gz.GView));
      /**
       * Shareholders view.
       * Manage shareholder list.
       * @public
       */
      module.exports = ShareholdersView = (function(superclass){
        var prototype = extend$((import$(ShareholdersView, superclass).gcca = 'gz', ShareholdersView), superclass).prototype, constructor = ShareholdersView;
        /**
         * DOM element.
         * @type {string}
         * @private
         */
        prototype.tagName = 'nav';
        /**
         * JSON shareholder list.
         * @return {Array.<!Object>}
         */
        prototype.zJSON = function(){
          return _['map'](this.shareholders.models, function(it){
            return it.toJSON();
          });
        };
        /**
         * Initialize view.
         * @param {?Object} options
         * @private
         */
        prototype.initialize = function(options){
          var div, className, ul, shareholders, localShareholders, i$, len$, shareholder;
          this.options = options;
          div = gz.newel('div');
          className = gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100');
          div.innerHTML = "<button type='button'class='" + gz.Css('ink-button') + "\ " + gz.Css('event-add-shareholder') + "'style='margin-bottom:0.7em'>Agregar <i class='" + gz.Css('icon-plus') + "'></i></button>";
          this.el.appendChild(div);
          ul = gz.newel('ul');
          ul.className = gz.Css('menu') + "\ " + gz.Css('vertical') + "\ " + gz.Css('rounded') + "\ " + gz.Css('shadowed') + "\ " + gz.Css('white');
          this.el.className = gz.Css('ink-navigation');
          this.el.appendChild(ul);
          this.ul = ul;
          shareholders = new ShareholderList;
          shareholders.bind('add', function(shareholder, _, opts){
            var shareholderView;
            shareholderView = new ShareholderView({
              addIcon: opts.addIcon
            }, shareholder);
            ul.appendChild(shareholderView.el);
          });
          localShareholders = [];
          if (this.options.shareholders) {
            localShareholders = this.options.shareholders;
          }
          for (i$ = 0, len$ = localShareholders.length; i$ < len$; ++i$) {
            shareholder = localShareholders[i$];
            shareholder = new ShareholderModel(shareholder);
            shareholders.add(shareholder);
          }
          div.firstElementChild.onclick = function(){
            var shareholder;
            shareholder = new ShareholderModel({
              'name': 'Nombre',
              'documentType': 'DNI',
              'documentNumber': 'Número'
            });
            shareholders.add(shareholder, {
              addIcon: true
            });
          };
          this.shareholders = shareholders;
          this.render();
        };
        /**
         * Render view.
         * @return {Object}
         * @override
         */
        prototype.render = function(){
          return superclass.prototype.render.call(this);
        };
        function ShareholdersView(){
          ShareholdersView.superclass.apply(this, arguments);
        }
        return ShareholdersView;
      }(gz.GView));
      return module.exports;
    }();
    form = window.gzmods.homegccaDevelopmentlacfrontendformls = function(){
      var exports, module;
      exports = {};
      module = {
        exports: exports
      };
      exports.statement = "<form method='post' style='margin-top:0' class='" + gz.Css('ink-form') + "\ " + gz.Css('top-space') + "\ " + gz.Css('column-group') + "\ " + gz.Css('gutters') + "' id='customer'>";
      exports.controlGroup = "<div class='" + gz.Css('control-group') + "'>";
      exports.control = "<div class='" + gz.Css('control') + "\ " + gz.Css('large-80') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "'>";
      exports.controlCheck = "<div class='" + gz.Css('control') + "\ " + gz.Css('large-15') + "\ " + gz.Css('medium-15') + "\ " + gz.Css('small-15') + "\ " + gz.Css('content-right') + "'>";
      exports.controlSym = "<div class='" + gz.Css('control') + "\ " + gz.Css('large-50') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "\ " + gz.Css('append-symbol') + "'>";
      exports.controlSym100 = "<div class='" + gz.Css('control') + "\ " + gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "\ " + gz.Css('append-symbol') + "'>";
      exports.label = "<label class='" + gz.Css('large-20') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "'>";
      exports.labelCheck = "<label class='" + gz.Css('large-85') + "\ " + gz.Css('medium-85') + "\ " + gz.Css('small-85') + "'>";
      exports.label100 = "<label class='" + gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "'>";
      exports.control100 = "<div class='" + gz.Css('control') + "\ " + gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "'>";
      exports.block50 = "<div class='" + gz.Css('large-50') + "\ " + gz.Css('medium-50') + "\ " + gz.Css('small-100') + "\ " + gz.Css('gz-block') + "'>";
      exports.block50large = "<div class='" + gz.Css('large-50') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "\ " + gz.Css('gz-block') + "'>";
      exports.block100 = "<div class='" + gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100') + "\ " + gz.Css('gz-block') + "'>";
      return module.exports;
    }();
    /**
     * Business form view.
     * @public
     */
    module.exports = BusinessFormView = (function(superclass){
      var prototype = extend$((import$(BusinessFormView, superclass).gcca = 'gz', BusinessFormView), superclass).prototype, constructor = BusinessFormView;
      /**
       * Get JSON business form.
       * @override
       */
      prototype.getDataJSON = function(){
        var dataJSON;
        dataJSON = superclass.prototype.getDataJSON.call(this);
        return dataJSON['shareholders'] = this.shareholdersView.zJSON(), dataJSON;
      };
      /**
       * Initialize business form.
       * @override
       */
      prototype.initForm = function(){
        var customer, div, shareholdersView;
        customer = this.customer;
        this.el.innerHTML = "" + form.block50 + "<fieldset><legend>Razón Social</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='name' placeholder='Razón social'><i class='" + gz.Css('icon-group') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Demoninación o razón social'></i></span></div></div></fieldset><fieldset><legend>RUC</legend>" + form.controlGroup + "" + form.controlSym + "<span><input type='text' name='documentNumber' placeholder='RUC'><i class='" + gz.Css('icon-barcode') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Registro Unico de Contribuyentes (RUC)'></i></span></div></div></fieldset><fieldset><legend>Objeto Social y Actividad Economica</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='socialObject' placeholder='Objeto social'><i class='" + gz.Css('icon-sign-blank') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Objeto social'></i></span></div></div>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='name' placeholder='Actividad economica principal'><i class='" + gz.Css('icon-tasks') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Actividad económica principal (comercial, industrial, construcción, transporte, etc.)'></i></span></div></div></fieldset><fieldset><legend>Accionistas</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><div class='" + gz.Css('gz-customsbroker-sel-shareholders') + "'></div><i class='" + gz.Css('icon-group') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Identificación de los accionistas, socios o asociados que tengan un porcentaje igual o mayor al 5% de las acciones o participaciones de la persona jurídica'></i></span></div></div></fieldset><fieldset><legend>Identificación de Representante Legal</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='legalName' placeholder='Nombre representante legal'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Identificación del representante legal o de quien comparece con facultades de representación y/o disposición de la persona jurídica.'></i></span></div></div>" + form.controlGroup + "" + form.controlSym + "<span><select name='legalDocumentType'><option value='DNI'>DNI</option><option value='CE'>Carné de extranjería</option><option value='PA'>Pasaporte</option><option>Otro</option></select><i class='" + gz.Css('icon-credit-card') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Tipo de documento de identidad del Representante Legal'></i></span></div></div>" + form.controlGroup + "" + form.controlSym + "<span><input type='text' name='legalDocumentNumber' placeholder='Número de identificación'><i class='" + gz.Css('icon-credit-card') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Número de identificación a persona jurídica.'></i></span></div></div></fieldset></div>" + form.block50 + "<fieldset><legend>Domicilio</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='address' placeholder='Domicilio declarado'><i class='" + gz.Css('icon-home') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Domicilio principal de la persona jurídica'></i></span></div></div></fieldset><fieldset><legend>Domicilio Fiscal</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='officialAddress' placeholder='Domicilio fiscal'><i class='" + gz.Css('icon-home') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Domicilio fiscal de la persona jurídica'></i></span></div></div></fieldset></div>" + form.block50 + "<fieldset><legend>Datos Persona Contacto</legend>" + form.controlGroup + "" + form.controlSym + "<span><input type='text' name='contactPhone' placeholder='Teléfono contacto'><i class='" + gz.Css('icon-phone') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Teléfono fijo de la persona de contacto'></i></span></div></div>" + form.controlGroup + "" + form.controlSym + "<span><input type='text' name='officePhone' placeholder='Teléfono oficina'><i class='" + gz.Css('icon-phone') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Teléfono fijo de la oficina de la persona de contacto'></i></span></div></div><fieldset>" + form.controlGroup + "" + form.controlSym + "<span><input type='text' name='addressCityCode'placeholder='Código Postal'><i class='" + gz.Css('icon-envelope') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Código postal de la persona contacto'></i></span></div></div></fieldset>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='contact' placeholder='Nombre de Persona de Contacto'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Persona a contactar'></i></span></div></div></fieldset><fieldset><legend>Información</legend>" + form.controlGroup + "<label class='" + gz.Css('large-75') + "\ " + gz.Css('medium-75') + "\ " + gz.Css('small-75') + "'>¿Es sujeto obligado informar a la UIF-Perú?</label><div class='" + gz.Css('control') + "\ " + gz.Css('large-25') + "\ " + gz.Css('medium-25') + "\ " + gz.Css('small-25') + "\ " + gz.Css('append-symbol') + "'><span><input type='checkbox' name='isObliged'><i class='" + gz.Css('icon-legal') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='¿Es sujeto obligado informar a la UIF-Perú?'></i></span></div></div>" + form.controlGroup + "<label class='" + gz.Css('large-75') + "\ " + gz.Css('medium-75') + "\ " + gz.Css('small-75') + "'>¿Designó a su oficial de Cumplimiento?</label><div class='" + gz.Css('control') + "\ " + gz.Css('large-25') + "\ " + gz.Css('medium-25') + "\ " + gz.Css('small-25') + "\ " + gz.Css('append-symbol') + "'><span><input type='checkbox' name='hasOfficier'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='¿Designó a su oficial de Cumplimiento?'></i></span></div></div></fieldset></div></div>";
        div = this.el.querySelector("." + gz.Css('gz-customsbroker-sel-shareholders'));
        shareholdersView = new ShareholdersView({
          shareholders: this.customer.get('shareholders')
        });
        div.appendChild(shareholdersView.el);
        this.shareholdersView = shareholdersView;
      };
      function BusinessFormView(){
        BusinessFormView.superclass.apply(this, arguments);
      }
      return BusinessFormView;
    }(BaseFormView));
    return module.exports;
  }();
  PersonFormView = window.gzmods.homegccaDevelopmentlacfrontendcustomerformpersonformls = function(){
    var exports, module, BaseFormView, form, PersonFormView;
    exports = {};
    module = {
      exports: exports
    };
    /**
     * @module customer-form
     */
    BaseFormView = window.gzmods.homegccaDevelopmentlacfrontendcustomerformbaseformls;
    form = window.gzmods.homegccaDevelopmentlacfrontendformls;
    /**
     * Person form view.
     * @public
     */
    module.exports = PersonFormView = (function(superclass){
      var prototype = extend$((import$(PersonFormView, superclass).gcca = 'gz', PersonFormView), superclass).prototype, constructor = PersonFormView;
      /**
       * Initialize person form.
       * @override
       */
      prototype.initForm = function(){
        var customer, dp;
        customer = this.customer;
        this.el.innerHTML = "" + form.block50 + "<fieldset><legend>Nombres y apellidos</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='name'placeholder='Nombres y apellidos'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Nombres y apellidos'></i></span></div></div></fieldset><fieldset><legend>Documento de identidad</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><select name='documentType'><option value='DNI'>DNI</option><option value='CE'>Carné de extranjería</option><option value='PA'>Pasaporte</option><option>Otro</option></select><i class='" + gz.Css('icon-credit-card') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Tipo de documento de identidad'></i></span></div></div>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='documentNumber' placeholder='Número de documento'><i class='" + gz.Css('icon-credit-card') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Número del documento de identidad'></i></span></div></div></fieldset><fieldset><legend>Nacimiento</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='birthPlace' placeholder='Lugar de nacimiento'><i class='" + gz.Css('icon-flag-checkered') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Lugar de nacimiento'></i></span></div></div>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='birthday' placeholder='Fecha de nacimiento'><i class='" + gz.Css('icon-calendar') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Fecha de nacimiento'></i></span></div></div></fieldset><fieldset><legend>Información</legend>" + form.controlGroup + "<label class='" + gz.Css('large-75') + "\ " + gz.Css('medium-75') + "\ " + gz.Css('small-75') + "'>¿Es sujeto obligado informar a la UIF-Perú?</label><div class='" + gz.Css('control') + "\ " + gz.Css('large-25') + "\ " + gz.Css('medium-25') + "\ " + gz.Css('small-25') + "\ " + gz.Css('append-symbol') + "'><span><input type='checkbox' name='report'><i class='" + gz.Css('icon-legal') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='¿Es sujeto obligado informar a la UIF-Perú?'></i></span></div></div>" + form.controlGroup + "<label class='" + gz.Css('large-75') + "\ " + gz.Css('medium-75') + "\ " + gz.Css('small-75') + "'>¿Designó a su Oficial de Cumplimiento?</label><div class='" + gz.Css('control') + "\ " + gz.Css('large-25') + "\ " + gz.Css('medium-25') + "\ " + gz.Css('small-25') + "\ " + gz.Css('append-symbol') + "'><span><input type='checkbox' name='designate'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='¿Designó a su Oficial de Cumplimiento?'></i></span></div></div></fieldset></div>" + form.block50 + "<fieldset><legend>Domicilio</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='adressPersonLegal' placeholder='Domicilio declarado'><i class='" + gz.Css('icon-home') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Domicilio declarado (Lugar de Residencia)'></i></span></div></div>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='adressPersonFiscal' placeholder='Domicilio fiscal'><i class='" + gz.Css('icon-home') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Domicilio Fiscal'></i></span></div></div></fieldset><fieldset><legend>Trabajo</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='activity' placeholder='Profesión'><i class='" + gz.Css('icon-briefcase') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Profesión u Ocupación'></i></span></div></div>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='role' placeholder='Cargo o función publica'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Cargo o función pública que haya desempeñado en los últimos dos (2) años, en el Perú o en el extranjero.'></i></span></div></div>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='organization' placeholder='Organización'><i class='" + gz.Css('icon-screenshot') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Nombre del oraganismo público u organización internacional en donde haya desempeñado el cargo o función publica'></i></span></div></div>" + form.controlGroup + "" + form.controlSym + "<span><input type='text' name='businessNumber' placeholder='RUC'><i class='" + gz.Css('icon-credit-card') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='RUC del oraganismo público u organización internacional'></i></span></div></div></fieldset><fieldset><legend>Estado Civil</legend>" + form.controlGroup + "" + form.controlSym100 + "<span><input type='text' name='partner' placeholder='Nombre conyuge o conviviente'><i class='" + gz.Css('icon-user') + "'data-tip-color='" + gz.Css('blue') + "'data-tip-text='Nombre de cónyuge, de ser casado. Si declara ser conviviente, consignar nombre'></i></span></div></div></fieldset></div>";
        dp = new gz.Ink.UI.DatePicker(this.el.querySelector('[name=birthday]'));
      };
      function PersonFormView(){
        PersonFormView.superclass.apply(this, arguments);
      }
      return PersonFormView;
    }(BaseFormView));
    return module.exports;
  }();
  DeclarationFormView = window.gzmods.homegccaDevelopmentlacfrontendcustomerformdeclarationformls = function(){
    var exports, module, form, model, widget, DeclarationModel, DeclarationFormView;
    exports = {};
    module = {
      exports: exports
    };
    form = window.gzmods.homegccaDevelopmentlacfrontendformls;
    model = window.gzmods.homegccaDevelopmentlacfrontendmodells;
    widget = window.gzmods.homegccaDevelopmentlacfrontendwidgetls;
    DeclarationModel = model.Declaration;
    /**
     * Create HTML form declaration-view
     * @class DeclarationFormView
     */
    module.exports = DeclarationFormView = (function(superclass){
      var prototype = extend$((import$(DeclarationFormView, superclass).gcca = 'gz', DeclarationFormView), superclass).prototype, constructor = DeclarationFormView;
      /**
       * DOM element
       * @override
       */
      prototype.tagName = 'form';
      prototype.events = {
        /**
         * Event for collapsible {@code div} of third.
         * @param {EventTarget} event
         */
        'change input[name=third]': function(event){
          var input, control;
          input = event.currentTarget;
          control = input.parentElement.parentElement;
          control.classList.toggle(gz.Css('declaration-third-hidden'));
        }
      };
      /**
       * Send declaration data.
       */
      prototype.commit = function(customer){
        customer.createDeclaration(this.zJSON(), this.commitOptions);
      };
      /**
       * Get JSON form.
       */
      prototype.zJSON = function(){
        return this.$el.serializeJSON();
      };
      /**
       * Initialize declaration form view.
       */
      prototype.initialize = function(){
        /**
         * Used in commit method for create a declaration.
         * @private
         */
        this.commitOptions = {
          'success': gz.tie(this, function(declaration){
            this.trigger(gz.Css('event-created-declaration'), declaration);
          }),
          'error': function(){
            return alert('ERROR declaration');
          }
        };
        this.render();
      };
      /**
       * Form style
       * @type {string}
       * @override
       */
      prototype.className = gz.Css('ink-form') + "\ " + gz.Css('top-space') + "\ " + gz.Css('column-group') + "\ " + gz.Css('gutters') + "\ " + gz.Css('declaration-form');
      /**
       * Render declaration view
       * @override
       */
      prototype.render = function(){
        this.$el.html(this.gtemplate());
        new widget.GTypeahead({
          'el': this.$el.find('[name=references]').get(0)
        });
        return superclass.prototype.render.call(this);
      };
      /**
       * Form template
       */
      prototype.gtemplate = function(){
        return "" + form.block50 + "<fieldset><legend>Origen de los fondos</legend>" + form.controlGroup + "" + form.label + "Origen</label>" + form.control + "<select name='moneySource'><option>Efectivo</option><option>No Efectivo</option></select></div></div></fieldset><fieldset>" + form.controlGroup + "" + form.label100 + "Referencias</label>" + form.controlSym100 + "<span><input type='text' name='references'placeholder='Referencias del cliente'><i class='" + gz.Css('icon-check-minus') + "'></i></span></div></div></fieldset></div>" + form.block50 + "<fieldset><div class='" + gz.Css('control-group') + "\ " + gz.Css('column-group') + "\ " + gz.Css('gutters') + "\ " + gz.Css('declaration-third') + "\ " + gz.Css('declaration-third-hidden') + "'>" + form.labelCheck + "<h6>¿Existe un tercero?</h6></label>" + form.controlCheck + "<input type='checkbox' name='third'></div></div>" + form.controlGroup + "" + form.label + "Tipo</label>" + form.control + "<select name='thirdType'><option value='person'>Persona Natural</option><option value='business'>Persona Jurídica</option></select></div></div>" + form.controlGroup + "" + form.label + "Nombre</label>" + form.control + "<input type='text' name='thirdName'placeholder='Nombres y Apellidos o Razón Social'></div></div>" + form.controlGroup + "" + form.label + "Tipo</label>" + form.control + "<select name='thirdDocumentType'><option value='DNI'>DNI</option><option value='RUC'>RUC</option><option value='CE'>Carné de extranjería</option><option value='PA'>Pasaporte</option></select></div></div>" + form.controlGroup + "" + form.label + "Número</label>" + form.control + "<input type='text' name='thirdDocumentNumber'placeholder='Número de DNI o RUC'></div></div></fieldset></div>";
      };
      function DeclarationFormView(){
        DeclarationFormView.superclass.apply(this, arguments);
      }
      return DeclarationFormView;
    }(gz.GView));
    return module.exports;
  }();
  CustomerFormView = (function(superclass){
    var ref$, prototype = extend$((import$(CustomerFormView, superclass).gcca = 'gz', CustomerFormView), superclass).prototype, constructor = CustomerFormView;
    /**
     * Customer Form View
     *
     * Vista que controla el cuerpo del documento HTML (document.body),
     * los fomularios de cliente (persona o negocio), el formulario
     * de movimiento y la generación de la declaración jurada en
     * formato pdf.
     *
     * Methods:
     *     newCustomerView : (CustomerModel) -> undefined
     *         Genera el formulario de cliente, después de
     *         identificar el tipo de cliente (persona, negocio).
     *
     *         >>> customer = new PersonFormView (or BusinessFormView)
     *         >>> customer.set do
     *                 \name           : 'cristHian Gz. (gcca)'
     *                 \documentNumber : '666'
     *                 ...
     *         >>> newCustomerView customer
     *
     *
     *     newDeclarationView : () -> undefined
     *         Método interno de addCustomerView. Crea el formulario
     *         de movimiento y lo guarda en el contexto del MainView
     *
     *
     *     addCustomerView : (CustomerView, DeclarationView) -> undefined
     *         Método interno de newCustomerView. Agrega el `form`
     *         al elemento del DOM.
     *
     *
     *     cleanAlerts : () -> undefined
     *         Limpia la zona de alertas.
     *
     *
     *     showError : (String, String) -> undefined
     *         Limpia la zona de alertas y formulario para mostrar
     *         la alerta. Nivel de `error` implica ocultar el `form`.
     *
     *         Args:
     *             classType   : Css classname of alertType
     *             messageHTML : Alert message (HTML format)
     *
     *         >>> showError (gz.Css \error), 'Sin datos en el form'
     *
     *
     *     showAlert : (String, String) -> undefined
     *         Limpia solo la zona de alertas para mostrar la alerta.
     *
     *         Args:
     *             classType   : Css classname of alertType
     *             messageHTML : Alert message (HTML format)
     *
     *         >>> showAlert (gz.Css \success), 'Envío satisfactorio'
     *         >>> showAlert (gz.Css \error), 'Envío satisfactorio'
     *
     *
     *     showModalPdf : () -> undefined
     *         Muestra la ventana modal de las declaraciones juradas
     *         a ser descargadas.
     *         (-o-) Debería contemplar la aceptación de la generación
     *               del movimiento.
     *
     *         >>> showModalPdf()
     *
     *
     *     isPerson : (String) -> Boolean
     *         Valida si el número de documento es de una persona.
     *
     *         Args:
     *             idn : número de documento
     *
     *         >>> isPerson '12345678'
     *         true
     *         >>> isPerson '123456789'
     *         false
     *         >>> isPerson '1234567'
     *         false
     *
     *
     *     isBusiness : (String) -> Boolean
     *         Valida si el número de documento es de un negocio.
     *
     *         Args:
     *             idn : número de documento
     *
     *         >>> isBusiness '12345678901'
     *         true
     *         >>> isBusiness '123456789012'
     *         false
     *              >>> isBusiness '1234567890'
     *              false
     *
     *
     *     createdDeclaration : () -> undefined
     *         Evento que se lanza al crear un movimiento.
     *
     */
    prototype.el = $('body');
    prototype.events = (ref$ = {}, ref$["click ." + gz.Css('event-submit-customer')] = function(){
      return this.customerView.commit();
    }, ref$['keyup input[name=name]'] = function(event){
      var input;
      input = event.currentTarget;
      this.logo.innerHTML = input.value;
    }, ref$);
    prototype.initEvents = function(){
      var formSearch;
      formSearch = this.el.querySelector('form#search');
      return formSearch.onsubmit = gz.tie(this, function(event){
        var f, documentNumber;
        event.preventDefault();
        f = event.currentTarget;
        documentNumber = f.elements['query'].value;
        localStorage.setItem('query', documentNumber);
        this.customer = new CustomerModel({
          'documentNumber': documentNumber
        });
        return this.customer.fetch({
          'success': this.newCustomerView,
          'error': this.newCustomerView
        });
      });
    };
    prototype.isPerson = function(idn){
      return 8 === idn.length;
    };
    prototype.isBusiness = function(idn){
      return 11 === idn.length;
    };
    prototype.createdDeclaration = function(declaration){
      this.declaration = declaration;
      new widget.GAutoAlert(gz.Css('success'), '<b>Datos guardados\nsatisfactoriamente</b>').show(false);
      this.showModalPdf();
    };
    prototype.showModalPdf = function(){
      var mHeader, mBody, modal;
      mHeader = 'Declaración Jurada&nbsp;<small><em>pdf</em></small>';
      mBody = "<h4>Lista</h4><p>Clic en los enlaces para ver la declaración jurada</p><ul><li><a href='/declaration/" + this.declaration.get('id') + "/pdf' target='_blank'>Declaración jurada</a></li></ul>";
      modal = new widget.GModal(mHeader, mBody);
      modal.show();
    };
    prototype.showAlert = function(classType, messageHTML){
      var div, p, frameAlerts;
      div = gz.newel('div');
      p = gz.newel('p');
      div.className = gz.Css('ink-alert') + "\ " + gz.Css('basic') + "\ " + classType;
      div.style.margin = '0';
      div.style.marginBottom = '2.2em';
      p.innerHTML = messageHTML;
      div.appendChild(p);
      frameAlerts = this.frameAlerts;
      frameAlerts.innerHTML = '';
      frameAlerts.appendChild(div);
    };
    prototype.showError = function(classType, messageHTML){
      this.frameCenter.innerHTML = '';
      this.showAlert.apply(this, arguments);
    };
    prototype.cleanAlerts = function(){
      this.frameAlerts.innerHTML = '';
    };
    prototype.addCustomerView = function(customerView, declarationView){
      var x$;
      this.customerView = customerView;
      this.declarationView = declarationView;
      x$ = this.frameCenter;
      x$.innerHTML = '';
      x$.appendChild(declarationView.el);
      x$.appendChild(gz.newel('br'));
      x$.appendChild(customerView.el);
    };
    prototype.newDeclarationView = function(){
      var declarationView;
      declarationView = new DeclarationFormView;
      declarationView.bind(gz.Css('event-created-declaration'), this.createdDeclaration, this);
      return this.declarationView = declarationView;
    };
    prototype.newCustomerView = function(customer){
      var documentNumber, FormView, declarationView, formView;
      this.cleanAlerts();
      this.logo = document.querySelector("." + gz.Css('logoPlaceholder'));
      documentNumber = customer.get('documentNumber');
      if (this.isBusiness(documentNumber)) {
        FormView = BusinessFormView;
      } else if (this.isPerson(documentNumber)) {
        FormView = PersonFormView;
      } else {
        FormView = null;
      }
      if (FormView != null) {
        declarationView = this.newDeclarationView();
        formView = new FormView(declarationView, customer);
        this.addCustomerView(formView, declarationView);
        if (customer.id) {
          new widget.GAutoAlert(gz.Css('info'), '<b>Usuario registrado</b>: Actualice\nsus datos de ser necesario.').show();
          this.logo.innerHTML = customer.get('name');
        } else {
          new widget.GAutoAlert(gz.Css('info'), '<b>Usuario no registrado</b>: Llene\nlos campos correspondientes\npara su registro.').show();
          this.logo.innerHTML = customer.get('documentNumber');
        }
        this.buttonSave.style.display = 'inline';
      } else {
        this.showError(gz.Css('error'), "El número de identificación no es válido\n<em> &nbsp; " + documentNumber + "</em>");
      }
    };
    prototype.initialize = function(){
      var grid, frame, frameAlerts, frameCenter, inputQuery, query;
      this.newCustomerView = gz.tie(this, this.newCustomerView);
      this.el.innerHTML = CustomerFormView_template;
      grid = gz.newel('div');
      grid.className = gz.Css('ink-grid') + "";
      frame = gz.newel('div');
      frame.className = gz.Css('column-group') + " " + gz.Css('gutters');
      frameAlerts = gz.newel('div');
      frameAlerts.className = gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100');
      frameAlerts.style.margin = '0';
      frame.appendChild(frameAlerts);
      this.frameAlerts = frameAlerts;
      frameCenter = gz.newel('div');
      frameCenter.className = gz.Css('large-100') + "\ " + gz.Css('medium-100') + "\ " + gz.Css('small-100');
      this.showAlert(gz.Css('info'), 'Ingrese el número del documento de identidad\n<em>(RUC o DNI)</em>');
      frame.appendChild(frameCenter);
      this.frameCenter = frameCenter;
      grid.appendChild(frame);
      this.el.appendChild(grid);
      this.buttonSave = this.el.querySelector("." + gz.Css('event-submit-customer'));
      this.initEvents();
      inputQuery = this.el.querySelector('input[name=query]');
      query = localStorage.getItem('query');
      if (query != null) {
        inputQuery.value = query;
        this.el.querySelector("." + gz.Css('query-button')).click();
      }
      inputQuery.focus();
    };
    function CustomerFormView(){
      CustomerFormView.superclass.apply(this, arguments);
    }
    return CustomerFormView;
  }(gz.GView));
  CustomerFormMenuLI = "<li><a class='" + gz.Css('logoPlaceholder') + "' href='javascript:void(0)'>Anexo 5: Declaración Jurada</a></li><li class='" + gz.Css('push-right') + "'><a href='javascript:void(0);' style='margin:0;padding:6px 1em'><button class='" + gz.Css('ink-button') + "\ " + gz.Css('green') + "\ " + gz.Css('event-submit-customer') + "'style='display:none;margin:0'>Guardar&nbsp;&nbsp;<i class='" + gz.Css('icon-check') + "'></i></button></a></li><li class='" + gz.Css('push-right') + "'><form id='search' class='" + gz.Css('ink-form') + " " + gz.Css('form-search') + "'><fieldset class='" + gz.Css('column-group') + " " + gz.Css('gutters') + "'><div class='" + gz.Css('control-group') + "'><div class='" + gz.Css('column-group') + "'><div class='" + gz.Css('control') + " " + gz.Css('append-button') + "'><span><input type='text' name='query' placeholder='RUC o DNI'></span><button class='" + gz.Css('ink-button') + " " + gz.Css('query-button') + "'>Buscar&nbsp;&nbsp;<i class='" + gz.Css('icon-search') + "'></i></button></div></div></div></fieldset></form></li>";
  CustomerFormView_template = "<div class='" + gz.Css('topbar') + "'><nav class='" + gz.Css('ink-navigation') + " " + gz.Css('ink-grid') + "'><ul class='" + gz.Css('menu') + "\ " + gz.Css('horizontal') + "\ " + gz.Css('shadowed') + "\ " + gz.Css('black') + "'>" + CustomerFormMenuLI + "</ul></nav><nav class='" + gz.Css('ink-navigation') + " " + gz.Css('ink-grid') + " " + gz.Css('hide-all') + "'><ul class='" + gz.Css('menu') + "\ " + gz.Css('vertical') + "\ " + gz.Css('flat') + "\ " + gz.Css('black') + "'><li class='" + gz.Css('title') + "'><a class='" + gz.Css('logoPlaceholder') + " " + gz.Css('push-left') + "'href='#' title='gcca'>LAc</a><button data-target='#topbar_menu'><span class='" + gz.Css('icon-reorder') + "'></span></button></li></ul><ul id='topbar_menu' class='" + gz.Css('menu') + "\ " + gz.Css('vertical') + "\ " + gz.Css('flat') + "\ " + gz.Css('black') + "\ " + gz.Css('hide-all') + "'>" + CustomerFormMenuLI + "</ul></nav><div class='" + gz.Css('border') + "'></div></div><div class='" + gz.Css('whatIs') + "'><h1>&nbsp;</h1><p></p></div>";
  new CustomerFormView;
  function extend$(sub, sup){
    function fun(){} fun.prototype = (sub.superclass = sup).prototype;
    (sub.prototype = new fun).constructor = sub;
    if (typeof sup.extended == 'function') sup.extended(sub);
    return sub;
  }
  function import$(obj, src){
    var own = {}.hasOwnProperty;
    for (var key in src) if (own.call(src, key)) obj[key] = src[key];
    return obj;
  }
  function importAll$(obj, src){
    for (var key in src) obj[key] = src[key];
    return obj;
  }
}).call(this);}).call(this);