/**
 * CavaSoft SAC http://cavasoftsac.com
 * cristHian Gz. (gcca) - http://gcca.tk
 */
'use strict';(function(d){String.prototype.trim===d&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.reduce===d&&(Array.prototype.reduce=function(l){if(void 0===this||null===this)throw new TypeError;var s=Object(this),m=s.length>>>0,q=0,p;if("function"!=typeof l)throw new TypeError;if(0==m&&1==arguments.length)throw new TypeError;if(2<=arguments.length)p=arguments[1];else{do{if(q in s){p=s[q++];break}if(++q>=m)throw new TypeError;}while(1)}for(;q<m;)q in s&&(p=l.call(d,p,s[q],q,s)),q++;return p})})();var Zepto=function(){function d(a){return null==a?String(a):J[U.call(a)]||"object"}function l(a){return"function"==d(a)}function s(a){return null!=a&&a==a.window}function m(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function q(a){return"object"==d(a)}function p(a){return q(a)&&!s(a)&&a.__proto__==Object.prototype}function z(a){return a instanceof Array}function y(a){return"number"==typeof a.length}function G(a){return v.call(a,function(a){return null!=a})}function w(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function H(a){return a in K?K[a]:K[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function A(a){return"children"in a?F.call(a.children):b.map(a.childNodes,function(a){if(1==a.nodeType)return a})}function C(a,e,g){for(f in e)g&&(p(e[f])||z(e[f]))?(p(e[f])&&!p(a[f])&&(a[f]={}),z(e[f])&&!z(a[f])&&(a[f]=[]),C(a[f],e[f],g)):e[f]!==h&&(a[f]=e[f])}function D(a,e){return e===h?b(a):b(a).filter(e)}function r(a,e,g,b){return l(e)?e.call(a,g,b):e}function u(a,e){var g=a.className,b=g&&g.baseVal!==h;if(e===h)return b?g.baseVal:g;b?g.baseVal=e:a.className=e}function n(a){var e;try{return a?"true"==a||("false"==a?!1:"null"==a?null:!isNaN(e=Number(a))?e:/^[\[\{]/.test(a)?b.parseJSON(a):a):a}catch(g){return a}}function c(a,e){e(a);for(var g in a.childNodes)c(a.childNodes[g],e)}var h,f,b,B,E=[],F=E.slice,v=E.filter,k=window.document,L={},K={},M=k.defaultView.getComputedStyle,t={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},P=/^\s*<(\w+|!)[^>]*>/,V=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Q=/^(?:body|html)$/i,W="val css html text data width height offset".split(" "),N=k.createElement("table"),R=k.createElement("tr"),S={tr:k.createElement("tbody"),tbody:N,thead:N,tfoot:N,td:R,th:R,"*":k.createElement("div")},X=/complete|loaded|interactive/,Y=/^\.([\w-]+)$/,Z=/^#([\w-]*)$/,$=/^[\w-]+$/,J={},U=J.toString,x={},O,I,T=k.createElement("div");x.matches=function(a,e){if(!a||1!==a.nodeType)return!1;var g=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(g)return g.call(a,e);var b;b=a.parentNode;(g=!b)&&(b=T).appendChild(a);b=~x.qsa(b,e).indexOf(a);g&&T.removeChild(a);return b};O=function(a){return a.replace(/-+(.)?/g,function(a,g){return g?g.toUpperCase():""})};I=function(a){return v.call(a,function(e,g){return a.indexOf(e)==g})};x.fragment=function(a,e,g){a.replace&&(a=a.replace(V,"<$1></$2>"));e===h&&(e=P.test(a)&&RegExp.$1);e in S||(e="*");var k,c=S[e];c.innerHTML=""+a;a=b.each(F.call(c.childNodes),function(){c.removeChild(this)});p(g)&&(k=b(a),b.each(g,function(a,e){if(-1<W.indexOf(a))k[a](e);else k.attr(a,e)}));return a};x.Z=function(a,e){a=a||[];a.__proto__=b.fn;a.selector=e||"";return a};x.isZ=function(a){return a instanceof x.Z};x.init=function(a,e){if(a){if(l(a))return b(k).ready(a);if(x.isZ(a))return a;var g;if(z(a))g=G(a);else if(q(a))g=[p(a)?b.extend({},a):a],a=null;else if(P.test(a))g=x.fragment(a.trim(),RegExp.$1,e),a=null;else{if(e!==h)return b(e).find(a);g=x.qsa(k,a)}return x.Z(g,a)}return x.Z()};b=function(a,e){return x.init(a,e)};b.extend=function(a){var e,g=F.call(arguments,1);"boolean"==typeof a&&(e=a,a=g.shift());g.forEach(function(g){C(a,g,e)});return a};x.qsa=function(a,e){var g;return m(a)&&Z.test(e)?(g=a.getElementById(RegExp.$1))?[g]:[]:1!==a.nodeType&&9!==a.nodeType?[]:F.call(Y.test(e)?a.getElementsByClassName(RegExp.$1):$.test(e)?a.getElementsByTagName(e):a.querySelectorAll(e))};b.contains=function(a,e){return a!==e&&a.contains(e)};b.type=d;b.isFunction=l;b.isWindow=s;b.isArray=z;b.isPlainObject=p;b.isEmptyObject=function(a){for(var e in a)return!1;return!0};b.inArray=function(a,e,g){return E.indexOf.call(e,a,g)};b.camelCase=O;b.trim=function(a){return a.trim()};b.uuid=0;b.support={};b.expr={};b.map=function(a,e){var g,k=[],c;if(y(a))for(c=0;c<a.length;c++)g=e(a[c],c),null!=g&&k.push(g);else for(c in a)g=e(a[c],c),null!=g&&k.push(g);return 0<k.length?b.fn.concat.apply([],k):k};b.each=function(a,e){var g;if(y(a))for(g=0;g<a.length&&!1!==e.call(a[g],g,a[g]);g++);else for(g in a)if(!1===e.call(a[g],g,a[g]))break;return a};b.grep=function(a,e){return v.call(a,e)};window.JSON&&(b.parseJSON=JSON.parse);b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,e){J["[object "+e+"]"]=e.toLowerCase()});b.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,sort:E.sort,indexOf:E.indexOf,concat:E.concat,map:function(a){return b(b.map(this,function(e,g){return a.call(e,g,e)}))},slice:function(){return b(F.apply(this,arguments))},ready:function(a){X.test(k.readyState)?a(b):k.addEventListener("DOMContentLoaded",function(){a(b)},!1);return this},get:function(a){return a===h?F.call(this):this[0<=a?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){E.every.call(this,function(e,g){return!1!==a.call(e,g,e)});return this},filter:function(a){return l(a)?this.not(this.not(a)):b(v.call(this,function(e){return x.matches(e,a)}))},add:function(a,e){return b(I(this.concat(b(a,e))))},is:function(a){return 0<this.length&&x.matches(this[0],a)},not:function(a){var e=[];if(l(a)&&a.call!==h)this.each(function(g){a.call(this,g)||e.push(this)});else{var g="string"==typeof a?this.filter(a):y(a)&&l(a.item)?F.call(a):b(a);this.forEach(function(a){0>g.indexOf(a)&&e.push(a)})}return b(e)},has:function(a){return this.filter(function(){return q(a)?b.contains(this,a):b(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!q(a)?a:b(a)},last:function(){var a=this[this.length-1];return a&&!q(a)?a:b(a)},find:function(a){var e=this;return"object"==typeof a?b(a).filter(function(){var a=this;return E.some.call(e,function(e){return b.contains(e,a)})}):1==this.length?b(x.qsa(this[0],a)):this.map(function(){return x.qsa(this,a)})},closest:function(a,e){var g=this[0],k=!1;for("object"==typeof a&&(k=b(a));g&&!(k?0<=k.indexOf(g):x.matches(g,a));)g=g!==e&&!m(g)&&g.parentNode;return b(g)},parents:function(a){for(var e=[],g=this;0<g.length;)g=b.map(g,function(a){if((a=a.parentNode)&&!m(a)&&0>e.indexOf(a))return e.push(a),a});return D(e,a)},parent:function(a){return D(I(this.pluck("parentNode")),a)},children:function(a){return D(this.map(function(){return A(this)}),a)},contents:function(){return this.map(function(){return F.call(this.childNodes)})},siblings:function(a){return D(this.map(function(a,g){return v.call(A(g.parentNode),function(a){return a!==g})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return b.map(this,function(e){return e[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==M(this,"").getPropertyValue("display")){var a=this.style,e=this.nodeName,g,b;L[e]||(g=k.createElement(e),k.body.appendChild(g),b=M(g,"").getPropertyValue("display"),g.parentNode.removeChild(g),"none"==b&&(b="block"),L[e]=b);a.display=L[e]}})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var e=l(a);if(this[0]&&!e)var g=b(a).get(0),k=g.parentNode||1<this.length;return this.each(function(c){b(this).wrapAll(e?a.call(this,c):k?g.cloneNode(!0):g)})},wrapAll:function(a){if(this[0]){b(this[0]).before(a=b(a));for(var e;(e=a.children()).length;)a=e.first();b(a).append(this)}return this},wrapInner:function(a){var e=l(a);return this.each(function(g){var k=b(this),c=k.contents();g=e?a.call(this,g):a;c.length?c.wrapAll(g):k.append(g)})},unwrap:function(){this.parent().each(function(){b(this).replaceWith(b(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var e=b(this);(a===h?"none"==e.css("display"):a)?e.show():e.hide()})},prev:function(a){return b(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return b(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return a===h?0<this.length?this[0].innerHTML:null:this.each(function(e){var g=this.innerHTML;b(this).empty().append(r(this,a,e,g))})},text:function(a){return a===h?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,e){var g;return"string"==typeof a&&e===h?0==this.length||1!==this[0].nodeType?h:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(g=this[0].getAttribute(a))&&a in this[0]?this[0][a]:g:this.each(function(g){if(1===this.nodeType)if(q(a))for(f in a){g=f;var b=a[f];null==b?this.removeAttribute(g):this.setAttribute(g,b)}else g=r(this,e,g,this.getAttribute(a)),null==g?this.removeAttribute(a):this.setAttribute(a,g)})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,e){return e===h?this[0]&&this[0][a]:this.each(function(g){this[a]=r(this,e,g,this[a])})},data:function(a,e){var g=this.attr("data-"+w(a),e);return null!==g?n(g):h},val:function(a){return a===h?this[0]&&(this[0].multiple?b(this[0]).find("option").filter(function(a){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=r(this,a,e,this.value)})},offset:function(a){if(a)return this.each(function(e){var k=b(this);e=r(this,a,e,k.offset());var c=k.offsetParent().offset();e={top:e.top-c.top,left:e.left-c.left};"static"==k.css("position")&&(e.position="relative");k.css(e)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(a,e){if(2>arguments.length&&"string"==typeof a)return this[0]&&(this[0].style[O(a)]||M(this[0],"").getPropertyValue(a));var b="";if("string"==d(a))!e&&0!==e?this.each(function(){this.style.removeProperty(w(a))}):b=w(a)+":"+("number"==typeof e&&!t[w(a)]?e+"px":e);else for(f in a)!a[f]&&0!==a[f]?this.each(function(){this.style.removeProperty(w(f))}):b+=w(f)+":"+("number"==typeof a[f]&&!t[w(f)]?a[f]+"px":a[f])+";";return this.each(function(){this.style.cssText+=";"+b})},index:function(a){return a?this.indexOf(b(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return E.some.call(this,function(a){return this.test(u(a))},H(a))},addClass:function(a){return this.each(function(e){B=[];var k=u(this);r(this,a,e,k).split(/\s+/g).forEach(function(a){b(this).hasClass(a)||B.push(a)},this);B.length&&u(this,k+(k?" ":"")+B.join(" "))})},removeClass:function(a){return this.each(function(e){if(a===h)return u(this,"");B=u(this);r(this,a,e,B).split(/\s+/g).forEach(function(a){B=B.replace(H(a)," ")});u(this,B.trim())})},toggleClass:function(a,e){return this.each(function(k){var c=b(this);r(this,a,k,u(this)).split(/\s+/g).forEach(function(a){(e===h?!c.hasClass(a):e)?c.addClass(a):c.removeClass(a)})})},scrollTop:function(){if(this.length)return"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY},position:function(){if(this.length){var a=this[0],e=this.offsetParent(),k=this.offset(),c=Q.test(e[0].nodeName)?{top:0,left:0}:e.offset();k.top-=parseFloat(b(a).css("margin-top"))||0;k.left-=parseFloat(b(a).css("margin-left"))||0;c.top+=parseFloat(b(e[0]).css("border-top-width"))||0;c.left+=parseFloat(b(e[0]).css("border-left-width"))||0;return{top:k.top-c.top,left:k.left-c.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||k.body;a&&!Q.test(a.nodeName)&&"static"==b(a).css("position");)a=a.offsetParent;return a})}};b.fn.detach=b.fn.remove;["width","height"].forEach(function(a){b.fn[a]=function(e){var k,c=this[0],v=a.replace(/./,function(a){return a[0].toUpperCase()});return e===h?s(c)?c["inner"+v]:m(c)?c.documentElement["offset"+v]:(k=this.offset())&&k[a]:this.each(function(k){c=b(this);c.css(a,r(this,e,k,c[a]()))})}});["after","prepend","before","append"].forEach(function(a,e){var k=e%2;b.fn[a]=function(){var a,v=b.map(arguments,function(e){a=d(e);return"object"==a||"array"==a||null==e?e:x.fragment(e)}),h,f=1<this.length;return 1>v.length?this:this.each(function(a,d){h=k?d:d.parentNode;d=0==e?d.nextSibling:1==e?d.firstChild:2==e?d:null;v.forEach(function(a){if(f)a=a.cloneNode(!0);else if(!h)return b(a).remove();c(h.insertBefore(a,d),function(a){null!=a.nodeName&&("SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&!a.src)&&window.eval.call(window,a.innerHTML)})})})};b.fn[k?a+"To":"insert"+(e?"Before":"After")]=function(e){b(e)[a](this);return this}});x.Z.prototype=b.fn;x.uniq=I;x.deserializeValue=n;b.zepto=x;return b}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);(function(d){function l(d){var m=this.os={},l=this.browser={},p=d.match(/WebKit\/([\d.]+)/),z=d.match(/(Android)\s+([\d.]+)/),y=d.match(/(iPad).*OS\s([\d_]+)/),G=!y&&d.match(/(iPhone\sOS)\s([\d_]+)/),w=d.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),H=w&&d.match(/TouchPad/),A=d.match(/Kindle\/([\d.]+)/),C=d.match(/Silk\/([\d._]+)/),D=d.match(/(BlackBerry).*Version\/([\d.]+)/),r=d.match(/(BB10).*Version\/([\d.]+)/),u=d.match(/(RIM\sTablet\sOS)\s([\d.]+)/),n=d.match(/PlayBook/),c=d.match(/Chrome\/([\d.]+)/)||d.match(/CriOS\/([\d.]+)/),h=d.match(/Firefox\/([\d.]+)/);if(l.webkit=!!p)l.version=p[1];z&&(m.android=!0,m.version=z[2]);G&&(m.ios=m.iphone=!0,m.version=G[2].replace(/_/g,"."));y&&(m.ios=m.ipad=!0,m.version=y[2].replace(/_/g,"."));w&&(m.webos=!0,m.version=w[2]);H&&(m.touchpad=!0);D&&(m.blackberry=!0,m.version=D[2]);r&&(m.bb10=!0,m.version=r[2]);u&&(m.rimtabletos=!0,m.version=u[2]);n&&(l.playbook=!0);A&&(m.kindle=!0,m.version=A[1]);C&&(l.silk=!0,l.version=C[1]);!C&&(m.android&&d.match(/Kindle Fire/))&&(l.silk=!0);c&&(l.chrome=!0,l.version=c[1]);h&&(l.firefox=!0,l.version=h[1]);m.tablet=!(!y&&!n&&!(z&&!d.match(/Mobile/)||h&&d.match(/Tablet/)));m.phone=!(m.tablet||!z&&!G&&!w&&!D&&!r&&!(c&&d.match(/Android/)||c&&d.match(/CriOS\/([\d.]+)/)||h&&d.match(/Mobile/)))}l.call(d,navigator.userAgent);d.__detect=l})(Zepto);(function(d){function l(c){return c._zid||(c._zid=H++)}function s(c,d,f,b){d=m(d);if(d.ns)var B=RegExp("(?:^| )"+d.ns.replace(" "," .* ?")+"(?: |$)");return(w[l(c)]||[]).filter(function(c){return c&&(!d.e||c.e==d.e)&&(!d.ns||B.test(c.ns))&&(!f||l(c.fn)===l(f))&&(!b||c.sel==b)})}function m(c){c=(""+c).split(".");return{e:c[0],ns:c.slice(1).sort().join(" ")}}function q(c,h,f){"string"!=d.type(c)?d.each(c,f):c.split(/\s/).forEach(function(c){f(c,h)})}function p(c,h,f,b,B,n){var u=l(c),v=w[u]||(w[u]=[]);q(h,f,function(k,h){var f=m(k);f.fn=h;f.sel=b;f.e in C&&(h=function(k){var c=k.relatedTarget;if(!c||c!==this&&!d.contains(this,c))return f.fn.apply(this,arguments)});f.del=B&&B(h,k);var l=f.del||h;f.proxy=function(k){var b=l.apply(c,[k].concat(k.data));!1===b&&(k.preventDefault(),k.stopPropagation());return b};f.i=v.length;v.push(f);c.addEventListener(C[f.e]||f.e,f.proxy,f.del&&("focus"==f.e||"blur"==f.e)||!!n)})}function z(c,d,f,b,m){var n=l(c);q(d||"",f,function(d,v){s(c,d,v,b).forEach(function(k){delete w[n][k.i];c.removeEventListener(C[k.e]||k.e,k.proxy,k.del&&("focus"==k.e||"blur"==k.e)||!!m)})})}function y(c){var h,f={originalEvent:c};for(h in c)!u.test(h)&&void 0!==c[h]&&(f[h]=c[h]);d.each(n,function(b,d){f[b]=function(){this[d]=D;return c[b].apply(c,arguments)};f[d]=r});return f}function G(c){if(!("defaultPrevented"in c)){c.defaultPrevented=!1;var d=c.preventDefault;c.preventDefault=function(){this.defaultPrevented=!0;d.call(this)}}}var w={},H=1,A={},C={mouseenter:"mouseover",mouseleave:"mouseout"};A.click=A.mousedown=A.mouseup=A.mousemove="MouseEvents";d.event={add:p,remove:z};d.proxy=function(c,h){if(d.isFunction(c)){var f=function(){return c.apply(h,arguments)};f._zid=l(c);return f}if("string"==typeof h)return d.proxy(c[h],c);throw new TypeError("expected function");};d.fn.bind=function(c,d){return this.each(function(){p(this,c,d)})};d.fn.unbind=function(c,d){return this.each(function(){z(this,c,d)})};d.fn.one=function(c,d){return this.each(function(f,b){p(this,c,d,null,function(c,d){return function(){var f=c.apply(b,arguments);z(b,d,c);return f}})})};var D=function(){return!0},r=function(){return!1},u=/^([A-Z]|layer[XY]$)/,n={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};d.fn.delegate=function(c,h,f){return this.each(function(b,l){p(l,h,f,c,function(b){return function(f){var v,k=d(f.target).closest(c,l).get(0);if(k)return v=d.extend(y(f),{currentTarget:k,liveFired:l}),b.apply(k,[v].concat([].slice.call(arguments,1)))}})})};d.fn.undelegate=function(c,d,f){return this.each(function(){z(this,d,f,c)})};d.fn.live=function(c,h){d(document.body).delegate(this.selector,c,h);return this};d.fn.die=function(c,h){d(document.body).undelegate(this.selector,c,h);return this};d.fn.on=function(c,h,f){return!h||d.isFunction(h)?this.bind(c,h||f):this.delegate(h,c,f)};d.fn.off=function(c,h,f){return!h||d.isFunction(h)?this.unbind(c,h||f):this.undelegate(h,c,f)};d.fn.trigger=function(c,h){if("string"==typeof c||d.isPlainObject(c))c=d.Event(c);G(c);c.data=h;return this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(c)})};d.fn.triggerHandler=function(c,h){var f,b;this.each(function(l,m){f=y("string"==typeof c?d.Event(c):c);f.data=h;f.target=m;d.each(s(m,c.type||c),function(c,d){b=d.proxy(f);if(f.isImmediatePropagationStopped())return!1})});return b};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(c){d.fn[c]=function(d){return d?this.bind(c,d):this.trigger(c)}});["focus","blur"].forEach(function(c){d.fn[c]=function(d){d?this.bind(c,d):this.each(function(){try{this[c]()}catch(d){}});return this}});d.Event=function(d,h){"string"!=typeof d&&(h=d,d=h.type);var f=document.createEvent(A[d]||"Events"),b=!0;if(h)for(var l in h)"bubbles"==l?b=!!h[l]:f[l]=h[l];f.initEvent(d,b,!0,null,null,null,null,null,null,null,null,null,null,null,null);f.isDefaultPrevented=function(){return this.defaultPrevented};return f}})(Zepto);(function(d){function l(c,k,b,f){if(c.global)return c=k||r,b=d.Event(b),d(c).trigger(b,f),!b.defaultPrevented}function s(c){c.global&&0===d.active++&&l(c,null,"ajaxStart")}function m(d,k){var c=k.context;if(!1===k.beforeSend.call(c,d,k)||!1===l(k,c,"ajaxBeforeSend",[d,k]))return!1;l(k,c,"ajaxSend",[d,k])}function q(d,k,c){var b=c.context;c.success.call(b,d,"success",k);l(c,b,"ajaxSuccess",[k,c,d]);z("success",k,c)}function p(d,c,b,f){var h=f.context;f.error.call(h,b,c,d);l(f,h,"ajaxError",[b,f,d]);z(c,b,f)}function z(c,k,b){var f=b.context;b.complete.call(f,k,c);l(b,f,"ajaxComplete",[k,b]);b.global&&!--d.active&&l(b,null,"ajaxStop")}function y(){}function G(d){d&&(d=d.split(";",2)[0]);return d&&(d==B?"html":d==b?"json":h.test(d)?"script":f.test(d)&&"xml")||"text"}function w(d,c){return(d+"&"+c).replace(/[&?]{1,2}/,"?")}function H(c){c.processData&&(c.data&&"string"!=d.type(c.data))&&(c.data=d.param(c.data,c.traditional));if(c.data&&(!c.type||"GET"==c.type.toUpperCase()))c.url=w(c.url,c.data)}function A(c,b,f,h){var l=!d.isFunction(b);return{url:c,data:l?b:void 0,success:!l?b:d.isFunction(f)?f:void 0,dataType:l?h||f:f}}function C(c,b,f,h){var l,m=d.isArray(b);d.each(b,function(b,k){l=d.type(k);h&&(b=f?h:h+"["+(m?"":b)+"]");!h&&m?c.add(k.name,k.value):"array"==l||!f&&"object"==l?C(c,k,f,b):c.add(b,k)})}var D=0,r=window.document,u,n,c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,h=/^(?:text|application)\/javascript/i,f=/^(?:text|application)\/xml/i,b="application/json",B="text/html",E=/^\s*$/;d.active=0;d.ajaxJSONP=function(c){if(!("type"in c))return d.ajax(c);var b="jsonp"+ ++D,f=r.createElement("script"),h=function(){clearTimeout(u);d(f).remove();delete window[b]},l=function(d){h();if(!d||"timeout"==d)window[b]=y;p(null,d||"abort",n,c)},n={abort:l},u;if(!1===m(n,c))return l("abort"),!1;window[b]=function(d){h();q(d,n,c)};f.onerror=function(){l("error")};f.src=c.url.replace(/=\?/,"="+b);d("head").append(f);0<c.timeout&&(u=setTimeout(function(){l("timeout")},c.timeout));return n};d.ajaxSettings={type:"GET",beforeSend:y,success:y,error:y,complete:y,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:b,xml:"application/xml, text/xml",html:B,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};d.ajax=function(c){var b=d.extend({},c||{});for(u in d.ajaxSettings)void 0===b[u]&&(b[u]=d.ajaxSettings[u]);s(b);b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&RegExp.$2!=window.location.host);b.url||(b.url=window.location.toString());H(b);!1===b.cache&&(b.url=w(b.url,"_="+Date.now()));var f=b.dataType;c=/=\?/.test(b.url);if("jsonp"==f||c)return c||(b.url=w(b.url,"callback=?")),d.ajaxJSONP(b);c=b.accepts[f];var h={},l=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,t=b.xhr(),r;b.crossDomain||(h["X-Requested-With"]="XMLHttpRequest");c&&(h.Accept=c,-1<c.indexOf(",")&&(c=c.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(c));if(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())h["Content-Type"]=b.contentType||"application/x-www-form-urlencoded";b.headers=d.extend(h,b.headers||{});t.onreadystatechange=function(){if(4==t.readyState){t.onreadystatechange=y;clearTimeout(r);var c,h=!1;if(200<=t.status&&300>t.status||304==t.status||0==t.status&&"file:"==l){f=f||G(t.getResponseHeader("content-type"));c=t.responseText;try{"script"==f?(0,eval)(c):"xml"==f?c=t.responseXML:"json"==f&&(c=E.test(c)?null:d.parseJSON(c))}catch(m){h=m}h?p(h,"parsererror",t,b):q(c,t,b)}else p(null,t.status?"error":"abort",t,b)}};t.open(b.type,b.url,"async"in b?b.async:!0);for(n in b.headers)t.setRequestHeader(n,b.headers[n]);if(!1===m(t,b))return t.abort(),!1;0<b.timeout&&(r=setTimeout(function(){t.onreadystatechange=y;t.abort();p(null,"timeout",t,b)},b.timeout));t.send(b.data?b.data:null);return t};d.get=function(b,c,f,h){return d.ajax(A.apply(null,arguments))};d.post=function(b,c,f,h){var l=A.apply(null,arguments);l.type="POST";return d.ajax(l)};d.getJSON=function(b,c,f){var h=A.apply(null,arguments);h.dataType="json";return d.ajax(h)};d.fn.load=function(b,f,h){if(!this.length)return this;var l=this,m=b.split(/\s/),n;b=A(b,f,h);var u=b.success;1<m.length&&(b.url=m[0],n=m[1]);b.success=function(b){l.html(n?d("<div>").html(b.replace(c,"")).find(n):b);u&&u.apply(l,arguments)};d.ajax(b);return this};var F=encodeURIComponent;d.param=function(b,c){var d=[];d.add=function(b,c){this.push(F(b)+"="+F(c))};C(d,b,c);return d.join("&").replace(/%20/g,"+")}})(Zepto);(function(d){d.fn.serializeArray=function(){var l=[],s;d(Array.prototype.slice.call(this.get(0).elements)).each(function(){s=d(this);var m=s.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&(!this.disabled&&"submit"!=m&&"reset"!=m&&"button"!=m&&("radio"!=m&&"checkbox"!=m||this.checked))&&l.push({name:s.attr("name"),value:s.val()})});return l};d.fn.serialize=function(){var d=[];this.serializeArray().forEach(function(s){d.push(encodeURIComponent(s.name)+"="+encodeURIComponent(s.value))});return d.join("&")};d.fn.submit=function(l){l?this.bind("submit",l):this.length&&(l=d.Event("submit"),this.eq(0).trigger(l),l.defaultPrevented||this.get(0).submit());return this}})(Zepto);(function(d,l){function s(d){return d.toLowerCase()}var m="",q,p=window.document.createElement("div"),z=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y,G,w,H,A,C,D,r={};d.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(d,n){if(p.style[d+"TransitionProperty"]!==l)return m="-"+s(d)+"-",q=n,!1});y=m+"transform";r[G=m+"transition-property"]=r[w=m+"transition-duration"]=r[H=m+"transition-timing-function"]=r[A=m+"animation-name"]=r[C=m+"animation-duration"]=r[D=m+"animation-timing-function"]="";d.fx={off:q===l&&p.style.transitionProperty===l,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:q?q+"TransitionEnd":s("TransitionEnd"),animationEnd:q?q+"AnimationEnd":s("AnimationEnd")};d.fn.animate=function(l,m,c,h){d.isPlainObject(m)&&(c=m.easing,h=m.complete,m=m.duration);m&&(m=("number"==typeof m?m:d.fx.speeds[m]||d.fx.speeds._default)/1E3);return this.anim(l,m,c,h)};d.fn.anim=function(m,n,c,h){var f,b={},p,q="",F=this,v,k=d.fx.transitionEnd;n===l&&(n=0.4);d.fx.off&&(n=0);if("string"==typeof m)b[A]=m,b[C]=n+"s",b[D]=c||"linear",k=d.fx.animationEnd;else{p=[];for(f in m)z.test(f)?q+=f+"("+m[f]+") ":(b[f]=m[f],p.push(s(f.replace(/([a-z])([A-Z])/,"$1-$2"))));q&&(b[y]=q,p.push(y));0<n&&"object"===typeof m&&(b[G]=p.join(", "),b[w]=n+"s",b[H]=c||"linear")}v=function(b){if("undefined"!==typeof b){if(b.target!==b.currentTarget)return;d(b.target).unbind(k,v)}d(this).css(r);h&&h.call(this)};0<n&&this.bind(k,v);this.size()&&this.get(0).clientLeft;this.css(b);0>=n&&setTimeout(function(){F.each(function(){v.call(this)})},0);return this};p=null})(Zepto);(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=I(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return I(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return n===void 0},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);'use strict';(function(){if(!("Ink"in window)){var a={Ink:window.location.protocol+"//js.ink.sapo.pt/Ink/"},c={},b=[],d={},e=[];window.Ink={_checkPendingRequireModules:function(){var a,b,g,d,n,k=[];a=0;for(b=e.length;a<b;++a)if(g=e[a]){for(d in g.left)if(n=c[d])g.args[g.left[d]]=n,delete g.left[d],--g.remaining;if(0<g.remaining)k.push(g);else if(n=g.cb)delete g.cb,n.apply(!1,g.args)}e=k;0<e.length&&setTimeout(function(){Ink._checkPendingRequireModules()},0)},_modNameToUri:function(b){if(-1!==b.indexOf("/"))return b; b=b.replace(/_/g,".").split(".");var c=b.shift(),g=a[c];g||(g="./"+c+"/");return[g,b.join("/"),"/lib.js"].join("")},getPath:function(b){return a[b||"Ink"]},setPath:function(b,c){a[b]=c},loadScript:function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",this._modNameToUri(a));a=document.getElementsByTagName("head");0<a.length&&a[0].appendChild(b)},namespace:function(a,b){if(!a||!a.length)return null;for(var c=a.split("."),d=window,e,k=0,p=c.length;k< p;++k)d[c[k]]=d[c[k]]||{},e=d,d=d[c[k]];return b?[e,c[k-1]]:d},getModule:function(a,b){var g=b?[a,"_",b].join(""):a;return c[g]},createModule:function(a,e,g,l){this.requireModules(g,function(){if(!("number"===typeof e||"string"===typeof e&&0<e.length))throw Error("version must be passed!");var g=[a,"_",e].join("");if(!c[g]){delete d[g];delete d[a];var k=Array.prototype.slice.call(arguments),k=l.apply(window,k);b.push(g);"object"===typeof k?k._version=e:"function"===typeof k&&(k.prototype._version= e,k._version=e);var p=0===a.indexOf("Ink."),r;p&&(r=Ink.namespace(a,!0));c[g]=k;p&&(r[0][r[1]+"_"+e]=k);c[a]=k;if(p){var u;a:if(g=r[0][r[1]],"object"!==typeof g)u=!1;else{for(u in g){u=!1;break a}u=!0}u&&(r[0][r[1]]=k)}this&&Ink._checkPendingRequireModules()}})},requireModules:function(a,b){var g,l,n,k,p;l=a.length;n={args:Array(l),left:{},remaining:l,cb:b};for(g=0;g<l;++g)k=a[g],(p=c[k])?(n.args[g]=p,--n.remaining):(d[k]||(d[k]=!0,Ink.loadScript(k)),n.left[k]=g);0<n.remaining?e.push(n):b.apply(!0, n.args)},getModulesLoadOrder:function(){return b.slice()},getModuleScripts:function(){var a=this.getModulesLoadOrder();a.unshift("Ink_1");a=a.map(function(a){var b=a.indexOf(".");-1===b&&(b=a.indexOf("_"));var c=a.substring(0,b);a=a.substring(b+1);return['<script type="text/javascript" src="',Ink.getPath(c),a.replace(/\./g,"/"),'/">\x3c/script>'].join("")});return a.join("\n")},bind:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments), d=c.concat(d);return a.apply(b,d)}},bindEvent:function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(d){var e=c.slice();e.unshift(d||window.event);return a.apply(b,e)}},i:function(a){if(!a)throw Error("Ink.i => id or element must be passed");return"string"===typeof a?document.getElementById(a):a},s:function(a,b){if("undefined"===typeof Ink.Dom||"undefined"===typeof Ink.Dom.Selector)throw Error("This method requires Ink.Dom.Selector");if(document.querySelector)return(b||document).querySelector(a); var c=Ink.Dom.Selector.select(a,b||document);return 0<c.length?c[0]:null},ss:function(a,b){if("undefined"===typeof Ink.Dom||"undefined"===typeof Ink.Dom.Selector)throw Error("This method requires Ink.Dom.Selector");if(document.querySelectorAll){var c=(b||document).querySelectorAll(a);return Array.prototype.slice.call(c)}return Ink.Dom.Selector.select(a,b||document)},extendObj:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}}}})(); Ink.createModule("Ink.Net.Ajax","1",[],function(){var a=function(a,c){this.init(a,c)};a.globalOptions={parameters:{},requestHeaders:{}};var c="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;a.prototype={init:function(b,c){if(!b)throw Error("WRONG_ARGUMENTS_ERR");var e=Ink.extendObj({asynchronous:!0,method:"POST",parameters:null,timeout:0,delay:0,postBody:"",contentType:"application/x-www-form-urlencoded",requestHeaders:null,onComplete:null,onSuccess:null,onFailure:null,onException:null, onHeaders:null,onCreate:null,onInit:null,onTimeout:null,sanitizeJSON:!1,evalJS:!0,xhrProxy:"",cors:!1,debug:!1,useCredentials:!1,signRequest:!1},a.globalOptions);if(c&&"object"===typeof c){e=Ink.extendObj(e,c);if("object"===typeof c.parameters)e.parameters=Ink.extendObj(Ink.extendObj({},a.globalOptions.parameters),c.parameters);else if(null!==c.parameters){var f=this.paramsObjToStr(a.globalOptions.parameters);f&&(e.parameters=c.parameters+"&"+f)}e.requestHeaders=Ink.extendObj({},a.globalOptions.requestHeaders); e.requestHeaders=Ink.extendObj(e.requestHeaders,c.requestHeaders)}this.options=e;this.safeCall("onInit");f=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml","a"):document.createElement("a");this.url=f.href=b;this.isHTTP=f.protocol.match(/^https?:$/i)&&!0;this.requestHasBody=0>e.method.search(/^get|head$/i);this.isCrossDomain=!this.isHTTP||"widget:"===location.protocol||"object"===typeof window.widget?!1:location.protocol!==f.protocol||location.host!==f.host.split(":")[0]; this.options.cors&&(this.isCrossDomain=!1);this.transport=this.getTransport();this.request()},getTransport:function(){if(!c&&this.options.cors&&"XDomainRequest"in window)return this.usingXDomainReq=!0,new XDomainRequest;if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!==typeof ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){return new ActiveXObject("Microsoft.XMLHTTP")}else return null},setHeaders:function(){if(this.transport)try{var a={Accept:"text/javascript,text/xml,application/xml,application/xhtml+xml,text/html,application/json;q=0.9,text/plain;q=0.8,video/x-mng,image/png,image/jpeg,image/gif;q=0.2,*/*;q=0.1", "Accept-Language":navigator.language,"X-Requested-With":"XMLHttpRequest","X-Ink-Version":"1"};this.options.cors&&(this.options.signRequest||delete a["X-Requested-With"],delete a["X-Ink-Version"]);if(this.options.requestHeaders&&"object"===typeof this.options.requestHeaders)for(var c in this.options.requestHeaders)a[c]=this.options.requestHeaders[c];if(this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1])a.Connection="close";for(var e in a)a.hasOwnProperty(e)&& this.transport.setRequestHeader(e,a[e])}catch(f){}},paramsObjToStr:function(a){var c,e,f,h,g=[];if("object"===typeof a){for(f in a)if(a.hasOwnProperty(f))if(h=a[f],"[object Array]"===Object.prototype.toString.call(h)&&!isNaN(h.length)){c=0;for(e=h.length;c<e;c++)g=g.concat([encodeURIComponent(f),"=",encodeURIComponent(h[c]),"&"])}else g=g.concat([encodeURIComponent(f),"=",encodeURIComponent(h),"&"]);0<g.length&&g.pop()}else return a;return g.join("")},setParams:function(){var a=null,a=this.options.parameters; if(a="object"===typeof a?this.paramsObjToStr(a):""+a)-1<this.url.indexOf("?")?this.url=this.url.split("#")[0]+"&"+a:this.url=this.url.split("#")[0]+"?"+a},getHeader:function(a){if(this.usingXDomainReq&&"Content-Type"===a)return this.transport.contentType;try{return this.transport.getResponseHeader(a)}catch(c){return null}},getAllHeaders:function(){try{return this.transport.getAllResponseHeaders()}catch(a){return null}},getResponse:function(){var a=this.transport,c={headerJSON:null,responseJSON:null, getHeader:this.getHeader,getAllHeaders:this.getAllHeaders,request:this,transport:a,timeTaken:new Date-this.startTime,requestedUrl:this.url};c.readyState=a.readyState;try{c.responseText=a.responseText}catch(e){}try{c.responseXML=a.responseXML}catch(f){}try{c.status=a.status}catch(h){c.status=0}try{c.statusText=a.statusText}catch(g){c.statusText=""}return c},abort:function(){if(this.transport){clearTimeout(this.delayTimeout);clearTimeout(this.stoTimeout);try{this.transport.abort()}catch(a){}this.finish()}}, runStateChange:function(){var a=this.transport.readyState;if(3===a)this.isHTTP&&this.safeCall("onHeaders");else if(4===a||this.usingXDomainReq)if(this.options.asynchronous&&this.options.delay&&this.startTime+this.options.delay>(new Date).getTime())this.delayTimeout=setTimeout(Ink.bind(this.runStateChange,this),this.options.delay+this.startTime-(new Date).getTime());else{var c,a=this.transport.responseText,e=this.getResponse(),f=this.transport.status;this.isHTTP&&!this.options.asynchronous&&this.safeCall("onHeaders"); clearTimeout(this.stoTimeout);0===f?this.isHTTP?this.safeCall("onException",this.makeError(18,"NETWORK_ERR")):f=a?200:404:304===f&&(f=200);var h=this.usingXDomainReq||200<=f&&300>f,g=this.getHeader("Content-Type")||"";if(this.options.evalJS&&(0<=g.indexOf("application/json")||"force"===this.options.evalJS))try{if(c=this.evalJSON(a,this.sanitizeJSON))a=e.responseJSON=c}catch(l){h&&this.safeCall("onException",l)}if(this.usingXDomainReq&&-1!==g.indexOf("xml")&&"DOMParser"in window){switch(g){case "application/xml":case "application/xhtml+xml":case "image/svg+xml":c= g;break;default:c="text/xml"}c=(new DOMParser).parseFromString(this.transport.responseText,c);this.transport.responseXML=c;e.responseXML=c}null!==this.transport.responseXML&&(null===e.responseJSON&&""!==this.transport.responseXML.xml)&&(a=this.transport.responseXML);if(f||this.usingXDomainReq)h?this.safeCall("onSuccess",e,a):this.safeCall("onFailure",e,a),this.safeCall("on"+f,e,a);this.finish(e,a)}},finish:function(a,c){a&&this.safeCall("onComplete",a,c);clearTimeout(this.stoTimeout);if(this.transport){try{this.transport.onreadystatechange= null}catch(e){}"function"===typeof this.transport.destroy&&this.transport.destroy();this.transport=null}},safeCall:function(a,c){function e(a){setTimeout(function(){a.message&&(a.message+="\n"+(a.stacktrace||a.stack||""));throw a;},1)}if("function"===typeof this.options[a])try{this.options[a].apply(this,[].slice.call(arguments,1))}catch(f){e(f)}else c&&(window.Error&&c instanceof Error)&&e(c)},setRequestHeader:function(a,c){this.options.requestHeaders||(this.options.requestHeaders={});this.options.requestHeaders[a]= c},request:function(){if(this.transport){var a=null;this.requestHasBody?(null!==this.options.postBody&&""!==this.options.postBody?(a=this.options.postBody,this.setParams()):null!==this.options.parameters&&""!==this.options.parameters&&(a=this.options.parameters),"object"===typeof a&&!a.nodeType?a=this.paramsObjToStr(a):"object"!==typeof a&&null!==a&&(a=""+a),this.options.contentType&&this.setRequestHeader("Content-Type",this.options.contentType)):this.setParams();var c=this.url,e=this.options.method, f=this.isCrossDomain;f&&this.options.xhrProxy&&(this.setRequestHeader("X-Url",c),c=this.options.xhrProxy+encodeURIComponent(c),f=!1);try{this.transport.open(e,c,this.options.asynchronous)}catch(h){return this.safeCall("onException",h),this.finish(this.getResponse(),null)}this.setHeaders();this.safeCall("onCreate");this.options.timeout&&!isNaN(this.options.timeout)&&(this.stoTimeout=setTimeout(Ink.bind(function(){this.options.onTimeout&&(this.safeCall("onTimeout"),this.abort())},this),1E3*this.options.timeout)); this.options.useCredentials&&!this.usingXDomainReq&&(this.transport.withCredentials=!0);this.options.asynchronous&&!this.usingXDomainReq?this.transport.onreadystatechange=Ink.bind(this.runStateChange,this):this.usingXDomainReq&&(this.transport.onload=Ink.bind(this.runStateChange,this));try{if(f)throw this.makeError(18,"NETWORK_ERR");this.startTime=(new Date).getTime();this.transport.send(a)}catch(g){return this.safeCall("onException",g),this.finish(this.getResponse(),null)}this.options.asynchronous|| this.runStateChange()}},makeError:function(a,c){if("function"!==typeof Error)return{code:a,message:c};var e=Error(c);e.code=a;return e},isJSON:function(a){if("string"!==typeof a||!a)return!1;a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)},evalJSON:function(a,c){if(a&&(!c||this.isJSON(a)))try{return"undefined"!==typeof JSON&&"undefined"!==typeof JSON.parse?JSON.parse(a):eval("("+a+")")}catch(e){throw Error("ERROR: Bad JSON string...");}return null}}; a.load=function(c,d){return new a(c,{method:"GET",onSuccess:function(a){d(a.responseText,a)}})};a.ping=function(c,d){return new a(c,{method:"HEAD",onSuccess:function(a){"function"===typeof d&&d(a)}})};return a}); Ink.createModule("Ink.Net.JsonP","1",[],function(){var a=function(a,b){this.init(a,b)};a.prototype={init:function(a,b){this.options=Ink.extendObj({onSuccess:void 0,onFailure:void 0,failureObj:{},timeout:10,params:{},callbackParam:"jsoncallback",internalCallback:"_cb",randVar:!1},b||{});this.randVar=!1!==this.options.randVar?this.options.randVar:parseInt(1E5*Math.random(),10);this.options.internalCallback+=this.randVar;this.uri=a;"function"===typeof this.options.onComplete&&(this.options.onSuccess= this.options.onComplete);if("string"!==typeof this.uri)throw"Please define an URI";if("function"!==typeof this.options.onSuccess)throw"please define a callback function on option onSuccess!";Ink.Net.JsonP[this.options.internalCallback]=Ink.bind(function(a){window.clearTimeout(this.timeout);delete window.Ink.Net.JsonP[this.options.internalCallback];this._removeScriptTag();this.options.onSuccess(a)},this);this._addScriptTag()},_addParamsToGet:function(a,b){var d=-1!==a.indexOf("?"),e,f,h,g=[a];for(f in b)b.hasOwnProperty(f)&& (d?e="&":(e="?",d=!0),h=b[f],"number"!==typeof h&&!h&&(h=""),g=g.concat([e,f,"=",encodeURIComponent(h)]));return g.join("")},_getScriptContainer:function(){var a=document.getElementsByTagName("head");return 0===a.length?document.getElementsByTagName("script")[0]:a[0]},_addScriptTag:function(){this.options.params[this.options.callbackParam]="Ink.Net.JsonP."+this.options.internalCallback;this.options.params.rnd_seed=this.randVar;this.uri=this._addParamsToGet(this.uri,this.options.params);var a=document.createElement("script"); a.type="text/javascript";a.src=this.uri;this._getScriptContainer().appendChild(a);this.timeout=setTimeout(Ink.bind(this._requestFailed,this),1E3*this.options.timeout)},_requestFailed:function(){delete Ink.Net.JsonP[this.options.internalCallback];this._removeScriptTag();if("function"===typeof this.options.onFailure)this.options.onFailure(this.options.failureObj)},_removeScriptTag:function(){for(var a,b=document.getElementsByTagName("script"),d=0,e=b.length;d<e;++d)if(a=b[d],a.src===this.uri){a.parentNode.removeChild(a); break}}};return a}); Ink.createModule("Ink.Dom.Css",1,[],function(){return{addRemoveClassName:function(a,c,b){if(b)return this.addClassName(a,c);this.removeClassName(a,c)},addClassName:function(a,c){if((a=Ink.i(a))&&c)"undefined"!==typeof a.classList?a.classList.add(c):this.hasClassName(a,c)||(a.className+=(a.className?" ":"")+c)},removeClassName:function(a,c){if((a=Ink.i(a))&&c)if("undefined"!==typeof a.classList)a.classList.remove(c);else{if("undefined"===typeof a.className)return!1;var b=a.className,b=b.replace(RegExp("(^|\\s+)"+ c+"(\\s+|$)")," "),b=b.replace(/^\s+/,"").replace(/\s+$/,"");a.className=b}},setClassName:function(a,c,b){this.addRemoveClassName(a,c,b||!1)},hasClassName:function(a,c){if((a=Ink.i(a))&&c){if("undefined"!==typeof a.classList)return a.classList.contains(c);if("undefined"===typeof a.className)return!1;var b=a.className;if("undefined"===typeof b.length)return!1;if(0<b.length&&(b===c||RegExp("(^|\\s)"+c+"(\\s|$)").test(b)))return!0}return!1},blinkClass:function(a,c,b,d){a=Ink.i(a);this.addRemoveClassName(a, c,!d);setTimeout(Ink.bind(function(){this.addRemoveClassName(a,c,d)},this),Number(b)||100)},toggleClassName:function(a,c,b){if(a&&c&&"undefined"!==typeof a.classList)return a=Ink.i(a),null!==a&&a.classList.toggle(c),!0;"undefined"!==typeof b?!0===b?this.addClassName(a,c):!1===b&&this.removeClassName(a,c):this.hasClassName(a,c)?this.removeClassName(a,c):this.addClassName(a,c)},setOpacity:function(a,c){a=Ink.i(a);if(null!==a){var b=1;isNaN(Number(c))||(b=0>=c?0:1>=c?c:100>=c?c/100:1);"undefined"!== typeof a.style.opacity?a.style.opacity=b:a.style.filter="alpha(opacity:"+(100*b|0)+")"}},_camelCase:function(a){return a?a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()}):a},getStyle:function(a,c){a=Ink.i(a);if(null!==a){c="float"===c?"cssFloat":this._camelCase(c);var b=a.style[c];if(window.getComputedStyle&&(!b||"auto"===b))b=(b=window.getComputedStyle(a,null))?b[c]:null;else if(!b&&a.currentStyle&&(b=a.currentStyle[c],"auto"===b&&("width"===c||"height"===c)))b=a["offset"+c.charAt(0).toUpperCase()+ c.slice(1)]+"px";if("opacity"===c)return b?parseFloat(b,10):1;if("borderTopWidth"===c||"borderBottomWidth"===c||"borderRightWidth"===c||"borderLeftWidth"===c){if("thin"===b)return"1px";if("medium"===b)return"3px";if("thick"===b)return"5px"}return"auto"===b?null:b}},setStyle:function(a,c){a=Ink.i(a);if(null!==a)if("string"===typeof c)a.style.cssText+="; "+c,-1!==c.indexOf("opacity")&&this.setOpacity(a,c.match(/opacity:\s*(\d?\.?\d*)/)[1]);else for(var b in c)c.hasOwnProperty(b)&&("opacity"===b?this.setOpacity(a, c[b]):"float"===b||"cssFloat"===b?"undefined"===typeof a.style.styleFloat?a.style.cssFloat=c[b]:a.style.styleFloat=c[b]:a.style[b]=c[b])},show:function(a,c){a=Ink.i(a);null!==a&&(a.style.display=c?c:"")},hide:function(a){a=Ink.i(a);null!==a&&(a.style.display="none")},showHide:function(a,c){if(a=Ink.i(a))a.style.display=c?"":"none"},toggle:function(a,c){a=Ink.i(a);null!==a&&("undefined"!==typeof c?!0===c?this.show(a):this.hide(a):"none"===a.style.display?this.show(a):this.hide(a))},_getRefTag:function(a){if(a.firstElementChild)return a.firstElementChild; for(a=a.firstChild;a;a=a.nextSibling)if(1===a.nodeType)return a;return null},appendStyleTag:function(a,c,b){b=Ink.extendObj({type:"text/css",force:!1},b||{});var d=document.getElementsByTagName("style"),e=!1,f=!0,h,g;h=0;for(g=d.length;h<g;h++)e=d[h].innerHTML,0<=e.indexOf(a)&&(f=!1);f&&(d=document.createElement("style"),e=document.getElementsByTagName("head")[0],f=!1,d.type=b.type,a=""+(a+" {")+c,a+="} ","undefined"!==typeof d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a)), b.force?e.appendChild(d):(f=this._getRefTag(e))&&e.insertBefore(d,f))},appendStylesheet:function(a,c){c=Ink.extendObj({media:"screen",type:"text/css",force:!1},c||{});var b,d=document.createElement("link"),e=document.getElementsByTagName("head")[0];d.media=c.media;d.type=c.type;d.href=a;d.rel="Stylesheet";c.force?e.appendChild(d):(b=this._getRefTag(e))&&e.insertBefore(d,b)},_loadingCSSFiles:{},_loadedCSSFiles:{},appendStylesheetCb:function(a,c){if(!a||this._loadedCSSFiles[a])return c(a);var b=this._loadingCSSFiles[a]; if(b)return b.push(c);this._loadingCSSFiles[a]=[c];b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=a;document.getElementsByTagName("head")[0].appendChild(b);b=document.createElement("img");b.onerror=Ink.bindEvent(function(a,b){this._loadedCSSFiles[b]=!0;for(var c=this._loadingCSSFiles[b],h=0,g=c.length;h<g;++h)c[h](b);delete this._loadingCSSFiles[b]},this,a);b.src=a},decToHex:function(a){var c=function(a){1===a.length&&(a="0"+a);return a=a.toUpperCase()};if("object"=== typeof a){var b=c(parseInt(a.r,10).toString(16)),d=c(parseInt(a.g,10).toString(16));a=c(parseInt(a.b,10).toString(16));return b+d+a}a+="";b=a.match(/\((\d+),\s?(\d+),\s?(\d+)\)/);return null!==b?c(parseInt(b[1],10).toString(16))+c(parseInt(b[2],10).toString(16))+c(parseInt(b[3],10).toString(16)):c(parseInt(a,10).toString(16))},hexToDec:function(a){0===a.indexOf("#")&&(a=a.substr(1));if(6===a.length)return{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16)};if(3=== a.length)return{r:parseInt(a.charAt(0)+a.charAt(0),16),g:parseInt(a.charAt(1)+a.charAt(1),16),b:parseInt(a.charAt(2)+a.charAt(2),16)};if(2>=a.length)return parseInt(a,16)},getPropertyFromStylesheet:function(a,c){var b=this.getRuleFromStylesheet(a);return b?b.style[c]:null},getPropertyFromStylesheet2:function(a,c){for(var b=this.getRulesFromStylesheet(a),d,e=0,f=b.length;e<f;e++)if(d=b[e].style[c],null!==d&&void 0!==d)return d;return null},getRuleFromStylesheet:function(a){var c,b,d,e;if(!document.styleSheets)return null; for(var f=0,h=document.styleSheets.length;f<h;++f){c=document.styleSheets[f];c=c.rules?c.rules:c.cssRules;if(!c)break;b=0;for(d=c.length;b<d;++b)if(e=c[b],e.selectorText&&e.selectorText===a)return e}return null},getRulesFromStylesheet:function(a){var c=[],b,d,e,f;if(!document.styleSheets)return c;for(var h=0,g=document.styleSheets.length;h<g;++h){b=document.styleSheets[h];b=b.rules?b.rules:b.cssRules;if(!b)return null;d=0;for(e=b.length;d<e;++d)f=b[d],f.selectorText&&f.selectorText===a&&c.push(f)}return c}, getPropertiesFromRule:function(a){var c=this.getRuleFromStylesheet(a);a={};var b,d,c=c.style.cssText,e=c.split(";"),f,h,c=0;for(d=e.length;c<d;++c)if(" "===e[c].charAt(0)&&(e[c]=e[c].substring(1)),f=e[c].split(":"),b=this._camelCase(f[0].toLowerCase()),f=f[1])f=f.substring(1),"padding"===b||"margin"===b||"borderWidth"===b?("borderWidth"===b?(b="border",h="Width"):h="",-1!==f.indexOf(" ")?(f=f.split(" "),a[b+"Top"+h]=f[0],a[b+"Bottom"+h]=f[0],a[b+"Left"+h]=f[1],a[b+"Right"+h]=f[1]):(a[b+"Top"+h]=f, a[b+"Bottom"+h]=f,a[b+"Left"+h]=f,a[b+"Right"+h]=f)):"borderRadius"===b?-1!==f.indexOf(" ")?(f=f.split(" "),a.borderTopLeftRadius=f[0],a.borderBottomRightRadius=f[0],a.borderTopRightRadius=f[1],a.borderBottomLeftRadius=f[1]):(a.borderTopLeftRadius=f,a.borderTopRightRadius=f,a.borderBottomLeftRadius=f,a.borderBottomRightRadius=f):a[b]=f;return a},changeFontSize:function(a,c,b,d,e){var f=this;Ink.requireModules(["Ink.Dom.Selector_1"],function(h){var g;"string"!==typeof a?g="1st argument must be a CSS selector rule.": "number"!==typeof c?g="2nd argument must be a number.":void 0!==b&&"+"!==b&&"*"!==b?g='3rd argument must be one of "+", "*".':void 0!==d&&("number"!==typeof d||0>=d)?g="4th argument must be a positive number.":void 0!==e&&"number"!==typeof e&&(g="5th argument must be a positive number greater than minValue.");if(g)throw new TypeError(g);var l=h.select(a);void 0===d&&(d=1);b="*"===b?function(a,b){return a*b}:function(a,b){return a+b};for(var n=0,k=l.length;n<k;++n)g=l[n],h=parseFloat(f.getStyle(g, "fontSize")),h=b(h,c),!(h<d)&&!("number"===typeof e&&h>e)&&(g.style.fontSize=h+"px")})}}}); Ink.createModule("Ink.Dom.Element",1,[],function(){return{get:function(a){return"undefined"!==typeof a?"string"===typeof a?document.getElementById(a):a:null},create:function(a,c){var b=document.createElement(a),d;for(d in c)c.hasOwnProperty(d)&&("className"===d&&(d="class"),b.setAttribute(d,c[d]));return b},remove:function(a){var c;a&&(c=a.parentNode)&&c.removeChild(a)},scrollTo:function(a){if(a=this.get(a)){if(a.scrollIntoView)return a.scrollIntoView();var c=0,b=0;do c+=a.offsetTop||0,b+=a.offsetLeft|| 0,a=a.offsetParent;while(a);window.scrollTo(b,c)}},offsetTop:function(a){a=this.get(a);for(var c=a.offsetTop;a.offsetParent;)if("body"!==a.offsetParent.tagName.toLowerCase())a=a.offsetParent,c+=a.offsetTop;else break;return c},offsetLeft:function(a){return this.offset2(a)},positionedOffset:function(a){var c=0,b=0;a=this.get(a);do if(c+=a.offsetTop||0,b+=a.offsetLeft||0,a=a.offsetParent){if("body"===a.tagName.toLowerCase())break;var d=a.style.position;!d&&a.currentStyle&&(d=a.currentStyle.position); if((!d||"auto"===d)&&"undefined"!==typeof getComputedStyle)d=(d=getComputedStyle(a,null))?d.position:null;if("relative"===d||"absolute"===d)break}while(a);return[b,c]},offset:function(a){return[this.offsetLeft(a),this.offsetTop(a)]},scroll:function(a){a=a?Ink.i(a):document.body;return[!window.pageXOffset?a.scrollLeft:window.pageXOffset,!window.pageYOffset?a.scrollTop:window.pageYOffset]},_getPropPx:function(a,c){var b,d=a.getPropertyValue?a.getPropertyValue(c):a[c];d?(b=d.indexOf("px"),b=-1===b?0: parseInt(d,10)):b=0;return b},offset2:function(a){a=Ink.i(a);var c=["border-left-width","border-top-width"],b=[0,0],d,e,f,h=this._getPropPx,g=Ink.getModule("Ink.Dom.Browser",1);do f=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle,d=[a.offsetLeft|0,a.offsetTop|0],e=[h(f,c[0]),h(f,c[1])],g.OPERA?(b[0]+=d[0],b[1]+=d[1]):(b[0]+=d[0]+e[0],b[1]+=d[1]+e[1]),a=a.offsetParent;while(a);e=[h(f,c[0]),h(f,c[1])];g.GECKO?(b[0]+=e[0],b[1]+=e[1]):g.OPERA||(b[0]-=e[0],b[1]-=e[1]);return b}, hasAttribute:function(a,c){return a.hasAttribute?a.hasAttribute(c):!!a.getAttribute(c)},insertAfter:function(a,c){(c=this.get(c))&&c.parentNode.insertBefore(a,c.nextSibling)},insertTop:function(a,c){(c=this.get(c))&&c.insertBefore(a,c.firstChild)},textContent:function(a){a=Ink.i(a);var c,b,d;switch(a&&a.nodeType){case 9:return this.textContent(a.documentElement||a.body&&a.body.parentNode||a.body);case 1:if(c=a.innerText,"undefined"!==typeof c)return c;case 11:c=a.textContent;if("undefined"!==typeof c)return c; if(a.firstChild===a.lastChild)return this.textContent(a.firstChild);c=[];b=a.childNodes;a=0;for(d=b.length;a<d;++a)c.push(this.textContent(b[a]));return c.join("");case 3:case 4:return a.nodeValue}return""},setTextContent:function(a,c){a=Ink.i(a);switch(a&&a.nodeType){case 1:if("innerText"in a){a.innerText=c;break}case 11:if("textContent"in a){a.textContent=c;break}case 9:for(;a.firstChild;)a.removeChild(a.firstChild);""!==c&&a.appendChild((a.ownerDocument||a).createTextNode(c));break;case 3:case 4:a.nodeValue= c}},isLink:function(a){return!(!a||!(1===a.nodeType&&(/^a|area$/i.test(a.tagName)||a.hasAttributeNS&&a.hasAttributeNS("http://www.w3.org/1999/xlink","href"))))},isAncestorOf:function(a,c){if(!c||!a)return!1;if(c.compareDocumentPosition)return 0!==(a.compareDocumentPosition(c)&16);for(;c=c.parentNode;)if(c===a)return!0;return!1},descendantOf:function(a,c){return a!==c&&this.isAncestorOf(a,c)},firstElementChild:function(a){if(!a)return null;if("firstElementChild"in a)return a.firstElementChild;for(a= a.firstChild;a&&1!==a.nodeType;)a=a.nextSibling;return a},lastElementChild:function(a){if(!a)return null;if("lastElementChild"in a)return a.lastElementChild;for(a=a.lastChild;a&&1!==a.nodeType;)a=a.previousSibling;return a},nextElementSibling:function(a){if(!a)return null;if("nextElementSibling"in a)return a.nextElementSibling;for(a=a.nextSibling;a&&1!==a.nodeType;)a=a.nextSibling;return a},previousElementSibling:function(a){if(!a)return null;if("previousElementSibling"in a)return a.previousElementSibling; for(a=a.previousSibling;a&&1!==a.nodeType;)a=a.previousSibling;return a},elementWidth:function(a){"string"===typeof a&&(a=document.getElementById(a));return a.offsetWidth},elementHeight:function(a){"string"===typeof a&&(a=document.getElementById(a));return a.offsetHeight},elementLeft:function(a){"string"===typeof a&&(a=document.getElementById(a));return a.offsetLeft},elementTop:function(a){"string"===typeof a&&(a=document.getElementById(a));return a.offsetTop},elementDimensions:function(a){"string"=== typeof a&&(a=document.getElementById(a));return[a.offsetWidth,a.offsetHeight]},clonePosition:function(a,c){var b=this.offset2(c);a.style.left=b[0]+"px";a.style.top=b[1]+"px";return a},ellipsizeText:function(a,c){if(a=Ink.i(a))for(;a&&a.scrollHeight>a.offsetHeight+8;)a.textContent=a.textContent.replace(/(\s+\S+)\s*$/,c||"\u2026")},findUpwardsByClass:function(a,c){for(var b=RegExp("(^|\\s)"+c+"(\\s|$)");;){if("undefined"!==typeof a.className&&b.test(a.className))return a;a=a.parentNode;if(!a||1!==a.nodeType)return!1}}, findUpwardsByTag:function(a,c){for(;;){if(a&&a.nodeName.toUpperCase()===c.toUpperCase())return a;a=a.parentNode;if(!a||1!==a.nodeType)return!1}},findUpwardsById:function(a,c){for(;;){if("undefined"!==typeof a.id&&a.id===c)return a;a=a.parentNode;if(!a||1!==a.nodeType)return!1}},getChildrenText:function(a,c){var b,d,e,f=a.childNodes,h=f.length,g="";if(!a)return g;for(d=0;d<h;++d)if((b=f[d])&&3===b.nodeType)e=this._trimString(String(b.data)),0<e.length?(g+=e,c&&a.removeChild(b)):a.removeChild(b);return g}, _trimString:function(a){return String.prototype.trim?a.trim():a.replace(/^\s*/,"").replace(/\s*$/,"")},getSelectValues:function(a){a=Ink.i(a);for(var c=[],b=0;b<a.options.length;++b)c.push(a.options[b].value);return c},_normalizeData:function(a){for(var c,b=[],d=0,e=a.length;d<e;++d)c=a[d],c instanceof Array?1===c.length&&c.push(c[0]):c=[c,c],b.push(c);return b},fillSelect:function(a,c,b,d){if(a=Ink.i(a)){a.innerHTML="";var e;b||(e=document.createElement("option"),e.setAttribute("value",""),a.appendChild(e)); c=this._normalizeData(c);for(var f=0,h=c.length;f<h;++f)b=c[f],e=document.createElement("option"),e.setAttribute("value",b[0]),2<b.length&&e.setAttribute("extra",b[2]),e.appendChild(document.createTextNode(b[1])),b[0]===d&&e.setAttribute("selected","selected"),a.appendChild(e)}},fillSelect2:function(a,c){a=Ink.i(a);a.innerHTML="";if(!c)throw"param opts is a requirement!";if(!c.data)throw"opts.data is a requirement!";c=Ink.extendObj({skipEmpty:!1,skipCreate:!1,emptyLabel:"none",createLabel:"create", optionsGroupLabel:"groups",emptyOptionsGroupLabel:"none exist",defaultValue:""},c);var b,d,e=document.createElement("optgroup");e.setAttribute("label",c.optionsGroupLabel);c.data=this._normalizeData(c.data);c.skipCreate||c.data.unshift(["$create$",c.createLabel]);c.skipEmpty||c.data.unshift(["",c.emptyLabel]);for(var f=0,h=c.data.length;f<h;++f)d=c.data[f],b=document.createElement("option"),b.setAttribute("value",d[0]),b.appendChild(document.createTextNode(d[1])),d[0]===c.defaultValue&&b.setAttribute("selected", "selected"),""===d[0]||"$create$"===d[0]?a.appendChild(b):e.appendChild(b);(function(a){a=a[a.length-1][0];return""===a||"$create$"===a})(c.data)&&(b=document.createElement("option"),b.setAttribute("value","$dummy$"),b.setAttribute("disabled","disabled"),b.appendChild(document.createTextNode(c.emptyOptionsGroupLabel)),e.appendChild(b));a.appendChild(e);var g=function(b,c){var g=a.options[a.options.length-1];g.getAttribute("disabled")&&g.parentNode.removeChild(g);g=document.createElement("option"); g.setAttribute("value",b);g.appendChild(document.createTextNode(c));e.appendChild(g);a.options[a.options.length-1].setAttribute("selected",!0)};c.skipCreate||(a.onchange=function(){if("$create$"===a.value&&"function"===typeof c.onCreate)c.onCreate(a,g)})},fillRadios:function(a,c,b,d,e,f){for(var h=Ink.i(a),h=h.nextSibling;h&&1!==h.nodeType;)h=h.nextSibling;var g=document.createElement("span");h?h.parentNode.insertBefore(g,h):Ink.i(a).appendChild(g);b=this._normalizeData(b);"]"!==c.substring(c.length- 1)&&(c+="[]");d||(d=document.createElement("input"),d.setAttribute("type","radio"),d.setAttribute("name",c),d.setAttribute("value",""),g.appendChild(d),f&&g.appendChild(document.createElement(f)));for(h=0;h<b.length;++h)a=b[h],d=document.createElement("input"),d.setAttribute("type","radio"),d.setAttribute("name",c),d.setAttribute("value",a[0]),g.appendChild(d),g.appendChild(document.createTextNode(a[1])),f&&g.appendChild(document.createElement(f)),a[0]===e&&(d.checked=!0);return g},fillChecks:function(a, c,b,d,e){for(var f=Ink.i(a),f=f.nextSibling;f&&1!==f.nodeType;)f=f.nextSibling;var h=document.createElement("span");f?f.parentNode.insertBefore(h,f):Ink.i(a).appendChild(h);b=this._normalizeData(b);"]"!==c.substring(c.length-1)&&(c+="[]");for(var g=0;g<b.length;++g)a=b[g],f=document.createElement("input"),f.setAttribute("type","checkbox"),f.setAttribute("name",c),f.setAttribute("value",a[0]),h.appendChild(f),h.appendChild(document.createTextNode(a[1])),e&&h.appendChild(document.createElement(e)), a[0]===d&&(f.checked=!0);return h},parentIndexOf:function(a,c){for(var b,d=0,e=0,f=a.childNodes.length;e<f;++e)if(b=a.childNodes[e],1===b.nodeType){if(b===c)return d;++d}return-1},nextSiblings:function(a){"string"===typeof a&&(a=document.getElementById(a));if("object"===typeof a&&null!==a&&a.nodeType&&1===a.nodeType){var c=[],b=a.parentNode.children;a=this.parentIndexOf(a.parentNode,a);a=++a;for(var d=b.length;a<d;a++)c.push(b[a]);return c}return[]},previousSiblings:function(a){"string"===typeof a&& (a=document.getElementById(a));if("object"===typeof a&&null!==a&&a.nodeType&&1===a.nodeType){var c=[],b=a.parentNode.children,d=0;for(a=this.parentIndexOf(a.parentNode,a);d<a;d++)c.push(b[d]);return c}return[]},siblings:function(a){"string"===typeof a&&(a=document.getElementById(a));if("object"===typeof a&&null!==a&&a.nodeType&&1===a.nodeType){for(var c=[],b=a.parentNode.children,d=0,e=b.length;d<e;d++)a!==b[d]&&c.push(b[d]);return c}return[]},childElementCount:function(a){a=Ink.i(a);return"childElementCount"in a?a.childElementCount:!a?0:this.siblings(a).length+1},appendHTML:function(a,c){var b=document.createElement("div");b.innerHTML=c;for(var b=b.children,d=0;d<b.length;d++)a.appendChild(b[d])},prependHTML:function(a,c){var b=document.createElement("div");b.innerHTML=c;for(var d=a.firstChild,b=b.children,e=b.length-1;0<=e;e--)a.insertBefore(b[e],d),d=a.firstChild},htmlToFragment:function(a){this.htmlToFragment="function"===typeof document.createRange&&"function"===typeof Range.prototype.createContextualFragment? function(a){var b;if("string"!==typeof a)return document.createDocumentFragment();b=document.createRange();b.selectNode(document.body);return b.createContextualFragment(a)}:function(a){var b=document.createDocumentFragment(),d;if("string"!==typeof a)return b;d=document.createElement("div");for(d.innerHTML=a;a=d.firstChild;)b.appendChild(a);return b};return this.htmlToFragment.call(this,a)},_camelCase:function(a){return a?a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()}):a},data:function(a){if("object"!== typeof a&&"string"!==typeof a)throw"[Ink.Dom.Element.data] :: Invalid selector defined";if("object"===typeof a)var c=a;else{c=Ink.getModule("Ink.Dom.Selector",1);if(!c)throw"[Ink.Dom.Element.data] :: This method requires Ink.Dom.Selector - v1";c=c.select(a);if(0>=c.length)throw"[Ink.Dom.Element.data] :: Can't find any element with the specified selector";c=c[0]}a={};var c=c.attributes||[],b,d;if(c)for(var e=0,f=c.length;e<f;e++)b=c[e].name,d=c[e].value,b&&0===b.indexOf("data-")&&(a[this._camelCase(b.replace("data-", ""))]=d);return a},moveCursorTo:function(a,c){if(a.setSelectionRange)a.setSelectionRange(c,c);else{var b=a.createTextRange();b.collapse(!0);b.moveEnd("character",c);b.moveStart("character",c);b.select()}},pageWidth:function(){var a;a=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:document.body.scrollWidth>document.body.offsetWidth?document.body.scrollWidth:document.body.offsetWidth;var c;window.self.innerWidth?c=document.documentElement.clientWidth?document.documentElement.clientWidth: window.self.innerWidth:document.documentElement&&document.documentElement.clientWidth?c=document.documentElement.clientWidth:document.body&&(c=document.body.clientWidth);return a<c?a:c},pageHeight:function(){var a;a=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:document.body.scrollHeight>document.body.offsetHeight?document.body.scrollHeight:document.body.offsetHeight;var c;window.self.innerHeight?c=window.self.innerHeight:document.documentElement&&document.documentElement.clientHeight? c=document.documentElement.clientHeight:document.body&&(c=document.body.clientHeight);return a<c?c:a},viewportWidth:function(){if("undefined"!==typeof window.innerWidth)return window.innerWidth;if(document.documentElement&&"undefined"!==typeof document.documentElement.offsetWidth)return document.documentElement.offsetWidth},viewportHeight:function(){if("undefined"!==typeof window.innerHeight)return window.innerHeight;if(document.documentElement&&"undefined"!==typeof document.documentElement.offsetHeight)return document.documentElement.offsetHeight}, scrollWidth:function(){return"undefined"!==typeof window.self.pageXOffset?window.self.pageXOffset:"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft},scrollHeight:function(){return"undefined"!==typeof window.self.pageYOffset?window.self.pageYOffset:"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.scrollTop?document.documentElement.scrollTop: document.body.scrollTop}}}); Ink.createModule("Ink.Dom.Event",1,[],function(){return{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,element:function(a){return(a=a.target||"mouseout"===a.type&&a.fromElement||"mouseleave"===a.type&&a.fromElement||"mouseover"===a.type&&a.toElement||"mouseenter"===a.type&&a.toElement||a.srcElement||null)&&(3===a.nodeType||4===a.nodeType)?a.parentNode:a},relatedTarget:function(a){return(a= a.relatedTarget||"mouseout"===a.type&&a.toElement||"mouseleave"===a.type&&a.toElement||"mouseover"===a.type&&a.fromElement||"mouseenter"===a.type&&a.fromElement||null)&&(3===a.nodeType||4===a.nodeType)?a.parentNode:a},findElement:function(a,c,b){for(a=this.element(a);;){if(a.nodeName.toLowerCase()===c.toLowerCase())return a;a=a.parentNode;if(!a||!a.parentNode)return b?!1:document}},fire:function(a,c,b){a=Ink.i(a);var d,e;e=document.createEvent?{DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,focus:!0, focusin:!0,focusout:!0,blur:!0,load:!0,unload:!0,abort:!0,error:!0,select:!0,change:!0,submit:!0,reset:!0,resize:!0,scroll:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,mousewheel:!0,wheel:!0,textInput:!0,keydown:!0,keypress:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,DOMSubtreeModified:!0,DOMNodeInserted:!0,DOMNodeRemoved:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemovedFromDocument:!0,DOMAttrModified:!0, DOMCharacterDataModified:!0,DOMAttributeNameChanged:!0,DOMElementNameChanged:!0,hashchange:!0}:{onabort:!0,onactivate:!0,onafterprint:!0,onafterupdate:!0,onbeforeactivate:!0,onbeforecopy:!0,onbeforecut:!0,onbeforedeactivate:!0,onbeforeeditfocus:!0,onbeforepaste:!0,onbeforeprint:!0,onbeforeunload:!0,onbeforeupdate:!0,onblur:!0,onbounce:!0,oncellchange:!0,onchange:!0,onclick:!0,oncontextmenu:!0,oncontrolselect:!0,oncopy:!0,oncut:!0,ondataavailable:!0,ondatasetchanged:!0,ondatasetcomplete:!0,ondblclick:!0, ondeactivate:!0,ondrag:!0,ondragend:!0,ondragenter:!0,ondragleave:!0,ondragover:!0,ondragstart:!0,ondrop:!0,onerror:!0,onerrorupdate:!0,onfilterchange:!0,onfinish:!0,onfocus:!0,onfocusin:!0,onfocusout:!0,onhashchange:!0,onhelp:!0,onkeydown:!0,onkeypress:!0,onkeyup:!0,onlayoutcomplete:!0,onload:!0,onlosecapture:!0,onmessage:!0,onmousedown:!0,onmouseenter:!0,onmouseleave:!0,onmousemove:!0,onmouseout:!0,onmouseover:!0,onmouseup:!0,onmousewheel:!0,onmove:!0,onmoveend:!0,onmovestart:!0,onoffline:!0,ononline:!0, onpage:!0,onpaste:!0,onprogress:!0,onpropertychange:!0,onreadystatechange:!0,onreset:!0,onresize:!0,onresizeend:!0,onresizestart:!0,onrowenter:!0,onrowexit:!0,onrowsdelete:!0,onrowsinserted:!0,onscroll:!0,onselect:!0,onselectionchange:!0,onselectstart:!0,onstart:!0,onstop:!0,onstorage:!0,onstoragecommit:!0,onsubmit:!0,ontimeout:!0,onunload:!0};if(null!==a&&void 0!==a){a===document&&(document.createEvent&&!a.dispatchEvent)&&(a=document.documentElement);document.createEvent?(d=document.createEvent("HTMLEvents"), "undefined"===typeof e[c]?d.initEvent("dataavailable",!0,!0):d.initEvent(c,!0,!0)):(d=document.createEventObject(),d.eventType="undefined"===typeof e["on"+c]?"ondataavailable":"on"+c);d.eventName=c;d.memo=b||{};try{if(document.createEvent)a.dispatchEvent(d);else if(a.fireEvent)a.fireEvent(d.eventType,d);else return}catch(f){}return d}},observe:function(a,c,b,d){a=Ink.i(a);if(null!==a&&void 0!==a){if(-1!==c.indexOf(":")||"hashchange"===c&&a.attachEvent&&!window.onhashchange)b=Ink.bindEvent(function(a, b,c){a.eventName===b&&(window.addEventListener&&(window.event=a),c())},this,c,b),c="dataavailable";a.addEventListener?a.addEventListener(c,b,!!d):a.attachEvent("on"+c,b)}},stopObserving:function(a,c,b,d){a=Ink.i(a);null!==a&&void 0!==a&&(a.removeEventListener?a.removeEventListener(c,b,!!d):a.detachEvent("on"+c,b))},stop:function(a){null!==a.cancelBubble&&(a.cancelBubble=!0);a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();window.attachEvent&&(a.returnValue=!1);null!==a.cancel&& (a.cancel=!0)},stopDefault:function(a){a.preventDefault&&a.preventDefault();window.attachEvent&&(a.returnValue=!1);null!==a.cancel&&(a.cancel=!0)},pointer:function(a){return{x:a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),y:a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}},pointerX:function(a){return a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(a){return a.pageY||a.clientY+ (document.documentElement.scrollTop||document.body.scrollTop)},isLeftClick:function(a){if(window.addEventListener){if(0===a.button||"touch"===a.type.substring(0,5)&&null===a.button)return!0}else if(1===a.button)return!0;return!1},isRightClick:function(a){return 2===a.button},isMiddleClick:function(a){return window.addEventListener?1===a.button:4===a.button},getCharFromKeyboardEvent:function(a,c){var b=a.keyCode,d=String.fromCharCode(b),e=a.shiftKey;if(65<=b&&90>=b)return"boolean"===typeof c&&(e=c), e?d:d.toLowerCase();if(96<=b&&105>=b)return String.fromCharCode(48+(b-96));switch(b){case 109:case 189:return"-";case 107:case 187:return"+"}return d},debug:function(){}}}); Ink.createModule("Ink.Dom.Loaded",1,[],function(){return{_cbQueue:[],run:function(a,c){c||(c=a,a=window);this._win=a;this._doc=a.document;this._root=this._doc.documentElement;this._done=!1;this._top=!0;this._handlers={checkState:Ink.bindEvent(this._checkState,this),poll:Ink.bind(this._poll,this)};var b=this._doc.addEventListener;this._add=b?"addEventListener":"attachEvent";this._rem=b?"removeEventListener":"detachEvent";this._pre=b?"":"on";this._det=b?"DOMContentLoaded":"onreadystatechange";this._wet= this._pre+"load";var d=this._handlers.checkState;if("complete"===this._doc.readyState)c.call(this._win,"lazy");else{this._cbQueue.push(c);this._doc[this._add](this._det,d);this._win[this._add](this._wet,d);d=1;try{d=this._win.frameElement}catch(e){}if(!b&&this._root.doScroll){try{this._top=!d}catch(f){}this._top&&this._poll()}}},_checkState:function(a){a&&!("readystatechange"===a.type&&"complete"!==this._doc.readyState)&&(("load"===a.type?this._win:this._doc)[this._rem](this._pre+a.type,this._handlers.checkState, !1),this._ready())},_poll:function(){try{this._root.doScroll("left")}catch(a){return setTimeout(this._handlers.poll,50)}this._ready()},_ready:function(){if(!this._done){this._done=!0;for(var a=0;a<this._cbQueue.length;++a)this._cbQueue[a].call(this._win);this._cbQueue=[]}}}}); Ink.createModule("Ink.Dom.Selector",1,[],function(){function a(a){return ia.test(a+"")}function c(){var a,b=[];return a=function(c,g){b.push(c+=" ")>m.cacheLength&&delete a[b.shift()];return a[c]=g}}function b(a){a[w]=!0;return a}function d(a){var b=x.createElement("div");try{return!!a(b)}catch(c){return!1}finally{}}function e(a,b,c,g){var d,e,h,f,l;(b?b.ownerDocument||b:J)!==x&&G(b);b=b||x;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(f=b.nodeType)&&9!==f)return[];if(E&&!g){if(d=ja.exec(a))if(h= d[1])if(9===f)if((e=b.getElementById(h))&&e.parentNode){if(e.id===h)return c.push(e),c}else return c;else{if(b.ownerDocument&&(e=b.ownerDocument.getElementById(h))&&R(b,e)&&e.id===h)return c.push(e),c}else{if(d[2])return M.apply(c,b.getElementsByTagName(a)),c;if((h=d[3])&&y.getElementsByClassName&&b.getElementsByClassName)return M.apply(c,b.getElementsByClassName(h)),c}if(y.qsa&&!F.test(a)){d=!0;e=w;h=b;l=9===f&&a;if(1===f&&"object"!==b.nodeName.toLowerCase()){f=n(a);(d=b.getAttribute("id"))?e=d.replace(ka, "\\$&"):b.setAttribute("id",e);e="[id='"+e+"'] ";for(h=f.length;h--;)f[h]=e+k(f[h]);h=Z.test(a)&&b.parentNode||b;l=f.join(",")}if(l)try{return M.apply(c,h.querySelectorAll(l)),c}catch(u){}finally{d||b.removeAttribute("id")}}}var p;a:{a=a.replace(V,"$1");e=n(a);if(!g&&1===e.length){d=e[0]=e[0].slice(0);if(2<d.length&&"ID"===(p=d[0]).type&&9===b.nodeType&&E&&m.relative[d[1].type]){b=(m.find.ID(p.matches[0].replace(N,O),b)||[])[0];if(!b){p=c;break a}a=a.slice(d.shift().value.length)}for(f=W.needsContext.test(a)? 0:d.length;f--;){p=d[f];if(m.relative[h=p.type])break;if(h=m.find[h])if(g=h(p.matches[0].replace(N,O),Z.test(d[0].type)&&b.parentNode||b)){d.splice(f,1);a=g.length&&k(d);if(!a){M.apply(c,g);p=c;break a}break}}}C(a,e)(g,b,!E,c,Z.test(a));p=c}return p}function f(a,b){var c=b&&a,g=c&&(~b.sourceIndex||ba)-(~a.sourceIndex||ba);if(g)return g;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function g(a){return function(b){var c= b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return b(function(c){c=+c;return b(function(b,g){for(var d,e=a([],b.length,c),h=e.length;h--;)if(b[d=e[h]])b[d]=!(g[d]=b[d])})})}function n(a,b){var c,g,d,h,f,l,n;if(f=ca[a+" "])return b?0:f.slice(0);f=a;l=[];for(n=m.preFilter;f;){if(!c||(g=la.exec(f)))g&&(f=f.slice(g[0].length)||f),l.push(d=[]);c=!1;if(g=ma.exec(f))c=g.shift(),d.push({value:c,type:g[0].replace(V," ")}),f=f.slice(c.length);for(h in m.filter)if((g= W[h].exec(f))&&(!n[h]||(g=n[h](g))))c=g.shift(),d.push({value:c,type:h,matches:g}),f=f.slice(c.length);if(!c)break}return b?f.length:f?e.error(a):ca(a,l).slice(0)}function k(a){for(var b=0,c=a.length,g="";b<c;b++)g+=a[b].value;return g}function p(a,b,c){var g=b.dir,d=c&&"parentNode"===g,e=na++;return b.first?function(b,c,e){for(;b=b[g];)if(1===b.nodeType||d)return a(b,c,e)}:function(b,c,h){var f,l,n,k=H+" "+e;if(h)for(;b=b[g];){if((1===b.nodeType||d)&&a(b,c,h))return!0}else for(;b=b[g];)if(1===b.nodeType|| d)if(n=b[w]||(b[w]={}),(l=n[g])&&l[0]===k){if(!0===(f=l[1])||f===s)return!0===f}else if(l=n[g]=[k],l[1]=a(b,c,h)||s,!0===l[1])return!0}}function r(a){return 1<a.length?function(b,c,g){for(var d=a.length;d--;)if(!a[d](b,c,g))return!1;return!0}:a[0]}function u(a,b,c,g,d){for(var e,h=[],f=0,l=a.length,n=null!=b;f<l;f++)if(e=a[f])if(!c||c(e,g,d))h.push(e),n&&b.push(f);return h}function t(a,c,g,d,f,h){d&&!d[w]&&(d=t(d));f&&!f[w]&&(f=t(f,h));return b(function(b,h,l,n){var k,p,r=[],m=[],t=h.length,v;if(!(v= b)){v=c||"*";for(var q=l.nodeType?[l]:l,s=[],A=0,z=q.length;A<z;A++)e(v,q[A],s);v=s}v=a&&(b||!c)?u(v,r,a,l,n):v;q=g?f||(b?a:t||d)?[]:h:v;g&&g(v,q,l,n);if(d){k=u(q,m);d(k,[],l,n);for(l=k.length;l--;)if(p=k[l])q[m[l]]=!(v[m[l]]=p)}if(b){if(f||a){if(f){k=[];for(l=q.length;l--;)if(p=q[l])k.push(v[l]=p);f(null,q=[],k,n)}for(l=q.length;l--;)if((p=q[l])&&-1<(k=f?S.call(b,p):r[l]))b[k]=!(h[k]=p)}}else q=u(q===h?q.splice(t,q.length):q),f?f(null,h,q,n):M.apply(h,q)})}function v(a){var b,c,g,d=a.length,e=m.relative[a[0].type]; c=e||m.relative[" "];for(var f=e?1:0,h=p(function(a){return a===b},c,!0),l=p(function(a){return-1<S.call(b,a)},c,!0),n=[function(a,c,g){return!e&&(g||c!==K)||((b=c).nodeType?h(a,c,g):l(a,c,g))}];f<d;f++)if(c=m.relative[a[f].type])n=[p(r(n),c)];else{c=m.filter[a[f].type].apply(null,a[f].matches);if(c[w]){for(g=++f;g<d&&!m.relative[a[g].type];g++);return t(1<f&&r(n),1<f&&k(a.slice(0,f-1)).replace(V,"$1"),c,f<g&&v(a.slice(f,g)),g<d&&v(a=a.slice(g)),g<d&&k(a))}n.push(c)}return r(n)}function A(a,c){var g= 0,d=0<c.length,f=0<a.length,h=function(b,h,l,n,k){var p,r,t=[],q=0,v="0",A=b&&[],z=null!=k,C=K,B=b||f&&m.find.TAG("*",k&&h.parentNode||h),aa=H+=null==C?1:Math.random()||0.1;z&&(K=h!==x&&h,s=g);for(;null!=(k=B[v]);v++){if(f&&k){for(p=0;r=a[p++];)if(r(k,h,l)){n.push(k);break}z&&(H=aa,s=++g)}d&&((k=!r&&k)&&q--,b&&A.push(k))}q+=v;if(d&&v!==q){for(p=0;r=c[p++];)r(A,t,h,l);if(b){if(0<q)for(;v--;)!A[v]&&!t[v]&&(t[v]=oa.call(n));t=u(t)}M.apply(n,t);z&&(!b&&0<t.length&&1<q+c.length)&&e.uniqueSort(n)}z&&(H= aa,K=C);return A};return d?b(h):h}function z(){}var q,s,m,T,B,C,K,Q,L,G,x,D,E,F,I,X,R,w="sizzle"+-new Date,J=window.document,y={},H=0,na=0,da=c(),ca=c(),ea=c(),U=!1,Y=function(){return 0},ba=-2147483648,P=[],oa=P.pop,pa=P.push,M=P.push,fa=P.slice,S=P.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},ga="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),ha="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ ga+")|)|)[\\x20\\t\\r\\n\\f]*\\]",$=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",V=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,la=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ma=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,qa=RegExp($),ra=RegExp("^"+ga+"$"),W={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+ "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+ha),PSEUDO:RegExp("^"+$),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Z=/[\x20\t\r\n\f]*[+~]/,ia=/^[^{]+\{\s*\[native code/, ja=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/^(?:input|select|textarea|button)$/i,ta=/^h\d$/i,ka=/'|\\/g,ua=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,N=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,O=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};try{M.apply(P=fa.call(J.childNodes),J.childNodes),P[J.childNodes.length].nodeType}catch(va){M={apply:P.length?function(a,b){pa.apply(a,fa.call(b))}:function(a,b){for(var c=a.length, g=0;a[c++]=b[g++];);a.length=c-1}}}B=e.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};G=e.setDocument=function(b){var c=b?b.ownerDocument||b:J;if(c===x||9!==c.nodeType||!c.documentElement)return x;x=c;D=c.documentElement;E=!B(c);y.getElementsByTagName=d(function(a){a.appendChild(c.createComment(""));return!a.getElementsByTagName("*").length});y.attributes=d(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!== a&&"string"!==a});y.getElementsByClassName=d(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length});y.getByName=d(function(a){a.id=w+0;a.appendChild(x.createElement("a")).setAttribute("name",w);a.appendChild(x.createElement("i")).setAttribute("name",w);D.appendChild(a);var b=c.getElementsByName&&c.getElementsByName(w).length=== 2+c.getElementsByName(w+0).length;D.removeChild(a);return b});y.sortDetached=d(function(a){return a.compareDocumentPosition&&a.compareDocumentPosition(x.createElement("div"))&1});m.attrHandle=d(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}};y.getByName?(m.find.ID=function(a,b){if("undefined"!== typeof b.getElementById&&E){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},m.filter.ID=function(a){var b=a.replace(N,O);return function(a){return a.getAttribute("id")===b}}):(m.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&E){var c=b.getElementById(a);return c?c.id===a||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").value===a?[c]:void 0:[]}},m.filter.ID=function(a){var b=a.replace(N,O);return function(a){return(a="undefined"!==typeof a.getAttributeNode&& a.getAttributeNode("id"))&&a.value===b}});m.find.TAG=y.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,g=[],d=0,e=b.getElementsByTagName(a);if("*"===a){for(;c=e[d++];)1===c.nodeType&&g.push(c);return g}return e};m.find.NAME=y.getByName&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)};m.find.CLASS=y.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&& E)return b.getElementsByClassName(a)};I=[];F=[":focus"];if(y.qsa=a(c.querySelectorAll))d(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||F.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||F.push(":checked")}),d(function(a){a.innerHTML="<input type='hidden' i=''/>";a.querySelectorAll("[i^='']").length&&F.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.querySelectorAll(":enabled").length|| F.push(":enabled",":disabled");a.querySelectorAll("*,:x");F.push(",.*:")});(y.matchesSelector=a(X=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&d(function(a){y.disconnectedMatch=X.call(a,"div");X.call(a,"[s!='']:x");I.push("!=",$)});F=RegExp(F.join("|"));I=I.length&&RegExp(I.join("|"));R=a(D.contains)||D.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,g=b&&b.parentNode;return a===g||!(!g||!(1===g.nodeType&& (c.contains?c.contains(g):a.compareDocumentPosition&&a.compareDocumentPosition(g)&16)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Y=D.compareDocumentPosition?function(a,b){if(a===b)return U=!0,0;var g=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return g?g&1||Q&&b.compareDocumentPosition(a)===g?a===c||R(J,a)?-1:b===c||R(J,b)?1:L?S.call(L,a)-S.call(L,b):0:g&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var g,d=0;g=a.parentNode; var e=b.parentNode,h=[a],l=[b];if(a===b)return U=!0,0;if(!g||!e)return a===c?-1:b===c?1:g?-1:e?1:0;if(g===e)return f(a,b);for(g=a;g=g.parentNode;)h.unshift(g);for(g=b;g=g.parentNode;)l.unshift(g);for(;h[d]===l[d];)d++;return d?f(h[d],l[d]):h[d]===J?-1:l[d]===J?1:0};return x};e.matches=function(a,b){return e(a,null,null,b)};e.matchesSelector=function(a,b){(a.ownerDocument||a)!==x&&G(a);b=b.replace(ua,"='$1']");if(y.matchesSelector&&E&&(!I||!I.test(b))&&!F.test(b))try{var c=X.call(a,b);if(c||y.disconnectedMatch|| a.document&&11!==a.document.nodeType)return c}catch(g){}return 0<e(b,x,null,[a]).length};e.contains=function(a,b){(a.ownerDocument||a)!==x&&G(a);return R(a,b)};e.attr=function(a,b){var c;(a.ownerDocument||a)!==x&&G(a);E&&(b=b.toLowerCase());return(c=m.attrHandle[b])?c(a):!E||y.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&!0===a[b]?b:c&&c.specified?c.value:null};e.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};e.uniqueSort=function(a){var b, c=[],g=0,d=0;U=!y.detectDuplicates;Q=!y.sortDetached;L=!y.sortStable&&a.slice(0);a.sort(Y);if(U){for(;b=a[d++];)b===a[d]&&(g=c.push(d));for(;g--;)a.splice(c[g],1)}return a};T=e.getText=function(a){var b,c="",g=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=T(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[g];g++)c+=T(b);return c};m=e.selectors={cacheLength:50,createPseudo:b,match:W,find:{},relative:{">":{dir:"parentNode", first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(N,O);a[3]=(a[4]||a[5]||"").replace(N,O);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||e.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&e.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(W.CHILD.test(a[0]))return null; if(a[4])a[2]=a[4];else if(c&&qa.test(c)&&(b=n(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length))a[0]=a[0].slice(0,b),a[2]=c.slice(0,b);return a.slice(0,3)}},filter:{TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(N,O).toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=da[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&da(a,function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&& a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(g){g=e.attr(g,a);if(null==g)return"!="===b;if(!b)return!0;g+="";return"="===b?g===c:"!="===b?g!==c:"^="===b?c&&0===g.indexOf(c):"*="===b?c&&-1<g.indexOf(c):"$="===b?c&&g.slice(-c.length)===c:"~="===b?-1<(" "+g+" ").indexOf(c):"|="===b?g===c||g.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,g,d){var e="nth"!==a.slice(0,3),f="last"!==a.slice(-4),h="of-type"===b;return 1===g&&0===d?function(a){return!!a.parentNode}:function(b, c,l){var n,k,p,u,r;c=e!==f?"nextSibling":"previousSibling";var t=b.parentNode,m=h&&b.nodeName.toLowerCase();l=!l&&!h;if(t){if(e){for(;c;){for(k=b;k=k[c];)if(h?k.nodeName.toLowerCase()===m:1===k.nodeType)return!1;r=c="only"===a&&!r&&"nextSibling"}return!0}r=[f?t.firstChild:t.lastChild];if(f&&l){l=t[w]||(t[w]={});n=l[a]||[];u=n[0]===H&&n[1];p=n[0]===H&&n[2];for(k=u&&t.childNodes[u];k=++u&&k&&k[c]||(p=u=0)||r.pop();)if(1===k.nodeType&&++p&&k===b){l[a]=[H,u,p];break}}else if(l&&(n=(b[w]||(b[w]={}))[a])&& n[0]===H)p=n[1];else for(;k=++u&&k&&k[c]||(p=u=0)||r.pop();)if((h?k.nodeName.toLowerCase()===m:1===k.nodeType)&&++p)if(l&&((k[w]||(k[w]={}))[a]=[H,p]),k===b)break;p-=d;return p===g||0===p%g&&0<=p/g}}},PSEUDO:function(a,c){var g,d=m.pseudos[a]||m.setFilters[a.toLowerCase()]||e.error("unsupported pseudo: "+a);return d[w]?d(c):1<d.length?(g=[a,a,"",c],m.setFilters.hasOwnProperty(a.toLowerCase())?b(function(a,b){for(var g,e=d(a,c),f=e.length;f--;)g=S.call(a,e[f]),a[g]=!(b[g]=e[f])}):function(a){return d(a, 0,g)}):d}},pseudos:{not:b(function(a){var c=[],g=[],d=C(a.replace(V,"$1"));return d[w]?b(function(a,b,c,g){g=d(a,null,g,[]);for(var e=a.length;e--;)if(c=g[e])a[e]=!(b[e]=c)}):function(a,b,e){c[0]=a;d(c,null,e,g);return!g.pop()}}),has:b(function(a){return function(b){return 0<e(a,b).length}}),contains:b(function(a){return function(b){return-1<(b.textContent||b.innerText||T(b)).indexOf(a)}}),lang:b(function(a){ra.test(a||"")||e.error("unsupported lang: "+a);a=a.replace(N,O).toLowerCase();return function(b){var c; do if(c=E?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===D},focus:function(a){return a===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b= a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!m.pseudos.empty(a)},header:function(a){return ta.test(a.nodeName)},input:function(a){return sa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&& "button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:l(function(a,b,c){for(c= 0>c?c+b:c;++c<b;)a.push(c);return a})}};for(q in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})m.pseudos[q]=h(q);for(q in{submit:!0,reset:!0})m.pseudos[q]=g(q);C=e.compile=function(a,b){var c,g=[],d=[],e=ea[a+" "];if(!e){b||(b=n(a));for(c=b.length;c--;)e=v(b[c]),e[w]?g.push(e):d.push(e);e=ea(a,A(d,g))}return e};m.pseudos.nth=m.pseudos.eq;z.prototype=m.filters=m.pseudos;m.setFilters=new z;y.sortStable=w.split("").sort(Y).join("")===w;G();[0,0].sort(Y);y.detectDuplicates=U;return{select:e,matches:e.matches}}); Ink.createModule("Ink.Dom.Browser","1",[],function(){var a={IE:!1,GECKO:!1,OPERA:!1,SAFARI:!1,KONQUEROR:!1,CHROME:!1,model:!1,version:!1,userAgent:!1,init:function(){this.detectBrowser();this.setDimensions();this.setReferrer()},setDimensions:function(){var a=0,b=0;if("number"===typeof window.innerWidth)a=window.innerWidth,b=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientWidth,b=document.documentElement.clientHeight; else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientWidth,b=document.body.clientHeight;this.windowWidth=a;this.windowHeight=b},setReferrer:function(){this.referrer=void 0!==document.referrer?0<document.referrer.length?window.escape(document.referrer):!1:!1},detectBrowser:function(){var a=navigator.userAgent;this.userAgent=a;a=a.toLowerCase();if(/applewebkit\//.test(a))/chrome\//.test(a)?(this.CHROME=!0,this.model="chrome",this.version=a.replace(/(.*)chrome\/([^\s]+)(.*)/, "$2")):(this.SAFARI=!0,this.model="safari",this.version=a.replace(/(.*)applewebkit\/([^\s]+)(.*)/,"$2")),this.cssPrefix="-webkit-",this.domPrefix="Webkit";else if(/opera/.test(a))this.OPERA=!0,this.model="opera",this.version=a.replace(/(.*)opera.([^\s$]+)(.*)/,"$2"),this.cssPrefix="-o-",this.domPrefix="O";else if(/konqueror/.test(a))this.KONQUEROR=!0,this.model="konqueror",this.version=a.replace(/(.*)konqueror\/([^;]+);(.*)/,"$2"),this.cssPrefix="-khtml-",this.domPrefix="Khtml";else if(/msie\ /.test(a))this.IE= !0,this.model="ie",this.version=a.replace(/(.*)\smsie\s([^;]+);(.*)/,"$2"),this.cssPrefix="-ms-",this.domPrefix="ms";else if(/gecko/.test(a)){this.GECKO=!0;var b=RegExp("(camino|chimera|epiphany|minefield|firefox|firebird|phoenix|galeon|iceweasel|k\\-meleon|seamonkey|netscape|songbird|sylera)");b.test(a)?(this.model=a.match(b)[1],this.version=a.replace(RegExp("(.*)"+this.model+"/([^;\\s$]+)(.*)"),"$2")):(this.model="mozilla",b=/(.*)rv:([^)]+)(.*)/,b.test(a)&&(this.version=a.replace(b,"$2")));this.cssPrefix= "-moz-";this.domPrefix="Moz"}},debug:function(){var a;a="known browsers: (ie, gecko, opera, safari, konqueror) \n"+([this.IE,this.GECKO,this.OPERA,this.SAFARI,this.KONQUEROR]+"\n");a+="model -> "+this.model+"\n";a+="version -> "+this.version+"\n";a=a+"\n"+("original UA -> "+this.userAgent);alert(a)}};a.init();return a}); Ink.createModule("Ink.Util.Url","1",[],function(){return{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",getUrl:function(){return window.location.href},genQueryString:function(a,c){var b=-1!==a.indexOf("?"),d,e,f,h=[a];for(e in c)c.hasOwnProperty(e)&&(b?d="&":(d="?",b=!0),f=c[e],"number"!==typeof f&&!f&&(f=""),h=h.concat([d,encodeURIComponent(e),"=",encodeURIComponent(f)]));return h.join("")},getQueryString:function(a){var c;c=a&&"undefined"!==typeof a?a:this.getUrl(); a={};if(c.match(/\?(.+)/i)&&(c=c.replace(/^(.*)\?([^\#]+)(\#(.*))?/g,"$2"),0<c.length)){c=c.split(/[;&]/);for(var b=0;b<c.length;b++){var d=c[b].split("=");a[decodeURIComponent(d[0])]="undefined"!==typeof d[1]&&d[1]?decodeURIComponent(d[1]):!1}}return a},getAnchor:function(a){a=a&&"undefined"!==typeof a?a:this.getUrl();var c=!1;a.match(/#(.+)/)&&(c=a.replace(/([^#]+)#(.*)/,"$2"));return c},getAnchorString:function(a){var c;c=a&&"undefined"!==typeof a?a:this.getUrl();a={};if(c.match(/#(.+)/i)&&(c= c.replace(/^([^#]+)#(.*)?/g,"$2"),0<c.length)){c=c.split(/[;&]/);for(var b=0;b<c.length;b++){var d=c[b].split("=");a[decodeURIComponent(d[0])]="undefined"!==typeof d[1]&&d[1]?decodeURIComponent(d[1]):!1}}return a},parseUrl:function(a){var c={};if(a&&"undefined"!==typeof a&&"string"===typeof a){if(a.match(/^([^:]+):\/\//i)){var b=/^([^:]+):\/\/([^\/]*)\/?([^\?#]*)\??([^#]*)#?(.*)/i;a.match(b)&&(c.scheme=a.replace(b,"$1"),c.host=a.replace(b,"$2"),c.path="/"+a.replace(b,"$3"),c.query=a.replace(b,"$4")|| !1,c.fragment=a.replace(b,"$5")||!1)}else{var b=/^([^\?]+)\?([^#]+)#(.*)/i,d=/^([^\?]+)\?([^#]+)#?/i,e=/^([^\?]+)\??/i;a.match(b)?(c.scheme=!1,c.host=!1,c.path=a.replace(b,"$1"),c.query=a.replace(b,"$2"),c.fragment=a.replace(b,"$3")):a.match(d)?(c.scheme=!1,c.host=!1,c.path=a.replace(d,"$1"),c.query=a.replace(d,"$2"),c.fragment=!1):a.match(e)&&(c.scheme=!1,c.host=!1,c.path=a.replace(e,"$1"),c.query=!1,c.fragment=!1)}c.host&&(a=/^(.*)\:(\d+)$/i,c.host.match(a)?(b=c.host,c.host=b.replace(a,"$1"),c.port= b.replace(a,"$2")):c.port=!1,c.host.match(/@/i)&&(a=c.host,c.host=a.split("@")[1],a=a.split("@")[0],a.match(/\:/)?(c.user=a.split(":")[0],c.pass=a.split(":")[1]):(c.user=a,c.pass=!1)))}return c},currentScriptElement:function(a){var c=document.getElementsByTagName("script");if("undefined"===typeof a)return 0<c.length?c[c.length-1]:!1;var b=!1;a=RegExp(""+a+"","i");for(var d=0,e=c.length;d<e;d++)if(b=c[d],a.test(b.src))return b;return!1},_debug:function(){}}}); Ink.createModule("Ink.Util.Swipe","1",["Ink.Dom.Event_1"],function(a){var c=function(a,c){this._options=Ink.extendObj({callback:void 0,forceAxis:void 0,maxDist:void 0,maxDuration:void 0,minDist:void 0,minDuration:void 0,stopEvents:!0,storeGesture:!1},c||{});this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};this._element=Ink.i(a);this._init()};c._supported="ontouchstart"in document.documentElement;c.prototype={_init:function(){var b= document.body;a.observe(b,"touchstart",this._handlers.down);this._options.storeGesture&&a.observe(b,"touchmove",this._handlers.move);a.observe(b,"touchend",this._handlers.up);this._isOn=!1},_isMeOrParent:function(a,c){if(a){do{if(a===c)return!0;a=a.parentNode}while(a);return!1}},_onDown:function(b){1===event.changedTouches.length&&this._isMeOrParent(b.target,this._element)&&(!0===this._options.stopEvents&&a.stop(b),b=b.changedTouches[0],this._isOn=!0,this._target=b.target,this._t0=(new Date).valueOf(), this._p0=[b.pageX,b.pageY],this._options.storeGesture&&(this._gesture=[this._p0],this._time=[0]))},_onMove:function(b){if(this._isOn&&1===event.changedTouches.length){!0===this._options.stopEvents&&a.stop(b);b=b.changedTouches[0];var c=0.001*((new Date).valueOf()-this._t0);this._gesture.push([b.pageX,b.pageY]);this._time.push(c)}},_onUp:function(b){if(this._isOn&&1===event.changedTouches.length){!0===this._options.stopEvents&&a.stop(b);b=b.changedTouches[0];this._isOn=!1;var c=[b.pageX,b.pageY];b= 0.001*((new Date).valueOf()-this._t0);var c=[c[0]-this._p0[0],c[1]-this._p0[1]],e=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=Math.abs(c[0])>Math.abs(c[1])?"x":"y",h=this._options;!(h.minDist&&e<h.minDist)&&(!(h.maxDist&&e>h.maxDist)&&!(h.minDuration&&b<h.minDuration)&&!(h.maxDuration&&b>h.maxDuration)&&!(h.forceAxis&&f!==h.forceAxis))&&(b={elementId:this._element.id,duration:b,dr:c,dist:e,axis:f,target:this._target},this._options.storeGesture&&(b.gesture=this._gesture,b.time=this._time),this._options.callback(this, b))}}};return c}); Ink.createModule("Ink.Util.String","1",[],function(){return{_chars:'&\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f0\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u00f9\u00fa\u00fb\u00fc\u00fd\u00fe\u00ff\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d0\u00d1\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u00d9\u00da\u00db\u00dc\u00dd\u00de\u20ac"\u00df<>\u00a2\u00a3\u00a4\u00a5\u00a6\u00a7\u00a8\u00a9\u00aa\u00ab\u00ac\u00ad\u00ae\u00af\u00b0\u00b1\u00b2\u00b3\u00b4\u00b5\u00b6\u00b7\u00b8\u00b9\u00ba\u00bb\u00bc\u00bd\u00be'.split(""),_entities:"amp agrave aacute acirc atilde auml aring aelig ccedil egrave eacute ecirc euml igrave iacute icirc iuml eth ntilde ograve oacute ocirc otilde ouml oslash ugrave uacute ucirc uuml yacute thorn yuml Agrave Aacute Acirc Atilde Auml Aring AElig Ccedil Egrave Eacute Ecirc Euml Igrave Iacute Icirc Iuml ETH Ntilde Ograve Oacute Ocirc Otilde Ouml Oslash Ugrave Uacute Ucirc Uuml Yacute THORN euro quot szlig lt gt cent pound curren yen brvbar sect uml copy ordf laquo not shy reg macr deg plusmn sup2 sup3 acute micro para middot cedil sup1 ordm raquo frac14 frac12 frac34".split(" "), _accentedChars:"\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u00e8\u00e9\u00ea\u00eb\u00ec\u00ed\u00ee\u00ef\u00f2\u00f3\u00f4\u00f5\u00f6\u00f9\u00fa\u00fb\u00fc\u00e7\u00f1\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c8\u00c9\u00ca\u00cb\u00cc\u00cd\u00ce\u00cf\u00d2\u00d3\u00d4\u00d5\u00d6\u00d9\u00da\u00db\u00dc\u00c7\u00d1".split(""),_accentedRemovedChars:"aaaaaaeeeeiiiiooooouuuucnAAAAAAEEEEIIIIOOOOOUUUUCN".split(""),_htmlUnsafeChars:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},ucFirst:function(a){return a? String(a).replace(/(^|\s)(\w)(\S{2,})/g,function(a,b,d,e){return b+d.toUpperCase()+e.toLowerCase()}):a},trim:function(a){return"string"===typeof a?a.replace(/^\s+|\s+$|\n+$/g,""):a},stripTags:function(a,c){if(c&&"string"===typeof c){for(var b=this.trim(c).split(","),d=[],e=!1,f=0;f<b.length;f++)""!==this.trim(b[f])&&(e=this.trim(b[f].replace(/(\<|\>)/g,"").replace(/\s/,"")),d.push("(<"+e+"\\s[^>]+>|<(\\s|\\/)?(\\s|\\/)?"+e+">)"));b=d.join("|");b=RegExp(b,"i");d=a.match(/<[^>]*>/g);for(e=0;e<d.length;e++)d[e].match(b)|| (a=a.replace(RegExp(d[e],"gm"),""));return a}return a.replace(/\<[^\>]+\>/g,"")},htmlEntitiesEncode:function(a){if(a&&a.replace)for(var c=!1,b=0;b<this._chars.length;b++)c=RegExp(this._chars[b],"gm"),a=a.replace(c,"&"+this._entities[b]+";");return a},htmlEntitiesDecode:function(a){if(a&&a.replace){for(var c=!1,b=0;b<this._entities.length;b++)c=RegExp("&"+this._entities[b]+";","gm"),a=a.replace(c,this._chars[b]);a=a.replace(/&#[^;]+;?/g,function(a){return"x"===a.charAt(2)?String.fromCharCode(parseInt(a.substring(3), 16)):String.fromCharCode(parseInt(a.substring(2),10))})}return a},utf8Encode:function(a){a=a.replace(/\r\n/g,"\n");for(var c="",b=0;b<a.length;b++){var d=a.charCodeAt(b);128>d?c+=String.fromCharCode(d):(127<d&&2048>d?c+=String.fromCharCode(d>>6|192):(c+=String.fromCharCode(d>>12|224),c+=String.fromCharCode(d>>6&63|128)),c+=String.fromCharCode(d&63|128))}return c},shortString:function(a,c){for(var b=a.split(" "),d="",e=0;e<b.length;e++){if((d+b[e]+" ").length>=c){d+="&hellip;";break}d+=b[e]+" "}return d}, truncateString:function(a,c){return a.length-1>c?a.substr(0,c-1)+"\u2026":a},utf8Decode:function(a){for(var c="",b=0,d=0,e=0,f=0;b<a.length;)d=a.charCodeAt(b),128>d?(c+=String.fromCharCode(d),b++):191<d&&224>d?(e=a.charCodeAt(b+1),c+=String.fromCharCode((d&31)<<6|e&63),b+=2):(e=a.charCodeAt(b+1),f=a.charCodeAt(b+2),c+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),b+=3);return c},removeAccentedChars:function(a){for(var c=!1,b=0;b<this._accentedChars.length;b++)c=RegExp(this._accentedChars[b],"gm"), a=a.replace(c,""+this._accentedRemovedChars[b]+"");return a},substrCount:function(a,c){return a?a.split(c).length-1:0},evalJSON:function(a,c){if("undefined"===typeof c||null===c||this.isJSON(a))try{return"undefined"!==typeof JSON&&"undefined"!==typeof JSON.parse?JSON.parse(a):eval("("+a+")")}catch(b){throw Error("ERROR: Bad JSON string...");}},isJSON:function(a){a=a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a)},htmlEscapeUnsafe:function(a){var c= this._htmlUnsafeChars;return null!=a?String(a).replace(/[<>&'"]/g,function(a){return c[a]}):a},normalizeWhitespace:function(a){return null!=a?this.trim(String(a).replace(/\s+/g," ")):a},toUnicode:function(a){if("string"===typeof a){for(var c="",b=!1,b=!1,d=a.length,e=0;e<d;){b=a.charCodeAt(e);if(32<=b&&126>=b||8==b||9==b||10==b||12==b||13==b||32==b||34==b||47==b||58==b||92==b)b=8==b?"\\b":9==b?"\\t":10==b?"\\n":12==b?"\\f":13==b?"\\r":a.charAt(e);else{for(b=a.charCodeAt(e).toString(16)+"";4>b.length;)b= "0"+b;b="\\u"+b}c+=b;e++}return c}},escape:function(a){a=a.charCodeAt(0).toString(16).split("");if(3>a.length){for(;2>a.length;)a.unshift("0");a.unshift("x")}else{for(;4>a.length;)a.unshift("0");a.unshift("u")}a.unshift("\\");return a.join("")},unescape:function(a){var c=a.lastIndexOf("0"),c=-1===c?2:Math.min(c,2);a=a.substring(c);a=parseInt(a,16);return String.fromCharCode(a)},escapeText:function(a,c){void 0===c&&(c=["[","]","'",","]);for(var b=[],d,e,f=0,h=a.length;f<h;++f){d=a[f];e=d.charCodeAt(0); if(32>e||126<e&&-1===c.indexOf(d))d=this.escape(d);b.push(d)}return b.join("")},escapedCharRegex:/(\\x[0-9a-fA-F]{2})|(\\u[0-9a-fA-F]{4})/g,unescapeText:function(a){for(var c;c=this.escapedCharRegex.exec(a);)c=c[0],a=a.replace(c,this.unescape(c)),this.escapedCharRegex.lastIndex=0;return a},strcmp:function(a,c){return a===c?0:a>c?1:-1},packetize:function(a,c){for(var b=a.length,d=Array(Math.ceil(b/c)),e=a.split(""),f,h=0;b;)f=Math.min(c,b),d[h++]=e.splice(0,f).join(""),b-=f;return d}}}); Ink.createModule("Ink.Util.Dumper","1",[],function(){return{_tab:"\u00a0\u00a0\u00a0\u00a0",_formatParam:function(a){var c="";switch(typeof a){case "string":c="(string) "+a;break;case "number":c="(number) "+a;break;case "boolean":c="(boolean) "+a;break;case "object":c=null!==a?a.constructor===Array?"Array \n{\n"+this._outputFormat(a,0)+"\n}":"Object \n{\n"+this._outputFormat(a,0)+"\n}":"null";break;default:c=!1}return c},_getTabs:function(a){for(var c="",b=0;b<a;b++)c+=this._tab;return c},_outputFormat:function(a, c){var b="",d=!1,e;for(e in a)null!==a[e]?"object"===typeof a[e]&&(a[e].constructor===Array||a[e].constructor===Object)?(a[e].constructor===Array?d="Array":a[e].constructor===Object&&(d="Object"),b+=this._tab+this._getTabs(c)+"["+e+"] => <b>"+d+"</b>\n",b+=this._tab+this._getTabs(c)+"{\n",b+=this._outputFormat(a[e],c+1)+this._tab+this._getTabs(c)+"}\n"):a[e].constructor!==Function&&(b=b+this._tab+this._getTabs(c)+"["+e+"] => "+a[e]+"\n"):b=b+this._tab+this._getTabs(c)+"["+e+"] => null \n";return b}, printDump:function(a,c){if(!c||"undefined"===typeof c)document.write("<pre>"+this._formatParam(a)+"</pre>");else if("string"===typeof c)document.getElementById(c).innerHTML="<pre>"+this._formatParam(a)+"</pre>";else if("object"===typeof c)c.innerHTML="<pre>"+this._formatParam(a)+"</pre>";else throw"TARGET must be an element or an element ID";},returnDump:function(a){return this._formatParam(a)},alertDump:function(a){window.alert(this._formatParam(a).replace(/(<b>)(Array|Object)(<\/b>)/g,"$2"))},windowDump:function(a){var c= "dumperwindow_"+1E4*Math.random(),c=window.open("",c,"width=400,height=300,left=50,top=50,status,menubar,scrollbars,resizable");c.document.open();c.document.write("<pre>"+this._formatParam(a)+"</pre>");c.document.close();c.focus()}}}); Ink.createModule("Ink.Util.Date","1",[],function(){return{_months:function(a){return"Janeiro Fevereiro Mar\u00e7o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" ")[a]},_iMonth:function(a){return Number(a)?+a-1:{janeiro:0,jan:0,fevereiro:1,fev:1,"mar\u00e7o":2,mar:2,abril:3,abr:3,maio:4,mai:4,junho:5,jun:5,julho:6,jul:6,agosto:7,ago:7,setembro:8,set:8,outubro:9,out:9,novembro:10,nov:10,dezembro:11,dez:11}[a.toLowerCase()]},_wDays:function(a){return"Domingo Segunda Ter\u00e7a Quarta Quinta Sexta S\u00e1bado".split(" ")[a]}, _iWeek:function(a){return Number(a)?+a||7:{segunda:1,seg:1,"ter\u00e7a":2,ter:2,quarta:3,qua:3,quinta:4,qui:4,sexta:5,sex:5,"s\u00e1bado":6,"s\u00e1b":6,domingo:7,dom:7}[a.toLowerCase()]},_daysInMonth:function(a,c){return 1===a||3===a||5===a||7===a||8===a||10===a||12===a?31:4===a||6===a||9===a||11===a?30:0===c%400||0===c%4&&0!==c%100?29:28},get:function(a,c){if("undefined"===typeof a||""===a)a="Y-m-d";var b=a.split(""),d=Array(b.length),e;e="undefined"===typeof c?new Date:"number"===typeof c?new Date(1E3* c):new Date(c);for(var f,h,g=0;g<b.length;g++)switch(b[g]){case "\\":d[g]=b[g+1];g++;break;case "d":f=e.getDate();d[g]=1<String(f).length?f:"0"+f;break;case "D":d[g]=this._wDays(e.getDay()).substring(0,3);break;case "j":d[g]=e.getDate();break;case "l":d[g]=this._wDays(e.getDay());break;case "N":d[g]=e.getDay()||7;break;case "S":f=e.getDate();h=["st","nd","rd"];var l="";d[g]=11<=f&&13>=f?"th":(l=h[String(f).substr(-1)-1])?l:"th";break;case "w":d[g]=e.getDay();break;case "z":f=Date.UTC(e.getFullYear(), 0,0);h=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());d[g]=Math.floor((h-f)/864E5);break;case "W":h=new Date(e.getFullYear(),0,1);f=h.getDay()||7;d[g]=Math.ceil((Math.floor((e-h)/864E5+1)-(8-f))/7)+1;break;case "F":d[g]=this._months(e.getMonth());break;case "m":f=String(e.getMonth()+1);d[g]=1<f.length?f:"0"+f;break;case "M":d[g]=this._months(e.getMonth()).substring(0,3);break;case "n":d[g]=e.getMonth()+1;break;case "t":d[g]=this._daysInMonth(e.getMonth()+1,e.getYear());break;case "L":f=e.getFullYear(); d[g]=f%4?!1:f%100?!0:f%400?!1:!0;break;case "o":throw'"o" not implemented!';case "Y":d[g]=e.getFullYear();break;case "y":d[g]=String(e.getFullYear()).substring(2);break;case "a":d[g]=12>e.getHours()?"am":"pm";break;case "A":d[g]=12>e.getHours?"AM":"PM";break;case "B":throw'"B" not implemented!';case "g":h=e.getHours();d[g]=12>=h?h:h-12;break;case "G":d[g]=String(e.getHours());break;case "h":h=String(e.getHours());h=12>=h?h:h-12;d[g]=1<h.length?h:"0"+h;break;case "H":h=String(e.getHours());d[g]=1< h.length?h:"0"+h;break;case "i":f=String(e.getMinutes());d[g]=1<f.length?f:"0"+f;break;case "s":f=String(e.getSeconds());d[g]=1<f.length?f:"0"+f;break;case "u":throw'"u" not implemented!';case "e":throw'"e" not implemented!';case "I":f=new Date(e.getFullYear(),0,1);d[g]=e.getTimezoneOffset()!==f.getTimezoneOffset()?1:0;break;case "O":h=e.getTimezoneOffset();f=h%60;h=String(-1*((h-f)/60));"-"!==h.charAt(0)&&(h="+"+h);h=3===h.length?h:h.replace(/([+\-])(\d)/,"$10$2");d[g]=h+f+"0";break;case "P":throw'"P" not implemented!'; case "T":throw'"T" not implemented!';case "Z":d[g]=60*e.getTimezoneOffset();break;case "c":throw'"c" not implemented!';case "r":f=this._wDays(e.getDay()).substr(0,3);h=this._months(e.getMonth()).substr(0,3);d[g]=f+", "+e.getDate()+" "+h+this.get(" Y H:i:s O",e);break;case "U":d[g]=Math.floor(e.getTime()/1E3);break;default:d[g]=b[g]}return d.join("")},set:function(a,c){if("undefined"!==typeof c){if("undefined"===typeof a||""===a)a="Y-m-d";for(var b=a.split(""),d=Array(b.length),e,f=void 0,h=void 0, g=void 0,l=void 0,n=void 0,k=void 0,p=void 0,r=void 0,u=void 0,t=void 0,v=void 0,A=void 0,z=void 0,q=void 0,s=0,m=0;m<b.length;m++)switch(b[m]){case "\\":d[m]=b[m+1];m++;break;case "d":d[m]="(\\d{2})";g={original:m,match:s++};break;case "j":d[m]="(\\d{1,2})";g={original:m,match:s++};break;case "D":d[m]="([\\w\u00e1]{3})";n={original:m,match:s++};break;case "l":d[m]="([\\w\u00e1]{5,7})";n={original:m,match:s++};break;case "N":d[m]="(\\d)";n={original:m,match:s++};break;case "w":d[m]="(\\d)";n={original:m, match:s++};break;case "S":d[m]="\\w{2}";break;case "z":d[m]="(\\d{1,3})";l={original:m,match:s++};break;case "W":d[m]="(\\d{1,2})";k={original:m,match:s++};break;case "F":d[m]="([\\w\u00e7]{4,9})";h={original:m,match:s++};break;case "M":d[m]="(\\w{3})";h={original:m,match:s++};break;case "m":d[m]="(\\d{2})";h={original:m,match:s++};break;case "n":d[m]="(\\d{1,2})";h={original:m,match:s++};break;case "t":d[m]="\\d{2}";break;case "L":d[m]="\\w{4,5}";break;case "o":throw'"o" not implemented!';case "Y":d[m]= "(\\d{4})";f={original:m,match:s++};break;case "y":d[m]="(\\d{2})";if("undefined"===typeof f||"Y"!==b[f.original])f={original:m,match:s++};break;case "a":d[m]="(am|pm)";v={original:m,match:s++};break;case "A":d[m]="(AM|PM)";v={original:m,match:s++};break;case "B":throw'"B" not implemented!';case "g":d[m]="(\\d{1,2})";r={original:m,match:s++};break;case "G":d[m]="(\\d{1,2})";p={original:m,match:s++};break;case "h":d[m]="(\\d{2})";r={original:m,match:s++};break;case "H":d[m]="(\\d{2})";p={original:m, match:s++};break;case "i":d[m]="(\\d{2})";u={original:m,match:s++};break;case "s":d[m]="(\\d{2})";t={original:m,match:s++};break;case "u":throw'"u" not implemented!';case "e":throw'"e" not implemented!';case "I":d[m]="\\d";break;case "O":d[m]="([-+]\\d{4})";z={original:m,match:s++};break;case "P":throw'"P" not implemented!';case "T":throw'"T" not implemented!';case "Z":d[m]="(\\-?\\d{1,5})";A={original:m,match:s++};break;case "c":throw'"c" not implemented!';case "r":d[m]="([\\w\u00e1]{3}, \\d{1,2} \\w{3} \\d{4} \\d{2}:\\d{2}:\\d{2} [+\\-]\\d{4})"; q={original:m,match:s++};break;case "U":d[m]="(\\d{1,13})";q={original:m,match:s++};break;default:d[m]=b[m]}d=RegExp(d.join(""));try{if(e=c.match(d),!e)return}catch(T){return}var B="undefined"!==typeof f,C="undefined"!==typeof l,K="undefined"!==typeof g,Q="undefined"!==typeof h,n="undefined"!==typeof n,L="undefined"!==typeof k,G=C||Q&&K||!B&&!Q&&K||L&&n||!B&&!L&&n,x=!B&&!C&&!K&&!Q&&!n&&!L,D="undefined"!==typeof r&&"undefined"!==typeof v,E="undefined"!==typeof p,F="undefined"!==typeof u,s="undefined"!== typeof t,I=!x||D||E,m=I||F,n="undefined"!==typeof A,d="undefined"!==typeof z;if("undefined"!==typeof q){if("U"===b[q.original])return new Date(1E3*+e[q.match+1]);e=e[q.match+1].match(/\w{3}, (\d{1,2}) (\w{3}) (\d{4}) (\d{2}):(\d{2}):(\d{2}) ([+\-]\d{4})/);p=+e[4]+ +e[7].slice(0,3);u=+e[5]+60*((e[7].slice(0,1)+e[7].slice(3))/100);return new Date(e[3],this._iMonth(e[2]),e[1],p,u,e[6])}q=new Date;if(G||x)return G?(B?(G=q.getFullYear()-50+"",B=e[f.match+1],"y"===b[f.original]&&(B=+G.slice(0,2)+(B>=G.slice(2)? 0:1)+B)):B=q.getFullYear(),C?(b=0,g=e[l.match+1]):K?(b=Q?this._iMonth(e[h.match+1]):q.getMonth(),g=e[g.match+1]):(b=0,g=7*((L?e[k.match+1]:this.get("W",q))-2)+(8-((new Date(B,0,1)).getDay()||7))+this._iWeek(e[k.match+1])),0===b&&31<g&&(g=new Date(B,b,g),b=g.getMonth(),g=g.getDate())):(B=q.getFullYear(),b=q.getMonth(),g=q.getDate()),g=B+"-"+(b+1)+"-"+g+" ",p=D?+e[r.match+1]+("pm"===e[v.match+1]?12:0):E?e[p.match+1]:x?q.getHours():"00",u=F?e[u.match+1]:I?"00":q.getMinutes(),t=s?e[t.match+1]:m?"00": q.getSeconds(),e=d?e[z.match+1]:n?String(100*(-1*e[A.match+1]/60)).replace(/^(\d)/,"+$1").replace(/(^[\-+])(\d{3}$)/,"$10$2"):"+0000",new Date(g+p+":"+u+":"+t+".000"+e)}}}}); Ink.createModule("Ink.Util.Cookie","1",[],function(){return{get:function(a){var c=document.cookie||!1,b={};if(c){var c=c.replace(/; /g,";"),c=c.split(";"),d=[];if(0<c.length)for(var e=0;e<c.length;e++)d=c[e].split("="),2===d.length&&(b[d[0]]=decodeURIComponent(d[1]))}return a?"undefined"!==typeof b[a]?b[a]:null:b},set:function(a,c,b,d,e,f){if(!a||!1===c||"undefined"===typeof a||"undefined"===typeof c)return!1;a=a+"="+encodeURIComponent(c);var h=c=!1,g=!1;b&&"undefined"!==typeof b&&!isNaN(b)?(b=parseInt(Number((new Date).valueOf()), 10)+1E3*Number(parseInt(b,10)),b=(new Date(b)).toGMTString(),b=b.replace(/([^\s]+)(\s\d\d)\s(\w\w\w)\s(.*)/,"$1$2-$3-$4"),c="expires="+b):c="undefined"!==typeof b&&!isNaN(b)&&0===Number(parseInt(b,10))?"":"expires=Thu, 01-Jan-2037 00:00:01 GMT";h=d&&"undefined"!==typeof d?"path="+d:"path=/";e&&"undefined"!==typeof e?g="domain="+e:(g="domain="+window.location.host,g=g.replace(/:(.*)/,""));document.cookie=a+"; "+c+"; "+h+"; "+g+"; "+(f&&"undefined"!==typeof f?f:!1)},remove:function(a,c,b){var d=!1, d=b&&"undefined"!==typeof b?b:window.location.host;this.set(a,"deleted",-999999999,c&&"undefined"!==typeof c?c:"/",d)}}}); Ink.createModule("Ink.Util.Array","1",[],function(){return{inArray:function(a,c){if("object"===typeof c)for(var b=0,d=c.length;b<d;++b)if(c[b]===a)return!0;return!1},sortMulti:function(a,c){if("undefined"===typeof a||a.constructor!==Array)return!1;if("string"!==typeof c)return a.sort();if(0<a.length){if("undefined"===typeof a[0][c])return!1;a.sort(function(a,d){var e=a[c],f=d[c];return e<f?-1:e>f?1:0})}return a},keyValue:function(a,c,b){if("undefined"!==typeof a&&"object"===typeof c&&this.inArray(a, c)){for(var d=[],e=0,f=c.length;e<f;++e)if(c[e]===a){if("undefined"!==typeof b&&!0===b)return e;d.push(e)}return d}return!1},shuffle:function(a){if("undefined"!==typeof a&&a.constructor!==Array)return!1;for(var c=a.length,b=!1,d=!1;c--;)d=Math.floor(Math.random()*(c+1)),b=a[c],a[c]=a[d],a[d]=b;return a},each:function(a,c){var b=a.slice(0),d=b.length,e=Math.floor(d/8),d=d%8,f=0;if(0<d){do c(b[f++],f-1,a);while(0<--d)}if(0===e)return a;do c(b[f++],f-1,a),c(b[f++],f-1,a),c(b[f++],f-1,a),c(b[f++],f-1, a),c(b[f++],f-1,a),c(b[f++],f-1,a),c(b[f++],f-1,a),c(b[f++],f-1,a);while(0<--e);return a},some:function(a,c,b){if(null===a)throw new TypeError("First argument is invalid.");a=Object(a);var d=a.length>>>0;if("function"!==typeof c)throw new TypeError("Second argument must be a function.");for(var e=0;e<d;e++)if(e in a&&c.call(b,a[e],e,a))return!0;return!1},intersect:function(a,c){if(!a||!c||!1===a instanceof Array||!1===c instanceof Array)return[];for(var b=[],d=0,e=a.length;d<e;++d)for(var f=0,h=c.length;f< h;++f)a[d]===c[f]&&b.push(a[d]);return b},convert:function(a){return Array.prototype.slice.call(a||[],0)},insert:function(a,c,b){a.splice(c,0,b)},remove:function(a,c,b){for(var d=[],e=0,f=a.length;e<f;e++)e>=c&&e<c+b||d.push(a[e]);return d}}}); Ink.createModule("Ink.Util.Validator","1",[],function(){return{_countryCodes:["AO","CV","MZ","PT"],_internacionalPT:351,_indicativosPT:{21:"lisboa",22:"porto",231:"mealhada",232:"viseu",233:"figueira da foz",234:"aveiro",235:"arganil",236:"pombal",238:"seia",239:"coimbra",241:"abrantes",242:"ponte de s\u00f4r",243:"santar\u00e9m",244:"leiria",245:"portalegre",249:"torres novas",251:"valen\u00e7a",252:"vila nova de famalic\u00e3o",253:"braga",254:"peso da r\u00e9gua",255:"penafiel",256:"s\u00e3o jo\u00e3o da madeira", 258:"viana do castelo",259:"vila real",261:"torres vedras",262:"caldas da ra\u00ednha",263:"vila franca de xira",265:"set\u00fabal",266:"\u00e9vora",268:"estremoz",269:"santiago do cac\u00e9m",271:"guarda",272:"castelo branco",273:"bragan\u00e7a",274:"proen\u00e7a-a-nova",275:"covilh\u00e3",276:"chaves",277:"idanha-a-nova",278:"mirandela",279:"moncorvo",281:"tavira",282:"portim\u00e3o",283:"odemira",284:"beja",285:"moura",286:"castro verde",289:"faro",291:"funchal, porto santo",292:"corvo, faial, flores, horta, pico", 295:"angra do hero\u00edsmo, graciosa, s\u00e3o jorge, terceira",296:"ponta delgada, s\u00e3o miguel, santa maria",91:"rede m\u00f3vel 91 (Vodafone / Yorn)",93:"rede m\u00f3vel 93 (Optimus)",96:"rede m\u00f3vel 96 (TMN)",92:"rede m\u00f3vel 92 (TODOS)",707:"n\u00famero \u00fanico",760:"n\u00famero \u00fanico",800:"n\u00famero gr\u00e1tis",808:"chamada local",30:"voip"},_internacionalCV:238,_indicativosCV:{2:"fixo",91:"m\u00f3vel 91",95:"m\u00f3vel 95",97:"m\u00f3vel 97",98:"m\u00f3vel 98",99:"m\u00f3vel 99"}, _internacionalAO:244,_indicativosAO:{2:"fixo",91:"m\u00f3vel 91",92:"m\u00f3vel 92"},_internacionalMZ:258,_indicativosMZ:{2:"fixo",82:"m\u00f3vel 82",84:"m\u00f3vel 84"},_internacionalTL:670,_indicativosTL:{3:"fixo",7:"m\u00f3vel 7"},_isLeapYear:function(a){return/^\d{4}$/.test(a)?a%4?!1:a%100?!0:a%400?!1:!0:!1},_dateParsers:{"yyyy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{4})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yyyy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{4})(\/)(\d{1,2})(\/)(\d{1,2})$/}, "yy-mm-dd":{day:5,month:3,year:1,sep:"-",parser:/^(\d{2})(\-)(\d{1,2})(\-)(\d{1,2})$/},"yy/mm/dd":{day:5,month:3,year:1,sep:"/",parser:/^(\d{2})(\/)(\d{1,2})(\/)(\d{1,2})$/},"dd-mm-yyyy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{4})$/},"dd/mm/yyyy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{4})$/},"dd-mm-yy":{day:1,month:3,year:5,sep:"-",parser:/^(\d{1,2})(\-)(\d{1,2})(\-)(\d{2})$/},"dd/mm/yy":{day:1,month:3,year:5,sep:"/",parser:/^(\d{1,2})(\/)(\d{1,2})(\/)(\d{2})$/}}, _daysInMonth:function(a,c){return 1===a||3===a||5===a||7===a||8===a||10===a||12===a?31:4===a||6===a||9===a||11===a?30:0===c%400||0===c%4&&0!==c%100?29:28},_isValidDate:function(a,c,b){var d=/^\d{1,2}$/;return/^\d{4}$/.test(a)&&d.test(c)&&d.test(b)&&1<=c&&12>=c&&1<=b&&this._daysInMonth(c,a)>=b?!0:!1},mail:function(a){return/^[_a-z0-9-]+((\.|\+)[_a-z0-9-]+)*@([\w]*-?[\w]*\.)+[a-z]{2,4}$/i.test(a)?!0:!1},url:function(a,c){if("undefined"===typeof c||!1===c)!1===/(^(http\:\/\/|https\:\/\/)(.+))/i.test(a)&& (a="http://"+a);return!1===/^(http:\/\/|https:\/\/)([\w]*(-?[\w]*)*\.)+[a-z]{2,4}/i.test(a)?!1:!0},isPTPhone:function(a){a=a.toString();var c=[],b;for(b in this._indicativosPT)"string"===typeof this._indicativosPT[b]&&c.push(b);c=c.join("|");b=/^(00351|\+351)/;b.test(a)&&(a=a.replace(b,""));a=a.replace(/(\s|\-|\.)+/g,"");b=/[\d]{9}/i;return 9===a.length&&b.test(a)&&RegExp("^("+c+")").test(a)?!0:!1},isPortuguesePhone:function(a){return this.isPTPhone(a)},isCVPhone:function(a){a=a.toString();var c= [],b;for(b in this._indicativosCV)"string"===typeof this._indicativosCV[b]&&c.push(b);c=c.join("|");b=/^(00238|\+238)/;b.test(a)&&(a=a.replace(b,""));a=a.replace(/(\s|\-|\.)+/g,"");b=/[\d]{7}/i;return 7===a.length&&b.test(a)&&RegExp("^("+c+")").test(a)?!0:!1},isAOPhone:function(a){a=a.toString();var c=[],b;for(b in this._indicativosAO)"string"===typeof this._indicativosAO[b]&&c.push(b);c=c.join("|");b=/^(00244|\+244)/;b.test(a)&&(a=a.replace(b,""));a=a.replace(/(\s|\-|\.)+/g,"");b=/[\d]{9}/i;return 9=== a.length&&b.test(a)&&RegExp("^("+c+")").test(a)?!0:!1},isMZPhone:function(a){a=a.toString();var c=[],b;for(b in this._indicativosMZ)"string"===typeof this._indicativosMZ[b]&&c.push(b);c=c.join("|");b=/^(00258|\+258)/;b.test(a)&&(a=a.replace(b,""));a=a.replace(/(\s|\-|\.)+/g,"");b=/[\d]{8,9}/i;if((9===a.length||8===a.length)&&b.test(a)&&RegExp("^("+c+")").test(a))if(0===a.indexOf("2")&&8===a.length||0===a.indexOf("8")&&9===a.length)return!0;return!1},isTLPhone:function(a){a=a.toString();var c=[],b; for(b in this._indicativosTL)"string"===typeof this._indicativosTL[b]&&c.push(b);c=c.join("|");b=/^(00670|\+670)/;b.test(a)&&(a=a.replace(b,""));a=a.replace(/(\s|\-|\.)+/g,"");b=/[\d]{7}/i;return 7===a.length&&b.test(a)&&RegExp("^("+c+")").test(a)?!0:!1},isPhone:function(){var a;if(0===arguments.length)return!1;var c=arguments[0];if(1<arguments.length)if(arguments[1].constructor===Array){var b;for(a=0;a<arguments[1].length;a++)if("function"===typeof(b=this["is"+arguments[1][a].toUpperCase()+"Phone"])){if(b(c))return!0}else throw"Invalid Country Code!"; }else{if("function"===typeof this["is"+arguments[1].toUpperCase()+"Phone"])return this["is"+arguments[1].toUpperCase()+"Phone"](c);throw"Invalid Country Code!";}else for(a=0;a<this._countryCodes.length;a++)if(this["is"+this._countryCodes[a]+"Phone"](c))return!0;return!1},codPostal:function(a,c,b){var d=/^(\s*\-\s*|\s+)$/,e=/^\s+|\s+$/g,f=/^[1-9]\d{3}$/,h=/^\d{3}$/,g=/^(.{4})(.*)(.{3})$/;b=!!b;a=a.replace(e,"");if("undefined"!==typeof c){if(c=c.replace(e,""),f.test(a)&&h.test(c))return!0===b?[!0,!0]: !0}else{if(f.test(a))return!0===b?[!0,!1]:!0;a=a.match(g);if(null!==a&&f.test(a[1])&&d.test(a[2])&&h.test(a[3]))return!0===b?[!0,!1]:!0}return!0===b?[!1,!1]:!1},isDate:function(a,c){if("undefined"===typeof this._dateParsers[a])return!1;var b=this._dateParsers[a].year,d=this._dateParsers[a].month,e=this._dateParsers[a].day,f=this._dateParsers[a].sep,h=c.match(this._dateParsers[a].parser);return null!==h&&h[2]===h[4]&&h[2]===f&&this._isValidDate(2===h[b].length?"20"+h[b].toString():h[b],h[d].toString(), h[e].toString())?!0:!1},isColor:function(a){var c,b=!1;c=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;var d=/^rgba\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/,e=/^hsla\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*(1(\.0)?|0(\.[0-9])?)\s*\)$/;if(/^[a-zA-Z]+$/.test(a)||c.test(a))return!0;if(null!==(c=/^rgb\(\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/.exec(a))||null!==(c=d.exec(a)))for(d=c.length;d--;){if((2=== d||4===d||6===d)&&"undefined"!==typeof c[d]&&""!==c[d])if("undefined"!==typeof c[d-1]&&0<=c[d-1]&&100>=c[d-1])b=!0;else return!1;if(1===d||3===d||5===d&&("undefined"===typeof c[d+1]||""===c[d+1]))if("undefined"!==typeof c[d]&&0<=c[d]&&255>=c[d])b=!0;else return!1}if(null!==(c=/^hsl\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(%)?\s*,\s*([0-9]{1,3})(%)?\s*\)$/.exec(a))||null!==(c=e.exec(a)))for(d=c.length;d--;){if(3===d||5===d)if("undefined"!==typeof c[d-1]&&"undefined"!==typeof c[d]&&""!==c[d]&&0<=c[d-1]&& 100>=c[d-1])b=!0;else return!1;if(1===d)if("undefined"!==typeof c[d]&&0<=c[d]&&360>=c[d])b=!0;else return!1}return b}}}); Ink.createModule("Ink.UI.Aux","1",["Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(a,c,b,d){var e={},f=0,h={Layouts:{SMALL:"Db",MEDIUM:"Cb",LARGE:"W"},isDOMElement:function(a){return"object"===typeof a&&"nodeType"in a&&1===a.nodeType},isInteger:function(a){return"number"===typeof a&&0===a%1},elOrSelector:function(a,c){if(!this.isDOMElement(a)){var d=b.select(a);if(0===d.length)throw new TypeError(c+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself."); return d[0]}return a},clone:function(a){try{if("object"!==typeof a)throw Error("Given argument is not an object!");return JSON.parse(JSON.stringify(a))}catch(b){throw Error("Given object cannot have loops!");}},childIndex:function(a){if(h.isDOMElement(a))for(var c=b.select("> *",a.parentNode),d=0,e=c.length;d<e;++d)if(c[d]===a)return d;throw"not found!";},ajaxJSON:function(b,c,d){new a(b,{evalJS:"force",method:"POST",parameters:c,onSuccess:function(a){try{a=a.responseJSON;if("ok"!==a.status)throw"server error: "+ a.message;d(null,a)}catch(b){d(b)}},onFailure:function(){d("communication failure")}})},currentLayout:function(){var a,d,e,f=b.select("#ink-layout-detector")[0];if(!f){f=document.createElement("div");f.id="ink-layout-detector";for(a in this.Layouts)this.Layouts.hasOwnProperty(a)&&(d=this.Layouts[a],e=document.createElement("div"),e.className="L-"+d+" N-M",e.setAttribute("data-ink-layout",d),f.appendChild(e));document.body.appendChild(f)}a=0;for(d=f.childNodes.length;a<d;++a)if(e=f.childNodes[a],"hidden"!== c.getStyle(e,"visibility"))return e.getAttribute("data-ink-layout")},hashSet:function(a){if("object"!==typeof a)throw new TypeError("o should be an object!");var b=d.getAnchorString(),b=Ink.extendObj(b,a);window.location.hash=d.genQueryString("",b).substring(1)},cleanChildren:function(a){if(!h.isDOMElement(a))throw"Please provide a valid DOMElement";for(var b,c=a.lastChild;c;)b=c.previousSibling,a.removeChild(c),c=b},storeIdAndClasses:function(a,b){if(!h.isDOMElement(a))throw"Please provide a valid DOMElement as first parameter"; var c=a.id;c&&(b._id=c);if(c=a.className)b._classes=c},restoreIdAndClasses:function(a,b){if(!h.isDOMElement(a))throw"Please provide a valid DOMElement as first parameter";b._id&&a.id!==b._id&&(a.id=b._id);b._classes&&-1===a.className.indexOf(b._classes)&&(a.className=a.className?a.className+(" "+b._classes):b._classes);b._instanceId&&!a.getAttribute("data-instance")&&a.setAttribute("data-instance",b._instanceId)},registerInstance:function(a,b,c){if(!a._instanceId){if("object"!==typeof a)throw new TypeError("1st argument must be a JavaScript object!"); if(!a._options||!a._options.skipRegister){if(!this.isDOMElement(b))throw new TypeError("2nd argument must be a DOM element!");if(void 0!==c&&"string"!==typeof c)throw new TypeError("3rd argument must be a string!");c=(c||"instance")+ ++f;e[c]=a;a._instanceId=c;a=b.getAttribute("data-instance");a=null!==a?[a,c].join(" "):c;b.setAttribute("data-instance",a)}}},unregisterInstance:function(a){delete e[a]},getInstance:function(a){if(this.isDOMElement(a)&&(a=a.getAttribute("data-instance"),null===a))throw Error("argument is not a DOM instance element!"); a=a.split(" ");var b,c,d,f=a.length,h=[];for(d=0;d<f;++d){c=a[d];if(!c)throw Error("Element is not a JS instance!");b=e[c];if(!b)throw Error('Instance "'+c+'" not found!');h.push(b)}return 1===f?h[0]:h},getInstanceFromSelector:function(a){a=b.select(a)[0];if(!a)throw Error("Element not found!");return this.getInstance(a)},getInstanceIds:function(){var a=[],b;for(b in e)e.hasOwnProperty(b)&&a.push(b);return a},getInstances:function(){var a=[],b;for(b in e)e.hasOwnProperty(b)&&a.push(e[b]);return a}, destroyComponent:function(){Ink.Util.Aux.unregisterInstance(this._instanceId);this._element.parentNode.removeChild(this._element)}};return h}); Ink.createModule("Ink.UI.Modal","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(a,c,b,d,e,f){var h=function(a,h){if("string"!==typeof a&&"object"!==typeof a&&"undefined"===typeof h.markup)throw"Invalid Modal selector";if("string"===typeof a){if(""!==a){this._element=e.select(a);if(0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else a&&(this._element=a);this._options= {width:void 0,height:void 0,shadeClass:void 0,modalClass:void 0,trigger:void 0,triggerEvent:"click",markup:void 0,onShow:void 0,onDismiss:void 0,closeOnClick:!1,responsive:!0,disableScroll:!0};this._handlers={click:Ink.bindEvent(this._onClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:Ink.bindEvent(this._onResize,this)};this._wasDismissed=!1;if(this._markupMode=this._element?b.hasClassName(this._element,"O-Ip"):!1){this._modalDiv=this._element;this._modalDivStyle=this._modalDiv.style; this._modalShadow=this._modalDiv.parentNode;this._modalShadowStyle=this._modalShadow.style;this._contentContainer=e.select(".Ip-Jp",this._modalDiv);if(!this._contentContainer.length)throw'Missing div with class "modal-body"';this._contentContainer=this._contentContainer[0];this._options.markup=this._contentContainer.innerHTML;this._options=Ink.extendObj(this._options,d.data(this._element))}else this._modalShadow=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDiv= document.createElement("div"),this._modalDivStyle=this._modalDiv.style,this._element&&(this._options.markup=this._element.innerHTML),b.addClassName(this._modalShadow,"O-Fp"),b.addClassName(this._modalDiv,"O-Ip"),b.addClassName(this._modalDiv,"O-Xa"),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);this._options=Ink.extendObj(this._options,h||{});this._markupMode||this.setContentMarkup(this._options.markup);"string"===typeof this._options.shadeClass&&f.each(this._options.shadeClass.split(" "), Ink.bind(function(a){b.addClassName(this._modalShadow,a.trim())},this));"string"===typeof this._options.modalClass&&f.each(this._options.modalClass.split(" "),Ink.bind(function(a){b.addClassName(this._modalDiv,a.trim())},this));if("trigger"in this._options&&"undefined"!==typeof this._options.trigger){var n,k;if("string"===typeof this._options.trigger&&(n=e.select(this._options.trigger),0<n.length))for(k=0;k<n.length;k++)c.observe(n[k],this._options.triggerEvent,Ink.bindEvent(this._init,this))}else this._init()}; h.prototype={_init:function(g){g&&c.stop(g);g="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._resizeTimeout=null;b.addClassName(this._modalShadow,"O-Fp");this._modalShadowStyle.display=this._modalDivStyle.display="block";setTimeout(Ink.bind(function(){b.addClassName(this._modalShadow,"Hp");b.addClassName(this._modalDiv,"Hp")},this),100);this._contentElement=this._modalDiv;this._shadeElement=this._modalShadow;this.setContentMarkup(this._options.markup);"undefined"!== typeof this._options.width?(this._modalDivStyle.width=this._options.width,-1===this._options.width.indexOf("%")&&(this._modalDivStyle.maxWidth=d.elementWidth(this._modalDiv)+"px")):this._modalDivStyle.maxWidth=this._modalDivStyle.width=d.elementWidth(this._modalDiv)+"px";parseInt(g.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=~~(0.9*parseInt(g.clientWidth,10))+"px");"undefined"!==typeof this._options.height?(this._modalDivStyle.height=this._options.height,-1=== this._options.height.indexOf("%")&&(this._modalDivStyle.maxHeight=d.elementHeight(this._modalDiv)+"px")):this._modalDivStyle.maxHeight=this._modalDivStyle.height=d.elementHeight(this._modalDiv)+"px";parseInt(g.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=~~(0.9*parseInt(g.clientHeight,10))+"px");this.originalStatus={viewportHeight:parseInt(g.clientHeight,10),viewportWidth:parseInt(g.clientWidth,10),width:parseInt(this._modalDivStyle.maxWidth,10),height:parseInt(this._modalDivStyle.maxHeight, 10)};this._options.responsive?(this._onResize(!0),c.observe(window,"resize",this._handlers.resize)):(this._resizeContainer(),this._reposition());if(this._options.onShow)this._options.onShow(this);this._options.disableScroll&&this._disableScroll();c.observe(this._shadeElement,"click",this._handlers.click);c.observe(document,"keydown",this._handlers.keyDown);a.registerInstance(this,this._shadeElement,"Ip")},_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%";this._modalDivStyle.marginTop= "-"+~~(d.elementHeight(this._modalDiv)/2)+"px";this._modalDivStyle.marginLeft="-"+~~(d.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(a){"boolean"===typeof a?this._timeoutResizeFunction.call(this):!this._resizeTimeout&&"object"===typeof a&&(this._resizeTimeout=setTimeout(Ink.bind(this._timeoutResizeFunction,this),250))},_timeoutResizeFunction:function(){var a="CSS1Compat"===document.compatMode?document.documentElement:document.body,b=parseInt(a.clientHeight,10),a=parseInt(a.clientWidth, 10);this._modalDivStyle.width=a>this.originalStatus.width?this._modalDivStyle.maxWidth:~~(0.9*a)+"px";b>this.originalStatus.height&&parseInt(this._modalDivStyle.maxHeight,10)>=d.elementHeight(this._modalDiv)?this._modalDivStyle.height=this._modalDivStyle.maxHeight:this._modalDivStyle.height=~~(0.9*b)+"px";this._resizeContainer();this._reposition();this._resizeTimeout=void 0},_onClick:function(a){var f=c.element(a);if(b.hasClassName(f,"O-Bg")||b.hasClassName(f,"O-Co")||this._options.closeOnClick&& (!d.descendantOf(this._shadeElement,f)||f===this._shadeElement)){for(var h=e.select(".O-Zn",this._shadeElement),k=h.length,p=0;p<k;p++)if(d.descendantOf(h[p],f))return;c.stop(a);this.dismiss()}},_onKeyDown:function(a){27!==a.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden";var a=d.elementHeight(this._modalDiv);this._modalHeader=e.select(".Ip-Kp",this._modalDiv); 0<this._modalHeader.length&&(this._modalHeader=this._modalHeader[0],a-=d.elementHeight(this._modalHeader));this._modalFooter=e.select(".Ip-Lp",this._modalDiv);0<this._modalFooter.length&&(this._modalFooter=this._modalFooter[0],a-=d.elementHeight(this._modalFooter));this._contentContainer.style.height=a+"px";a!==d.elementHeight(this._contentContainer)&&(this._contentContainer.style.height=~~(a-(d.elementHeight(this._contentContainer)-a))+"px");this._markupMode||(this._contentContainer.style.overflow= this._contentContainer.style.overflowX="hidden",this._contentContainer.style.overflowY="auto",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible")},_disableScroll:function(){this._oldScrollPos=d.scroll();this._onScrollBinded=Ink.bindEvent(function(a){var b=c.element(a);d.descendantOf(this._modalShadow,b)||(c.stop(a),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))},this);c.observe(window,"scroll",this._onScrollBinded); c.observe(document,"touchmove",this._onScrollBinded)},dismiss:function(){if(this._options.onDismiss)this._options.onDismiss(this);this._options.disableScroll&&(c.stopObserving(window,"scroll",this._onScrollBinded),c.stopObserving(document,"touchmove",this._onScrollBinded));this._options.responsive&&c.stopObserving(window,"resize",this._handlers.resize);if(this._markupMode){b.removeClassName(this._modalDiv,"Hp");b.removeClassName(this._modalShadow,"Hp");var a,d=Ink.bindEvent(function(){a&&(this._modalShadowStyle.display= "none",c.stopObserving(document,"transitionend",d),c.stopObserving(document,"oTransitionEnd",d),c.stopObserving(document,"webkitTransitionEnd",d),clearInterval(a),a=void 0)},this);c.observe(document,"transitionend",d);c.observe(document,"oTransitionEnd",d);c.observe(document,"webkitTransitionEnd",d);a||(a=setInterval(Ink.bind(function(){0<this._modalShadowStyle.opacity||(this._modalShadowStyle.display="none",clearInterval(a),a=void 0)},this),500))}else this._modalShadow.parentNode.removeChild(this._modalShadow), this.destroy()},destroy:function(){a.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(a){if(this._markupMode)this._contentContainer.innerHTML=""+a;else{this._modalDiv.innerHTML=""+a;this._contentContainer=e.select(".Ip-Jp",this._modalDiv);if(!this._contentContainer.length){a=e.select(".Ip-Kp",this._modalDiv);var c=e.select(".Ip-Lp",this._modalDiv);f.each(a,Ink.bind(function(a){a.parentNode.removeChild(a)},this));f.each(c,Ink.bind(function(a){a.parentNode.removeChild(a)}, this));var d=document.createElement("div");b.addClassName(d,"Ip-Jp");d.innerHTML=this._modalDiv.innerHTML;this._modalDiv.innerHTML="";f.each(a,Ink.bind(function(a){this._modalDiv.appendChild(a)},this));this._modalDiv.appendChild(d);f.each(c,Ink.bind(function(a){this._modalDiv.appendChild(a)},this));this._contentContainer=e.select(".modal-Jp",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv;this._resizeContainer()}};return h}); Ink.createModule("Ink.UI.ProgressBar","1",["Ink.Dom.Selector_1","Ink.Dom.Element_1"],function(a,c){var b=function(b,e){if("object"!==typeof b){if("string"!==typeof b)throw"[Ink.UI.ProgressBar] :: Invalid selector";this._element=a.select(b);if(1>this._element.length)throw"[Ink.UI.ProgressBar] :: Selector didn't find any elements";this._element=this._element[0]}else this._element=b;this._options=Ink.extendObj({startValue:0,onStart:function(){},onEnd:function(){}},c.data(this._element));this._options= Ink.extendObj(this._options,e||{});this._value=this._options.startValue;this._init()};b.prototype={_init:function(){this._elementBar=a.select(".bar",this._element);if(1>this._elementBar.length)throw"[Ink.UI.ProgressBar] :: Bar element not found";this._elementBar=this._elementBar[0];this._options.onStart=Ink.bind(this._options.onStart,this);this._options.onEnd=Ink.bind(this._options.onEnd,this);this.setValue(this._options.startValue)},setValue:function(a){this._options.onStart(this._value);a=parseInt(a, 10);isNaN(a)||0>a?a=0:100<a&&(a=100);this._value=a;this._elementBar.style.width=this._value+"%";this._options.onEnd(this._value)}};return b}); Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(a,c,b){return{speed:10,gy:function(a){var b;b=a.offsetTop;if(a.offsetParent)for(;a=a.offsetParent;)b+=a.offsetTop;return b},scrollTop:function(){var a=document.body,b=document.documentElement;return a&&a.scrollTop?a.scrollTop:b&&b.scrollTop?b.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(b,c,f){a.observe(b,c,f)},end:function(b){window.event?(window.event.cancelBubble= !0,window.event.returnValue=!1):a.stop(b)},scroll:function(a){var b=Ink.UI.SmoothScroller.scrollTop(),b=a>b?b+Math.ceil((a-b)/Ink.UI.SmoothScroller.speed):b+(a-b)/Ink.UI.SmoothScroller.speed;window.scrollTo(0,b);(b===a||Ink.UI.SmoothScroller.offsetTop===b)&&clearInterval(Ink.UI.SmoothScroller.interval);Ink.UI.SmoothScroller.offsetTop=b},init:function(){b.run(Ink.UI.SmoothScroller.render)},render:function(){var b=c.select("a.scrollableLink");Ink.UI.SmoothScroller.end(this);for(var e=0;e<b.length;e++){var f= b[e];if(f.href&&-1!==f.href.indexOf("#")&&(f.pathname===location.pathname||"/"+f.pathname===location.pathname))Ink.UI.SmoothScroller.add(f,"click",Ink.UI.SmoothScroller.end),a.observe(f,"click",Ink.bindEvent(Ink.UI.SmoothScroller.clickScroll,this,f))}},clickScroll:function(a,b){Ink.UI.SmoothScroller.end(b);if(null!==b&&null!==b.getAttribute("href")){var f=b.href.indexOf("#");if(-1!==f&&(f=b.href.substr(f+1),f=c.select('a[name="'+f+'"],#'+f),"undefined"!==typeof f[0])){if(-1===b.parentNode.className.indexOf("active")){var h= b.parentNode.parentNode.firstChild;do if("undefined"!==typeof h.tagName&&"LI"===h.tagName.toUpperCase()&&-1!==h.className.indexOf("active")){h.className=h.className.replace("active","");break}while(h=h.nextSibling);b.parentNode.className+=" active"}clearInterval(Ink.UI.SmoothScroller.interval);Ink.UI.SmoothScroller.interval=setInterval("Ink.UI.SmoothScroller.scroll("+Ink.UI.SmoothScroller.gy(f[0])+")",10)}}}}}); Ink.createModule("Ink.UI.SortableList","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(a,c,b,d,e,f){b=function(b,c){this._element=a.elOrSelector(b,"1st argument");if(!a.isDOMElement(b)&&"string"!==typeof b)throw"[Ink.UI.SortableList] :: Invalid selector";if("string"===typeof b){this._element=Ink.Dom.Selector.select(b);if(1>this._element.length)throw"[Ink.UI.SortableList] :: Selector has returned no elements";this._element= this._element[0]}else this._element=b;this._options=Ink.extendObj({dragObject:"li"},Ink.Dom.Element.data(this._element));this._options=Ink.extendObj(this._options,c||{});this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)};this._model=[];this._index=void 0;this._isMoving=!1;if(this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else if("ul"===this._element.nodeName.toLowerCase())this._createdFrom= "DOM";else throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._dragTriggers=e.select(this._options.dragObject,this._element);if(!this._dragTriggers)throw"[Ink.UI.SortableList] :: Drag object not found";this._init()};b.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var b="ontouchstart"in document.documentElement;this._down=b?"touchstart":"mousedown";this._move=b? "touchmove":"mousemove";this._up=b?"touchend":"mouseup";b=document.body;c.observe(b,this._move,this._handlers.move);c.observe(b,this._up,this._handlers.up);this._observe();a.registerInstance(this,this._element,"sortableList")},_observe:function(){c.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var a=this,b=e.select("> li",this._element);f.each(b,function(b){a._model.push(b.innerHTML)})},_generateMarkup:function(){var a=document.createElement("ul"); a.className="unstyled ink-sortable-list";var b=this;f.each(this._model,function(c,d){var e=document.createElement("li");d===b._index&&(e.className="drag");e.innerHTML=""+c;a.appendChild(e)});return a},_getY:function(a){return 0===a.type.indexOf("touch")?a.changedTouches[0].pageY:"number"===typeof a.pageY?a.pageY:a.clientY},_refresh:function(b){var c=this._generateMarkup();this._element.parentNode.replaceChild(c,this._element);this._element=c;a.restoreIdAndClasses(this._element,this);this._dragTriggers= e.select(this._options.dragObject,this._element);b||this._observe()},_onDown:function(b){if(!this._isMoving){var g=c.element(b);if(!f.inArray(g,this._dragTriggers)){for(;!f.inArray(g,this._dragTriggers)&&"body"!==g.nodeName.toLowerCase();)g=g.parentNode;if("body"===g.nodeName.toLowerCase())return}c.stop(b);if("li"!==g.nodeName.toLowerCase())for(;"li"!==g.nodeName.toLowerCase()&&"body"!==g.nodeName.toLowerCase();)g=g.parentNode;this._index=a.childIndex(g);this._height=g.offsetHeight;this._startY=this._getY(b); this._isMoving=!0;document.body.style.cursor="move";this._refresh(!1);return!1}},_onMove:function(a){if(this._isMoving){c.stop(a);a=this._getY(a);var b=a-this._startY,b=(0<b?1:-1)*Math.floor(Math.abs(b)/this._height);if(0!==b&&(b/=Math.abs(b),!(-1===b&&0===this._index||1===b&&this._index===this._model.length-1))){var d=0<b?this._index:this._index+b;this._model.splice(d,2,this._model[0>b?this._index:this._index+b],this._model[d]);this._index+=b;this._startY=a;this._refresh(!1)}}},_onUp:function(a){this._isMoving&& (c.stop(a),this._index=void 0,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()},destroy:a.destroyComponent};return b}); Ink.createModule("Ink.UI.Spy","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(a,c,b,d,e,f){var h=function(b,c){this._rootElement=a.elOrSelector(b,"1st argument");this._options=Ink.extendObj({target:void 0},d.data(this._rootElement));this._options=Ink.extendObj(this._options,c||{});this._options.target=a.elOrSelector(this._options.target,"Target");this._scrollTimeout=null;this._init()};h.prototype={_elements:[],_init:function(){c.observe(document, "scroll",Ink.bindEvent(this._onScroll,this));this._elements.push(this._rootElement)},_onScroll:function(){var a=d.scrollHeight();if(!(a<this._rootElement.offsetTop)){for(var c=0,h=this._elements.length;c<h;c++)if(this._elements[c].offsetTop<=a&&this._elements[c]!==this._rootElement&&this._elements[c].offsetTop>this._rootElement.offsetTop)return;f.each(e.select("a",this._options.target),Ink.bind(function(a){var c="name"in this._rootElement&&this._rootElement.name?"#"+this._rootElement.name:"#"+this._rootElement.id; a.href.substr(a.href.indexOf("#"))===c?b.addClassName(d.findUpwardsByTag(a,"li"),"Dn"):b.removeClassName(d.findUpwardsByTag(a,"li"),"Dn")},this))}}};return h}); Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(a,c,b,d,e){b=function(b,c){if("object"!==typeof b&&"string"!==typeof b)throw"[Sticky] :: Invalid selector defined";if("object"===typeof b)this._rootElement=b;else{this._rootElement=e.select(b);if(0>=this._rootElement.length)throw"[Sticky] :: Can't find any element with the specified selector";this._rootElement=this._rootElement[0]}this._options=Ink.extendObj({offsetBottom:0, offsetTop:0,topElement:void 0,bottomElement:void 0},d.data(this._rootElement));this._options=Ink.extendObj(this._options,c||{});this._options.topElement="undefined"!==typeof this._options.topElement?a.elOrSelector(this._options.topElement,"Top Element"):a.elOrSelector("body","Top Element");this._options.bottomElement="undefined"!==typeof this._options.bottomElement?a.elOrSelector(this._options.bottomElement,"Bottom Element"):a.elOrSelector("body","Top Element");this._computedStyle=window.getComputedStyle? window.getComputedStyle(this._rootElement,null):this._rootElement.currentStyle;this._dims={height:this._computedStyle.height,width:this._computedStyle.width};this._init()};b.prototype={_init:function(){c.observe(document,"scroll",Ink.bindEvent(this._onScroll,this));c.observe(window,"resize",Ink.bindEvent(this._onResize,this));this._calculateOriginalSizes();this._calculateOffsets()},_onScroll:function(){var a="CSS1Compat"===document.compatMode?document.documentElement:document.body;90<100*d.elementWidth(this._rootElement)/ a.clientWidth||649>=a.clientWidth?d.hasAttribute(this._rootElement,"style")&&this._rootElement.removeAttribute("style"):(this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(Ink.bind(function(){var a=d.scrollHeight();if(d.hasAttribute(this._rootElement,"style"))a<=this._options.offsetTop?this._rootElement.removeAttribute("style"):document.body.scrollHeight-(a+parseInt(this._dims.height,10))<this._options.offsetBottom?(this._rootElement.style.position="fixed",this._rootElement.style.top= "auto",this._options.offsetBottom<parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+a),10)?this._rootElement.style.bottom=this._options.originalOffsetBottom+"px":this._rootElement.style.bottom=this._options.offsetBottom-parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+a),10)+"px",this._rootElement.style.width=this._options.originalWidth+"px"):document.body.scrollHeight-(a+parseInt(this._dims.height,10))>=this._options.offsetBottom&&(this._rootElement.style.position= "fixed",this._rootElement.style.bottom="auto",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px");else{if(a<=this._options.offsetTop)return;this._rootElement.style.position="fixed";this._rootElement.style.bottom="auto";this._rootElement.style.top=this._options.offsetTop+"px";this._rootElement.style.width=this._options.originalWidth+"px"}this._scrollTimeout=void 0},this),0))},_onResize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout); this._resizeTimeout=setTimeout(Ink.bind(function(){this._rootElement.removeAttribute("style");this._calculateOriginalSizes();this._calculateOffsets()},this),0)},_calculateOffsets:function(){if("undefined"!==typeof this._options.topElement)if("body"!==this._options.topElement.nodeName.toLowerCase()){var a=d.elementHeight(this._options.topElement),b=d.elementTop(this._options.topElement);this._options.offsetTop=parseInt(a,10)+parseInt(b,10)+parseInt(this._options.originalOffsetTop,10)}else this._options.offsetTop= parseInt(this._options.originalOffsetTop,10);"undefined"!==typeof this._options.bottomElement&&("body"!==this._options.bottomElement.nodeName.toLowerCase()?(a=d.elementHeight(this._options.bottomElement),this._options.offsetBottom=parseInt(a,10)+parseInt(this._options.originalOffsetBottom,10)):this._options.offsetBottom=parseInt(this._options.originalOffsetBottom,10));this._onScroll()},_calculateOriginalSizes:function(){this._options.originalOffsetTop=parseInt(this._options.offsetTop,10);this._options.originalOffsetBottom= parseInt(this._options.offsetBottom,10);this._options.originalTop=parseInt(this._rootElement.offsetTop,10);if(isNaN(this._options.originalWidth=parseInt(this._dims.width,10)))this._options.originalWidth=0;this._options.originalWidth=parseInt(this._computedStyle.width,10)}};return b}); Ink.createModule("Ink.UI.Table","1","Ink.Net.Ajax_1 Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Util.String_1".split(" "),function(a,c,b,d,e,f,h,g){var l=function(a,b){this._rootElement=c.elOrSelector(a,"1st argument");if("table"!==this._rootElement.nodeName.toLowerCase())throw"[Ink.UI.Table] :: The element is not a table";this._options=Ink.extendObj({pageSize:void 0,endpoint:void 0,loadMode:"full",allowResetSorting:!1,visibleFields:void 0}, e.data(this._rootElement));this._options=Ink.extendObj(this._options,b||{});this._markupMode="undefined"===typeof this._options.endpoint;this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.split(","));this._handlers={click:Ink.bindEvent(this._onClick,this)};this._originalFields=[];this._sortableFields={};this._originalData=this._data=[];this._headers=[];this._pagination=null;this._totalRows=0;this._init()};l.prototype={_init:function(){if(this._markupMode){if(this._setHeadersHandlers(), h.each(f.select("tbody tr",this._rootElement),Ink.bind(function(a){this._data.push(a)},this)),this._originalData=this._data.slice(0),this._totalRows=this._data.length,"pageSize"in this._options&&"undefined"!==typeof this._options.pageSize){for(this._pagination=this._rootElement.nextSibling;1!==this._pagination.nodeType;)this._pagination=this._pagination.nextSibling;if("nav"!==this._pagination.nodeName.toLowerCase())throw"[Ink.UI.Table] :: Missing the pagination markup or is mis-positioned";this._pagination= new (Ink.getModule("Ink.UI.Pagination",1))(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(a){this._paginate(a._current+1)},this)});this._paginate(1)}}else this._getData(this._options.endpoint,!0)},_onClick:function(a){b.stop(a);a=b.element(a);var d=e.data(a),l,r="pageSize"in this._options&&"undefined"!==typeof this._options.pageSize;if(!("th"!==a.nodeName.toLowerCase()||!("sortable"in d)||"true"!==d.sortable.toString())){d=-1;if(h.inArray(a,this._headers))for(l= 0;l<this._headers.length;l++)if(this._headers[l]===a){d=l;break}if(!this._markupMode&&r){for(var u in this._sortableFields)u!=="col_"+d&&(this._sortableFields[u]="none",this._headers[u.replace("col_","")].innerHTML=g.stripTags(this._headers[u.replace("col_","")].innerHTML));"asc"===this._sortableFields["col_"+d]?(this._sortableFields["col_"+d]="desc",this._headers[d].innerHTML=g.stripTags(this._headers[d].innerHTML)+'<i class="Rb-Oi-Zd"></i>'):(this._sortableFields["col_"+d]="asc",this._headers[d].innerHTML= g.stripTags(this._headers[d].innerHTML)+'<i class="Rb-Oi-Ae"></i>');this._pagination.setCurrent(this._pagination._current)}else if(-1!==d){if("desc"===this._sortableFields["col_"+d]&&this._options.allowResetSorting&&"true"===this._options.allowResetSorting.toString())this._headers[d].innerHTML=g.stripTags(this._headers[d].innerHTML),this._sortableFields["col_"+d]="none",this._data=this._originalData.slice(0);else{for(u in this._sortableFields)u!=="col_"+d&&(this._sortableFields[u]="none",this._headers[u.replace("col_", "")].innerHTML=g.stripTags(this._headers[u.replace("col_","")].innerHTML));this._sort(d);"asc"===this._sortableFields["col_"+d]?(this._data.reverse(),this._sortableFields["col_"+d]="desc",this._headers[d].innerHTML=g.stripTags(this._headers[d].innerHTML)+'<i class="Rb-Oi-Zd"></i>'):(this._sortableFields["col_"+d]="asc",this._headers[d].innerHTML=g.stripTags(this._headers[d].innerHTML)+'<i class="Rb-Oi-Ae"></i>')}var t=f.select("tbody",this._rootElement)[0];c.cleanChildren(t);h.each(this._data,function(a){t.appendChild(a)}); this._pagination.setCurrent(0);this._paginate(1)}}},_paginate:function(a){h.each(this._data,Ink.bind(function(b,c){c>=(a-1)*parseInt(this._options.pageSize,10)&&c<(a-1)*parseInt(this._options.pageSize,10)+parseInt(this._options.pageSize,10)?d.removeClassName(b,"N-M"):d.addClassName(b,"N-M")},this))},_sort:function(a){this._data.sort(Ink.bind(function(b,c){var g=f.select("td",b)[a].innerText,d=f.select("td",c)[a].innerText,e=RegExp(/\d/g);!isNaN(g)&&e.test(g)?g=parseInt(g,10):isNaN(g)||(g=parseFloat(g)); !isNaN(d)&&e.test(d)?d=parseInt(d,10):isNaN(d)||(d=parseFloat(d));return g===d?0:g>d?1:-1},this))},_setHeaders:function(a,b){var c,g,d,e;if(0===f.select("thead",this._rootElement).length)for(c in g=this._rootElement.createTHead(),d=g.insertRow(0),a)this._options.visibleFields&&-1===this._options.visibleFields.indexOf(c)||(e=document.createElement("th"),g=a[c],"sortable"in g&&"true"===g.sortable.toString()&&e.setAttribute("data-sortable","true"),"label"in g&&(e.innerText=g.label),this._originalFields.push(c), d.appendChild(e));else for(c in g=b[0],g)this._options.visibleFields&&-1===this._options.visibleFields.indexOf(c)||this._originalFields.push(c)},_setHeadersHandlers:function(){b.observe(f.select("thead",this._rootElement)[0],"click",this._handlers.click);this._headers=f.select("thead tr th",this._rootElement);h.each(this._headers,Ink.bind(function(a,b){var c=e.data(a);"sortable"in c&&"true"===c.sortable.toString()&&(this._sortableFields["col_"+b]="none")},this))},_setData:function(a){var b,c,g,d, e,h;c=f.select("tbody",this._rootElement);0===c.length?(c=document.createElement("tbody"),this._rootElement.appendChild(c)):(c=c[0],c.innerHTML="");this._data=[];for(e in a){g=document.createElement("tr");c.appendChild(g);h=0;for(b in a[e])this._options.visibleFields&&-1===this._options.visibleFields.indexOf(b)||(d=g.insertCell(h++),d.innerHTML=a[e][b]);this._data.push(g)}this._originalData=this._data.slice(0)},setEndpoint:function(a,b){this._markupMode||(this._options.endpoint=a,this._pagination.setCurrent(b? parseInt(b,10):0))},_setPagination:function(){"pageSize"in this._options&&"undefined"!==typeof this._options.pageSize&&!this._pagination&&(this._pagination=document.createElement("nav"),this._pagination.className="O-Xm",this._rootElement.parentNode.insertBefore(this._pagination,this._rootElement.nextSibling),this._pagination.appendChild(document.createElement("ul")).className="En",this._pagination=new (Ink.getModule("Ink.UI.Pagination",1))(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize), onChange:Ink.bind(function(){this._getData(this._options.endpoint)},this)}))},_getData:function(a){Ink.requireModules(["Ink.Util.Url_1"],Ink.bind(function(b){b=b.parseUrl(a);var c="pageSize"in this._options&&"undefined"!==typeof this._options.pageSize,g=this._pagination?this._pagination._current+1:1;b.query=b.query?b.query.split("&"):[];if(c){b.query.push("rows_per_page="+this._options.pageSize);b.query.push("page="+g);for(var d in this._sortableFields)if("none"!==this._sortableFields[d]){b.query.push("sortField="+ this._originalFields[parseInt(d.replace("col_",""),10)]);b.query.push("sortOrder="+this._sortableFields[d]);break}this._getDataViaAjax(a+"?"+b.query.join("&"))}else this._getDataViaAjax(a)},this))},_getDataViaAjax:function(b){var c="pageSize"in this._options&&"undefined"!==typeof this._options.pageSize;new a(b,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(a){200===a.status&&(a=JSON.parse(a.responseText),0===this._headers.length&&(this._setHeaders(a.headers, a.rows),this._setHeadersHandlers()),this._setData(a.rows),c?this._totalRows&&parseInt(a.totalRows,10)!==parseInt(this._totalRows,10)?(this._totalRows=a.totalRows,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=a.totalRows:this._totalRows&&a.rows.length!==parseInt(this._totalRows,10)?(this._totalRows=a.rows.length,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=a.rows.length,this._setPagination())},this)})}}; return l}); Ink.createModule("Ink.UI.Tabs","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(a,c,b,d,e,f){var h=function(b,c){if(a.isDOMElement(b))this._element=b;else{b=e.select(b);if(0===b.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=b[0]}this._options=Ink.extendObj({preventUrlChange:!1,active:void 0,disabled:[],onBeforeChange:void 0,onChange:void 0},d.data(b));this._options= Ink.extendObj(this._options,c||{});this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(this._onResize,this)};this._init()};h.prototype={_init:function(){this._menu=e.select(".Op-Pp",this._element)[0];this._menuTabs=this._getChildElements(this._menu);this._contentTabs=e.select(".Op-H",this._element);this._initializeDom();this._observe();this._setFirstActive();this._changeTab(this._activeMenuLink);this._handlers.resize(); a.registerInstance(this,this._element,"Op")},_initializeDom:function(){for(var a=0;a<this._contentTabs.length;a++)b.hide(this._contentTabs[a])},_observe:function(){f.each(this._menuTabs,Ink.bind(function(a){a=e.select("a",a)[0];f.inArray(a.getAttribute("href"),this._options.disabled)?this.disable(a):this.enable(a)},this));c.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){this._activeContentTab=e.select(window.location.hash,this._element)[0]||e.select(this._hashify(this._options.active), this._element)[0]||e.select(".Op-H",this._element)[0];this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id"));this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(a,c){if(c&&"undefined"!==typeof this._options.onBeforeChange)this._options.onBeforeChange(this);var d=a.getAttribute("href");b.removeClassName(this._activeMenuTab,"Dn");b.removeClassName(this._activeContentTab,"Dn");b.addClassName(this._activeContentTab,"N-M");this._activeMenuLink=a;this._activeMenuTab= this._activeMenuLink.parentNode;this._activeContentTab=e.select(d.substr(d.indexOf("#")),this._element)[0];b.addClassName(this._activeMenuTab,"Dn");b.addClassName(this._activeContentTab,"Dn");b.removeClassName(this._activeContentTab,"N-M");b.show(this._activeContentTab);if(c&&"undefined"!==typeof this._options.onChange)this._options.onChange(this)},_onTabClicked:function(a){c.stop(a);a=c.findElement(a,"A");"a"===a.nodeName.toLowerCase()&&("true"!==this._options.preventUrlChange.toString()&&(window.location.hash= a.getAttribute("href").substr(a.getAttribute("href").indexOf("#"))),a!==this._activeMenuLink&&this.changeTab(a))},_onDisabledTabClicked:function(a){c.stop(a)},_onResize:function(){var c=a.currentLayout();c!==this._lastLayout&&(c===a.Layouts.SMALL||c===a.Layouts.MEDIUM?(b.removeClassName(this._menu,"Ym"),b.removeClassName(this._menu,"V")):(b.addClassName(this._menu,"Ym"),b.addClassName(this._menu,"V")),this._lastLayout=c)},_hashify:function(a){return!a?"":0===a.indexOf("#")?a:"#"+a},_findLinkByHref:function(a){a= this._hashify(a);var b;f.each(this._menuTabs,Ink.bind(function(c){c=e.select("a",c)[0];-1!==c.getAttribute("href").indexOf("#")&&c.getAttribute("href").substr(c.getAttribute("href").indexOf("#"))===a&&(b=c)},this));return b},_getChildElements:function(a){var b=[];a=a.children;for(var c=0;c<a.length;c++)1===a[c].nodeType&&b.push(a[c]);return b},changeTab:function(a){(a=1===a.nodeType?a:this._findLinkByHref(this._hashify(a)))&&!b.hasClassName(a,"O-Fn")&&this._changeTab(a,!0)},disable:function(a){if(a= 1===a.nodeType?a:this._findLinkByHref(this._hashify(a)))c.stopObserving(a,"click",this._handlers.tabClicked),c.observe(a,"click",this._handlers.disabledTabClicked),b.addClassName(a,"O-Fn")},enable:function(a){if(a=1===a.nodeType?a:this._findLinkByHref(this._hashify(a)))c.stopObserving(a,"click",this._handlers.disabledTabClicked),c.observe(a,"click",this._handlers.tabClicked),b.removeClassName(a,"O-Fn")},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab}, activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:a.destroyComponent};return h}); Ink.createModule("Ink.UI.ImageQuery","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(a,c,b,d,e,f){b=function(b,c){if(!a.isDOMElement(b)&&"string"!==typeof b)throw"[ImageQuery] :: Invalid selector";if("string"===typeof b){this._element=e.select(b);if(1>this._element.length)throw"[ImageQuery] :: Selector has returned no elements";if(1<this._element.length){var f;for(f=1;f<this._element.length;f+=1)new Ink.UI.ImageQuery(this._element[f], c)}this._element=this._element[0]}else this._element=b;this._options=Ink.extendObj({queries:[],onLoad:null},d.data(this._element));this._options=Ink.extendObj(this._options,c||{});-1!==(f=this._element.src.lastIndexOf("?"))?(f=this._element.src.substr(f),this._filename=this._element.src.replace(f,"").split("/").pop()+f):this._filename=this._element.src.split("/").pop();this._init()};b.prototype={_init:function(){this._options.queries=f.sortMulti(this._options.queries,"width").reverse();this._handlers= {resize:Ink.bindEvent(this._onResize,this),load:Ink.bindEvent(this._onLoad,this)};"function"===typeof this._options.onLoad&&c.observe(this._element,"onload",this._handlers.load);c.observe(window,"resize",this._handlers.resize);this._handlers.resize.call(this)},_onResize:function(){clearTimeout(a);var a=setTimeout(Ink.bind(function(){if(!this._options.queries||this._options.queries==={})clearTimeout(a);else{var b,c,d;if("number"===typeof window.innerWidth)d=window.innerWidth;else if(document.documentElement&& (document.documentElement.clientWidth||document.documentElement.clientHeight))d=document.documentElement.clientWidth;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))d=document.body.clientWidth;for(b=0;b<this._options.queries.length;b+=1)if(this._options.queries[b].width<=d){c=b;break}"undefined"===typeof c&&(c=this._options.queries.length-1);b=this._options.queries[c].src||this._options.src;"devicePixelRatio"in window&&1<window.devicePixelRatio&&"retina"in this._options&& (b=this._options.queries[c].retina||this._options.retina);this._options.queries[c].file=this._filename;if("function"===typeof b&&(b=b.apply(this,[this._element,this._options.queries[c]]),"string"!==typeof b))throw'[ImageQuery] :: "src" callback does not return a string';for(var e in this._options.queries[c])"src"===e||"retina"===e||(b=b.replace("{:"+e+"}",this._options.queries[c][e]));this._element.src=b;delete this._options.queries[c].file;a=void 0}},this),300)},_onLoad:function(){this._options.onLoad.call(this)}}; return b}); Ink.createModule("Ink.UI.TreeView","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1".split(" "),function(a,c,b,d,e,f){var h=function(b,c){if(!a.isDOMElement(b)&&"string"!==typeof b)throw"[Ink.UI.TreeView] :: Invalid selector";if("string"===typeof b){this._element=e.select(b);if(1>this._element.length)throw"[Ink.UI.TreeView] :: Selector has returned no elements";this._element=this._element[0]}else this._element=b;this._options=Ink.extendObj({node:"li",child:"ul"}, d.data(this._element));this._options=Ink.extendObj(this._options,c||{});this._init()};h.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)};c.observe(this._element,"click",this._handlers.click);var a=e.select(this._options.node,this._element),d;f.each(a,Ink.bind(function(a){b.hasClassName(a,"Ag")||(b.hasClassName(a,"Up")||b.addClassName(a,"Up"),d=e.select(this._options.child,a),f.each(d,Ink.bind(function(a){b.hasClassName(a,"N-M")||b.addClassName(a,"N-M")},this)))}, this))},_onClick:function(a){var d=c.element(a);if("."===this._options.node[0]){if(!b.hasClassName(d,this._options.node.substr(1)))for(;!b.hasClassName(d,this._options.node.substr(1))&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode}else if("#"===this._options.node[0]){if(d.id!==this._options.node.substr(1))for(;d.id!==this._options.node.substr(1)&&"body"!==d.nodeName.toLowerCase();)d=d.parentNode}else if(d.nodeName.toLowerCase()!==this._options.node)for(;d.nodeName.toLowerCase()!==this._options.node&& "body"!==d.nodeName.toLowerCase();)d=d.parentNode;if("body"!==d.nodeName.toLowerCase()){var f=e.select(this._options.child,d);0<f.length&&(c.stop(a),f=f[0],b.hasClassName(f,"N-M")?(b.removeClassName(f,"N-M"),b.addClassName(d,"Ag"),b.removeClassName(d,"Up")):(b.addClassName(f,"N-M"),b.removeClassName(d,"Ag"),b.addClassName(d,"Up")))}}};return h}); Ink.createModule("Ink.UI.Gallery","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Util.Swipe_1".split(" "),function(a,c,b,d,e,f,h){var g=function(a,b){b=Ink.bind(b,a);var c=[a.img.offsetWidth,a.img.offsetHeight];c[0]&&c[1]&&b(c);a.img.onload=Ink.bindEvent(function(){b([this.img.offsetWidth,this.img.offsetHeight])},a)},l=function(b,c){this._element=a.elOrSelector(b,"1st argument");this._options=Ink.extendObj({fullImageMaxWidth:600,fullImageMaxHeight:400, thumbnailMaxWidth:106,layout:0,circular:!1,fixImageSizes:!1},d.data(this._element));this._options=Ink.extendObj(this._options,c||{});this._handlers={navClick:Ink.bindEvent(this._onNavClick,this),paginationClick:Ink.bindEvent(this._onPaginationClick,this),thumbsClick:Ink.bindEvent(this._onThumbsClick,this),focusBlur:Ink.bindEvent(this._onFocusBlur,this),keyDown:Ink.bindEvent(this._onKeyDown,this)};this._isFocused=!1;this._model=[];if(this._options.model instanceof Array)this._model=this._options.model, this._createdFrom="JSON";else if("ul"===this._element.nodeName.toLowerCase())this._createdFrom="DOM";else throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._thumbIndex=this._index=0;if(!isNaN(this._options.layout))if(this._options.layout=parseInt(this._options.layout,10),0===this._options.layout)this._paginationHasPrevNext=this._showDescription=this._showThumbs=!1;else if(1===this._options.layout||2===this._options.layout|| 3===this._options.layout)this._paginationHasPrevNext=this._showDescription=this._showThumbs=!0;else throw new TypeError("supported layouts are 0-3!");null!==this._element.getAttribute("data-fix-image-sizes")&&(this._options.fixImageSizes=!0);this._init()};l.prototype={_init:function(){"DOM"===this._createdFrom&&this._extractModelFromDOM();var b=this._generateMarkup(),d=this._element.parentNode;this._notFirstInit||(a.storeIdAndClasses(this._element,this),this._notFirstInit=!0);d.insertBefore(b,this._element); d.removeChild(this._element);this._element=b;a.restoreIdAndClasses(this._element,this);c.observe(this._paginationEl,"click",this._handlers.paginationClick);c.observe(this._navEl,"click",this._handlers.navClick);this._showThumbs&&c.observe(this._thumbsUlEl,"click",this._handlers.thumbsClick);c.observe(this._element,"mouseover",this._handlers.focusBlur);c.observe(this._element,"mouseout",this._handlers.focusBlur);c.observe(document,"keydown",this._handlers.keyDown);a.registerInstance(this,this._element, "gallery")},_extractModelFromDOM:function(){var a=[],b,c=e.select("> li",this._element);f.each(c,function(c){try{var d={image_full:"",image_thumb:"",title_text:"",title_link:"",description:"",content_overlay:document.createDocumentFragment()},g=e.select("> a[rel=enclosure]",c)[0],f=e.select("> img",g)[0],h=e.select("> a[class=bookmark]",c)[0],l=e.select("span[class=entry-title]",c)[0],p=e.select("> span[class=entry-content]",c)[0],s=e.select("> .content-overlay",c)[0];b=g.getAttribute("data-dims"); null!==b&&(b=b.split(","),b[0]=parseInt(b[0],10),b[1]=parseInt(b[1],10));b&&(!isNaN(b[0])&&!isNaN(b[1]))&&(d.dims=b);d.image_full=g.getAttribute("href");d.image_thumb=f.getAttribute("src");h&&(d.title_link=h.getAttribute("href"));d.title_text=l.innerHTML;p&&(d.description=p.innerHTML);s&&d.content_overlay.appendChild(s);a.push(d)}catch(m){throw console.error("problematic element:"),console.error(c),console.error(m),Error("Problem parsing gallery data from DOM!");}});this._model=a},_generateMarkup:function(){var a= document.createElement("div");a.className="O-Jo";var c=document.createElement("div");c.className="Oo";var d=document.createElement("nav");d.innerHTML='<ul class="unstyled"><li><a href="#" class="Po"></a></li><li><a href="#" class="Qo"></a></li></ul>';this._navEl=d;var e=document.createElement("div");e.className="Ko";var l=document.createElement("ul");this._sliderUlEl=l;var t=this,v=this._options.fullImageMaxWidth,A=this._options.fullImageMaxHeight;f.each(this._model,function(a,b){var c=document.createElement("li"), d=document.createElement("img");d.setAttribute("name","image "+(b+1));d.setAttribute("src",a.image_full);d.setAttribute("alt",a.title_text);c.appendChild(d);if(a.content_overlay)if(1===a.content_overlay.nodeType||11===a.content_overlay.nodeType)a.content_overlay=c.appendChild(a.content_overlay);else if("string"===typeof a.content_overlay){var e=document.createElement("div");e.className="content-overlay";e.innerHTML=a.content_overlay;a.content_overlay=c.appendChild(e)}l.appendChild(c);t._options.fixImageSizes&& (c=function(a){var b=this.img,c=this.data;c.dims||(c.dims=a);var d=[v,A],c=a[0],g=a[1];c>d[0]||g>d[1]?(a=c/g>d[0]/d[1]?d[0]/c:d[1]/g,c=[parseInt(c*a+0.5,10),parseInt(g*a+0.5,10)]):c=a;a=c[0];d=c[1];c=Math.floor((v-a)/2);g=Math.floor((A-d)/2);if(a!==v||d!==A)b.setAttribute("width",a),b.setAttribute("height",d),b=b.style,0<c&&(b.paddingLeft=c+"px"),0<g&&(b.paddingBottom=g+"px")},a.dims?c.call({img:d,data:a},a.dims):g({img:d,data:a},c))});e.appendChild(l);this._sliderEl=e;var z;if(this._showDescription){var q= this._model[this._index];z=document.createElement("div");z.className=["article_text","example"+(3===this._options.layout?2:this._options.layout)].join(" ");z.innerHTML=q.title_link?['<h1><a href="',q.title_link,'">',q.title_text,"</a></h1>",q.description].join(""):["<h1>",q.title_text,"</h1>",q.description].join("");this._articleTextDivEl=z}var s;this._showThumbs&&(s=document.createElement("div"),s.className="thumbs",l=document.createElement("ul"),l.className="unstyled",f.each(this._model,function(a, b){var c=document.createElement("li"),d=document.createElement("a");d.setAttribute("href","#");var g=document.createElement("img");g.setAttribute("name","thumb "+(b+1));g.setAttribute("src",a.image_thumb);g.setAttribute("alt",b+1);var e=document.createElement("span");e.innerHTML=a.title_text;d.appendChild(g);d.appendChild(e);c.appendChild(d);l.appendChild(c)}),s.appendChild(l),this._thumbsDivEl=s,this._thumbsUlEl=l);var m=document.createElement("div");m.className="pagination";this._paginationHasPrevNext&& (q=document.createElement("a"),q.setAttribute("href","#"),q.className="previous",m.appendChild(q));f.each(this._model,function(a,b){var c=document.createElement("a");c.setAttribute("href","#");c.setAttribute("data-index",b);b===t._index&&(c.className="active");m.appendChild(c)});this._paginationHasPrevNext&&(q=document.createElement("a"),q.setAttribute("href","#"),q.className="next",m.appendChild(q));this._paginationEl=m;if(0===this._options.layout)c.appendChild(d),c.appendChild(e),c.appendChild(m), a.appendChild(c);else if(1===this._options.layout||2===this._options.layout||3===this._options.layout)c.appendChild(d),c.appendChild(e),c.appendChild(z),a.appendChild(c),3===this._options.layout?(this._thumbsUlEl.className="thumbs unstyled",b.addClassName(a,"rightNav"),a.appendChild(this._thumbsUlEl)):(s.appendChild(m),a.appendChild(s));this._swipeDir="x";this._swipeThumbsDir=0===this._options.layout?"":3===this._options.layout?"y":"x";h._supported&&new h(a,{callback:Ink.bind(function(b,c){var d= this._isMeOrParent(c.target,this._thumbsUlEl),g=d?!1:this._isMeOrParent(c.target,a);!d&&!g||d&&!this._swipeThumbsDir||g&&c.axis!==this._swipeDir||d&&c.axis!==this._swipeThumbsDir||(0>c.dr[0]?d?this.thumbNext():this.next():d?this.thumbPrevious():this.previous())},this),maxDuration:0.4,minDist:50});return a},_isMeOrParent:function(a,b){if(a){do{if(a===b)return!0;a=a.parentNode}while(a);return!1}},_onNavClick:function(a){var d=c.element(a);if(b.hasClassName(d,"Qo"))d=-1;else if(b.hasClassName(d,"Po"))d= 1;else return;c.stop(a);this.goTo(d,!0)},_onPaginationClick:function(a){var d=c.element(a),g=d.getAttribute("data-index"),e=!1;if(b.hasClassName(d,"Qo"))g=-1,e=!0;else if(b.hasClassName(d,"Po"))g=1,e=!0;else{if(null===g)return;g=parseInt(g,10)}c.stop(a);e?this.thumbGoTo(g,!0):this.goTo(g)},_onThumbsClick:function(a){var b=c.element(a);if("img"!==b.nodeName.toLowerCase())if("span"===b.nodeName.toLowerCase())b=e.select("> img",b.parentNode)[0];else return;c.stop(a);a=parseInt(b.getAttribute("alt"), 10)-1;this.goTo(a)},_onFocusBlur:function(a){this._isFocused="mouseover"===a.type},_onKeyDown:function(a){if(this._isFocused){var b=a.keyCode;if(37===b)this.previous();else if(39===b)this.next();else return;c.stop(a)}},_validateValue:function(b,c,d){if(!a.isInteger(b))throw new TypeError("1st parameter must be an integer number!");if(void 0!==c&&!1!==c&&!0!==c)throw new TypeError("2nd parameter must either be boolean or ommitted!");d=d?this._thumbIndex:this._index;c&&(b+=d);if(this._options.circular)0> b?b=this._model.length-1:b>=this._model.length&&(b=0);else if(0>b||b>=this._model.length||b===d)return!1;return b},getIndex:function(){return this._index},getLength:function(){return this._model.length},goTo:function(a,c){a=this._validateValue(a,c,!1);if(!1!==a){this._index=a;var d=e.select("> a",this._paginationEl),g=this;f.each(d,function(a,c){b.setClassName(a,"Dn",c-(g._paginationHasPrevNext?1:0)===g._index)});this._sliderUlEl.style.marginLeft=["-",this._options.fullImageMaxWidth*this._index,"px"].join(""); this._showDescription&&(d=this._model[this._index],this._articleTextDivEl.innerHTML=d.title_link?['<h1><a href="',d.title_link,'">',d.title_text,"</a></h1>",d.description].join(""):["<h1>",d.title_text,"</h1>",d.description].join(""))}},thumbGoTo:function(a,b){a=this._validateValue(a,b,!0);!1!==a&&(this._thumbIndex=a,this._thumbsUlEl.style["margin"+("x"===this._swipeThumbsDir?"Left":"Top")]=["-",this._options.thumbnailMaxWidth*this._thumbIndex,"px"].join(""))},previous:function(){this.goTo(-1,!0)}, next:function(){this.goTo(1,!0)},thumbPrevious:function(){this.thumbGoTo(-1,!0)},thumbNext:function(){this.thumbGoTo(1,!0)},destroy:a.destroyComponent};return l}); Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Css_1","Ink.Util.Validator_1"],function(a,c){return{version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"}, "ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(a,c){this._free();c=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},c||{});"string"===typeof a&&(a=document.getElementById(a));if(null===a)return!1;this.element=a;if("undefined"===typeof this.element.id||null=== this.element.id||""===this.element.id)this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random());this.custom=c.customFlag;this.confirmGroup=c.confirmGroup;var e=this._validateElements();if(0<e.length){if(c.onError)c.onError(e);else this._showError(a,e);return!1}c.onError||this._clearError(a);this._clearCache();if(c.onSuccess)c.onSuccess();return!0},reset:function(){this._clearError();this._clearCache()},_free:function(){this.element=null;this.confirmGroup=this.custom=!1},_clearCache:function(){this.element= null;this.elements=[];this.confirmGroup=this.custom=!1},_getElements:function(){this.elements[this.element.id]=[];this.confirmElms[this.element.id]=[];console.log(this.element);console.log(this.element.elements);for(var b=this.element.elements,c=!1,e=0,f=b.length;e<f;e++)if(c=b[e],null!==c.getAttribute("type")&&"radio"===c.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||c.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length- 1].getAttribute("type")&&c.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var h in this._flagMap)if(a.hasClassName(c,h)){this.elements[this.element.id].push(c);break}}else{for(var g in this._flagMap)if(a.hasClassName(c,g)&&"ink-fv-confirm"!==g){this.elements[this.element.id].push(c);break}a.hasClassName(c,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(c),this.hasConfirm[this.element.id]=!0)}debugger},_validateElements:function(){var b; this._getElements();"undefined"!==typeof this.hasConfirm[this.element.id]&&!0===this.hasConfirm[this.element.id]&&(b=this._makeConfirmGroups());for(var c=[],e=!1,f=!1,h,g=0,l=this.elements[this.element.id].length;g<l;g++)if(h=!1,e=this.elements[this.element.id][g],!e.disabled)for(var n in this._flagMap)a.hasClassName(e,n)&&("ink-fv-custom"!==n&&"ink-fv-confirm"!==n?this._isValid(e,n)||(h?c[c.length-1].errors.push(n):(c.push({elm:e,errors:[n]}),h=!0)):"ink-fv-confirm"!==n&&(f=this._isCustomValid(e), 0<f.length&&c.push({elm:e,errors:[n],custom:f})));return c=this._validateConfirmGroups(b,c)},_validateConfirmGroups:function(a,c){var e=!1,f;for(f in a)e=a[f],2===e.length&&e[0].value!==e[1].value&&c.push({elm:e[1],errors:["ink-fv-confirm"]});return c},_makeConfirmGroups:function(){var b;if(this.confirmGroup&&0<this.confirmGroup.length){b={};for(var c=!1,e=!1,f=0,h=this.confirmElms[this.element.id].length;f<h;f++)for(var c=this.confirmElms[this.element.id][f],g=0,l=this.confirmGroup.length;g<l;g++)e= this.confirmGroup[g],a.hasClassName(c,e)&&("undefined"===typeof b[e]?b[e]=[c]:b[e].push(c))}else 2===this.confirmElms[this.element.id].length&&(b={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]});return b},_isCustomValid:function(b){for(var c=[],e=!1,f=0,h=this.custom.length;f<h;f++)e=this.custom[f],a.hasClassName(b,e.flag)&&(e.callback(b,e.msg)||c.push({flag:e.flag,msg:e.msg}));return c},_isValid:function(b,d){switch(d){case "ink-fv-required":if("select"=== b.nodeName.toLowerCase()){if(0<b.selectedIndex)return!0;break}if("checkbox"!==b.getAttribute("type")&&"radio"!==b.getAttribute("type")){if(""!==this._trim(b.value))return!0}else if("checkbox"===b.getAttribute("type")){if(!0===b.checked)return!0}else if("radio"===b.getAttribute("type")){var e=b.form[b.name];"undefined"===typeof e.length&&(e=[e]);for(var f=!1,h=0,g=e.length;h<g;h++)!0===e[h].checked&&(f=!0);return f}break;case "ink-fv-email":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break; else return!0;else if(c.mail(b.value))return!0;break;case "ink-fv-url":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break;else return!0;else if(c.url(b.value))return!0;break;case "ink-fv-number":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break;else return!0;else if(!isNaN(Number(b.value)))return!0;break;case "ink-fv-phone_pt":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break;else return!0;else if(c.isPTPhone(b.value))return!0;break; case "ink-fv-phone_cv":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break;else return!0;else if(c.isCVPhone(b.value))return!0;break;case "ink-fv-phone_ao":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break;else return!0;else if(c.isAOPhone(b.value))return!0;break;case "ink-fv-phone_mz":if(""===this._trim(b.value))if(a.hasClassName(b,"ink-fv-required"))break;else return!0;else if(c.isMZPhone(b.value))return!0;break;case "ink-fv-date":if(""===this._trim(b.value)){if(!a.hasClassName(b, "ink-fv-required"))return!0}else{e=Ink.getModule("Ink.Dom.Element",1).data(b);f="yyyy-mm-dd";a.hasClassName(b,"ink-datepicker")&&"format"in e?f=e.format:"validFormat"in e&&(f=e.validFormat);if(!(f in c._dateParsers)){e=[];for(val in c._dateParsers)e.push(val);throw"The attribute data-valid-format must be one of the following values: "+e.join(",");}return c.isDate(f,b.value)}}return!1},_showError:function(b,c){this._clearError(b);for(var e=!1,f=0,h=c.length;f<h;f++)if(e=c[f].elm,"radio"!==e.getAttribute("type")){var g= document.createElement("p");g.className=this._errorClassName;g.className+=" "+this._errorTypeErrorClassName;g.innerHTML="ink-fv-custom"!==c[f].errors[0]?this._flagMap[c[f].errors[0]].msg:c[f].custom[0].msg;"checkbox"!==e.getAttribute("type")&&(e.nextSibling.parentNode.insertBefore(g,e.nextSibling),a.hasClassName(e.parentNode,"control")&&(a.addClassName(e.parentNode.parentNode,"validation"),"ink-fv-required"===c[f].errors[0]?a.addClassName(e.parentNode.parentNode,"error"):a.addClassName(e.parentNode.parentNode, "warning")))}else a.hasClassName(e.parentNode.parentNode,"control-group")&&(a.addClassName(e.parentNode.parentNode,"validation"),a.addClassName(e.parentNode.parentNode,"error"))},_clearError:function(b){for(var c=b.getElementsByTagName("p"),e=!1,f=c.length-1;0<=f;f--)e=c[f],a.hasClassName(e,this._errorClassName)&&(a.hasClassName(e.parentNode,"control")&&(a.removeClassName(e.parentNode.parentNode,"validation"),a.removeClassName(e.parentNode.parentNode,"error"),a.removeClassName(e.parentNode.parentNode, "warning")),a.hasClassName(e,"tip")&&a.hasClassName(e,"Pb")&&e.parentNode.removeChild(e));b=b.getElementsByTagName("ul");for(f=b.length-1;0<=f;f--)e=b[f],a.hasClassName(e,"control-group")&&(a.removeClassName(e,"validation"),a.removeClassName(e,"error"))},_trim:function(a){if("string"===typeof a)return a.replace(/^\s+|\s+$|\n+$/g,"")}}}); Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(a,c,b){return{debug:!1,_elements:{},add:function(a,b){var c=Ink.extendObj({hoverclass:!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},b||{});a=Ink.i(a);c.accept&&c.accept.constructor===Array&&(c.accept=c.accept.join());this._elements[a.id]={options:c};this.update(a.id)},updateAll:function(){for(var a in this._elements)this._elements.hasOwnProperty(a)&&this.update(Ink.i(a))},update:function(b){b= Ink.i(b);var c=this._elements[b.id];c&&(c.left=a.offsetLeft(b),c.top=a.offsetTop(b),c.right=c.left+a.elementWidth(b),c.bottom=c.top+a.elementHeight(b))},remove:function(a){a=Ink.i(a);delete this._elements[a.id]},action:function(a,c,f,h){var g,l,n,k,p;for(p in this._elements)if(this._elements.hasOwnProperty(p))if(l=this._elements[p],g=l.options,n=!1,k=Ink.i(p),a.x>=l.left&&a.x<=l.right&&a.y>=l.top&&a.y<=l.bottom){if(g.accept){l=h.className.split(" ");for(var r=0,u=l.length;r<u;r++)0<=g.accept.search(l[r])&& h!==k&&(n=!0)}else n=!0;if(n)if("drag"===c){if(g.hoverclass&&b.addClassName(k,g.hoverclass),g.onHover)g.onHover(h,k)}else if("drop"===c&&g.onDrop&&(g.hoverclass&&b.removeClassName(k,g.hoverclass),g.onDrop))g.onDrop(h,k,f)}else if("drag"===c&&g.hoverclass&&b.removeClassName(k,g.hoverclass),"drop"===c&&g.onDropOut)g.onDropOut(h,k,f)}}}); Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1"],function(a,c,b,d,e){var f=function(a,b){this.init(a,b)};f.prototype={init:function(b,g){var e=Ink.extendObj({constraint:!1,top:0,right:a.pageWidth(),bottom:a.pageHeight(),left:0,handler:!1,revert:!1,cursor:"move",zindex:9999,onStart:!1,onEnd:!1,onDrag:!1,onChange:!1,droppableProxy:!1,mouseAnchor:void 0,skipChildren:!0,debug:!1},g||{});this.options=e;this.element= Ink.i(b);this.zindex=this.position=this.placeholder=this.prevCoords=this.dragged=this.active=this.elmStartPosition=this.handle=!1;this.firstDrag=!0;e.fps&&(this.deltaMs=1E3/e.fps,this.lastRanAt=0);this.handlers={};this.handlers.start=Ink.bindEvent(this._onStart,this);this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this);this.handlers.drag=Ink.bindEvent(this._onDrag,this);this.handlers.end=Ink.bindEvent(this._onEnd,this);this.handlers.selectStart=function(a){c.stop(a);return!1};this.handle= this.options.handler?Ink.i(this.options.handler):this.element;this.handle.style.cursor=e.cursor;!1!==e.right&&(this.options.right=e.right-a.elementWidth(b));!1!==e.bottom&&(this.options.bottom=e.bottom-a.elementHeight(b));c.observe(this.handle,"touchstart",this.handlers.start);c.observe(this.handle,"mousedown",this.handlers.start);d.IE&&c.observe(this.element,"selectstart",this.handlers.selectStart)},destroy:function(){c.stopObserving(this.handle,"touchstart",this.handlers.start);c.stopObserving(this.handle, "mousedown",this.handlers.start);d.IE&&c.stopObserving(this.element,"selectstart",this.handlers.selectStart)},_getPageScroll:function(){return"undefined"!==typeof self.pageXOffset?[self.pageXOffset,self.pageYOffset]:"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.scrollLeft?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[document.body.scrollLeft,document.body.scrollTop]},_getCoords:function(a){var b=this._getPageScroll();return{x:(a.touches? a.touches[0].clientX:a.clientX)+b[0],y:(a.touches?a.touches[0].clientY:a.clientY)+b[1]}},_cloneStyle:function(c,d){d.className=c.className;d.style.borderWidth="0";d.style.padding="0";d.style.position="absolute";d.style.width=a.elementWidth(c)+"px";d.style.height=a.elementHeight(c)+"px";d.style.left=a.elementLeft(c)+"px";d.style.top=a.elementTop(c)+"px";d.style.cssFloat=b.getStyle(c,"float");d.style.display=b.getStyle(c,"display")},_onStart:function(d){if(!this.active&&c.isLeftClick(d)||"undefined"=== typeof d.button){var g=d.target||d.srcElement;if(!(this.options.skipChildren&&g!==this.element)){c.stop(d);this.elmStartPosition=[a.elementLeft(this.element),a.elementTop(this.element)];var e=[parseInt(b.getStyle(this.element,"left"),10),parseInt(b.getStyle(this.element,"top"),10)],g=[a.elementWidth(this.element),a.elementHeight(this.element)];this.originalPosition=[e[0]?e[0]:null,e[1]?e[1]:null];this.delta=this._getCoords(d);this.active=!0;this.position=b.getStyle(this.element,"position");this.zindex= b.getStyle(this.element,"zIndex");e=document.createElement("div");e.style.position=this.position;e.style.width=g[0]+"px";e.style.height=g[1]+"px";e.style.marginTop=b.getStyle(this.element,"margin-top");e.style.marginBottom=b.getStyle(this.element,"margin-bottom");e.style.marginLeft=b.getStyle(this.element,"margin-left");e.style.marginRight=b.getStyle(this.element,"margin-right");e.style.borderWidth="0";e.style.padding="0";e.style.cssFloat=b.getStyle(this.element,"float");e.style.display=b.getStyle(this.element, "display");e.style.visibility="hidden";this.delta2=[this.delta.x-this.elmStartPosition[0],this.delta.y-this.elmStartPosition[1]];if(this.options.mouseAnchor){var f=this.options.mouseAnchor.split(" "),g=[g[0],g[1]];"left"===f[0]?g[0]=0:"center"===f[0]&&(g[0]=parseInt(g[0]/2,10));"top"===f[1]?g[1]=0:"center"===f[1]&&(g[1]=parseInt(g[1]/2,10));this.applyDelta=[this.delta2[0]-g[0],this.delta2[1]-g[1]]}this.placeholder=e;if(this.options.onStart)this.options.onStart(this.element,d);if(this.options.droppableProxy){this.proxy= document.createElement("div");g=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];e=this.proxy.style;e.width=g[0]+"px";e.height=g[1]+"px";e.position="fixed";e.left="0";e.top="0";e.zIndex=this.options.zindex+1;e.backgroundColor="#FF0000";b.setOpacity(this.proxy,0);for(g=document.body.firstChild;g&&1!==g.nodeType;)g=g.nextSibling;document.body.insertBefore(this.proxy,g);c.observe(this.proxy, "mousemove",this.handlers[this.options.fps?"dragFacade":"drag"]);c.observe(this.proxy,"touchmove",this.handlers[this.options.fps?"dragFacade":"drag"])}else c.observe(document,"mousemove",this.handlers[this.options.fps?"dragFacade":"drag"]);this.element.style.position="absolute";this.element.style.zIndex=this.options.zindex;this.element.parentNode.insertBefore(this.placeholder,this.element);this._onDrag(d);c.observe(document,"mouseup",this.handlers.end);c.observe(document,"touchend",this.handlers.end); return!1}}},_onDragFacade:function(a){var b=(new Date).getTime();if(!this.lastRanAt||b>this.lastRanAt+this.deltaMs)this.lastRanAt=b,this._onDrag(a)},_onDrag:function(a){if(this.active){c.stop(a);this.dragged=!0;var b=this._getCoords(a),d=b.x,f=b.y,k=this.options,p=!1,r=!1;this.prevCoords||(this.prevCoords={x:0,y:0});if(d!==this.prevCoords.x||f!==this.prevCoords.y){if(k.onDrag)k.onDrag(this.element,a);this.prevCoords=b;p=this.elmStartPosition[0]+d-this.delta.x;r=this.elmStartPosition[1]+f-this.delta.y; if("horizontal"===k.constraint||"both"===k.constraint)!1!==k.right&&p>k.right&&(p=k.right),!1!==k.left&&p<k.left&&(p=k.left);if("vertical"===k.constraint||"both"===k.constraint)!1!==k.bottom&&r>k.bottom&&(r=k.bottom),!1!==k.top&&r<k.top&&(r=k.top);this.firstDrag&&(e&&e.updateAll(),this.firstDrag=!1);p&&(this.element.style.left=p+"px");r&&(this.element.style.top=r+"px");e&&e.action(this.options.mouseAnchor?{x:d-this.applyDelta[0],y:f-this.applyDelta[1]}:b,"drag",a,this.element);if(k.onChange)k.onChange(this)}}}, _onEnd:function(a){c.stopObserving(document,"mousemove",this.handlers.drag);c.stopObserving(document,"touchmove",this.handlers.drag);this.options.fps&&this._onDrag(a);if(this.active&&this.dragged){this.options.droppableProxy&&document.body.removeChild(this.proxy);this.pt&&(this.pt.parentNode.removeChild(this.pt),this.pt=void 0);this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder);this.options.revert&&(this.element.style.position=this.position,this.element.style.zIndex=null!== this.zindex?this.zindex:"auto",this.element.style.left=this.originalPosition[0]?this.originalPosition[0]+"px":"",this.element.style.top=this.originalPosition[1]?this.originalPosition[1]+"px":"");if(this.options.onEnd)this.options.onEnd(this.element,a);e&&e.action(this._getCoords(a),"drop",a,this.element);this.zindex=this.position=!1;this.firstDrag=!0}this.dragged=this.active=!1}};return f}); Ink.createModule("Ink.UI.DatePicker","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Css_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Util.Date_1".split(" "),function(a,c,b,d,e,f,h){f=function(b,c){b&&(this._dataField=a.elOrSelector(b,"1st argument"));this._options=Ink.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"So",position:"right",onFocus:!0,onYearSelected:void 0,onMonthSelected:void 0,validDayFn:void 0,startDate:!1,onSetDate:!1,displayInSelect:!1, showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Close",cleanText:"Clear",prevLinkText:"\u00ab",nextLinkText:"\u00bb",ofText:"&nbsp;de&nbsp;",month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},wDay:{"0":"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}},d.data(this._dataField)||{});this._options=Ink.extendObj(this._options,c||{});this._options.format= this._dateParsers[this._options.format]||this._options.format;this._hoverPicker=!1;this._picker=null;this._options.pickerField&&(this._picker=a.elOrSelector(this._options.pickerField,"pickerField"));this._today=new Date;this._day=this._today.getDate();this._month=this._today.getMonth();this._year=this._today.getFullYear();this._setMinMax(this._options.dateRange||this._options.yearRange);this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day)));this._options.startDate&& ("string"===typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate))&&this.setDate(this._options.startDate);this._init();this._render();this._options.startDate||this._dataField&&("string"===typeof this._dataField.value&&this._dataField.value)&&this.setDate(this._dataField.value);a.registerInstance(this,this._containerObject,"So")};f.prototype={version:"0.1",_init:function(){Ink.extendObj(this._options,this._lang||{})},_render:function(){this._containerObject=document.createElement("div"); this._containerObject.id=this._options.instance;this._containerObject.className="So";var b=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){this._superTopBar=document.createElement("div");this._superTopBar.className="To";if(this._options.showClean){var e=document.createElement("a");e.className="Uo";e.innerHTML=this._options.cleanText;this._superTopBar.appendChild(e)}this._options.showClose&&(e=document.createElement("a"),e.className="Bg",e.innerHTML=this._options.closeText, this._superTopBar.appendChild(e));this._containerObject.appendChild(this._superTopBar)}e=document.createElement("div");e.className="Vo";this._monthDescContainer=document.createElement("div");this._monthDescContainer.className="Yo";this._monthPrev=document.createElement("div");this._monthPrev.className="Wo";this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>";this._monthNext=document.createElement("div");this._monthNext.className="Xo";this._monthNext.innerHTML= '<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>";e.appendChild(this._monthPrev);e.appendChild(this._monthDescContainer);e.appendChild(this._monthNext);this._monthContainer=document.createElement("div");this._monthContainer.className="Zo";this._containerObject.appendChild(e);this._containerObject.appendChild(this._monthContainer);this._monthSelector=document.createElement("ul");this._monthSelector.className="Bp";for(var f,h=1;12>=h;h++)0===(h-1)%4&&(f=document.createElement("ul")), e=document.createElement("li"),e.innerHTML='<a href="#" class="sapo_calmonth_'+(2===String(h).length?h:"0"+h)+'">'+this._options.month[h].substring(0,3)+"</a>",f.appendChild(e),0===h%4&&this._monthSelector.appendChild(f);this._containerObject.appendChild(this._monthSelector);this._yearSelector=document.createElement("ul");this._yearSelector.className="Ap";this._containerObject.appendChild(this._yearSelector);if(!this._options.onFocus||this._options.displayInSelect)this._options.pickerField?this._picker= a.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=d.elementTop(this._dataField),this._picker.style.left=d.elementLeft(this._dataField)+(d.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker");if(this._options.displayInSelect)if(this._options.dayField&& this._options.monthField&&this._options.yearField||this._options.pickerField)this._options.dayField=a.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=a.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=a.elOrSelector(this._options.yearField,"yearField");else throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";b.insertBefore(this._containerObject,b.childNodes[0]);this._picker?c.observe(this._picker,"click", Ink.bindEvent(function(a){c.stop(a);this._containerObject=d.clonePosition(this._containerObject,this._picker);this._updateDate();this._showMonth();this._containerObject.style.display="block"},this)):c.observe(this._dataField,"focus",Ink.bindEvent(function(){this._containerObject=d.clonePosition(this._containerObject,this._dataField);"bottom"===this._options.position?(this._containerObject.style.top=d.elementHeight(this._dataField)+d.offsetTop(this._dataField)+"px",this._containerObject.style.left= d.offset2(this._dataField)[0]+"px"):(this._containerObject.style.top=d.offset2(this._dataField)[1]+"px",this._containerObject.style.left=d.elementWidth(this._dataField)+d.offset2(this._dataField)[0]+"px");this._updateDate();this._showMonth();this._containerObject.style.display="block"},this));this._options.displayInSelect?(c.observe(this._options.dayField,"change",Ink.bindEvent(function(){var a=this._options.yearField[this._options.yearField.selectedIndex].value;""!==a&&0!==a&&(this._updateDate(), this._showDefaultView())},this)),c.observe(this._options.monthField,"change",Ink.bindEvent(function(){var a=this._options.yearField[this._options.yearField.selectedIndex].value;""!==a&&0!==a&&(this._updateDate(),this._showDefaultView())},this)),c.observe(this._options.yearField,"change",Ink.bindEvent(function(){this._updateDate();this._showDefaultView()},this))):(c.observe(this._dataField,"change",Ink.bindEvent(function(){this._updateDate();this._showDefaultView();this.setDate();this._hoverPicker|| (this._containerObject.style.display="none")},this)),c.observe(this._dataField,"blur",Ink.bindEvent(function(){this._hoverPicker||(this._containerObject.style.display="none")},this)));c.observe(document,"click",Ink.bindEvent(function(a){void 0===a.target&&(a.target=a.srcElement);if(!d.descendantOf(this._containerObject,a.target)&&a.target!==this._dataField)if(this._picker){if(a.target!==this._picker&&(!this._options.displayInSelect||a.target!==this._options.dayField&&a.target!==this._options.monthField&& a.target!==this._options.yearField))if(!this._options.dayField||!d.descendantOf(this._options.dayField,a.target)&&!d.descendantOf(this._options.monthField,a.target)&&!d.descendantOf(this._options.yearField,a.target))this._containerObject.style.display="none"}else this._containerObject.style.display="none"},this));this._showMonth();this._monthChanger=document.createElement("a");this._monthChanger.href="#monthchanger";this._monthChanger.className="sapo_cal_link_month";this._monthChanger.innerHTML=this._options.month[this._month+ 1];this._deText=document.createElement("span");this._deText.innerHTML=this._options._deText;this._yearChanger=document.createElement("a");this._yearChanger.href="#yearchanger";this._yearChanger.className="sapo_cal_link_year";this._yearChanger.innerHTML=this._year;this._monthDescContainer.innerHTML="";this._monthDescContainer.appendChild(this._monthChanger);this._monthDescContainer.appendChild(this._deText);this._monthDescContainer.appendChild(this._yearChanger);c.observe(this._containerObject,"mouseover", Ink.bindEvent(function(a){c.stop(a);this._hoverPicker=!0},this));c.observe(this._containerObject,"mouseout",Ink.bindEvent(function(a){c.stop(a);this._hoverPicker=!1},this));c.observe(this._containerObject,"click",Ink.bindEvent(function(a){"undefined"===typeof a.target&&(a.target=a.srcElement);var b=a.target.className,d=-1!==b.indexOf("sapo_cal_off");c.stop(a);if(0===b.indexOf("sapo_cal_")&&!d)a=b.substr(9,2),Number(a)?(this.setDate(this._year+"-"+(this._month+1)+"-"+a),this._containerObject.style.display= "none"):"sapo_cal_link_month"===b?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===b&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display= "none",this._showYearSelector(),this._yearSelector.style.display="block");else if(0===b.indexOf("sapo_calmonth_")&&!d){if(b=b.substr(14,2),Number(b)){this._month=b-1;this._monthSelector.style.display="none";this._monthPrev.childNodes[0].className="change_month_prev";this._monthNext.childNodes[0].className="change_month_next";if(this._year<this._yearMin||this._year===this._yearMin&&this._month<=this._monthMin)this._monthPrev.childNodes[0].className="action_inactive";else if(this._year>this._yearMax|| this._year===this._yearMax&&this._month>=this._monthMax)this._monthNext.childNodes[0].className="action_inactive";this._updateCal();this._monthContainer.style.display="block"}}else if(0===b.indexOf("sapo_calyear_")&&!d){if(b=b.substr(13,4),Number(b)){this._year=b;if("function"===typeof this._options.onYearSelected)this._options.onYearSelected(this,{year:this._year});this._monthPrev.childNodes[0].className="action_inactive";this._monthNext.childNodes[0].className="action_inactive";this._yearSelector.style.display= "none";this._setActiveMonth();this._monthSelector.style.display="block"}}else 0===b.indexOf("change_month_")&&!d?"change_month_next"===b?this._updateCal(1):"change_month_prev"===b&&this._updateCal(-1):0===b.indexOf("change_year_")&&!d?"change_year_next"===b?this._showYearSelector(1):"change_year_prev"===b&&this._showYearSelector(-1):"clean"===b?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value= "":"close"===b&&(this._containerObject.style.display="none");this._updateDescription()},this))},_setMinMax:function(a){if(a){var b=a.split(":"),c=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;b[0]&&("NOW"===b[0]?(this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate()):c.test(b[0])?(a=b[0].split("-"),this._yearMin=Math.floor(a[0]),this._monthMin=Math.floor(a[1])||1,this._dayMin=Math.floor(a[2])||1,1<this._monthMin&&12<this._monthMin&&(this._dayMin= this._monthMin=1),1<this._dayMin&&this._dayMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)):(this._yearMin=Number.MIN_VALUE,this._dayMin=this._monthMin=1));b[1]&&("NOW"===b[1]?(this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate()):c.test(b[1])?(a=b[1].split("-"),this._yearMax=Math.floor(a[0]),this._monthMax=Math.floor(a[1])||12,this._dayMax=Math.floor(a[2])||this._daysInMonth(this._yearMax,this._monthMax),1<this._monthMax&& 12<this._monthMax&&(this._monthMax=12,this._dayMax=31),a=this._daysInMonth(this._yearMax,this._monthMax),1<this._dayMax&&this._dayMax>a&&(this._dayMax=a)):(this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31));this._yearMax>=this._yearMin&&(this._monthMax>this._monthMin||this._monthMax===this._monthMin&&this._dayMax>=this._dayMin)||(this._yearMin=Number.MIN_VALUE,this._dayMin=this._monthMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE, this._dayMin=this._monthMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31},_checkDateRange:function(a,b,c){this._isValidDate(a,b+1,c)||(a=this._today.getFullYear(),b=this._today.getMonth(),c=this._today.getDate());a>this._yearMax?(a=this._yearMax,b=this._monthMax-1,c=this._dayMax):a<this._yearMin&&(a=this._yearMin,b=this._monthMin-1,c=this._dayMin);a===this._yearMax&&b+1>this._monthMax?(b=this._monthMax-1,c=this._dayMax):a===this._yearMin&&b+1<this._monthMin&&(b=this._monthMin- 1,c=this._dayMin);a===this._yearMax&&b+1===this._monthMax&&c>this._dayMax?c=this._dayMax:a===this._yearMin&&b+1===this._monthMin&&c<this._dayMin?c=this._dayMin:c>this._daysInMonth(a,b+1)&&(c=this._daysInMonth(a,b+1));return[a,b,c]},_showDefaultView:function(){this._yearSelector.style.display="none";this._monthSelector.style.display="none";this._monthPrev.childNodes[0].className="change_month_prev";this._monthNext.childNodes[0].className="change_month_next";if(this._year<this._yearMin||this._year=== this._yearMin&&this._month+1<=this._monthMin)this._monthPrev.childNodes[0].className="action_inactive";else if(this._year>this._yearMax||this._year===this._yearMax&&this._month+1>=this._monthMax)this._monthNext.childNodes[0].className="action_inactive";this._monthContainer.style.display="block"},_updateDate:function(){var a;this._options.displayInSelect?(a=[],this._isValidDate(a[0]=this._options.yearField[this._options.yearField.selectedIndex].value,a[1]=this._options.monthField[this._options.monthField.selectedIndex].value, a[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(a=this._checkDateRange(a[0],a[1]-1,a[2]),this._year=a[0],this._month=a[1],this._day=a[2]):(a=this._checkDateRange(a[0],a[1]-1,1),this._isValidDate(a[0],a[1]+1,a[2])&&(this._year=a[0],this._month=a[1],this._day=this._daysInMonth(a[0],a[1]),this.setDate()))):""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(a=this._getDataArrayParsed(this._dataField.value),a=this._checkDateRange(a[0],a[1]- 1,a[2]),this._year=a[0],this._month=a[1],this._day=a[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat());this._updateDescription();this._showMonth()},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1];this._deText.innerHTML=this._options.ofText;this._yearChanger.innerHTML= this._year},_showYearSelector:function(){if(arguments.length){var a=+this._year+10*arguments[0],a=a-a%10;if(a>this._yearMax||a+9<this._yearMin)return;this._year=+this._year+10*arguments[0]}for(var a="<li>",b=this._year-this._year%10,c=0;11>=c;c++)0===c%4&&(a+="<ul>"),a=!c||11===c?c&&b+c-1<=this._yearMax&&b+c-1>=this._yearMin?a+('<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>"):b+c-1<=this._yearMax&&b+c-1>=this._yearMin?a+('<li><a href="#year_prev" class="change_year_prev">'+ this._options.prevLinkText+"</a></li>"):a+"<li>&nbsp;</li>":b+c-1<=this._yearMax&&b+c-1>=this._yearMin?a+('<li><a href="#" class="sapo_calyear_'+(b+c-1)+(b+c-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(b+c-1)+"</a></li>"):a+('<li><a href="#" class="sapo_cal_off">'+(b+c-1)+"</a></li>"),0===(c+1)%4&&(a+="</ul>");this._yearSelector.innerHTML=a+"</li>"},_getDataArrayParsed:function(a){var b=[];(a=h.set(this._options.format,a))&&(b=[a.getFullYear(),a.getMonth()+1,a.getDate()]);return b},_isValidDate:function(a, b,c){var d=/^\d{1,2}$/;return/^\d{4}$/.test(a)&&d.test(b)&&d.test(c)&&1<=b&&12>=b&&1<=c&&c<=this._daysInMonth(a,b)},_isDate:function(a,b){try{if("undefined"===typeof a)return!1;var c=h.set(a,b);if(c&&this._isValidDate(c.getFullYear(),c.getMonth()+1,c.getDate()))return!0}catch(d){}return!1},_writeDateInFormat:function(){return h.get(this._options.format,this._data)},setDate:function(a){"string"===typeof a&&/\d{4}-\d{1,2}-\d{1,2}/.test(a)&&(a=a.split("-"),this._year=a[0],this._month=a[1]-1,this._day= a[2]);this._setDate()},_setDate:function(a){"undefined"!==typeof a&&(a.className&&0===a.className.indexOf("sapo_cal_"))&&(this._day=a.className.substr(9,2));this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day));this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat();if(this._options.onSetDate)this._options.onSetDate(this, {date:this._data})},_updateCal:function(a){if("function"===typeof this._options.onMonthSelected)this._options.onMonthSelected(this,{year:this._year,month:this._month});this._updateMonth(a);this._showMonth()},_daysInMonth:function(a,b){var c=31;switch(b){case 2:c=0===a%400||0===a%4&&0!==a%100?29:28;break;case 4:case 6:case 9:case 11:c=30}return c},_updateMonth:function(a){"undefined"===typeof a&&(a="0");var b=this._month+1,c=this._year;switch(a){case -1:if(1===b){if(c===this._yearMin)break;b=12;c--}else b--; this._year=c;this._month=b-1;break;case 1:if(12===b){if(c===this._yearMax)break;b=1;c++}else b++;this._year=c;this._month=b-1}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var a,b=this._month+1,c=this._year,d=this._daysInMonth(c,b),e=(new Date(c,b-1,1)).getDay(),f=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className= "change_month_prev";this._monthNext.childNodes[0].className="change_month_next";if(c<this._yearMin||c===this._yearMin&&b<=this._monthMin)this._monthPrev.childNodes[0].className="action_inactive";else if(c>this._yearMax||c===this._yearMax&&b>=this._monthMax)this._monthNext.childNodes[0].className="action_inactive";f&&Number(f)&&(e=f>e?7+f-e:e+f);var h;h='<ul class="Dp">';for(a=0;7>a;a++)h+="<li>"+this._options.wDay[a+(6<f+a?f-7:f)].substring(0,1)+"</li>";var t=0;h+="</ul><ul>";if(e)for(a=f;a<e-f;a++)t|| (h+="<ul>"),h+='<li class="sapo_cal_empty">&nbsp;</li>',t++;for(a=1;a<=d;a++)7===t&&(t=0,h+="<ul>"),e="sapo_cal_"+(2===String(a).length?a:"0"+a),e+=c===this._yearMin&&b===this._monthMin&&a<this._dayMin||c===this._yearMax&&b===this._monthMax&&a>this._dayMax||c===this._yearMin&&b<this._monthMin||c===this._yearMax&&b>this._monthMax||c<this._yearMin||c>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(c,b-1,a))?" sapo_cal_off":this._data.getFullYear()===c&&this._data.getMonth()=== b-1&&a===this._day?" Cp":"",h+='<li><a href="#" class="'+e+'">'+a+"</a></li>",t++,7===t&&(h+="</ul>");if(7!==t){for(a=t;7>a;a++)h+='<li class="sapo_cal_empty">&nbsp;</li>';h+="</ul>"}h+="</ul>";this._monthContainer.innerHTML=h},_setActiveMonth:function(a){"undefined"===typeof a&&(a=this._monthSelector);var c=a.childNodes.length;if(a.className&&a.className.match(new Regexp("sapo_calmonth_"))){var c=this._year,d=a.className.substr(14,2);c===this._data.getFullYear()&&d===this._data.getMonth()+1?(b.addClassName(a, "Cp"),b.removeClassName(a,"sapo_cal_off")):(b.removeClassName(a,"Cp"),c===this._yearMin&&d<this._monthMin||c===this._yearMax&&d>this._monthMax||c<this._yearMin||c>this._yearMax?b.addClassName(a,"sapo_cal_off"):b.removeClassName(a,"sapo_cal_off"))}else if(0!==c)for(d=0;d<c;d++)this._setActiveMonth(a.childNodes[d])},lang:function(a){this._lang=a},showMonth:function(){this._showMonth()},isMonthRendered:function(){var a=e.select(".Dp",this._containerObject)[0];return"none"!==b.getStyle(a.parentNode,"display")&& "none"!==b.getStyle(a.parentNode.parentNode,"display")}};return f});Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1"],function(a,c,b){return function(){a.observe(document.body,"click",function(d){var e=a.element(d);if(c.hasClassName(e,"ink-close")||c.hasClassName(e,"ink-dismiss")){var f;do if(e.className&&(f=e.className.split(" "))&&(b.inArray("ink-alert",f)||b.inArray("ink-alert-block",f)))break;while(e=e.parentNode);e&&(a.stop(d),e.parentNode.removeChild(e))}})}}); Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(a,c,b,d,e){var f=function(b,c){if("string"!==typeof b&&"object"!==typeof b)throw"[Ink.UI.Toggle] Invalid CSS selector to determine the root element";if("string"===typeof b){this._rootElement=e.select(b);if(0>=this._rootElement.length)throw"[Ink.UI.Toggle] Root element not found";this._rootElement=this._rootElement[0]}else this._rootElement=b;this._options=Ink.extendObj({target:void 0, triggerEvent:"click",closeOnClick:!0},d.data(this._rootElement));this._options=Ink.extendObj(this._options,c||{});if("undefined"===typeof this._options.target)throw"[Ink.UI.Toggle] Target option not defined";this._childElement=a.elOrSelector(this._options.target,"Target");this._init()};f.prototype={_init:function(){this._accordion=b.hasClassName(this._rootElement.parentNode,"accordion")||b.hasClassName(this._childElement.parentNode,"accordion");c.observe(this._rootElement,this._options.triggerEvent, Ink.bindEvent(this._onTriggerEvent,this));"true"===this._options.closeOnClick.toString()&&c.observe(document,"click",Ink.bindEvent(this._onClick,this))},_onTriggerEvent:function(a){if(this._accordion){var c,f;f=b.hasClassName(this._childElement.parentNode,"accordion")?this._childElement.parentNode:this._childElement.parentNode.parentNode;a=e.select(".toggle",f);for(c=0;c<a.length;c+=1){var n=d.data(a[c]),n=e.select(n.target,f);0<n.length&&n[0]!==this._childElement&&(n[0].style.display="none")}}a= "none"===b.getStyle(this._childElement,"display")?"L-M":"N-M";c="none"===b.getStyle(this._childElement,"display")?"block":"none";b.removeClassName(this._childElement,"L-M");b.removeClassName(this._childElement,"N-M");b.addClassName(this._childElement,a);this._childElement.style.display=c;"L-M"===a?b.addClassName(this._rootElement,"Dn"):b.removeClassName(this._rootElement,"Dn")},_onClick:function(a){a=c.element(a);var b;if(!(this._rootElement===a||d.isAncestorOf(this._rootElement,a)||d.isAncestorOf(this._childElement, a))){if((b=Ink.ss(".O-Fp")).length)for(var e=b.length,f=0;f<e;f++)if(d.isAncestorOf(b[f],a)&&d.isAncestorOf(b[f],this._rootElement))return;this._dismiss(this._rootElement)}},_dismiss:function(){"none"!==b.getStyle(this._childElement,"display")&&(b.removeClassName(this._childElement,"L-M"),b.removeClassName(this._rootElement,"Dn"),b.addClassName(this._childElement,"N-M"),this._childElement.style.display="none")}};return f}); Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(a,c,b,d,e){var f=function(a){var b=document.createElement("a");b.setAttribute("href","#");b.innerHTML=a;return b};d=function(b,c){this._options=Ink.extendObj({size:void 0,start:1,firstLabel:"First",lastLabel:"Last",previousLabel:"Previous",nextLabel:"Next",onChange:void 0,setHash:!1,hashParameter:"page"},c||{});this._options.previousPageLabel||(this._options.previousPageLabel= "Previous "+this._options.maxSize);this._options.nextPageLabel||(this._options.nextPageLabel="Next "+this._options.maxSize);this._handlers={click:Ink.bindEvent(this._onClick,this)};this._element=a.elOrSelector(b,"1st argument");if(!a.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(!a.isInteger(this._options.start)&&0<this._options.start&&this._options.start<=this._options.size)throw new TypeError("start option is a required integer between 1 and size!"); if(this._options.maxSize&&!a.isInteger(this._options.maxSize)&&0<this._options.maxSize)throw new TypeError("maxSize option is a positive integer!");if(0>this._options.size)throw new RangeError("size option must be equal or more than 0!");if(void 0!==this._options.onChange&&"function"!==typeof this._options.onChange)throw new TypeError("onChange option must be a function!");this._current=this._options.start-1;this._itemLiEls=[];this._init()};d.prototype={_init:function(){this._generateMarkup(this._element); this._updateItems();this._observe();a.registerInstance(this,this._element,"En")},_observe:function(){c.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var a=this._itemLiEls,c,d,e;if(this._options.size===a.length){c=0;for(d=this._options.size;c<d;++c)b.setClassName(a[c],"Dn",c===this._current)}else{for(c=a.length-1;0<=c;--c)this._ulEl.removeChild(a[c]);a=[];c=0;for(d=this._options.size;c<d;++c)e=document.createElement("li"),e.appendChild(f(c+1)),b.setClassName(e,"Dn",c=== this._current),this._ulEl.insertBefore(e,this._nextEl),a.push(e);this._itemLiEls=a}if(this._options.maxSize){var k=Math.floor(this._current/this._options.maxSize),p=this._options.maxSize*k,r=p+this._options.maxSize-1;c=0;for(d=this._options.size;c<d;++c)e=a[c],b.setClassName(e,"N-M",c<p||c>r);this._pageStart=p;this._pageEnd=r;this._page=k;b.setClassName(this._prevPageEl,"Fn",!this.hasPreviousPage());b.setClassName(this._nextPageEl,"Fn",!this.hasNextPage());b.setClassName(this._firstEl,"Fn",this.isFirst()); b.setClassName(this._lastEl,"Fn",this.isLast())}b.setClassName(this._prevEl,"Fn",!this.hasPrevious());b.setClassName(this._nextEl,"Fn",!this.hasNext())},_generateMarkup:function(a){b.addClassName(a,"O-Xm");var c,d,n=!1;1>(c=e.select("ul.En",a)).length?(c=document.createElement("ul"),b.addClassName(c,"En")):(n=!0,c=c[0]);this._options.maxSize&&(d=document.createElement("li"),d.appendChild(f(this._options.firstLabel)),this._firstEl=d,b.addClassName(d,"first"),c.appendChild(d),d=document.createElement("li"), d.appendChild(f(this._options.previousPageLabel)),this._prevPageEl=d,b.addClassName(d,"previousPage"),c.appendChild(d));d=document.createElement("li");d.appendChild(f(this._options.previousLabel));this._prevEl=d;b.addClassName(d,"Qo");c.appendChild(d);d=document.createElement("li");d.appendChild(f(this._options.nextLabel));this._nextEl=d;b.addClassName(d,"Po");c.appendChild(d);this._options.maxSize&&(d=document.createElement("li"),d.appendChild(f(this._options.nextPageLabel)),this._nextPageEl=d,b.addClassName(d, "nextPage"),c.appendChild(d),d=document.createElement("li"),d.appendChild(f(this._options.lastLabel)),this._lastEl=d,b.addClassName(d,"last"),c.appendChild(d));n||a.appendChild(c);this._ulEl=c},_onClick:function(a){c.stop(a);a=c.element(a);if("a"!==a.nodeName.toLowerCase()){do a=a.parentNode;while("a"!==a.nodeName.toLowerCase()&&a!==this._element);if(a===this._element)return}var d=a.parentNode;if("li"===d.nodeName.toLowerCase()&&!b.hasClassName(d,"Dn")&&!b.hasClassName(d,"Fn")){var e=b.hasClassName(d, "Qo"),f=b.hasClassName(d,"Po"),k=b.hasClassName(d,"previousPage"),p=b.hasClassName(d,"nextPage"),r=b.hasClassName(d,"first"),d=b.hasClassName(d,"last");r?this.setCurrent(0):d?this.setCurrent(this._options.size-1):k||p?this.setCurrent((k?-1:1)*this._options.maxSize,!0):e||f?this.setCurrent(e?-1:1,!0):(a=parseInt(a.innerHTML,10)-1,this.setCurrent(a))}},setSize:function(b){if(!a.isInteger(b))throw new TypeError("1st argument must be an integer number!");this._options.size=b;this._updateItems();this._current= 0},setCurrent:function(b,c){if(!a.isInteger(b))throw new TypeError("1st argument must be an integer number!");c&&(b+=this._current);0>b?b=0:b>this._options.size-1&&(b=this._options.size-1);this._current=b;this._updateItems();if(this._options.onChange)this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return 0< this._current},hasNext:function(){return this._current<this._options.size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._options.size-this._current>=this._options.maxSize+1},destroy:a.destroyComponent};return d}); Ink.createModule("Ink.UI.Tooltip","1","Ink.UI.Aux_1 Ink.Dom.Event_1 Ink.Dom.Element_1 Ink.Dom.Selector_1 Ink.Util.Array_1 Ink.Dom.Css_1 Ink.Dom.Browser_1".split(" "),function(a,c,b,d,e,f){function h(a,b){this._init(a,b||{})}function g(a,b){this._init(a,b)}var l,n,k;(function(){for(var a=document.createElement("DIV"),b=["transition","oTransition","msTransition","mozTransition","webkitTransition"],c=0;c<b.length;c++)if("undefined"!==typeof a.style[b[c]+"Duration"]){l=b[c]+"Duration";n=b[c]+"Property"; k=b[c]+"TimingFunction";break}})();var p=document.getElementsByTagName("body"),r=p&&p.length?p[0]:document.documentElement;h.prototype={_init:function(a,b){var c;this.options=Ink.extendObj({where:"Ae",zIndex:1E4,left:10,top:10,spacing:8,forever:0,color:"",timeout:0,delay:0,template:null,templatefield:null,fade:0.3,text:""},b||{});if("string"===typeof a)c=d.select(a);else if("object"===typeof a)c=[a];else throw"Element expected";this.tooltips=[];for(var e=0,f=c.length;e<f;e++)this.tooltips[e]=new g(this, c[e])},destroy:function(){e.each(this.tooltips,function(a){a._destroy()});this.options=this.tooltips=null}};g.prototype={_oppositeDirections:{left:"K",right:"I",up:"Zd",down:"Ae"},_init:function(a,b){c.observe(b,"mouseover",Ink.bindEvent(this._onMouseOver,this));c.observe(b,"mouseout",Ink.bindEvent(this._onMouseOut,this));c.observe(b,"mousemove",Ink.bindEvent(this._onMouseMove,this));this.root=a;this.element=b;this.tooltip=this._delayTimeout=null},_makeTooltip:function(a){var b;b=this._createTooltipElement(); this.tooltip&&this._removeTooltip();this.tooltip=b;this._fadeInTooltipElement(b);this._placeTooltipElement(b,a);c.observe(b,"mouseover",Ink.bindEvent(this._onTooltipMouseOver,this));(a=this._getFloatOpt("timeout"))&&setTimeout(Ink.bind(function(){this.tooltip===b&&this._removeTooltip()},this),1E3*a)},_createTooltipElement:function(){var c=this._getOpt("template"),e=this._getOpt("templatefield"),g=this._getOpt("where");if(c)if(g=document.createElement("DIV"),g.innerHTML=a.elOrSelector(c,"options.template").outerHTML, c=g.firstChild,e)if(e=d.select(e,c))e=e[0];else throw"options.templatefield must be a valid selector within options.template";else e=c;else if(c=document.createElement("DIV"),f.addClassName(c,"O-Eo"),f.addClassName(c,this._getOpt("color")),e=document.createElement("DIV"),f.addClassName(e,"H"),c.appendChild(e),g.match(/(Ae|Zd|I|K)/)){var h=document.createElement("SPAN");f.addClassName(h,"Qf");f.addClassName(h,this._oppositeDirections[g]);c.appendChild(h)}b.setTextContent(e,this._getOpt("text"));c.style.display= "block";c.style.position="absolute";c.style.zIndex=this._getIntOpt("zIndex");return c},_fadeInTooltipElement:function(a){var b=this._getFloatOpt("fade");l&&b&&(a.style.opacity="0",a.style[l]=b+"s",a.style[n]="opacity",a.style[k]="ease-in-out",setTimeout(function(){a.style.opacity="1"},0))},_placeTooltipElement:function(a,c){var d=this._getOpt("where");if("mousemove"===d||"mousefix"===d){this._setPos(c[0],c[1]);var e=document.getElementsByTagName("body");(e&&e.length?e[0]:document.documentElement).appendChild(a)}else if(d.match(/(Ae|Zd|I|K)/)){r.appendChild(a); var e=b.offset(this.element),g=e[0],h=e[1];g instanceof Array&&(h=g[1],g=g[0]);var k=b.elementWidth(this.element)/2-b.elementWidth(a)/2,l=b.elementHeight(this.element)/2-b.elementHeight(a)/2,n=this._getIntOpt("spacing"),e=b.elementDimensions(a);b.elementDimensions(this.element);var p=b.scrollWidth()+b.viewportWidth(),C=b.scrollHeight()+b.viewportHeight();"I"===d&&0>g-e[0]?d="K":"K"===d&&g+e[0]>p?d="I":"Ae"===d&&0>h-e[1]?d="Zd":"Zd"===d&&h+e[1]>C&&(d="Ae");"Ae"===d?(h-=b.elementHeight(a),h-=n,g+=k): "Zd"===d?(h+=b.elementHeight(this.element),h+=n,g+=k):"I"===d?(g-=b.elementWidth(a),g-=n,h+=l):"K"===d&&(g+=b.elementWidth(this.element),g+=n,h+=l);k=null;d.match(/(Ae|Zd|I|K)/)&&(k=document.createElement("SPAN"),f.addClassName(k,"Qf"),f.addClassName(k,this._oppositeDirections[d]),a.appendChild(k));d=this._getLocalScroll();g-=d[0];h-=d[1];C=h+e[1]-C;p=g+e[0]-p;d=0-g;l=0-h;0<C?(k&&(k.style.top=e[1]/2+C+"px"),h-=C):0<l?(k&&(k.style.top=e[1]/2-l+"px"),h+=l):0<p?(k&&(k.style.left=e[0]/2+p+"px"),g-=p): 0<d&&(k&&(k.style.left=e[0]/2-d+"px"),g+=d);a.style.left=g+"px";a.style.top=h+"px"}},_removeTooltip:function(){var a=this.tooltip;if(a){var c=Ink.bind(b.remove,{},a);"mousemove"!==this._getOpt("where")&&l?(a.style.opacity=0,setTimeout(c,1E3*this._getFloatOpt("fade"))):c();this.tooltip=null}},_getOpt:function(a){var c=b.data(this.element)[b._camelCase("tip-"+a)];if(c)return c;a=this.root.options[a];if("undefined"!==typeof a)return a},_getIntOpt:function(a){return parseInt(this._getOpt(a),10)},_getFloatOpt:function(a){return parseFloat(this._getOpt(a), 10)},_destroy:function(){this.tooltip&&b.remove(this.tooltip);this.tooltip=this.element=this.root=null},_onMouseOver:function(a){var b=this._getMousePosition(a);(a=this._getFloatOpt("delay"))?this._delayTimeout=setTimeout(Ink.bind(function(){this.tooltip||this._makeTooltip(b);this._delayTimeout=null},this),1E3*a):this._makeTooltip(b)},_onMouseMove:function(a){"mousemove"===this._getOpt("where")&&this.tooltip&&(a=this._getMousePosition(a),this._setPos(a[0],a[1]))},_onMouseOut:function(){this._getIntOpt("forever")|| this._removeTooltip();this._delayTimeout&&(clearTimeout(this._delayTimeout),this._delayTimeout=null)},_onTooltipMouseOver:function(){this.tooltip&&this._removeTooltip()},_setPos:function(a,c){a+=this._getIntOpt("left");c+=this._getIntOpt("top");var d=this._getPageXY();if(this.tooltip){var e=[b.elementWidth(this.tooltip),b.elementHeight(this.tooltip)],f=this._getScroll();e[0]+a-f[0]>=d[0]-20&&(a=a-e[0]-this._getIntOpt("left")-10);e[1]+c-f[1]>=d[1]-20&&(c=c-e[1]-this._getIntOpt("top")-10);this.tooltip.style.left= a+"px";this.tooltip.style.top=c+"px"}},_getPageXY:function(){var a=0,b=0;if("number"===typeof window.innerWidth)a=window.innerWidth,b=window.innerHeight;else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a=document.documentElement.clientWidth,b=document.documentElement.clientHeight;else if(document.body&&(document.body.clientWidth||document.body.clientHeight))a=document.body.clientWidth,b=document.body.clientHeight;return[parseInt(a,10), parseInt(b,10)]},_getScroll:function(){var a=document.documentElement,b=document.body;return a&&(a.scrollLeft||a.scrollTop)?[a.scrollLeft,a.scrollTop]:b?[b.scrollLeft,b.scrollTop]:[0,0]},_getLocalScroll:function(){for(var a=[0,0],b=this.element.parentNode,c,d;b&&b!==document.documentElement&&b!==document.body;)c=b.scrollLeft,d=b.scrollTop,c&&(a[0]+=c),d&&(a[1]+=d),b=b.parentNode;return a},_getMousePosition:function(a){return[parseInt(c.pointerX(a),10),parseInt(c.pointerY(a),10)]}};return h}); (function(){var t=this;var e=t.Backbone;var i=[];var r=i.push;var s=i.slice;var n=i.splice;var a;if(typeof exports!=="undefined"){a=exports}else{a=t.Backbone={}}a.VERSION="1.1.0";var h=t._;if(!h&&typeof require!=="undefined")h=require("underscore");a.$=t.jQuery||t.Zepto||t.ender||t.$;a.noConflict=function(){t.Backbone=e;return this};a.emulateHTTP=false;a.emulateJSON=false;var o=a.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this;var s=h.once(function(){r.off(t,s);e.apply(this,arguments)});s._callback=e;return this.on(t,s,i)},off:function(t,e,i){var r,s,n,a,o,u,c,f;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}a=t?[t]:h.keys(this._events);for(o=0,u=a.length;o<u;o++){t=a[o];if(n=this._events[t]){this._events[t]=r=[];if(e||i){for(c=0,f=n.length;c<f;c++){s=n[c];if(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context){r.push(s)}}}if(!r.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)c(i,e);if(r)c(r,arguments);return this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var s=!e&&!i;if(!i&&typeof e==="object")i=this;if(t)(r={})[t._listenId]=t;for(var n in r){t=r[n];t.off(e,i,this);if(s||h.isEmpty(t._events))delete this._listeningTo[n]}return this}};var u=/\s+/;var l=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(u.test(i)){var n=i.split(u);for(var a=0,h=n.length;a<h;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var c=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,h);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e)}};var f={listenTo:"on",listenToOnce:"once"};h.each(f,function(t,e){o[e]=function(e,i,r){var s=this._listeningTo||(this._listeningTo={});var n=e._listenId||(e._listenId=h.uniqueId("l"));s[n]=e;if(!r&&typeof i==="object")r=this;e[t](i,r,this);return this}});o.bind=o.on;o.unbind=o.off;h.extend(a,o);var d=a.Model=function(t,e){var i=t||{};e||(e={});this.cid=h.uniqueId("c");this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)i=this.parse(i,e)||{};i=h.defaults({},i,h.result(this,"defaults"));this.set(i,e);this.changed={};this.initialize.apply(this,arguments)};h.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return h.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,i){var r,s,n,a,o,u,l,c;if(t==null)return this;if(typeof t==="object"){s=t;i=e}else{(s={})[t]=e}i||(i={});if(!this._validate(s,i))return false;n=i.unset;o=i.silent;a=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=h.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in s)this.id=s[this.idAttribute];for(r in s){e=s[r];if(!h.isEqual(c[r],e))a.push(r);if(!h.isEqual(l[r],e)){this.changed[r]=e}else{delete this.changed[r]}n?delete c[r]:c[r]=e}if(!o){if(a.length)this._pending=true;for(var f=0,d=a.length;f<d;f++){this.trigger("change:"+a[f],this,c[a[f]],i)}}if(u)return this;if(!o){while(this._pending){this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,h.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,h.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!h.isEmpty(this.changed);return h.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?h.clone(this.changed):false;var e,i=false;var r=this._changing?this._previousAttributes:this.attributes;for(var s in t){if(h.isEqual(r[s],e=t[s]))continue;(i||(i={}))[s]=e}return i},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var i=t.success;t.success=function(r){if(!e.set(e.parse(r,t),t))return false;if(i)i(e,r,t);e.trigger("sync",e,r,t)};M(this,t);return this.sync("read",this,t)},save:function(t,e,i){var r,s,n,a=this.attributes;if(t==null||typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i=h.extend({validate:true},i);if(r&&!i.wait){if(!this.set(r,i))return false}else{if(!this._validate(r,i))return false}if(r&&i.wait){this.attributes=h.extend({},a,r)}if(i.parse===void 0)i.parse=true;var o=this;var u=i.success;i.success=function(t){o.attributes=a;var e=o.parse(t,i);if(i.wait)e=h.extend(r||{},e);if(h.isObject(e)&&!o.set(e,i)){return false}if(u)u(o,t,i);o.trigger("sync",o,t,i)};M(this,i);s=this.isNew()?"create":i.patch?"patch":"update";if(s==="patch")i.attrs=r;n=this.sync(s,this,i);if(r&&i.wait)this.attributes=a;return n},destroy:function(t){t=t?h.clone(t):{};var e=this;var i=t.success;var r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(s){if(t.wait||e.isNew())r();if(i)i(e,s,t);if(!e.isNew())e.trigger("sync",e,s,t)};if(this.isNew()){t.success();return false}M(this,t);var s=this.sync("delete",this,t);if(!t.wait)r();return s},url:function(){var t=h.result(this,"urlRoot")||h.result(this.collection,"url")||U();if(this.isNew())return t;return t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},h.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=h.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,h.extend(e,{validationError:i}));return false}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(t){d.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.attributes);return h[t].apply(h,e)}});var v=a.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,h.extend({silent:true},e))};var g={add:true,remove:true,merge:true};var m={add:true,remove:false};h.extend(v.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,h.extend({merge:false},e,m))},remove:function(t,e){var i=!h.isArray(t);t=i?[t]:h.clone(t);e||(e={});var r,s,n,a;for(r=0,s=t.length;r<s;r++){a=t[r]=this.get(t[r]);if(!a)continue;delete this._byId[a.id];delete this._byId[a.cid];n=this.indexOf(a);this.models.splice(n,1);this.length--;if(!e.silent){e.index=n;a.trigger("remove",a,this,e)}this._removeReference(a)}return i?t[0]:t},set:function(t,e){e=h.defaults({},e,g);if(e.parse)t=this.parse(t,e);var i=!h.isArray(t);t=i?t?[t]:[]:h.clone(t);var r,s,n,a,o,u,l;var c=e.at;var f=this.model;var p=this.comparator&&c==null&&e.sort!==false;var v=h.isString(this.comparator)?this.comparator:null;var m=[],y=[],_={};var w=e.add,b=e.merge,x=e.remove;var E=!p&&w&&x?[]:false;for(r=0,s=t.length;r<s;r++){o=t[r];if(o instanceof d){n=a=o}else{n=o[f.prototype.idAttribute]}if(u=this.get(n)){if(x)_[u.cid]=true;if(b){o=o===a?a.attributes:o;if(e.parse)o=u.parse(o,e);u.set(o,e);if(p&&!l&&u.hasChanged(v))l=true}t[r]=u}else if(w){a=t[r]=this._prepareModel(o,e);if(!a)continue;m.push(a);a.on("all",this._onModelEvent,this);this._byId[a.cid]=a;if(a.id!=null)this._byId[a.id]=a}if(E)E.push(u||a)}if(x){for(r=0,s=this.length;r<s;++r){if(!_[(a=this.models[r]).cid])y.push(a)}if(y.length)this.remove(y,e)}if(m.length||E&&E.length){if(p)l=true;this.length+=m.length;if(c!=null){for(r=0,s=m.length;r<s;r++){this.models.splice(c+r,0,m[r])}}else{if(E)this.models.length=0;var T=E||m;for(r=0,s=T.length;r<s;r++){this.models.push(T[r])}}}if(l)this.sort({silent:true});if(!e.silent){for(r=0,s=m.length;r<s;r++){(a=m[r]).trigger("add",a,this,e)}if(l||E&&E.length)this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;i<r;i++){this._removeReference(this.models[i])}e.previousModels=this.models;this._reset();t=this.add(t,h.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,h.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){return this.add(t,h.extend({at:0},e))},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){if(h.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(h.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(h.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return h.invoke(this.models,"get",t)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var i=this;t.success=function(r){var s=t.reset?"reset":"set";i[s](r,t);if(e)e(i,r,t);i.trigger("sync",i,r,t)};M(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?h.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var i=this;var r=e.success;e.success=function(t,e,s){if(s.wait)i.add(t,s);if(r)r(t,e,s)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof d){if(!t.collection)t.collection=this;return t}e=e?h.clone(e):{};e.collection=this;var i=new this.model(t,e);if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,e);return false},_removeReference:function(t){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(y,function(t){v.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.models);return h[t].apply(h,e)}});var _=["groupBy","countBy","sortBy"];h.each(_,function(t){v.prototype[t]=function(e,i){var r=h.isFunction(e)?e:function(t){return t.get(e)};return h[t](this.models,r,i)}});var w=a.View=function(t){this.cid=h.uniqueId("view");t||(t={});h.extend(this,h.pick(t,x));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var b=/^(\S+)\s*(.*)$/;var x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(w.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,e){if(this.$el)this.undelegateEvents();this.$el=t instanceof a.$?t:a.$(t);this.el=this.$el[0];if(e!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=h.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!h.isFunction(i))i=this[t[e]];if(!i)continue;var r=e.match(b);var s=r[1],n=r[2];i=h.bind(i,this);s+=".delegateEvents"+this.cid;if(n===""){this.$el.on(s,i)}else{this.$el.on(s,n,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var t=h.extend({},h.result(this,"attributes"));if(this.id)t.id=h.result(this,"id");if(this.className)t["class"]=h.result(this,"className");var e=a.$("<"+h.result(this,"tagName")+">").attr(t);this.setElement(e,false)}else{this.setElement(h.result(this,"el"),false)}}});a.sync=function(t,e,i){var r=T[t];h.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:r,dataType:"json"};if(!i.url){s.url=h.result(e,"url")||U()}if(i.data==null&&e&&(t==="create"||t==="update"||t==="patch")){s.contentType="application/json";s.data=JSON.stringify(i.attrs||e.toJSON(i))}if(i.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(i.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){s.type="POST";if(i.emulateJSON)s.data._method=r;var n=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r);if(n)return n.apply(this,arguments)}}if(s.type!=="GET"&&!i.emulateJSON){s.processData=false}if(s.type==="PATCH"&&E){s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var o=i.xhr=a.ajax(h.extend(s,i));e.trigger("request",e,o,i);return o};var E=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var k=a.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var S=/\((.*?)\)/g;var $=/(\(\?)?:\w+/g;var H=/\*\w+/g;var A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(k.prototype,o,{initialize:function(){},route:function(t,e,i){if(!h.isRegExp(t))t=this._routeToRegExp(t);if(h.isFunction(e)){i=e;e=""}if(!i)i=this[e];var r=this;a.history.route(t,function(s){var n=r._extractParameters(t,s);i&&i.apply(r,n);r.trigger.apply(r,["route:"+e].concat(n));r.trigger("route",e,n);a.history.trigger("route",r,e,n)});return this},navigate:function(t,e){a.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=h.result(this,"routes");var t,e=h.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(A,"\\$&").replace(S,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)");return new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return h.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=a.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var N=/^[#\/]|\s+$/g;var O=/^\/+|\/+$/g;var P=/msie [\w.]+/;var C=/\/$/;var j=/[?#].*$/;I.started=false;h.extend(I.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");if(!t.indexOf(i))t=t.slice(i.length)}else{t=this.getHash()}}return t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=true;this.options=h.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment();var i=document.documentMode;var r=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(O,"/");if(r&&this._wantsHashChange){this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(e)}if(this._hasPushState){a.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!r){a.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=e;var s=this.location;var n=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!n){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._hasPushState&&n&&s.hash){this.fragment=this.getHash().replace(N,"");this.history.replaceState({},document.title,this.root+this.fragment+s.search)}}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){t=this.fragment=this.getFragment(t);return h.any(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!I.started)return false;if(!e||e===true)e={trigger:!!e};var i=this.root+(t=this.getFragment(t||""));t=t.replace(j,"");if(this.fragment===t)return;this.fragment=t;if(t===""&&i!=="/")i=i.slice(0,-1);if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});a.history=new I;var R=function(t,e){var i=this;var r;if(t&&h.has(t,"constructor")){r=t.constructor}else{r=function(){return i.apply(this,arguments)}}h.extend(r,i,e);var s=function(){this.constructor=r};s.prototype=i.prototype;r.prototype=new s;if(t)h.extend(r.prototype,t);r.__super__=i.prototype;return r};d.extend=v.extend=k.extend=w.extend=I.extend=R;var U=function(){throw new Error('A "url" property or function must be specified')};var M=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}}}).call(this);'use strict';(function(d){function c(c,k){var a=c[n],a=a&&l[a];if(void 0===k)return a||r(c);if(a){if(k in a)return a[k];var h=s(k);if(h in a)return a[h]}return t.call(d(c),k)}function r(c,k,a){var h=c[n]||(c[n]=++d.uuid);c=l[h]||(l[h]=m(c));void 0!==k&&(c[s(k)]=a);return c}function m(c){var k={};d.each(c.attributes||u,function(a,h){0==h.name.indexOf("data-")&&(k[s(h.name.replace("data-",""))]=d.zepto.deserializeValue(h.value))});return k}var l={},t=d.fn.data,s=d.camelCase,n=d.expando="Zepto"+ +new Date, u=[];d.fn.data=function(p,k){return void 0===k?d.isPlainObject(p)?this.each(function(a,h){d.each(p,function(a,c){r(h,a,c)})}):0==this.length?void 0:c(this[0],p):this.each(function(){r(this,p,k)})};d.fn.removeData=function(c){"string"==typeof c&&(c=c.split(/\s+/));return this.each(function(){var k=this[n],a=k&&l[k];a&&d.each(c,function(){delete a[s(this)]})})}})(Zepto); ["width","height"].forEach(function(d){var c=d.replace(/./,function(c){return c[0].toUpperCase()});$.fn["outer"+c]=function(c){var m=this;if(m){var l=m[d]();({width:["left","right"],height:["top","bottom"]})[d].forEach(function(d){c&&(l+=parseInt(m.css("margin-"+d),10))});return l}return null}}); (function(){var d,c,r,m,l,t,s,n,u,p,k=[].slice;l=function(a,h){return null!=a?a.hasOwnProperty(h):void 0};s=function(a){return l(a,"length")&&l(a,"callee")};n=function(a){return l(a,"promise")&&"function"===typeof(null!=a?a.promise:void 0)};m=function(a){return s(a)?m(Array.prototype.slice.call(a)):!Array.isArray(a)?[a]:a.reduce(function(a,g){if(Array.isArray(g))return a.concat(m(g));a.push(g);return a},[])};c=function(a,h){return 0>=a?h():function(){if(1>--a)return h.apply(this,arguments)}};u=function(a, h){return function(){var g;g=[a].concat(Array.prototype.slice.call(arguments,0));return h.apply(this,g)}};r=function(a,h,g){var c,f,e,b;e=m(a);b=[];c=0;for(f=e.length;c<f;c++)a=e[c],b.push(a.call.apply(a,[g].concat(k.call(h))));return b};d=function(){var a,h,g,c,f,e;e="pending";c=[];f=[];g={};this.promise=function(b){var a;b=b||{};b.state=function(){return e};a=function(f,a){return function(){"pending"===e&&a.push.apply(a,m(arguments));f()&&r(arguments,g);return b}};b.done=a(function(){return"resolved"=== e},c);b.fail=a(function(){return"rejected"===e},f);b.always=function(){var e;return(e=b.done.apply(b,arguments)).fail.apply(e,arguments)};a=function(e,f){var a,g;g=new d;a=function(e,f,a){return!a?b[e](g[f]):b[e](function(){var b;b=1<=arguments.length?k.call(arguments,0):[];b=a.apply(null,b);return n(b)?b.done(g.resolve).fail(g.reject):g[f](b)})};a("done","resolve",e);a("fail","reject",f);return g};b.pipe=a;b.then=a;null==b.promise&&(b.promise=function(){return b});return b};this.promise(this);a= this;h=function(b,f,c){return function(){return"pending"===e?(e=b,g=arguments,r(f,g,c),a):this}};this.resolve=h("resolved",c);this.reject=h("rejected",f);this.resolveWith=function(b,e){return h("resolved",c,b).apply(null,e)};this.rejectWith=function(b,e){return h("rejected",f,b).apply(null,e)};return this};p=function(){var a,h,g,q,f,e,b;h=m(arguments);if(1===h.length)return n(h[0])?h[0]:(new d).resolve(h[0]).promise();f=new d;if(!h.length)return f.resolve().promise();q=[];g=c(h.length,function(){return f.resolve.apply(f, q)});h.forEach(function(b,e){if(n(b))return b.done(function(){var b;b=1<=arguments.length?k.call(arguments,0):[];q[e]=1<b.length?b:b[0];return g()});q[e]=b;return g()});e=0;for(b=h.length;e<b;e++)a=h[e],n(a)&&a.fail(f.reject);return f.promise()};t=function(a){a.Deferred=function(){return new d};a.ajax=u(a.ajax,function(a,g){var c,f,e;null==g&&(g={});f=new d;c=function(b,e){return u(b,function(){var b,f;f=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];f&&f.apply(null,b);return e.apply(null, b)})};g.success=c(g.success,f.resolve);g.error=c(g.error,f.reject);e=a(g);c=f.promise();c.abort=function(){return e.abort()};return c});return a.when=p};"undefined"!==typeof exports?(exports.Deferred=function(){return new d},exports.when=p,exports.installInto=t):"function"===typeof define&&define.amd?define(function(){return"undefined"!==typeof Zepto?t(Zepto):d}):"undefined"!==typeof Zepto?t(Zepto):(this.Deferred=function(){return new d},this.Deferred.when=p,this.Deferred.installInto=t)}).call(this); (function(d){var c={isMsie:function(){var a=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return a?parseInt(a[2],10):!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isArray:d.isArray,isFunction:d.isFunction,isObject:d.isPlainObject,isUndefined:function(a){return"undefined"===typeof a},bind:d.proxy,bindAll:function(a){var c, g;for(g in a)d.isFunction(c=a[g])&&(a[g]=d.proxy(c,a))},indexOf:function(a,c){for(var g=0;g<a.length;g++)if(a[g]===c)return g;return-1},each:d.each,map:d.map,filter:d.grep,every:function(a,c){var g=!0;if(!a)return g;d.each(a,function(d,f){if(!(g=c.call(null,f,d,a)))return!1});return!!g},some:function(a,c){var g=!1;if(!a)return g;d.each(a,function(d,f){if(g=c.call(null,f,d,a))return!1});return!!g},mixin:d.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),defer:function(a){setTimeout(a, 0)},debounce:function(a,c,g){var d,f;return function(){var e=this,b=arguments,v;v=g&&!d;clearTimeout(d);d=setTimeout(function(){d=null;g||(f=a.apply(e,b))},c);v&&(f=a.apply(e,b));return f}},throttle:function(a,c){var g,d,f,e,b,v;b=0;v=function(){b=new Date;f=null;e=a.apply(g,d)};return function(){var z=new Date,x=c-(z-b);g=this;d=arguments;0>=x?(clearTimeout(f),f=null,b=z,e=a.apply(g,d)):f||(f=setTimeout(v,x));return e}},tokenizeQuery:function(a){return d.trim(a).toLowerCase().split(/[\s]+/)},tokenizeText:function(a){return d.trim(a).toLowerCase().split(/[\s\-_]+/)}, getProtocol:function(){return location.protocol},noop:function(){}},r=function(){var a=/\s+/;return{on:function(c,g){var d;if(!g)return this;this._callbacks=this._callbacks||{};for(c=c.split(a);d=c.shift();)this._callbacks[d]=this._callbacks[d]||[],this._callbacks[d].push(g);return this},trigger:function(c,g){var d,f;if(!this._callbacks)return this;for(c=c.split(a);d=c.shift();)if(f=this._callbacks[d])for(var e=0;e<f.length;e+=1)f[e].call(this,{type:d,data:g});return this}}}(),m=function(){function a(a){(!a|| !a.el)&&d.error("EventBus initialized without el");this.$el=d(a.el)}c.mixin(a.prototype,{trigger:function(a){var c=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,c)}});return a}(),l=function(){function a(f){this.prefix=["__",f,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=RegExp("^"+this.prefix)}function d(f){return JSON.stringify(c.isUndefined(f)?null:f)}var g;try{g=window.localStorage,g.setItem("~~~","!"),g.removeItem("~~~")}catch(q){g=null}c.mixin(a.prototype,g&&window.JSON? {_prefix:function(f){return this.prefix+f},_ttlKey:function(f){return this._prefix(f)+this.ttlKey},get:function(f){this.isExpired(f)&&this.remove(f);f=g.getItem(this._prefix(f));return JSON.parse(f)},set:function(f,e,b){c.isNumber(b)?g.setItem(this._ttlKey(f),d((new Date).getTime()+b)):g.removeItem(this._ttlKey(f));return g.setItem(this._prefix(f),d(e))},remove:function(f){g.removeItem(this._ttlKey(f));g.removeItem(this._prefix(f));return this},clear:function(){var f,e,b=[],a=g.length;for(f=0;f<a;f++)(e= g.key(f)).match(this.keyMatcher)&&b.push(e.replace(this.keyMatcher,""));for(f=b.length;f--;)this.remove(b[f]);return this},isExpired:function(f){f=g.getItem(this._ttlKey(f));f=JSON.parse(f);return c.isNumber(f)&&(new Date).getTime()>f?!0:!1}}:{get:c.noop,set:c.noop,remove:c.noop,clear:c.noop,isExpired:c.noop});return a}(),t=function(){function a(a){c.bindAll(this);a=a||{};this.sizeLimit=a.sizeLimit||10;this.cache={};this.cachedKeysByAge=[]}c.mixin(a.prototype,{get:function(a){return this.cache[a]}, set:function(a,c){var d;this.cachedKeysByAge.length===this.sizeLimit&&(d=this.cachedKeysByAge.shift(),delete this.cache[d]);this.cache[a]=c;this.cachedKeysByAge.push(a)}});return a}(),s=function(){function a(e){c.bindAll(this);e=c.isString(e)?{url:e}:e;f=f||new t;q=c.isNumber(e.maxParallelRequests)?e.maxParallelRequests:q||6;this.url=e.url;this.wildcard=e.wildcard||"%QUERY";this.filter=e.filter;this.replace=e.replace;this.ajaxSettings={type:"get",cache:e.cache,timeout:e.timeout,dataType:e.dataType|| "json",beforeSend:e.beforeSend};this._get=(/^throttle$/i.test(e.rateLimitFn)?c.throttle:c.debounce)(this._get,e.rateLimitWait||300)}var h=0,g={},q,f;c.mixin(a.prototype,{_get:function(e,b){function a(g){var d=c.filter?c.filter(g):g;b&&b(d);f.set(e,g)}var c=this;h<q?this._sendRequest(e).done(a):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(e){function b(){h--;g[e]=null;a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}var a=this,f=g[e],c= {url:e};f||(h++,d.extend(c,this.ajaxSettings),f=g[e]=d.ajax(c).always(b));return f},get:function(a,b){var g=this,d=encodeURIComponent(a||""),h;b=b||c.noop;d=this.replace?this.replace(this.url,d):this.url.replace(this.wildcard,d);(h=f.get(d))?c.defer(function(){b(g.filter?g.filter(h):h)}):this._get(d,b);return!!h}});return a}(),n=function(){var a,h,g,q;function f(b){c.bindAll(this);c.isString(b.template)&&!b.engine&&d.error("no template engine specified");!b.local&&(!b.prefetch&&!b.remote)&&d.error("one of local, prefetch, or remote is required"); this.name=b.name||c.getUniqueId();this.limit=b.limit||5;this.minLength=b.minLength||1;this.header=b.header;this.footer=b.footer;this.valueKey=b.valueKey||"value";this.template=e(b.template,b.engine,this.valueKey);this.local=b.local;this.prefetch=b.prefetch;this.remote=b.remote;this.itemHash={};this.adjacencyList={};this.storage=b.name?new l(b.name):null}function e(b,a,e){c.isFunction(b)||(c.isString(b)?(b=a.compile(b),b=c.bind(b.render,b)):b=function(b){return"<p>"+b[e]+"</p>"});return b}a="thumbprint"; h="protocol";g="itemHash";q="adjacencyList";c.mixin(f.prototype,{_processLocalData:function(b){this._mergeProcessedData(this._processData(b))},_loadPrefetchData:function(b){function e(d){d=b.filter?b.filter(d):d;d=f._processData(d);var v=d.itemHash,k=d.adjacencyList;f.storage&&(f.storage.set(g,v,b.ttl),f.storage.set(q,k,b.ttl),f.storage.set(a,x,b.ttl),f.storage.set(h,c.getProtocol(),b.ttl));f._mergeProcessedData(d)}var f=this,x="0.9.3"+(b.thumbprint||""),k,A,w,y;this.storage&&(k=this.storage.get(a), A=this.storage.get(h),w=this.storage.get(g),y=this.storage.get(q));k=k!==x||A!==c.getProtocol();b=c.isString(b)?{url:b}:b;b.ttl=c.isNumber(b.ttl)?b.ttl:864E5;w&&y&&!k?(this._mergeProcessedData({itemHash:w,adjacencyList:y}),w=d.Deferred().resolve()):w=d.getJSON(b.url).done(e);return w},_transformDatum:function(b){var a=c.isString(b)?b:b[this.valueKey],e=b.tokens||c.tokenizeText(a),a={value:a,tokens:e};c.isString(b)?(a.datum={},a.datum[this.valueKey]=b):a.datum=b;a.tokens=c.filter(a.tokens,function(b){return!c.isBlankString(b)}); a.tokens=c.map(a.tokens,function(b){return b.toLowerCase()});return a},_processData:function(b){var a=this,e={},f={};c.each(b,function(b,g){var d=a._transformDatum(g),h=c.getUniqueId(d.value);e[h]=d;c.each(d.tokens,function(b,a){var e=a.charAt(0),e=f[e]||(f[e]=[h]);!~c.indexOf(e,h)&&e.push(h)})});return{itemHash:e,adjacencyList:f}},_mergeProcessedData:function(b){var a=this;c.mixin(this.itemHash,b.itemHash);c.each(b.adjacencyList,function(b,e){var f=a.adjacencyList[b];a.adjacencyList[b]=f?f.concat(e): e})},_getLocalSuggestions:function(b){var a=this,e=[],f=[],g,d=[];c.each(b,function(b,a){var f=a.charAt(0);!~c.indexOf(e,f)&&e.push(f)});c.each(e,function(b,e){var c=a.adjacencyList[e];if(!c)return!1;f.push(c);if(!g||c.length<g.length)g=c});if(f.length<e.length)return[];c.each(g,function(e,g){var h=a.itemHash[g];c.every(f,function(b){return~c.indexOf(b,g)})&&c.every(b,function(b){return c.some(h.tokens,function(a){return 0===a.indexOf(b)})})&&d.push(h)});return d},initialize:function(){var b;this.local&& this._processLocalData(this.local);this.transport=this.remote?new s(this.remote):null;b=this.prefetch?this._loadPrefetchData(this.prefetch):d.Deferred().resolve();this.local=this.prefetch=this.remote=null;this.initialize=function(){return b};return b},getSuggestions:function(b,a){function e(b){d=d.slice(0);c.each(b,function(b,a){var e=f._transformDatum(a);!c.some(d,function(b){return e.value===b.value})&&d.push(e);return d.length<f.limit});a&&a(d)}var f=this,g,d,h=!1;b.length<this.minLength||(g=c.tokenizeQuery(b), d=this._getLocalSuggestions(g).slice(0,this.limit),d.length<this.limit&&this.transport&&(h=this.transport.get(b,e)),!h&&a&&a(d))}});return f}(),u=function(){function a(a){var g=this;c.bindAll(this);this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};this.$hint=d(a.hint);this.$input=d(a.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent);if(c.isMsie())this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function(a){g.specialKeyCodeMap[a.which||a.keyCode]||c.defer(g._compareQueryToInputValue)});else this.$input.on("input.tt",this._compareQueryToInputValue);this.query=this.$input.val();this.$overflowHelper=d("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:this.$input.css("font-family"),fontSize:this.$input.css("font-size"),fontStyle:this.$input.css("font-style"),fontVariant:this.$input.css("font-variant"),fontWeight:this.$input.css("font-weight"), wordSpacing:this.$input.css("word-spacing"),letterSpacing:this.$input.css("letter-spacing"),textIndent:this.$input.css("text-indent"),textRendering:this.$input.css("text-rendering"),textTransform:this.$input.css("text-transform")}).insertAfter(this.$input)}c.mixin(a.prototype,r,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(a){var c=this.specialKeyCodeMap[a.which||a.keyCode];c&&this.trigger(c+"Keyed",a)},_compareQueryToInputValue:function(){var a= this.getInputValue(),c;c=this.query;var d=a;c=(c||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");d=(d||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");(c=c===d)&&this.query.length!==a.length?this.trigger("whitespaceChanged",{value:this.query}):c||this.trigger("queryChanged",{value:this.query=a})},destroy:function(){this.$hint.off(".Rq");this.$input.off(".Rq");this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query}, setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,c){this.$input.val(a);!c&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(a){this.$hint.val(a)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var a= this.$input.val().length,d=this.$input[0].selectionStart;return c.isNumber(d)?d===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0}});return a}(),p=function(){function a(a){c.bindAll(this);this.isOpen=!1;this.isEmpty=!0;this.isMouseOverDropdown=!1;this.$menu=d(a.menu).on("mouseenter",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click",".Rq-Yq",this._handleSelection).on("mouseover",".Rq-Yq",this._handleMouseover)}function h(a){return a.data("suggestion")} var g={display:"block"},q={whiteSpace:"nowrap",cursor:"pointer"},f={whiteSpace:"normal"};c.mixin(a.prototype,r,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(a){a=d(a.currentTarget);this._getSuggestions().removeClass("Rq-Zq-Ar-Br");a.addClass("Rq-Zq-Ar-Br")},_handleSelection:function(a){a=d(a.currentTarget);this.trigger("suggestionSelected",h(a))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()}, _moveCursor:function(a){var b,f;this.isVisible()&&(b=this._getSuggestions(),f=b.filter(".Rq-Zq-Ar-Br"),f.removeClass("Rq-Zq-Ar-Br"),a=b.index(f)+a,a=(a+1)%(b.length+1)-1,-1===a?this.trigger("cursorRemoved"):(-1>a&&(a=b.length-1),b=b.eq(a).addClass("Rq-Zq-Ar-Br"),this._ensureVisibility(b),this.trigger("cursorMoved",h(b))))},_getSuggestions:function(){return this.$menu.find(".Rq-Sq > .Rq-Yq")},_ensureVisibility:function(a){var b=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"), 10),f=this.$menu.scrollTop(),c=a.position().top;a=c+a.outerHeight(!0);0>c?this.$menu.scrollTop(f+c):b<a&&this.$menu.scrollTop(f+(a-b))},destroy:function(){this.$menu.off(".Rq");this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isMouseOverDropdown=this.isOpen=!1,this._hide(),this.$menu.find(".Rq-Sq > .Rq-Yq").removeClass("Rq-Zq-Ar-Br"),this.trigger("closed"))}, open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){var b={left:"0",right:"auto"},f={left:"auto",right:" 0"};"ltr"===a?this.$menu.css(b):this.$menu.css(f)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var a=this._getSuggestions().filter(".Rq-Zq-Ar-Br").first();return 0<a.length?h(a):null},getFirstSuggestion:function(){var a=this._getSuggestions().first(); return 0<a.length?h(a):null},renderSuggestions:function(a,b){var h="Rq-Tq-"+a.name,k,l;l=this.$menu.find("."+h);var m,n,p;0===l.length&&(l=d('<span class="Rq-Sq"></span>').css(g),l=d("<div></div>").addClass(h).append(a.header).append(l).append(a.footer).appendTo(this.$menu));0<b.length?(this.isEmpty=!1,this.isOpen&&this._show(),m=document.createElement("div"),n=document.createDocumentFragment(),c.each(b,function(b,c){c.dataset=a.name;k=a.template(c.datum);m.innerHTML='<div class="Rq-Yq">%body</div>'.replace("%body", k);p=d(m.firstChild).css(q).data("suggestion",c);p.children().each(function(){d(this).css(f)});n.appendChild(p[0])}),l.show().find(".Rq-Sq").html(n)):this.clearSuggestions(a.name);this.trigger("suggestionsRendered")},clearSuggestions:function(a){a=a?this.$menu.find(".Rq-Tq-"+a):this.$menu.find('[class^="Rq-Tq-"]');var b=a.find(".Rq-Sq");a.hide();b.empty();0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}});return a}(),k=function(){function a(a){var e,b;c.bindAll(this);var h=a.input; e=d(g.wrapper);b=d(g.dropdown);var h=d(h),l=d(g.hint);e=e.css(k.wrapper);b=b.css(k.dropdown);l.css(k.hint).css({backgroundAttachment:h.css("background-attachment"),backgroundClip:h.css("background-clip"),backgroundColor:h.css("background-color"),backgroundImage:h.css("background-image"),backgroundOrigin:h.css("background-origin"),backgroundPosition:h.css("background-position"),backgroundRepeat:h.css("background-repeat"),backgroundSize:h.css("background-size")});h.data("ttAttrs",{dir:h.attr("dir"), autocomplete:h.attr("autocomplete"),spellcheck:h.attr("spellcheck"),style:h.attr("style")});h.addClass("Rq-Wq").attr({autocomplete:"off",spellcheck:!1}).css(k.query);try{!h.attr("dir")&&h.attr("dir","auto")}catch(m){}this.$node=h.wrap(e).parent().prepend(l).append(b);this.datasets=a.datasets;this.dir=null;this.eventBus=a.eventBus;a=this.$node.find(".Rq-Bn-Ym");e=this.$node.find(".Rq-Wq");b=this.$node.find(".Rq-Xq");this.dropdownView=(new p({menu:a})).on("suggestionSelected",this._handleSelection).on("cursorMoved", this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent);this.inputView=(new u({input:e,hint:b})).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged", this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed", this._autocomplete)}function h(a){var e=a.find(".Rq-Wq");c.each(e.data("ttAttrs"),function(a,f){c.isUndefined(f)?e.removeAttr(a):e.attr(a,f)});e.detach().removeData("ttAttrs").removeClass("Rq-Wq").insertAfter(a);a.remove()}var g={wrapper:'<span class="Ng-Vq"></span>',hint:'<input class="Rq-Xq" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="Rq-Bn-Ym"></span>'},k={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent", boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};c.isMsie()&&c.mixin(k.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});c.isMsie()&&7>=c.isMsie()&&(c.mixin(k.wrapper,{display:"inline",zoom:"1"}),c.mixin(k.query,{marginTop:"-1px"}));c.mixin(a.prototype,r,{_managePreventDefault:function(a){var c=a.data,b;b=!1;switch(a.type){case "tabKeyed":a= this.inputView.getHintValue();b=this.inputView.getInputValue();b=a&&a!==b;break;case "upKeyed":case "downKeyed":b=!c.shiftKey&&!c.ctrlKey&&!c.metaKey}b&&c.preventDefault()},_setLanguageDirection:function(){var a=this.inputView.getLanguageDirection();a!==this.dir&&(this.dir=a,this.$node.css("direction",a),this.dropdownView.setLanguageDirection(a))},_updateHint:function(){var a=this.dropdownView.getFirstSuggestion(),a=a?a.value:null,e=this.dropdownView.isVisible(),b=this.inputView.isOverflow();a&&(e&& !b)&&(e=this.inputView.getInputValue(),b=e.replace(/\s{2,}/g," ").replace(/^\s+/g,""),b=c.escapeRegExChars(b),b=RegExp("^(?:"+b+")(.*$)","i"),a=b.exec(a),this.inputView.setHintValue(e+(a?a[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(a){this.inputView.setInputValue(a.data.value, !0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(a){this.dropdownView["blured"===a.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(a){var c=a.data;if(!c.shiftKey&&!c.ctrlKey&&!c.metaKey)this.dropdownView["upKeyed"===a.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(a){var e="suggestionSelected"===a.type,b=e?a.data:this.dropdownView.getSuggestionUnderCursor();b&&(this.inputView.setInputValue(b.value),e?this.inputView.focus(): a.data.preventDefault(),e&&c.isMsie()?c.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",b.datum,b.dataset))},_getSuggestions:function(){var a=this,e=this.inputView.getQuery();c.isBlankString(e)||c.each(this.datasets,function(b,c){c.getSuggestions(e,function(b){e===a.inputView.getQuery()&&a.dropdownView.renderSuggestions(c,b)})})},_autocomplete:function(a){var c;if("rightKeyed"===a.type||"leftKeyed"===a.type)if(c=this.inputView.isCursorAtEnd(),a="ltr"===this.inputView.getLanguageDirection()? "leftKeyed"===a.type:"rightKeyed"===a.type,!c||a)return;c=this.inputView.getQuery();a=this.inputView.getHintValue();""!==a&&c!==a&&(c=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(c.value),this.eventBus.trigger("autocompleted",c.datum,c.dataset))},_propagateEvent:function(a){this.eventBus.trigger(a.type)},destroy:function(){this.inputView.destroy();this.dropdownView.destroy();h(this.$node);this.$node=null},setQuery:function(a){this.inputView.setQuery(a);this.inputView.setInputValue(a); this._clearHint();this._clearSuggestions();this._getSuggestions()}});return a}();(function(){var a={},h;h={initialize:function(g){var h;g=c.isArray(g)?g:[g];0===g.length&&d.error("no datasets provided");h=c.map(g,function(c){var d=a[c.name]?a[c.name]:new n(c);c.name&&(a[c.name]=d);return d});return this.each(function(){var a=d(this),e,b=new m({el:a});e=c.map(h,function(a){return a.initialize()});a.data("ttView",new k({input:a,eventBus:b=new m({el:a}),datasets:h}));d.when.apply(d,e).always(function(){c.defer(function(){b.trigger("initialized")})})})}, destroy:function(){return this.each(function(){var a=d(this),c=a.data("ttView");c&&(c.destroy(),a.removeData("ttView"))})},setQuery:function(a){return this.each(function(){var c=d(this).data("ttView");c&&c.setQuery(a)})}};d.extend(d.fn,{typeahead:function(a){return h[a]?h[a].apply(this,[].slice.call(arguments,1)):h.initialize.apply(this,arguments)}})})()})(window.$); (function(){'use strict';var l=!0,u=null;(function(){function n(c,b){function f(){}f.prototype=(c.b=b).prototype;(c.prototype=new f).constructor=c;"function"==typeof b.ga&&b.ga(c);return c}function m(c,b){var f={}.hasOwnProperty,a;for(a in b)f.call(b,a)&&(c[a]=b[a]);return c}function z(c,b){for(var f in b)c[f]=b[f]}function y(c,b,f){var a=this;return function(){var q=F.call(arguments),k,h=q.length,s=f.length,r=b?b.concat():[],t=f?f.concat():[];for(k=0;k<h;++k)r[t[0]]=q[k],t.shift();return h<s&&h?y.apply(a,[c,r,t]):c.apply(a,r)}}function G(c){function b(a){return 1< c.length?function(){var q=a?a.concat():[];f=this;return q.push.apply(q,arguments)<c.length&&arguments.length?b.call(f,q):c.apply(f,q)}:c}var f;return b()}var h,A,B,C,x,D,E,F=[].slice;window.e={};h=window.e.Va=function(){var c,b,f,a,q,k,h,s,r,t;c={};$.fn.na=function(){return _(this.get(0).elements).reduce(function(a,d){var p;if((d instanceof HTMLInputElement||d instanceof HTMLSelectElement||d instanceof HTMLTextAreaElement)&&d.name)"checkbox"===d.type?a[d.name]=d.checked:(p=d.value,p=""!==p?p:u,a[d.name]= d.e?JSON.parse(p):p);return a},{})};$.fn.Ya=function(a){var d,p,v;d=this.get(0).elements;for(p in a)if(v=d[p])"checkbox"===v.type?v.checked=a[p]:v.value=a[p]};(function(){}).bind||(Function.prototype.bind=function(){var a,d,p;a=this;d=[].shift.apply(arguments);p=arguments;return function(){return a.apply(d,p)}});Object.defineProperty(NodeList.prototype,"value",{get:function(){var a,d,p;a=0;for(d=this.length;a<d;++a)if(p=this[a],p.checked===l)return p.value;return{}},set:function(a){var d,p,v;d=0; for(p=this.length;d<p;++d)if(v=this[d],a===v.value){v.checked=l;break}},configurable:l,enumerable:l});b=function(a){function d(a,p){var b;p==u&&(p={});if((b=p.parent)!=u)this.parent=b;d.b.apply(this,arguments)}var p=n((m(d,a).c="gz",d),a).prototype;p.url=function(){return this.parent!=u?this.parent.url()+"/"+a.prototype.url.call(this):"/api/v1/"+a.prototype.url.call(this)};p.sync=function(p,b,q){var f,c;if("read"===p)f=b.attributes,q.url=b.url()+"?"+function(){var a=[];for(c in f)a.push(c+"="+f[c]); return a}().join("&");else if("create"===p||"update"===p)f=b.attributes,z(f,function(){var a={};for(c in f)f[c]instanceof d&&(a[c]=f[c].get("id"));return a}()),q.attrs=f;return a.prototype.sync.apply(this,arguments)};return d}(window.Backbone.Model);f=function(a){function d(){d.b.apply(this,arguments)}n((m(d,a).c="gz",d),a).prototype.url=function(){return this.parent!=u?this.parent.url()+"/"+a.prototype.url.call(this):"/api/v1/"+this.urlRoot};return d}(window.Backbone.Collection);c.ab=function(a, d){return d.bind(a)};c.d=window.document.createElement.bind(window.document);c.F=window.Backbone;c.f=window.Backbone.View;c.U=b;c.i=f;b=window.Ink.UI;c.j={k:{Da:b.Sticky,Ea:b.Tabs,va:b.DatePicker,W:b.Modal,u:b.Table,Fa:b.Toggle,G:b.Tooltip}};window.g!=u&&z(c,window.g);window.g=c;a=c.F.sync;q=l;c.F.sync=function(){q&&document.body.appendChild(k);q=!1;return a.apply(this,arguments)};b=$(document);b.on("ajaxBeforeSend",function(){setTimeout(function(){k.parentNode!=u&&h.classList.add("Dq-Eq-L")},100)}); b.on("ajaxComplete",function(){setTimeout(function(){k.classList.remove("Dq-Eq-L");document.body.contains(k)&&document.body.removeChild(k);q=l},10)});b.on("ajaxError",function(a,d){var p,b,f;0===d.status&&(p=document.createElement("nav"),p.className="O-Xm",b=p.style,b.padding="13px",b.backgroundColor="rgba(0,0,0,0.69)",b.borderRadius="7px",b.position="fixe2",b.top="49px",b.left="0",b.width="100%",b.textAlign="center",b.marginTop="0",b=document.createElement("div"),f=document.createElement("p"),b.className= "O-Zn Ao Pb",f.style.margin="0",f.innerHTML="<b>Error:</b> &nbsp; Sin conexi\u00f3n.",b.appendChild(f),p.appendChild(b),document.body.appendChild(p))});k=c.d("div");b=k.style;b.position="fixed";b.width="100%";b.height="100%";b.top="0";b.bottom="0";b.right="0";b.left="0";b.zIndex="6969";b.backgroundColor="transparent";h=c.d("div");h.className="Dq-Eq";b="Dq-Fq-Gq Dq-Fq-Hq Dq-Fq-Iq Dq-Fq-Jq Dq-Fq-Kq Dq-Fq-Lq Dq-Fq-Mq Dq-Fq-Nq".split(" ");f=0;for(s=b.length;f<s;++f)r=b[f],t=c.d("div"),t.className=r+" Dq-Fq", h.appendChild(t);k.appendChild(h);return c}();window.e.ha=function(){var c,b,f,a,q,k,w,s,r,t;c={};b=h.U;f=function(a){function d(){d.b.apply(this,arguments)}n((m(d,a).c="gz",d),a).prototype.urlRoot="shareholder";return d}(b);a=function(a){function d(){d.b.apply(this,arguments)}n((m(d,a).c="gz",d),a).prototype.model=f;return d}(h.i);q=function(a){function d(){d.b.apply(this,arguments)}a=n((m(d,a).c="gz",d),a).prototype;a.urlRoot="customer";a.Ka=function(a,d){a.customer=this.toJSON();return(new s(a, {parent:this})).save({},d)};return d}(b);k=function(a){function d(){d.b.apply(this,arguments)}a=n((m(d,a).c="gz",d),a).prototype;a.url="customer";a.model=q;return d}(h.i);w=function(a){function d(){d.b.apply(this,arguments)}n((m(d,a).c="gz",d),a).prototype.urlRoot="customer/lastdeclaration";return d}(b);s=function(a){function d(){d.b.apply(this,arguments)}n((m(d,a).c="gz",d),a).prototype.urlRoot="declaration";return d}(b);r=function(a){function d(){d.b.apply(this,arguments)}a=n((m(d,a).c="gz",d), a).prototype;a.url="declaration";a.model=s;return d}(h.i);t=function(a){function d(){d.b.apply(this,arguments)}n((m(d,a).c="gz",d),a).prototype.urlRoot="dispatch";return d}(b);b=function(a){function d(){d.b.apply(this,arguments)}a=n((m(d,a).c="gz",d),a).prototype;a.urlRoot="dispatch";a.model=t;return d}(h.i);c.Ba=f;c.Ca=a;c.sa=q;c.ua=k;c.wa=s;c.xa=r;c.ya=t;c.S=b;c.ta=w;return c}();A=window.e.Ta=function(){var c,b;c={};b=function(b){function a(){a.b.apply(this,arguments)}b=n((m(a,b).c="gz",a),b).prototype; b.tagName="input";b.events={keyup:function(a){13===a.keyCode&&this.trigger("Pc",a.currentTarget.value)}};b.La=function(a){this.el.placeholder=a};b.fa=function(){this.el.focus()};b.pa=function(){var a="<b>Buscar por <em>raz\u00f3n social</em>, <em>RUC</em> o <em>c\u00f3digo de declaraci\u00f3n jurada</em>.</b>";a==u&&(a="Buscar...");this.r.innerHTML="<div class='H'style='text-align: justify;margin-right:1em'>"+a+"</div><gcca style='display:none'></gcca>";this.h.options.text="gcca";this.h.tooltips[0]._makeTooltip()}; b.ea=function(){var a;this.h!=u&&(a=this.h,a.options.text="",a.tooltips[0]._removeTooltip())};b.initialize=function(){this.r=h.d("div");this.r.className="O-Eo";this.h=new h.j.k.G(this.el,{text:"",where:"Zd",spacing:12,template:this.r,templatefield:"gcca"})};b.h=u;b.r=u;return a}(h.f);c.V=b;return c}();B=window.e.Na=function(){var c,b;c={};b=[window.e.Sa=function(){var b;b={};return b=function(a){function b(){b.b.apply(this,arguments)}a=n((m(b,a).c="gz",b),a).prototype;b.o="Principal";b.p="Rb-Ti"; a.tagName="div";a.initialize=function(){this.$el.html("<h3>Principal</h3>")};return b}(window.e.N=function(){var a;a={};return a=function(a){function b(a,c){this.K=c;b.b.apply(this,arguments)}a=n((m(b,a).c="gz",b),a).prototype;b.o="Module";b.p="";a.tagName="div";return b}(h.f)}())}(),window.e.Pa=function(){var b,a;b={};a=window.e.Ua={$a:"<form method='post' style='margin-top:0' class='O-On Ab-Xa Q-R S' id='customer'>",a:"<div class='An-R'>",control:"<div class='An W-Aa Cb-Sa Db-Sa'>",Ha:"<div class='An W-Na Cb-Na Db-Na H-K'>", Ia:"<div class='An W-Ga Cb-Sa Db-Sa Sn-Tn'>",Ja:"<div class='An W-Sa Cb-Sa Db-Sa Sn-Tn'>",label:"<label class='W-Ma Cb-Sa Db-Sa'>",Xa:"<label class='W-Z Cb-Z Db-Z'>",ia:"<label class='W-Sa Cb-Sa Db-Sa'>",J:"<div class='An W-Sa Cb-Sa Db-Sa'>",l:"<div class='W-Ga Cb-Ga Db-Sa Qq-Bo'>",Ga:"<div class='W-Ga Cb-Sa Db-Sa Qq-Bo'>",I:"<div class='W-Sa Cb-Sa Db-Sa Qq-Bo'>"};return b=function(b){function c(){this.q=this.q.bind(this);c.b.apply(this,arguments)}var f=n((m(c,b).c="gz",c),b).prototype;c.o="Declaraci\u00f3n"; c.p="Rb-Fe";f.q=function(){this.ma()};f.initialize=function(){this.render()};f.ma=function(){var a=this;this.$el.html(this.qa({references:u,trackingId:"2D9B2A7A",source:u,customer:{contact:u,socialObject:u,legalDocumentType:"DNI",legalName:u,shareholders:[],name:"cristHian Gz.",documentNumber:"12345678989",officePhone:u,addressCityCode:u,activity:u,legalDocumentNumber:u,documentType:"RUC",address:u,isObliged:!1,contactPhone:u,hasOfficier:!1,id:5910974510923776,officialAddress:u},thirdDocumentType:"DNI", thirdDocumentNumber:u,thirdName:u,thirdType:"person",id:5770237022568448,third:!1}));this.$el.find("#Kr-Zn").on("change",function(b){var c;c=a.$el.find("[name=clerkAlert]");b.target.checked?c.css("minHeight","2.5em").show().animate({height:"10em"},700,"ease"):c.animate({height:"0"},300,"linear",function(){return c.css("height","0").hide()})})};f.render=function(){this.K.t.pa();this.K.t.fa();return b.prototype.render.call(this)};f.qa=function(b){return"<form id='dispatchForm' class='O-On O-On-Gr'>"+ a.l+"<fieldset><legend>Cliente</legend>"+a.a+""+a.label+"Nombre</label>"+a.control+"<input type='text'value='"+b.customer.name+"' disabled></div></div>"+a.a+""+a.label+"Monto</label>"+a.control+"<input type='text'value='"+b.amount+"' disabled></div></div>"+a.a+""+a.label+"Origen</label>"+a.control+"<input type='text'value='"+b.source+"' disabled></div></div>"+a.a+""+a.ia+"Referencias</label>"+a.J+"<input type='text' value='' disabled></div></div></fieldset></div>"+a.l+"<fieldset><legend>Tercero</legend>"+ a.a+""+a.label+"Tipo</label>"+a.control+"<input type='text'value='"+b.thirdType+"' disabled></div></div>"+a.a+""+a.label+"Nombre</label>"+a.control+"<input type='text'value='"+b.thirdName+"' disabled></div></div><em><h6 class='Ib'>Documento de identidad</h6><br></em>"+a.a+""+a.label+"Tipo</label>"+a.control+"<input type='text'value='"+b.thirdDocumentType+"' disabled></div></div>"+a.a+""+a.label+"N\u00famero</label>"+a.control+"<input type='text'value='"+b.thirdDocumentNumber+"' disabled></div></div></fieldset></div>"+ a.I+"<fieldset><legend>Alerta</legend>"+a.a+"<div class='An W-Sa Cb-Sa Db-Sa'><label><span>&nbsp;&nbsp;\u00bfHay alertas?</span><input id='Kr-Zn' type='checkbox'></label></div></div>"+a.a+""+a.J+"<textarea name='clerkAlert' style='display:none'placeholder='Motivo de la alerta'></textarea></div></div></fieldset></div>"+a.l+"<fieldset><legend>Datos SO</legend>"+a.a+""+a.control+"Cod. Agente Aduana <input name='customsBrokerCode' type='text' value=''></div></div>"+a.a+""+a.control+"Fecha Recepci\u00f3n <input name='dateReceived' type='text' value=''></div></div>"+ a.a+""+a.control+"Refer. Cliente <input name='customerReferences' type='text' value=''></div></div>"+a.a+""+a.control+"Reg. Aduanero <input name='customsRegime' type='text' value=''></div></div>"+a.a+""+a.control+"Cod. Aduana <input name='customsCode' type='text' value=''></div></div></fieldset></div>"+a.l+"<fieldset><legend>Factura Comercial</legend>"+a.a+""+a.control+"Num Factura <input name='invoiceNumber' type='text' value=''></div></div>"+a.a+""+a.control+"Razon Social <input name='businessName' type='text' value=''></div></div>"+ a.a+""+a.control+"Direccion <input name='invoiceAddress' type='text' value=''></div></div>"+a.a+""+a.control+"Valor/Importe <input name='invoiceValue' type='text' value=''></div></div>"+a.a+""+a.control+"Moneda V/I <input name='invoiceCurrencyValue' type='text' value=''></div></div>"+a.a+""+a.control+"Ajuste Valor <input name='invoiceAdjustment' type='text' value=''></div></div>"+a.a+""+a.control+"Moneda AV <input name='invoiceCurrencyValue' type='text' value=''></div></div>"+a.a+""+a.control+"Orden Despacho <input name='orderNumber' type='text' value=''></div></div></fieldset></div>"+ a.I+""+a.a+""+a.control+"<button type='button' class='O-Rn'>Generar Despacho</button></div></div></div></form>"};return c}(window.e.N)}(),window.e.Ra=function(){var b,a,c,k,w;b={};b=window.e.ha;a=window.e.Wa=function(){var a,b,c,f;a={};b=function(a){function b(a,d,c){this.ka=a;this.n=d;this.A=c!=u?c:this.ja;b.b.call(this)}a=n((m(b,a).c="gz",b),a).prototype;a.tagName="div";a.className="O-Fp Gp";a.show=function(){var a=this;this.s==u&&(document.body.appendChild(this.el),this.s=new h.j.k.W(this.O,{onDismiss:function(){a.$el.remove(); a.trigger("Co")}}),this.n.constructor===String?this.body.innerHTML=this.n:this.body.appendChild(this.n))};a.hide=function(){this.s!=u&&this.s.dismiss()};a.initialize=function(){var a,b,d,c;a=h.d("div");b=h.d("div");d=h.d("div");c=h.d("div");this.el.style.zIndex="10000";a.className="O-Ip";b.className="Ip-Kp";d.className="Ip-Jp";c.className="Ip-Lp";b.innerHTML="<button class='Ip-Bg O-Co'></button><h5>"+this.ka+"</h5>";this.A.constructor===String?c.innerHTML=this.A:c.appendChild(this.A);a.appendChild(b); a.appendChild(d);a.appendChild(c);this.el.appendChild(a);this.O=a;this.body=d};a.O=u;a.body=u;a.n=u;a.ja="<div class='Va-K'><button class='O-Rn E'>Aceptar</button><button class='O-Rn G O-Co'>Cerrar</button></div>";a.s=u;return b}(h.f);c=function(a){function b(a,d,c){this.type=a;this.message=d;this.aa=c!=u?c:void 0;b.b.call(this)}var c=n((m(b,a).c="gz",b),a).prototype,f=b;c.tagName="div";c.className="O-Zn";c.events={"click button":function(){return this.hide()}};b.e=1;b.g=3;b.z=0;c.initialize=function(){var a, b=this;this.$el.on("mouseover",function(){return b.el.style.opacity="initial"});this.$el.on("mouseleave",function(){return b.el.style.opacity="0.69"});this.el.classList.add(this.aa!=u?"Bo":"Ao");this.el.classList.add(this.type);a=this.el.style;a.position="fixed";a.width="96%";a.marginLeft="2%";this.render()};c.render=function(){this.el.innerHTML="<button class='O-Co'>&times;</button><p>"+this.message+"</p>";return a.prototype.render.call(this)};c.show=function(a){var b=this;a==u&&(a=l);this.el.style.top= f.g*f.e+"em";f.e++;f.z++;f.g=3.6;this.el.style.opacity="0";this.$el.appendTo(document.body);this.$el.animate({opacity:1},900,"ease-in");a&&setTimeout(function(){return b.hide()},6900)};c.hide=function(){var a=this;f.z--;1>f.z&&(f.e=1,f.g=3);this.$el.off();this.$el.animate({opacity:0},700,"ease-out",function(){return a.$el.remove()})};return b}(h.f);f=function(a){function b(){b.b.apply(this,arguments)}var c=n((m(b,a).c="gz",b),a).prototype;c.tagName="input";c.initialize=function(){this.render()};c.render= function(){var b,c;b=this.$el.next();(c=b.get(0))&&b.remove();this.$el.typeahead({prefetch:"/static/pos.json",template:'<p style="float:right;font-style:italic;"><%= language %></p><p style="font-weight:bold;"><%= name %></p><p style="font-size:14px;text-align:justify"><%= description %></p>',engine:{compile:function(a){var b;b=_.template(a);return{render:function(a){return b(a)}}}}});c&&this.$el.after(b);return a.prototype.render.call(this)};return b}(h.f);a.T=b;a.za=c;a.Aa=f;return a}();c=window.e.Oa= function(){var a,b;a={};b=function(a){function b(){b.b.apply(this,arguments)}a=n((m(b,a).c="gz",b),a).prototype;a.tagName="div";a.oa=function(){this.el.appendChild(this.C);this.el.appendChild(this.P);new h.j.k.u(this.C)};a.Za=function(a){var b,c,f;b=0;for(c=a.length;b<c;++b)f=a[b],this.H(f)};a.H=function(a){var b,c,f,q,k;b=h.d("tr");c=0;for(f=a.length;c<f;++c)(q=a[c])||(q=""),k=h.d("td"),q.constructor===Object?k.appendChild(q):k.innerHTML=q,b.appendChild(k);this.M&&(k.className="H-K");this.R.appendChild(b)}; a.da=function(){var a=["Orden","Cliente","#Alertas","&nbsp;"],b,c,f,q,k,r,n,m;b=h.d("table");c=h.d("thead");f=h.d("tbody");b.className="O-Ii Ho";b.dataset.pageSize="6";q=h.d("tr");k=0;for(r=a.length;k<r;++k)n=a[k],m=h.d("th"),m.innerHTML=n,m.className="H-I",q.appendChild(m);"&nbsp;"===n&&(this.M=l);c.appendChild(q);b.appendChild(c);b.appendChild(f);a=h.d("nav");c=h.d("ul");a.className="O-Xm";c.className="En In Jn E";a.appendChild(c);this.R=f;this.P=a;this.C=b};a.R=u;a.P=u;a.C=u;a.M=u;return b}(window.e.N); a.u=b;return a}();k=window.e.Qa=function(){var b;b={};return b=function(a){function b(a){this.m=a;this.B=this.B.bind(this);this.w=this.w.bind(this);this.v=this.v.bind(this);b.b.call(this,this.Y,this.v(),this.w())}a=n((m(b,a).c="gz",b),a).prototype;a.Y="Se\u00f1ales de alerta";a.v=function(){function a(b){return function(a){return a.currentTarget.checked?b.show():b.hide()}}var b,c,f,q,h,k,m,n,r,s;b=0;c=$("<form class='O-On'>");f=0;for(h=(q=this.X).length;f<h;++f)k=q[f],m=$("<div class='An-R Q-R'>"), m.append("<label class='W-Z Cb-Z Db-Z'style='margin-bottom:0;text-align:justify'>"+k+"</label>"),n=$("<div class='An W-Na Cb-Na Db-Na H-K'>"),r=k=$("<input>"),r.attr("type","checkbox"),r.css("height","20px"),n.append(k),m.append(n),n=$("<div class='An W-Sa Cb-Sa Db-Sa'style='padding-right:7em;padding-left:2em'></div>"),r=s=$("<textarea name='"+ ++b+"'placeholder='Comentarios acerca de la alerta "+b+"'>"),r.css({minHeight:"9em",marginTop:"1em"}),this.m.get("alerts")!=u&&this.m.get("alerts")[b]!=u? (k.attr("checked",l),s.val(this.m.get("alerts")[b])):s.hide(),k.on("click",a(s)),n.append(s),m.append(n),c.append(m),c.append("<hr>");this.form=c;return c.get(0)};a.w=function(){var a,b,c;a=$("<div class='Va-K'>");b=$("<button class='O-Rn E'>Guardar</button>");c=$("<button class='O-Rn G O-Co'>Cerrar</button>");b.on("click",this.B);a.append(b);a.append(c);return a.get(0)};a.B=function(){var a=this;this.m.save({alerts:this.form.na()},{success:function(){return a.hide()},error:function(){return alert("ERROR: alerts")}})}; a.X="1. El cliente, para efectos de su identificaci\u00f3n, presenta informaci\u00f3n inconsistenteo de dificilverificaci\u00f3npor parte del sujeto obligado.;2. El cliente declara o registra la misma direcci\u00f3n que la de otras personas con las que no tiene relaci\u00f3n o v\u00ednculo aparente.;3. Existencia de indicios de que el ordenante (propietario/titulardel bien o derecho) \u00f3 el beneficiario (adquirente o receptor del bien o derecho) no act\u00faa por su cuenta y que intentaocultar la identidad del ordenante o beneficiarioreal.;4. El cliente presenta una inusual despreocupaci\u00f3n por los riesgos que asume o los importes involucrados en el despacho aduanero de mercanciaso los costosque implicala operaci\u00f3n.;5. El cliente realiza operaciones de forma sucesiva y/o reiterada.;6. El cliente realiza constantementeoperaciones y de modo inusual usa o pretende utilizardinero en efectivocomo \u00fanico medio de pago.;7. El cliente se rehusa a llenar los formularios o proporcionar la informaci\u00f3nrequerida por el sujeto obligado, o se niega a realizar la operaci\u00f3n tan pronto se le solicita.;8. Las operaciones realizadas por el clienteno corresponden a su actividad econ\u00f3mica.;9. El cliente est\u00e1 siendo investigado o procesado por el delito de lavado de activos, delitosprecedentes, el delito de financiamientodel terrorismo y sus delitosconexos, y se toma conocimientode ello por los medios de difusi\u00f3np\u00fablica u otros medios.;10. Clientes entre los cuales no hay ninguna relaci\u00f3n de parentesco, financiera o comercial, sean personas naturales o jur\u00eddicas, sin embargo son representados por una mismapersona. Se debe prestar especial atenci\u00f3n cuando dichos clientes tengan fijado sus domiciliosen el extranjero o en para\u00edsos fiscales.;11. El cliente realiza frecuentementeoperaciones por sumas de dinero que no guardan relaci\u00f3n con la ocupaci\u00f3n que declara tener.;12. Solicitud del cliente de realizar despachos aduaneros de mercancias en condiciones o valores que no guardan relaci\u00f3n con las actividades del due\u00f1o o consignatario,o en las condicioneshabitualesdel mercado.;13. Solicitud del clientede dividir los pagos por la prestaci\u00f3n del servicio, generalmente,en efectivo.;14. Personas naturales o jur\u00eddicas, incluyendo sus accionistas,socios, asociados, socios fundadores, gerentes y directores, que figuren en alguna listainternacionalde las Naciones Unidas, OFAC o similar.;15. El cliente presenta una inusual despreocupaci\u00f3n por la presentaci\u00f3n o estado de su mercanc\u00eda o carga y/o de las comisiones y costos que implicala operaci\u00f3n.;16. El cliente solicita ser excluido del registro de operaciones.;17. El cliente asume el pago de comisiones, impuestos y cualquier otro costo o tributo generado no s\u00f3lo por la realizaci\u00f3n de sus operaciones, sino la de terceros o a las de otras operaciones aparentemente no relacionadas.;18. El cliente realiza frecuentes o significativas operaciones y declara no realizar o no haber realizado actividad econ\u00f3micaalguna.".split(";"); return b}(a.T)}();w=b.S;return b=function(a){function b(){b.b.apply(this,arguments)}var c,f=n((m(b,a).c="gz",b),a).prototype;b.o="Despachos";b.p="Rb-Yc-Rc";f.events=(c={},c["click #Ir-Jr"]=function(a){(new k(this.L.get(a.currentTarget.dataset.id))).show()},c);f.ra=function(a){return"<div class='Rn-Fo Va-K'><div class='Rn-R'><button id='Ir-Jr'class='O-Rn'data-id='"+a.id+"'data-tip-text='Se\u00f1ales de alerta'data-tip-color='E'><span class='Rb-Ld-Rc'></span></button><button class='O-Rn'data-tip-text='Editar'data-tip-color='E'><span class='Rb-Ye'></span></button></div><div class='Rn-R'><button class='O-Rn'data-tip-text='Normal'data-tip-color='F'><span class='Rb-Zc-Lf'></span></button><button class='O-Rn'data-tip-text='Inusual'data-tip-color='D'><span class='Rb-Qb-Lf'></span></button><button class='O-Rn'data-tip-text='Sospechosa'data-tip-color='G'><span class='Rb-Vf-Lf'></span></button></div></div>"}; f.ca=function(a){return y.apply(_,[_.reduce,[void 0,G(function(a,b){return a+b}),0],[0]])(y.apply(_,[_.map,[void 0,function(a){return a!=u}],[0]])(a)).toString()};f.initialize=function(){this.render()};f.render=function(){var b=this;this.el.innerHTML="<h3>Lista de despachos</h3>";this.da();this.L=new w;this.L.fetch({success:function(a,c){var f,q,k;f=0;for(q=c.length;f<q;++f)k=c[f],b.H(["<b>"+k.orderNumber+"</b>",k.customer.name,b.ca(k.alerts),b.ra(k)]);b.oa();$("[data-tip-text]").each(function(a, b){return new h.j.k.G(b)})}});return a.prototype.render.call(this)};return b}(c.u)}()];return c=function(c){function a(){a.b.apply(this,arguments)}c=n((m(a,c).c="gz",a),c).prototype;c.tagName="nav";c.events={"click a":function(a){this.trigger("Hr-Pj",a.currentTarget.la);a=a.currentTarget.parentElement;this.Q!=u&&this.Q.classList.remove("Dn");this.Q=a;a.classList.add("Dn")}};c.initialize=function(){var a,c,f,n,m;this.el.className="O-Xm";this.D=h.d("ul");this.D.className="Ym Ua A In Jn";a=0;for(c=b.length;a< c;++a)f=b[a],n=h.d("li"),m=h.d("a"),m.href="javascript:void(0)",m.innerHTML="<i class='"+f.p+"'></i>&nbsp;&nbsp;"+f.o,m.la=f,n.appendChild(m),this.D.appendChild(n);this.el.appendChild(this.D)};return a}(h.f)}();C=window.e.Ma=function(){var c;c={};return c=function(b){function c(a,b){this.t=b;a.bind("Hr-Pj",this.ba,this);c.b.call(this)}b=n((m(c,b).c="gz",c),b).prototype;b.tagName="div";b.className="W-Sa Cb-Sa Db-Sa";b.ba=function(a,b){var c;b==u&&(b={});this.t.ea();c=new a(b,this);this.el.innerHTML= "";this.el.appendChild(c.el);if(c.q!=u)this.t.on("Pc",c.q)};b.initialize=function(){this.el.style.paddingTop="1em";this.el.style.paddingLeft="0.3em"};b.bb=u;return c}(h.f)}();x=function(c){function b(){b.b.apply(this,arguments)}c=n((m(b,c).c="gz",b),c).prototype;c.el=$("body");c.initialize=function(){var b,a,c,k;this.el.innerHTML=E;b=this.el.lastElementChild.firstElementChild;b.innerHTML="";a=h.d("div");a.className="W-Na Cb-Sa Db-Sa";c=h.d("div");c.className="W-Sa Cb-Sa Db-Sa";k=new B;c.appendChild(k.el); a.appendChild(c);b.appendChild(a);a=h.d("div");a.style.verticalAlign="middle";a.className="W-Z Cb-Sa Db-Sa";a.innerHTML=D;c=new A.V({el:$(a).find("input").get(0)});k=new C(k,c);a.appendChild(k.el);b.appendChild(a)};return b}(h.f);D="<div class='W-Sa Cb-Sa Db-Sa'><div class='W-Ba Cb-Ba Db-Sa'><nav class='O-Xm'><ul class='Cn Hn D In Jn'><li><a href='#'><i class='Rb-Kd'></i>&nbsp;&nbsp;Start</a></li><li><a href='#'>Level 1</a></li><li><a href='#'>Level 2</a></li><li class='Dn'><a href='javascript:void(0)'>Current item</a></li></ul></nav></div><div class='W-La Cb-La Db-Sa'><form style='margin: 0.29em 0.4em 0;'class='O-On Ab-Xa'onsubmit='return false'><div class='An-R' style='margin-bottom:0'><div class='An Sn-Tn'><span><input type='text' placeholder='Buscar...' style='font-size:16px'><i class='Rb-Pc'></i></span></div></div></form></div></div>"; E="<div class='Pq'><nav class='O-Xm'><ul class='Ym V Jn C'><li class='Dn'><a href='javascript:void(0);'><i class='Rb-Kd'></i></a></li></ul></nav><div class='Ac'></div></div><div class='Oq'><h1>&nbsp;</h1><p></p></div><div class='O-P'><div class='Q-R T-S'></div></div>";new x;$($("ul.white").children().next().get(0)).children().first().click();(x=$.Event("keyup")).keyCode=13;$("input").val("123").trigger(x)}).call(this);}).call(this);